<HTML
><HEAD
><TITLE
>preg_match_all</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.41"><LINK
REL="HOME"
TITLE="PHP3 Manual"
HREF="manual.html"><LINK
REL="UP"
TITLE="Perl-compatible Regular Expression functions"
HREF="ref.pcre.html"><LINK
REL="PREVIOUS"
TITLE="preg_match"
HREF="function.preg-match.html"><LINK
REL="NEXT"
TITLE="preg_replace"
HREF="function.preg-replace.html"></HEAD
><BODY
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>PHP3 Manual</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="function.preg-match.html"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="function.preg-replace.html"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><H1
><A
NAME="FUNCTION.PREG-MATCH-ALL"
>preg_match_all</A
></H1
><DIV
CLASS="REFNAMEDIV"
><A
NAME="AEN17736"
></A
>preg_match_all -- Perform a global regular expression match</DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN17739"
></A
><H2
>Description</H2
><DIV
CLASS="FUNCSYNOPSIS"
><P
></P
><CODE
CLASS="FUNCDEF"
>int preg_match_all</CODE
>(string pattern, string subject, array matches, int [<SPAN
CLASS="OPTIONAL"
>order</SPAN
>]);<P
></P
></DIV
><P
>     Searches <TT
CLASS="PARAMETER"
><I
>subject</I
></TT
> for all matches to the regular
     expression given in <TT
CLASS="PARAMETER"
><I
>pattern</I
></TT
> and puts them in
     <TT
CLASS="PARAMETER"
><I
>matches</I
></TT
> in the order specified by
     <TT
CLASS="PARAMETER"
><I
>order</I
></TT
>.

    </P
><P
>     After the first match is found, the subsequent searches  are continued
     on from end of the last match.

    </P
><P
>     <TT
CLASS="PARAMETER"
><I
>order</I
></TT
> can be one of two things:
     <P
></P
><DL
><DT
>PREG_PATTERN_ORDER</DT
><DD
><P
>	 Orders results so that $matches[0] is an array of full
	 pattern matches, $matches[1] is an array of strings matched by
	 the first parenthesized subpattern, and so on.

	 <DIV
CLASS="INFORMALEXAMPLE"
><P
></P
><PRE
CLASS="PROGRAMLISTING"
>preg_match_all("|&lt;[^&#62;]+&#62;(.*)&lt;/[^&#62;]+&#62;|U", "&lt;b&#62;example: &lt;/b&#62;&lt;div align=left&#62;a test&lt;/div&#62;", $out, PREG_PATTERN_ORDER);
print $out[0][0].", ".$out[0][1]."\n";
print $out[1][0].", ".$out[1][1]."\n"
	  </PRE
><P
></P
></DIV
>

	 This example will produce:
	 <DIV
CLASS="INFORMALEXAMPLE"
><P
></P
><PRE
CLASS="PROGRAMLISTING"
>&lt;b&#62;example: &lt;/b&#62;, &lt;div align=left&#62;this is a test&lt;/div&#62;
example: , this is a test
	  </PRE
><P
></P
></DIV
>

	 So, $out[0] contains array of strings that matched full pattern,
	 and $out[1] contains array of strings enclosed by tags.
       </P
></DD
><DT
>PREG_SET_ORDER</DT
><DD
><P
>	 Orders results so that $matches[0] is an array of first set
	 of matches, $matches[1] is an array of second set of matches,
	 and so on.

	 <DIV
CLASS="INFORMALEXAMPLE"
><P
></P
><PRE
CLASS="PROGRAMLISTING"
>preg_match_all("|&lt;[^&#62;]+&#62;(.*)&lt;/[^&#62;]+&#62;|U", "&lt;b&#62;example: &lt;/b&#62;&lt;div align=left&#62;a test&lt;/div&#62;", $out, PREG_SET_ORDER);
print $out[0][0].", ".$out[0][1]."\n";
print $out[1][0].", ".$out[1][1]."\n"
	  </PRE
><P
></P
></DIV
>

	 This example will produce:
	 <DIV
CLASS="INFORMALEXAMPLE"
><P
></P
><PRE
CLASS="PROGRAMLISTING"
>&lt;b&#62;example: &lt;/b&#62;, example: 
&lt;div align=left&#62;this is a test&lt;/div&#62;, this is a test
	  </PRE
><P
></P
></DIV
>

	 In this case, $matches[0] is the first set of matches, and
	 $matches[0][0] has text matched by full pattern, $matches[0][1]
	 has text matched by first subpattern and so on.  Similarly,
	 $matches[1] is the second set of matches, etc.
       </P
></DD
></DL
>

    </P
><P
>     If <TT
CLASS="PARAMETER"
><I
>order</I
></TT
> is not specified, it is assumed
     to be PREG_PATTERN_ORDER.

    </P
><P
>     Returns the number of full pattern matches, or false if
     no match is found or an error occurred.

    </P
><P
>     <TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
CLASS="EXAMPLE"
><TR
><TD
><DIV
CLASS="EXAMPLE"
><P
><B
>Example 1. Getting all phone numbers out of some text.</B
></P
><PRE
CLASS="PROGRAMLISTING"
>preg_match_all("/\(?  (\d{3})?  \)?  (?(1)  [\-\s] ) \d{3}-\d{4}/x",
               "Call 555-1212 or 1-800-555-1212", $phones);
      </PRE
></DIV
></TD
></TR
></TABLE
>

    </P
><P
>     See also <A
HREF="function.preg-match.html"
><B
CLASS="FUNCTION"
>preg_match()</B
></A
>,
     <A
HREF="function.preg-replace.html"
><B
CLASS="FUNCTION"
>preg_replace()</B
></A
>,
     and <A
HREF="function.preg-split.html"
><B
CLASS="FUNCTION"
>preg_split()</B
></A
>.
   </P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="function.preg-match.html"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="manual.html"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="function.preg-replace.html"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>preg_match</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="ref.pcre.html"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>preg_replace</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>
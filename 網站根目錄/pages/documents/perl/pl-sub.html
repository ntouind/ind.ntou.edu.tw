<title>PERL -- Subroutines</title>
<H3>Subroutines</H3>
A subroutine may be declared as follows:
<pre>
    sub NAME BLOCK
</pre>
<P>
Any arguments passed to the routine come in as array @_,
that is ($_[0], $_[1], ...).
The array @_ is a local array, but its values are references to the
actual scalar parameters.
The return value of the subroutine is the value of the last expression
evaluated, and can be either an array value or a scalar value.
Alternately, a <A HREF=pl-exp-flow.html#return>return</A> statement may be used to specify the returned value and
exit the subroutine.
To create local variables see the
<I>local</I>
operator.
<P>
A subroutine is called using the
<I>do</I>
operator or the &amp; operator.
<pre>
Example:

	sub MAX {
		<A HREF=pl-exp-misc.html#local>local</A>($max) = <A HREF=pl-exp-arr.html#pop>pop</A>(@_);
		<A HREF=pl-compound.html#foreach>foreach</A> $foo (@_) {
			$max = $foo <A HREF=pl-compound.html#if>if</A> $max &lt; $foo;
		}
		$max;
	}

	...
	$bestday = &amp;MAX($mon,$tue,$wed,$thu,$fri);

Example:

	# get a line, combining continuation lines
	#  that start with whitespace
	sub get_line {
		$thisline = $lookahead;
		line: <A HREF=pl-compound.html#while>while</A> ($lookahead = &lt;STDIN&gt;) {
			<A HREF=pl-compound.html#if>if</A> ($lookahead <A HREF=pl-exp-op.html#=~>=~</A> /^[ \^\t]/) {
				$thisline .= $lookahead;
			}
			else {
				<A HREF=pl-exp-flow.html#last>last</A> line;
			}
		}
		$thisline;
	}

	$lookahead = &lt;STDIN&gt;;	# get first line
	<A HREF=pl-compound.html#while>while</A> (<A HREF=pl-predef.html#$_>$_</A> = <A HREF=pl-exp-flow.html#do>do</A> get_line()) {
		...
	}
</pre>
Use array assignment to a local list to name your formal arguments:
<pre>
	sub maybeset {
		<A HREF=pl-exp-misc.html#local>local</A>($key, $value) = @_;
		$foo{$key} = $value unless $foo{$key};
	}
</pre>
This also has the effect of turning call-by-reference into call-by-value,
since the assignment copies the values.
<p>
Subroutines may be called recursively.
If a subroutine is called using the &amp; form, the argument list is optional.
If omitted, no @_ array is set up for the subroutine; the @_ array at the
time of the call is visible to subroutine instead.
<pre>
	<A HREF=pl-exp-flow.html#do>do</A> foo(1,2,3);		# pass three arguments
	&amp;foo(1,2,3);		# the same

	<A HREF=pl-exp-flow.html#do>do</A> foo();		# pass a null list
	&amp;foo();			# the same
	&amp;foo;			# pass no arguments--more efficient
</pre>

  <HTML>
  <HEAD>
  <!-- This HTML file has been created by texi2html 1.52 (hacked by david@detron.se)
     from manual.texi on 8 July 1999 -->

  <TITLE>MySQL Reference Manual for version 3.23.1-alpha.</TITLE>
  </HEAD>
  <BODY BGCOLOR=#FFFFFF TEXT=#000000 LINK=#101090 VLINK=#7030B0>
<H1><STRONG>MySQL</STRONG> Reference Manual for version 3.23.1-alpha.</H1>
<P>
<P><HR><P>
<IMG SRC="Img/mysql5.gif">


<H1><A NAME="Introduction" HREF="manual_toc.html#Introduction">1  General Information about <STRONG>MySQL</STRONG></A></H1>

<P>
This is the <STRONG>MySQL</STRONG> reference manual; it documents <STRONG>MySQL</STRONG>
version 3.23.1-alpha.

</P>

<P>
<STRONG>MySQL</STRONG> is a very fast, multi-threaded, multi-user and robust SQL
(Structured Query Language) database server.

</P>
<P>
For Unix and OS/2 platforms, <STRONG>MySQL</STRONG> is basically free; for Microsoft
platforms you must get a <STRONG>MySQL</STRONG> license after a trial time of 30
days. See section <A HREF="manual.html#Licensing_and_Support">3  <STRONG>MySQL</STRONG> licensing and support</A>.

</P>
<P>
<a HREF="http://www.mysql.com/"> The <STRONG>MySQL</STRONG> home page</a>
provides the latest information about <STRONG>MySQL</STRONG>.

</P>
<P>
For a discussion of <STRONG>MySQL</STRONG>'s capabilities, see section <A HREF="manual.html#Features">1.4  The main features of <STRONG>MySQL</STRONG></A>.

</P>
<P>
For installation instructions, see section <A HREF="manual.html#Installing">4  Installing <STRONG>MySQL</STRONG></A>. For tips on porting
<STRONG>MySQL</STRONG> to new machines or operating systems, see section <A HREF="manual.html#Porting">G  Comments on porting to other systems</A>.

</P>
<P>
For information about upgrading from a 3.21 release, see
section <A HREF="manual.html#Upgrading-from-3.21">4.16.2  Upgrading from a 3.21 version to 3.22</A>.

</P>
<P>
For a tutorial introduction to MySQL, see
section <A HREF="manual.html#Tutorial">8  <STRONG>MySQL</STRONG> Tutorial</A>.

</P>
<P>
For examples of SQL and benchmarking information, see the benchmarking
directory.  For source distributions, this is the <TT>`bench'</TT>
directory.  For binary distributions, this is the <TT>`sql-bench'</TT>
directory.

</P>
<P>
For a history of new features and bug fixes, see section <A HREF="manual.html#News">D  <STRONG>MySQL</STRONG> change history</A>.

</P>
<P>
For a list of currently known bugs and misfeatures, see section <A HREF="manual.html#Bugs">E  Known errors and design deficiencies in <STRONG>MySQL</STRONG></A>.

</P>
<P>
For future plans, see section <A HREF="manual.html#TODO">F  List of things we want to add to <STRONG>MySQL</STRONG> in the future (The TODO)</A>.

</P>
<P>
For a list of all the contributors to this product, see section <A HREF="manual.html#Credits">C  Contributors to <STRONG>MySQL</STRONG></A>.

</P>
<P>
<STRONG>IMPORTANT:</STRONG>

</P>
<P>
Send bug (error) reports, questions and comments to the mailing list at

</P>
<P>
For source distributions, the <CODE>mysqlbug</CODE> script can be found in the
<TT>`scripts'</TT> directory.  For binary distributions, <CODE>mysqlbug</CODE> can be
found in the <TT>`bin'</TT> directory.

</P>
<P>
If you have any suggestions concerning additions or corrections to this
manual, please send them to the <STRONG>MySQL</STRONG> mailing list
(<a HREF="mailto:mysql@lists.mysql.com">mysql@lists.mysql.com</a>) with the following subject line:
<CODE>documentation suggestion: [Insert Topic Here]</CODE>.
See section <A HREF="manual.html#Mailing-list">2.1  The <STRONG>MySQL</STRONG> mailing lists</A>.

</P>
<P>
<A NAME="IDX1"></A>


<H2><A NAME="What-is" HREF="manual_toc.html#What-is">1.1  What is <STRONG>MySQL</STRONG>?</A></H2>

<P>
<STRONG>MySQL</STRONG> is a true multi-user, multi-threaded SQL database server. SQL
is the most popular database language in the world. <STRONG>MySQL</STRONG> is a
client/server implementation that consists of a server daemon <CODE>mysqld</CODE>
and many different client programs and libraries.

</P>
<P>
SQL is a standardized language that makes it easy to store,
update and access information. For example, you can use SQL to retrieve
product information and store customer information for a web site.
<STRONG>MySQL</STRONG> is also fast and flexible enough to allow you to store
logs and pictures in it.

</P>
<P>
The main goals of <STRONG>MySQL</STRONG> are speed, robustness and ease of use.
<STRONG>MySQL</STRONG> was originally developed because we at TcX needed a SQL server
that could handle very large databases an order of magnitude faster than what
any database vendor could offer to us. We have now been using <STRONG>MySQL</STRONG>
since 1996 in an environment with more than 40 databases containing 10,000
tables, of which more than 500 have more than 7 million rows. This is about
100 gigabytes of mission-critical data.

</P>
<P>
The base upon which <STRONG>MySQL</STRONG> is built is a set of routines that have
been used in a highly demanding production environment for many years.
Although <STRONG>MySQL</STRONG> is still under development, it already offers a rich
and highly useful function set.

</P>
<P>
<A NAME="IDX2"></A>
<A NAME="IDX3"></A>
The official way to pronounce <STRONG>MySQL</STRONG> is "My Ess Que Ell" (Not
MY-SEQUEL).

</P>
<P>
<A NAME="IDX4"></A>


<H2><A NAME="Manual-info" HREF="manual_toc.html#Manual-info">1.2  About this manual</A></H2>

<P>
This manual is currently available in Texinfo, plain text, Info, HTML,
PostScript and PDF versions.  Because of their size, PostScript and PDF
versions are not included with the main <STRONG>MySQL</STRONG> distribution, but
are available for separate download at
<a HREF="http://www.mysql.com">http://www.mysql.com</a>.

</P>
<P>
The primary document is the Texinfo file. The HTML version is produced
automatically with a modified version of <CODE>texi2html</CODE>. The plain text and
Info versions are produced with <CODE>makeinfo</CODE>. The Postscript version is
produced using <CODE>texi2dvi</CODE> and <CODE>dvips</CODE>.  The PDF version is produced
with the Ghostscript utility <CODE>ps2pdf</CODE>.

</P>
<P>
This manual is written and maintained by David Axmark, Michael (Monty)
Widenius, Paul DuBois and Kim Aldale. For other contributors, see
section <A HREF="manual.html#Credits">C  Contributors to <STRONG>MySQL</STRONG></A>.

</P>


<H3><A NAME="Manual_conventions" HREF="manual_toc.html#Manual_conventions">1.2.1  Conventions used in this manual</A></H3>

<P>
This manual uses certain typographical conventions:

</P>
<DL COMPACT>

<DT><CODE>constant</CODE>
<DD>
Constant-width font is used for command names and options; SQL statements;
database, table and column names; C and Perl code; and environment variables.
Example: "To see how <CODE>mysqladmin</CODE> works, invoke it with the
<CODE>--help</CODE> option."

<DT><TT>`filename'</TT>
<DD>
Constant-width font with surrounding quotes is used for filenames and
pathnames.  Example: "The distribution is installed under the
<TT>`/usr/local/'</TT> directory."

<DT><SAMP>`c'</SAMP>
<DD>
Constant-width font with surrounding quotes is also used to indicate
character sequences.  Example: "To specify a wildcard, use the <SAMP>`%'</SAMP>
character."

<DT><EM>italic</EM>
<DD>
Italic font is used for emphasis, <EM>like this</EM>.

<DT><STRONG>boldface</STRONG>
<DD>
Boldface font is used for access privilege names (e.g., "do not grant the
<STRONG>process</STRONG> privilege lightly") and to convey <STRONG>especially strong
emphasis</STRONG>.
</DL>

<P>
When commands are shown that are meant to be executed by a particular
program, the program is indicated by the prompt shown with the command.  For
example, <CODE>shell&#62;</CODE> indicates a command that you execute from your login
shell, and <CODE>mysql&#62;</CODE> indicates a command that you execute from the
<CODE>mysql</CODE> client:

</P>

<PRE>
shell&#62; type a shell command here
mysql&#62; type a mysql command here
</PRE>

<P>
Shell commands are shown using Bourne shell syntax.  If you are using a
<CODE>csh</CODE>-style shell, you may need to issue commands slightly differently.
For example, the sequence to set an environment variable and run a command
looks like this in Bourne shell syntax:

</P>

<PRE>
shell&#62; VARNAME=value some_command
</PRE>

<P>
For <CODE>csh</CODE>, you would execute the sequence like this:

</P>

<PRE>
shell&#62; setenv VARNAME value
shell&#62; some_command
</PRE>

<P>
Database, table and column names often must be substituted into commands.  To
indicate that such substitution is necessary, this manual uses
<CODE>db_name</CODE>, <CODE>tbl_name</CODE> and <CODE>col_name</CODE>.  For example, you might
see a statement like this:

</P>

<PRE>
mysql&#62; SELECT col_name FROM db_name.tbl_name;
</PRE>

<P>
This means that if you were to enter a similar statement, you would supply
your own database, table and column names, perhaps like this:

</P>

<PRE>
mysql&#62; SELECT author_name FROM biblio_db.author_list;
</PRE>

<P>
SQL statements may be written in uppercase or lowercase.  When this manual
shows a SQL statement, uppercase is used for particular keywords if those
keywords are under discussion (to emphasize them) and lowercase is used for
the rest of the statement.  So you might see the following in a discussion of
the <CODE>SELECT</CODE> statement:

</P>

<PRE>
mysql&#62; SELECT count(*) FROM tbl_name;
</PRE>

<P>
On the other hand, in a discussion of the <CODE>COUNT()</CODE> function, the
statement would be written like this:

</P>

<PRE>
mysql&#62; select COUNT(*) from tbl_name;
</PRE>

<P>
If no particular emphasis is intended, all keywords are written uniformly
in uppercase.

</P>
<P>
In syntax descriptions, square brackets (<SAMP>`['</SAMP> and <SAMP>`]'</SAMP>) are used
to indicate optional words or clauses:

</P>

<PRE>
DROP TABLE [IF EXISTS] tbl_name
</PRE>

<P>
When a syntax element consists of a number of alternatives, the alternatives
are separated by vertical bars (<SAMP>`|'</SAMP>).  When one member from a set of
choices may be chosen, the alternatives are listed within square brackets.
When one member from a set of choices must be chosen, the alternatives are
listed within braces (<SAMP>`{'</SAMP> and <SAMP>`}'</SAMP>):

</P>

<PRE>
TRIM([[BOTH | LEADING | TRAILING] [remstr] FROM] str)
{DESCRIBE | DESC} tbl_name {col_name | wild}
</PRE>

<P>
<A NAME="IDX5"></A>


<H2><A NAME="History" HREF="manual_toc.html#History">1.3  History of <STRONG>MySQL</STRONG></A></H2>

<P>
We once started off with the intention of using <CODE>mSQL</CODE> to connect to our
tables using our own fast low-level (ISAM) routines. However, after some
testing we came to the conclusion that <CODE>mSQL</CODE> was not fast enough or
flexible enough for our needs. This resulted in a new SQL interface to our
database but with almost the same API interface as <CODE>mSQL</CODE>. This API was
chosen to ease porting of third-party code.

</P>
<P>
The derivation of the name <STRONG>MySQL</STRONG> is not perfectly clear.  Our base
directory and a large number of our libraries and tools have had the prefix
"my" for well over 10 years. However, Monty's daughter (some years younger)
is also named My. So which of the two gave its name to <STRONG>MySQL</STRONG> is
still a mystery, even for us.

</P>


<H2><A NAME="Features" HREF="manual_toc.html#Features">1.4  The main features of <STRONG>MySQL</STRONG></A></H2>

<P>
The following list describes some of the important characteristics
of <STRONG>MySQL</STRONG>:

</P>

<UL>
<LI>

Fully multi-threaded using kernel threads. That means it easily can
use multiple CPUs if available.

<LI>

C, C++, Eiffel, Java, Perl, PHP, Python and TCL APIs. See section <A HREF="manual.html#Clients">19  <STRONG>MySQL</STRONG> client tools and APIs</A>.

<LI>

Works on many different platforms. See section <A HREF="manual.html#Which_OS">4.2  Operating systems supported by <STRONG>MySQL</STRONG></A>.

<LI>

Many column types: signed/unsigned integers 1, 2, 3, 4 and 8 bytes
long, <CODE>FLOAT</CODE>, <CODE>DOUBLE</CODE>, <CODE>CHAR</CODE>, <CODE>VARCHAR</CODE>,
<CODE>TEXT</CODE>, <CODE>BLOB</CODE>, <CODE>DATE</CODE>, <CODE>TIME</CODE>, <CODE>DATETIME</CODE>,
<CODE>TIMESTAMP</CODE>, <CODE>YEAR</CODE>, <CODE>SET</CODE> and <CODE>ENUM</CODE> types. See section <A HREF="manual.html#Column_types">7.2  Column types</A>.

<LI>

Very fast joins using an optimized one-sweep multi-join.

<LI>

Full operator and function support in the <CODE>SELECT</CODE> and <CODE>WHERE</CODE>
parts of queries. Example:

<PRE>
mysql&#62; SELECT CONCAT(first_name, " ", last_name) FROM tbl_name
           WHERE income/dependents &#62; 10000 AND age &#62; 30;
</PRE>

<LI>

SQL functions are implemented through a highly-optimized class library and
should be as fast as they can get! Usually there shouldn't be any memory
allocation at all after query initialization.

<LI>

Full support for SQL <CODE>GROUP BY</CODE> and <CODE>ORDER BY</CODE> clauses. Support for
group functions (<CODE>COUNT()</CODE>, <CODE>AVG()</CODE>, <CODE>STD()</CODE>, <CODE>SUM()</CODE>,
<CODE>MAX()</CODE> and <CODE>MIN()</CODE>).

<LI>

Support for <CODE>LEFT OUTER JOIN</CODE> with ANSI SQL and ODBC syntax.

<LI>

You can mix tables from different databases in the same query (as of
version 3.22).

<LI>

A privilege and password system which is very flexible and secure, and
which allows host-based verification.  Passwords are secure since all
password traffic when connecting to a server is encrypted.

<LI>

ODBC (Open-DataBase-Connectivity) for Windows95 (with source). All ODBC
2.5 functions and many others.  You can, for example, use Access to
connect to your <STRONG>MySQL</STRONG> server. See section <A HREF="manual.html#ODBC">16  <STRONG>MySQL</STRONG> ODBC Support</A>.

<LI>

Very fast B-tree disk tables with index compression.

<LI>

16 indexes per table are allowed. Each index may consist of 1 to 15 columns
or parts of columns. The maximum index length is 256 bytes (this may be
changed when compiling <STRONG>MySQL</STRONG>). An index may use a prefix of a
<CODE>CHAR</CODE> or <CODE>VARCHAR</CODE> field.

<LI>

Fixed-length and variable-length records.

<LI>

In-memory hash tables which are used as temporary tables.

<LI>

Handles large databases.  We are using <STRONG>MySQL</STRONG> with some
databases that contain 50,000,000 records.

<LI>

All columns have default values.  You can use <CODE>INSERT</CODE> to insert a
subset of a table's columns; those columns that are not explicitly given
values are set to their default values.

<LI>

Uses GNU Automake, Autoconf, and <CODE>libtool</CODE> for portability.

<LI>

Written in C and C++. Tested with a broad range of different compilers.

<LI>

A very fast thread-based memory allocation system.

<LI>

No memory leaks. Tested with a commercial memory leakage detector
(<CODE>purify</CODE>).

<LI>

Includes <CODE>isamchk</CODE>, a very fast utility for table checking, optimization
and repair.
See section <A HREF="manual.html#Maintenance">13  Maintaining a <STRONG>MySQL</STRONG> installation</A>.

<LI>

Full support for the ISO-8859-1 Latin1 character set. For example, the
Scandinavian characters @ringaccent{a}, @"a and @"o are allowed in table and
column names.

<LI>

All data are saved in ISO-8859-1 Latin1 format. All comparisons for normal
string columns are case insensitive.

<LI>

Sorting is done according to the ISO-8859-1 Latin1 character set (the Swedish
way at the moment). It is possible to change this in the source by adding new
sort order arrays. To see an example of very advanced sorting, look at the
Czech sorting code. <STRONG>MySQL</STRONG> supports many different character sets
that can be specified at compile time.

<LI>

Aliases on tables and columns as in the SQL92 standard.

<LI>

<CODE>DELETE</CODE>, <CODE>INSERT</CODE>, <CODE>REPLACE</CODE>, and <CODE>UPDATE</CODE> return
how many rows were changed (affected).

<LI>

Function names do not clash with table or column names. For example, <CODE>ABS</CODE>
is a valid column name. The only restriction is that for a function call, no
spaces are allowed between the function name and the <SAMP>`('</SAMP> that follows it.
See section <A HREF="manual.html#Reserved_words">7.30  Is <STRONG>MySQL</STRONG> picky about reserved words?</A>.

<LI>

All <STRONG>MySQL</STRONG> programs can be invoked with the <CODE>--help</CODE> or <CODE>-?</CODE>
options to obtain online assistance.

<LI>

The server can provide error messages to clients in many
languages. See section <A HREF="manual.html#Languages">9.1  What languages are supported by <STRONG>MySQL</STRONG>?</A>.

<LI>

Clients connect to the <STRONG>MySQL</STRONG> server using TCP/IP connections or Unix
sockets, or named pipes under NT.

<LI>

The <STRONG>MySQL</STRONG>-specific <CODE>SHOW</CODE> command can be used to retrieve
information about databases, tables and indexes. The <CODE>EXPLAIN</CODE> command
can be used to determine how the optimizer resolves a query.
</UL>

<P>
<A NAME="IDX6"></A>


<H2><A NAME="Stability" HREF="manual_toc.html#Stability">1.5  How stable is <STRONG>MySQL</STRONG>?</A></H2>

<P>
This section addresses the questions, "how stable is
<STRONG>MySQL</STRONG>?" and, "can I depend on <STRONG>MySQL</STRONG> in this project?"
Here we will try to clarify some issues and to answer some of the more
important questions that seem to concern many people.  This section has been
put together from information gathered from the mailing list (which is very
active in reporting bugs).

</P>
<P>
At TcX, <STRONG>MySQL</STRONG> has worked without any problems in our projects since
mid-1996. When <STRONG>MySQL</STRONG> was released to a wider public, we noticed that
there were some pieces of "untested code" that were quickly found by the
new users who made queries in a manner different than our own.  Each new
release has had fewer portability problems than the previous one (even though
each has had many new features), and we hope that it will be possible to label
one of the next releases "stable".

</P>
<P>
Each release of <STRONG>MySQL</STRONG> has been usable and there have been problems
only when users start to use code from "the gray zones". Naturally, outside
users can't know what the gray zones are; this section attempts to indicate
those that are currently known.  The descriptions deal with the 3.22.x
version of <STRONG>MySQL</STRONG>. All known and reported bugs are fixed in the
latest version, with the exception of the bugs listed in the bugs section,
which are things that are "design"-related.  See section <A HREF="manual.html#Bugs">E  Known errors and design deficiencies in <STRONG>MySQL</STRONG></A>.

</P>
<P>
<STRONG>MySQL</STRONG> is written in multiple layers and different independent
modules.  These modules are listed below with an indication of how
well-tested each of them is:

</P>
<DL COMPACT>

<DT><STRONG>The ISAM table handler -- Stable</STRONG>
<DD>
This manages storage and retrieval of all data. In all <STRONG>MySQL</STRONG>
releases there hasn't been a single (reported) bug in this code. The only
known way to get a corrupted table is to kill the server in the middle of an
update.  Even that is unlikely to destroy any data beyond rescue, because all
data are flushed to disk between each query.  There hasn't been a single bug
report about lost data because of bugs in <STRONG>MySQL</STRONG>, either.

<DT><STRONG>The parser and lexical analyser -- Stable</STRONG>
<DD>
There hasn't been a single reported bug in this system for a long time.

<DT><STRONG>The C client code -- Stable</STRONG>
<DD>
No known problems. In early 3.20 releases, there were some limitations in
the send/receive buffer size. As of 3.21.x, the buffer size is now dynamic up
to a default of 24M.

<DT><STRONG>Standard client programs -- Stable</STRONG>
<DD>
These include <CODE>mysql</CODE>, <CODE>mysqladmin</CODE> and <CODE>mysqlshow</CODE>,
<CODE>mysqldump</CODE>, and <CODE>mysqlimport</CODE>.

<DT><STRONG>Basic SQL -- Stable</STRONG>
<DD>
The basic SQL function system and string classes and dynamic memory
handling. Not a single reported bug in this system.

<DT><STRONG>Query optimizer -- Gamma</STRONG>
<DD>
<DT><STRONG>Range optimizer -- Stable</STRONG>
<DD>
<DT><STRONG>Join optimizer -- Stable</STRONG>
<DD>
<DT><STRONG>Locking -- Gamma</STRONG>
<DD>
This is very system-dependent. On some systems there are big problems
using standard OS locking (<CODE>fcntl()</CODE>).  In these cases, you should run the
<STRONG>MySQL</STRONG> daemon with the <CODE>--skip-locking</CODE> flag.  Problems are known
to occur on some Linux systems and on SunOS when using NFS-mounted file
systems.

<DT><STRONG>Linux threads -- Gamma</STRONG>
<DD>
The only problem found has been with the <CODE>fcntl()</CODE> call, which is fixed
by using the <CODE>--skip-locking</CODE> option to <CODE>mysqld</CODE>. Some people
have reported lockup problems with the 0.5 release.

<DT><STRONG>Solaris 2.5+ pthreads -- Stable</STRONG>
<DD>
We use this for all our production work.

<DT><STRONG>MIT-pthreads (Other systems) -- Gamma</STRONG>
<DD>
There have been no reported bugs since 3.20.15 and no known bugs since
3.20.16. On some systems, there is a "misfeature" where some operations are
quite slow (a 1/20 second sleep is done between each query). Of course,
MIT-pthreads may slow down everything a bit, but index-based <CODE>SELECT</CODE>
statements are usually done in one time frame so there shouldn't be a mutex
locking/thread juggling.

<DT><STRONG>Other thread implementions -- Alpha - Beta</STRONG>
<DD>
The ports to other systems are still very new and may have bugs, possibly
in <STRONG>MySQL</STRONG>, but most often in the thread implementation itself.

<DT><STRONG><CODE>LOAD DATA ...</CODE>, <CODE>INSERT ... SELECT</CODE> -- Stable</STRONG>
<DD>
Some people have thought they have found bugs here, but these usually have
turned out to be misunderstandings. Please check the manual before reporting
problems!

<DT><STRONG><CODE>ALTER TABLE</CODE> -- Gamma</STRONG>
<DD>
Small changes in 3.22.12.

<DT><STRONG>DBD -- Gamma</STRONG>
<DD>
Now maintained by Jochen Wiedmann

<DT><STRONG><CODE>mysqlaccess</CODE> -- Gamma</STRONG>
<DD>
Written and maintained by Yves Carlier

<DT><STRONG><CODE>GRANT</CODE> -- Beta</STRONG>
<DD>
Big changes made in <STRONG>MySQL</STRONG> 3.22.12.

<DT><STRONG><STRONG>MyODBC</STRONG> (uses ODBC SDK 2.5) -- Beta</STRONG>
<DD>
It seems to work well with some programs.
</DL>

<P>
TcX provides email support for paying customers, but the <STRONG>MySQL</STRONG>
mailing list usually provides answers to common questions. Bugs are
usually fixed right away with a patch; for serious bugs, there is almost
always a new release.

</P>
<P>
<A NAME="IDX7"></A>


<H2><A NAME="Year_2000_compliance" HREF="manual_toc.html#Year_2000_compliance">1.6  Year 2000 compliance</A></H2>

<P>
<STRONG>MySQL</STRONG> itself has no problems with Year 2000 (Y2K) compliance:

</P>

<UL>
<LI>

<STRONG>MySQL</STRONG> uses Unix time functions and has no problems with dates
until <CODE>2069</CODE>; all 2-digit years are regarded to be in the range
<CODE>1970</CODE> to <CODE>2069</CODE>, which means that if you store <CODE>01</CODE> in a
<CODE>year</CODE> column, <STRONG>MySQL</STRONG> treats it as <CODE>2001</CODE>.

<LI>

All <STRONG>MySQL</STRONG> date
functions are stored in one file <TT>`sql/time.cc'</TT> and coded very carefully
to be year 2000-safe.

<LI>

In <STRONG>MySQL</STRONG> 3.22 and later versions, the new <CODE>YEAR</CODE> column type
can store years <CODE>0</CODE> and <CODE>1901</CODE> to <CODE>2155</CODE> in 1 byte and display
them using 2 or 4 digits.
</UL>

<P>
You may run into problems with applications that use <STRONG>MySQL</STRONG> in a
way that is not Y2K-safe.  For example, many old applications store
or manipulate years using 2-digit values (which are ambiguous) rather than
4-digit values.  This problem may be compounded by applications that use
values such as <CODE>00</CODE> or <CODE>99</CODE> as "missing" value indicators.

</P>
<P>
Unfortunately, these problems may be difficult to fix, since different
applications may be written by different programmers, each of whom may
use a different set of conventions and date-handling functions.

</P>
<P>
Here is a simple demonstration illustrating that <STRONG>MySQL</STRONG> doesn't have
any problems with dates until the year 2030!

</P>

<PRE>
mysql&#62; DROP TABLE IF EXISTS y2k;
mysql&#62; CREATE TABLE y2k (date date, date_time datetime, time_stamp timestamp);
mysql&#62; INSERT INTO y2k VALUES ("1998-12-31","1998-12-31 23:59:59",19981231235959);
mysql&#62; INSERT INTO y2k VALUES ("1999-01-01","1999-01-01 00:00:00",19990101000000);
mysql&#62; INSERT INTO y2k VALUES ("1999-09-09","1999-09-09 23:59:59",19990909235959);
mysql&#62; INSERT INTO y2k VALUES ("2000-01-01","2000-01-01 00:00:00",20000101000000);
mysql&#62; INSERT INTO y2k VALUES ("2000-02-28","2000-02-28 00:00:00",20000228000000);
mysql&#62; INSERT INTO y2k VALUES ("2000-02-29","2000-02-29 00:00:00",20000229000000);
mysql&#62; INSERT INTO y2k VALUES ("2000-03-01","2000-03-01 00:00:00",20000301000000);
mysql&#62; INSERT INTO y2k VALUES ("2000-12-31","2000-12-31 23:59:59",20001231235959);
mysql&#62; INSERT INTO y2k VALUES ("2001-01-01","2001-01-01 00:00:00",20010101000000);
mysql&#62; INSERT INTO y2k VALUES ("2004-12-31","2004-12-31 23:59:59",20041231235959);
mysql&#62; INSERT INTO y2k VALUES ("2005-01-01","2005-01-01 00:00:00",20050101000000);
mysql&#62; INSERT INTO y2k VALUES ("2030-01-01","2030-01-01 00:00:00",20300101000000);
mysql&#62; INSERT INTO y2k VALUES ("2050-01-01","2050-01-01 00:00:00",20500101000000);
mysql&#62; SELECT * FROM y2k;
+------------+---------------------+----------------+
| date       | date_time           | time_stamp     |
+------------+---------------------+----------------+
| 1998-12-31 | 1998-12-31 23:59:59 | 19981231235959 |
| 1999-01-01 | 1999-01-01 00:00:00 | 19990101000000 |
| 1999-09-09 | 1999-09-09 23:59:59 | 19990909235959 |
| 2000-01-01 | 2000-01-01 00:00:00 | 20000101000000 |
| 2000-02-28 | 2000-02-28 00:00:00 | 20000228000000 |
| 2000-02-29 | 2000-02-29 00:00:00 | 20000229000000 |
| 2000-03-01 | 2000-03-01 00:00:00 | 20000301000000 |
| 2000-12-31 | 2000-12-31 23:59:59 | 20001231235959 |
| 2001-01-01 | 2001-01-01 00:00:00 | 20010101000000 |
| 2004-12-31 | 2004-12-31 23:59:59 | 20041231235959 |
| 2005-01-01 | 2005-01-01 00:00:00 | 20050101000000 |
| 2030-01-01 | 2030-01-01 00:00:00 | 20300101000000 |
| 2050-01-01 | 2050-01-01 00:00:00 | 00000000000000 |
+------------+---------------------+----------------+

13 rows in set (0.00 sec)
mysql&#62; DROP TABLE y2k;
</PRE>

<P>
This shows that the <CODE>DATE</CODE> and <CODE>DATETIME</CODE> types are <STRONG>Date
Data</STRONG> compliant, while the <CODE>TIMESTAMP</CODE> type, that is used to store the
current time, has a range up to only <CODE>2030-01-01</CODE>. <CODE>TIMESTAMP</CODE> has
a range of <CODE>1970</CODE> to <CODE>2030</CODE> on 32-bit machines.

</P>
<P>
Even though <STRONG>MySQL</STRONG> is Y2K-compliant, it is your responsibility to
provide unambiguous input.  See section <A HREF="manual.html#Y2K_issues">7.2.6.1  Y2K issues and date types</A> for <STRONG>MySQL</STRONG>'s rules
for dealing with ambiguous date input data (data containing 2-digit year
values).

</P>


<H2><A NAME="General-SQL" HREF="manual_toc.html#General-SQL">1.7  General SQL information and tutorials</A></H2>

<P>
This book has been recommended by a several people on the <STRONG>MySQL</STRONG>
mailing list:

</P>

<PRE>
Judith S. Bowman, Sandra L. Emerson and Marcy Darnovsky
The Practical SQL Handbook: Using Structured Query Language
Second Edition
Addison-Wesley
ISBN 0-201-62623-3
http://www.awl.com
</PRE>

<P>
This book has also received some recommendations on the mailing list:

</P>

<PRE>
Martin Gruber
Understanding SQL
ISBN 0-89588-644-8
Publisher Sybex 510 523 8233
Alameda, CA USA
</PRE>

<P>
A SQL tutorial is available on the net at
http://www.geocities.com/ResearchTriangle/Node/9672/sqltut.html

</P>
<P>
SQL in 21 Tagen (online book in German language):
http://www.mut.de/leseecke/buecher/sql/inhalt.htm

</P>


<H2><A NAME="Useful_Links" HREF="manual_toc.html#Useful_Links">1.8  Useful <STRONG>MySQL</STRONG>-related links</A></H2>


<H3>1.8.1  Web development tools that support <STRONG>MySQL</STRONG></H3>


<UL>
<LI>

<a HREF="http://www.php.net/"> PHP: A server-side HTML-embedded scripting
language</a>
<LI>

<a HREF="http://www.voicenet.com/~zellert/tjFM"> A JDBC driver for <STRONG>MySQL</STRONG></a>
<LI>

<a HREF="http://www.wernhart.priv.at/php/"> <STRONG>MySQL</STRONG> + PHP demos</a>
<LI>

<a HREF="http://www.dbwww.com/"> ForwardSQL: HTML interface to manipulate <STRONG>MySQL</STRONG> databases</a>
<LI>

<a HREF="http://www.daa.com.au/~james/www-sql/"> WWW-SQL: Display database
information</a>
<LI>

<a HREF="http://www.minivend.com/minivend/"> Minivend: A Web shopping cart</a>
<LI>

<a HREF="http://www.heitml.com/"> HeiTML: A server-side extension of HTML and
a 4GL language at the same time</a>
<LI>

<a HREF="http://www.metahtml.com/"> Metahtml: A Dynamic Programming Language
for WWW Applications</a>
<LI>

<a HREF="http://www.binevolve.com/"> VelocityGen for Perl and TCL</a>
<LI>

<a HREF="http://hawkeye.net/"> Hawkeye Internet Server Suite</a>
<LI>

<a HREF="http://www.fastflow.com/"> Network Database Connection For Linux</a>
<LI>

<a HREF="http://www.wdbi.net/">
WDBI: Web browser as a universal front end to databases which supports
<STRONG>MySQL</STRONG> well.</a>
<LI>

<a HREF="http://www.webgroove.com/"> WebGroove Script: HTML compiler and server-side scripting language</a>
<LI>

<a HREF="http://www.ihtml.com/"> A server-side web site scripting language</a>
<LI>

<a HREF="http://www.pbc.ottawa.on.ca">Visual Basic class generator for Active X</a>
<LI>

<a HREF="ftp://ftp.igc.org/pub/myodbc/README"> How to use <STRONG>MySQL</STRONG> with Coldfusion on Solaris</a>
<LI>

<a HREF="http://calistra.com/MySQL/">Calistra's ODBC <STRONG>MySQL</STRONG> Administrator</a>
<LI>

<a HREF="http://www.webmerger.com"> Webmerger</a>
This CGI tool interprets files and generates dynamic output
based on a set of simple tags. Ready-to-run drivers for <STRONG>MySQL</STRONG> and PostgreSQL
through ODBC.
</UL>


<H3>1.8.2  Web servers with <STRONG>MySQL</STRONG> tools</H3>


<UL>
<LI>

<a HREF="http://bourbon.netvision.net.il/mysql/mod_auth_mysql/"> An Apache
authentication module</a>
<LI>

<a HREF="http://www.roxen.com/"> The Roxen Challenger Web server</a>
</UL>


<H3>1.8.3  Examples and source</H3>


<UL>
<LI>

<a HREF="http://www.little6.com/about/linux/"> Little6 Inc</a> An online contract and job finding site that is powered by <STRONG>MySQL</STRONG>, PHP3 and Linux.
<LI>

<a HREF="http://www.delec.com/is/products/prep/examples/BookShelf/index.html"> DELECis</a> A tool which makes it very easy to create an automatically generated table documentation. They have used <STRONG>MySQL</STRONG> as an example.
<LI>

<a HREF="http://shredder.elen.utah.edu/steve.html"> Steve Fambro</a> Uses <STRONG>MySQL</STRONG> and webmerger. There is an employee database, and a license plate database with all of the
registered Utah vehicles (over 1.2 million). The License plate field is
indexed.....so the *searches* are instantaneous.
<LI>

<a HREF="http://www.worldrecords.com"> World Records</a> A search engine for information about music that uses <STRONG>MySQL</STRONG> and PHP.
<LI>

<a HREF="http://webdev.berber.co.il/"> Examples using <STRONG>MySQL</STRONG>; (check Top 10)</a>
<LI>

<a HREF="http://www.webtechniques.com/features/1998/01/note/note.shtml">
A Contact Database using <STRONG>MySQL</STRONG> and PHP</a>
<LI>

<a HREF="http://modems.rosenet.net/mysql/"> Web based interface and Community Calender with PHP</a>
<LI>

<a HREF="http://www.odbsoft.com/cook/sources.htm"> Perl package to generate html from a SQL table structure and for generating SQL statements from an html form.</a>
<LI>

<a HREF="http://www.gusnet.cx/proj/telsql/">Basic telephone database using <CODE>DBI</CODE>/<CODE>DBD</CODE></a>.
<LI>

<a HREF="http://www.productivity.org/projects/mysql/"> <STRONG>TmySQL</STRONG>; A library to use <STRONG>MySQL</STRONG> with Delphi</a>
<LI>

<a HREF="http://www.iserver.com/support/contrib/perl5/modules.html">Installing new Perl modules that require locally installed modules</a>
<LI>

<a HREF="http://tecfa.unige.ch/guides/java/staf2x/ex/jdbc/coffee-break"> JDBC examples by Daniel K. Schneider</a>
<LI>

<a HREF="http://www.spade.com/linux/howto/PostgreSQL-HOWTO-41.html">SQL BNF</a>
<LI>

<a HREF="http://www.ooc.com/"> Object Oriented Concepts Inc; CORBA applications with examples in source</a>
<LI>

<a HREF="http://www.pbc.ottawa.on.ca/">DBWiz; Includes an example of how to manage own cursors in VB</a>
<LI>

<a HREF="http://keilor.cs.umass.edu/pluribus/"> Pluribus</a>
Pluribus, is a free search engine that learns to improve
the quality of its results over time. Pluribus works by recording
which pages a user prefers among those returned for a query. A user
votes for a page by selecting it; Pluribus then uses that knowledge
to improve the quality of the results when someone else submits the
same (or similar) query. Uses PHP and <STRONG>MySQL</STRONG>.
<LI>

<a HREF="http://www.stopbit.com/"> Stopbit</a>
A technology news site using <STRONG>MySQL</STRONG> and PHP
<LI>

<a HREF="http://www.jokes2000.com/scripts/"> Example scripts at Jokes2000</a>
</UL>


<H3>1.8.4  <STRONG>ODBC</STRONG> related links</H3>


<UL>
<LI>

<a HREF="http://www.openlinksw.com/iodbc/">Popular iODBC Driver Manager now available in Open Source format</a>
<LI>

<a HREF="http://users.ids.net/~bjepson/freeODBC/">The FreeODBC Pages</a>
</UL>


<H3>1.8.5  <STRONG>API</STRONG> related links</H3>


<UL>
<LI>

<a HREF="http://www.jppp.com"> www.jppp.com</a>
Partially implemented TDataset-compatible components for <STRONG>MySQL</STRONG>.
</UL>


<H3>1.8.6  Other <STRONG>MySQL</STRONG>-related links</H3>


<UL>
<LI>

<a HREF="http://www.wix.com/mysql-hosting"> Registry of Web providers who
support <STRONG>MySQL</STRONG></a>
<a HREF="http://www.softagency.co.jp/mysql/index.en.phtml"> Links about using
<STRONG>MySQL</STRONG> in Japan/Asia</a>
<LI>

<a HREF="http://www.open.com.au/products.html"> Commercial Web defect tracking
system</a>
<LI>

<a HREF="http://www.stonekeep.com/pts/"> PTS: Project Tracking System</a>
<LI>

<a HREF="http://tomato.nvgc.vt.edu/~hroberts/mot"> Job and software tracking
system</a>
<LI>

<a HREF="http://www.seawood.org/msql_bind/"> Support for BIND (The Internet
Domain Name Server)</a>
<LI>

<a HREF="http://home.wxs.nl/cgi-bin/planeteers/pgidszoek.cgi"> Full-text search engine using <STRONG>MySQL</STRONG></a>
<LI>

<a HREF="http://www.cynergi.net/non-secure/exportsql/"> ExportSQL: A script
to export data from Access95+</a>
<LI>

<a HREF="http://SAL.KachinaTech.COM/H/1/MYSQL.html"> SAL (Scientific
Applications on Linux) <STRONG>MySQL</STRONG> entry</a>

<LI>

<a HREF="http://www.infotech-nj.com/itech/index.shtml"> A consulting company
which mentions <STRONG>MySQL</STRONG> in the right company</a>
<LI>

<a HREF="http://www.pmpcs.com/"> PMP Computer Solutions. Database developers using
<STRONG>MySQL</STRONG> and <CODE>mSQL</CODE></a>
<LI>

<a HREF="http://www.aewa.org"> Airborne Early Warning Association </a>
<LI>

<a HREF="http://abattoir.cc.ndsu.nodak.edu/~nem/mysql/udf/"> <STRONG>MySQL</STRONG> UDF Registry</a>
</UL>


<H3>1.8.7  SQL and database interfaces</H3>

<UL>
<LI>

<a HREF="http://www.penguinpowered.com/~kmysql"> KMySQL</a>
KMySQL is a database client for KDE that primarily supports <STRONG>MySQL</STRONG>.
<LI>

<a HREF="http://java.sun.com/products/jdbc/"> The JDBC database access API</a>
<LI>

<a HREF="http://tfdec1.fys.kuleuven.ac.be/~michael/fpc-linux/mysql">
<STRONG>MySQL</STRONG> binding to Free Pascal</a>
<LI>

<a HREF="http://www.gagme.com/mysql"> Patch for <CODE>mSQL</CODE> TCL</a>
<LI>

<a HREF="http://www.amsoft.ru/easysql/"> EasySQL: An ODBC-like driver manager</a>
<LI>

<a HREF="http://www.lightlink.com/hessling/rexxsql.html"> A REXX interface to SQL databases</a>
<LI>

<a HREF="http://www.binevolve.com/~tdarugar/tcl-sql"> TCL interface</a>
<LI>

<a HREF="http://tim.desert.net/~tim/imger/">Example of storing/retrieving images with <STRONG>MySQL</STRONG> and CGI</a>
</UL>


<H3>1.8.8  General database links</H3>

<UL>
<LI>

<a HREF="http://www.pcslink.com/~ej/dbweb.html"> Database Jump Site</a>
<LI>

<a HREF="http://black.hole-in-the.net/guy/webdb/"> Homepage of the webdb-l
(Web Databases) mailing list.</a>
<LI>

<a HREF="http://www.symbolstone.org/technology/perl/DBI/index.html">
Perl <CODE>DBI</CODE>/<CODE>DBD</CODE> modules homepage</a>
<LI>

<a HREF="http://www-public.rz.uni-duesseldorf.de/~tolj"> Cygwin tools (MySQL +Apache + PHP under Win32</a>
<LI>

<a HREF="http://dbasecentral.com/"> dbasecentral.com; Development and distribution of powerful and easy-to-use database applications and systems.</a>
<LI>

<a HREF="http://www.Tek-Tips.com"> Tek-Tips Forums</a> Tek-Tips Forums are 800+
independent peer-to-peer non-commercial support forums for Computer
Professionals.  Features include automatic e-mail notification of
responses, a links library, and member confidentiality guaranteed.
</UL>

<P>
There are also many web pages that use
<STRONG>MySQL</STRONG>. See section <A HREF="manual.html#Users">A  Some <STRONG>MySQL</STRONG> users</A>. Send any additions to this list to
<STRONG>MySQL</STRONG> logo somewhere (It is okay to have it on a "used tools" page
or something similar) to be added.

</P>
<P>
<A NAME="IDX8"></A>
<A NAME="IDX9"></A>


<H1><A NAME="Questions" HREF="manual_toc.html#Questions">2  <STRONG>MySQL</STRONG> mailing lists and how to ask questions or report errors (bugs)</A></H1>



<H2><A NAME="Mailing-list" HREF="manual_toc.html#Mailing-list">2.1  The <STRONG>MySQL</STRONG> mailing lists</A></H2>

<P>
To subscribe to the main <STRONG>MySQL</STRONG> mailing list, send a message to the
electronic mail address <a HREF="mailto:mysql-subscribe@lists.mysql.com">mysql-subscribe@lists.mysql.com</a>.

</P>
<P>
To unsubscribe from the main <STRONG>MySQL</STRONG> mailing list, send a message to
the electronic mail address <a HREF="mailto:mysql-unsubscribe@lists.mysql.com">mysql-unsubscribe@lists.mysql.com</a>.

</P>
<P>
Only the address to which you send your messages is significant.  The
subject line and the body of the message are ignored.

</P>
<P>
If your reply address is not valid, you can specify your address explicitly.
Adding a hyphen to the subscribe or unsubscribe command word, followed by
your address with the <SAMP>`@'</SAMP> character in your address replaced by a
<SAMP>`='</SAMP>.  For example, to subscribe <CODE>john@host.domain</CODE>, send a message
to <CODE>mysql-subscribe-john=host.domain@lists.mysql.com</CODE>.

</P>
<P>
Mail to <a HREF="mailto:mysql-subscribe@lists.mysql.com">mysql-subscribe@lists.mysql.com</a> or
ezmlm mailing list processor.  Information about ezmlm is available at
<a HREF="http://www.ezmlm.org">the ezmlm Website</a>.

</P>
<P>
To post a message to the list itself, send your message to
<CODE>mysql@lists.mysql.com</CODE>.  However, please <EM>do not</EM> send mail about
subscribing or unsubscribing to <a HREF="mailto:mysql@lists.mysql.com">mysql@lists.mysql.com</a>, since any
mail sent to that address is distributed automatically to thousands of other
users.

</P>
<P>
Your local site may have many subscribers to <a HREF="mailto:mysql@lists.mysql.com">mysql@lists.mysql.com</a>.
If so, it may have a local mailing list, so that messages sent from
<CODE>lists.mysql.com</CODE> to your site are propagated to the local list. In such
cases, please contact your system administrator to be added to or dropped
from the local <STRONG>MySQL</STRONG> list.

</P>
<P>
The following <STRONG>MySQL</STRONG> mailing lists exist:

</P>
<DL COMPACT>

<DT><CODE>announce</CODE>
<DD>
This is for announcement of new versions of <STRONG>MySQL</STRONG> and related
programs. This is a low volume list that we think all <STRONG>MySQL</STRONG>
users should be on.

<DT><CODE>mysql</CODE>
<DD>
The main list for general <STRONG>MySQL</STRONG> discussion. Please note that some
topics are better discussed on the more-specialized lists. If you post to the
wrong list, you may not get an answer!

<DT><CODE>mysql-digest</CODE>
<DD>
The <CODE>mysql</CODE> list in digest form. That means you get all individual
messages, sent as one large mail message once a day.

<DT><CODE>java</CODE>
<DD>
Discussion about <STRONG>MySQL</STRONG> and Java. Mostly about the JDBC drivers.

<DT><CODE>java-digest</CODE>
<DD>
A digest version of the <CODE>java</CODE> list.

<DT><CODE>win32</CODE>
<DD>
All things concerning <STRONG>MySQL</STRONG> on Microsoft operating systems such as
Windows NT.

<DT><CODE>win32-digest</CODE>
<DD>
A digest version of the <CODE>win32</CODE> list.

<DT><CODE>myodbc</CODE>
<DD>
All things concerning connecting to <STRONG>MySQL</STRONG> with ODBC.

<DT><CODE>myodbc-digest</CODE>
<DD>
A digest version of the <CODE>myodbc</CODE> list.

<DT><CODE>msql-mysql-modules</CODE>
<DD>
A list about the Perl support in <STRONG>MySQL</STRONG>.

<DT><CODE>msql-mysql-modules-digest</CODE>
<DD>
A digest version of the <CODE>msql-mysql-modules</CODE> list.

<DT><CODE>developer</CODE>
<DD>
A list for people who work on the <STRONG>MySQL</STRONG> code.

<DT><CODE>developer-digest</CODE>
<DD>
A digest version of the <CODE>developer</CODE> list.
</DL>

<P>
You subscribe or unsubscribe to all lists in the same way as described
above.  In your subscribe or unsubscribe message, just put the appropriate
mailing list name rather than <CODE>mysql</CODE>.  For example, to subscribe to or
unsubscribe from the <CODE>myodbc</CODE> list, send a message to

</P>
<P>
<A NAME="IDX10"></A>


<H2><A NAME="Asking_questions" HREF="manual_toc.html#Asking_questions">2.2  Asking questions or reporting bugs</A></H2>

<P>
Before posting a bug report or question, please do the following:

</P>

<UL>
<LI>

Start by searching the <STRONG>MySQL</STRONG> online manual at:


<PRE>
<a HREF="http://www.mysql.com/Manual_chapter/manual_toc.html">http://www.mysql.com/Manual_chapter/manual_toc.html</a>
</PRE>

We try to keep the manual up to date by
updating it frequently with solutions to newly found problems!

<LI>

Search the <STRONG>MySQL</STRONG> mailing list archives:


<PRE>
<a HREF="http://www.mysql.com/doc.html">http://www.mysql.com/doc.html</a>
</PRE>

<LI>

You can also use <a HREF="http://www.mysql.com/search.html">http://www.mysql.com/search.html</a> to search all the
web pages (including the manual) that are located at
<a HREF="http://www.mysql.com/">http://www.mysql.com/</a>.
</UL>

<P>
If you can't find an answer in the manual or the archives, check with your
local <STRONG>MySQL</STRONG> expert. If you still can't find an answer to your
question, go ahead and read the next section about how to send mail to

</P>
<P>
<A NAME="IDX11"></A>
<A NAME="IDX12"></A>


<H2><A NAME="Bug_reports" HREF="manual_toc.html#Bug_reports">2.3  How to report bugs or problems</A></H2>

<P>
Writing a good bug report takes patience, but doing it right the first time
saves time for us and for you. This section will help you write your report
correctly so that you don't waste your time doing things that may not help us
much or at all.

</P>
<P>
We encourage everyone to use the <CODE>mysqlbug</CODE> script to generate a bug
report (or a report about any problem), if possible.  <CODE>mysqlbug</CODE> can be
found in the <TT>`scripts'</TT> directory in the source distribution, or, for a
binary distribution, in the <TT>`bin'</TT> directory under your <STRONG>MySQL</STRONG>
installation directory.  If you are unable to use <CODE>mysqlbug</CODE>, you should
still include all the necessary information listed in this section.

</P>
<P>
The <CODE>mysqlbug</CODE> script helps you generate a report by determining much
of the following information automatically, but if something important is
missing, please include it with your message! Please read this section
carefully and make sure that all the information described here is included
in your report.

</P>
<P>
Remember that it is possible to respond to a message containing too much
information, but not to one containing too little.  Often people omit facts
because they think they know the cause of a problem and assume that some
details don't matter.  A good principle is: if you are in doubt about stating
something, state it!  It is a thousand times faster and less troublesome to
write a couple of lines more in your report than to be forced to ask again
and wait for the answer because you didn't include enough information the
first time.

</P>
<P>
The most common errors are that people don't indicate the version number of
the <STRONG>MySQL</STRONG> distribution they are using, or don't indicate what
platform they have <STRONG>MySQL</STRONG> installed on (including the platform
version number).  This is highly relevant information and in 99 cases out of
100 the bug report is useless without it!  Very often we get questions like
"Why doesn't this work for me?"  and then we find that the feature
requested wasn't implemented in that <STRONG>MySQL</STRONG> version, or that a bug
described in a report has been fixed already in newer <STRONG>MySQL</STRONG>
versions.  Sometimes the error is platform dependent; in such cases, it is
next to impossible to fix anything without knowing the operating system and
the version number of the platform.

</P>
<P>
Remember also to provide information about your compiler, if it is related to
the problem.  Often people find bugs in compilers and think the problem is
<STRONG>MySQL</STRONG> related. Most compilers are under development all the time and
become better version by version, too.  To determine whether or not your
problem depends on your compiler, we need to know what compiler is used.
Note that every compiling problem should be regarded as a bug report and
reported accordingly.

</P>
<P>
It is most helpful when a good description of the problem is included in the
bug report.  That is, a good example of all the things you did that led to
the problem and the problem itself exactly described.  The best reports are
those that include a full example showing how to reproduce the bug or
problem.

</P>
<P>
If a program produces an error message, it is very important to include the
message in your report! If we try to search for something from the archives
using programs, it is better that the error message reported exactly matches
the one that the program produces.  (Even the case sensitivity should be
observed!) You should never try to remember what the error message was;
instead, copy and paste the entire message into your report!

</P>
<P>
Please include the following information in your report:

</P>

<UL>
<LI>

The version number of the <STRONG>MySQL</STRONG> distribution you are using (for
example, <STRONG>MySQL</STRONG> 3.22.22). You can find out which version you are
running by executing <CODE>mysqladmin version</CODE>. <CODE>mysqladmin</CODE> can be
found in the <TT>`bin'</TT> directory under your <STRONG>MySQL</STRONG> installation
directory.

<LI>

The manufacturer and model of the machine you are working on.

<LI>

The operating system name and version. For most operating systems, you can
get this information by executing the Unix command <CODE>uname -a</CODE>.

<LI>

Sometimes the amount of memory (real and virtual) is relevant.
If in doubt, include these values.

<LI>

If you are using a source distribution of <STRONG>MySQL</STRONG>, the name and
version number of the compiler used is needed.
If you have a binary distribution, the distribution name is needed.

<LI>

If the problem occurs during compilation, include the exact error
message(s) and also a few lines of context around the offending code in the
file where the error occurred.

<LI>

If any database table is related to the problem, include the output from
<CODE>mysqldump --no-data db_name tbl_name1 tbl_name2 ...</CODE> This is very easy
to do and is a powerful way to get information about any table in a database
that will help us create a situation matching the one you have.

<LI>

For speed-related bugs or problems with <CODE>SELECT</CODE> statements, you should
always include the output of <CODE>EXPLAIN SELECT ...</CODE>, and at least the
number of rows that the <CODE>SELECT</CODE> statement produces.  The more
information you give about your situation, the more likely it is that someone
can help you!  For example, the following is an example of a very good bug
report (it should of course be posted with the <CODE>mysqlbug</CODE> script):

Example run under the <CODE>mysql</CODE> command line tool:


<PRE>
mysql&#62; SHOW VARIABLES;
mysql&#62; EXPLAIN SELECT ...
       &#60;output-from-EXPLAIN&#62;
mysql&#62; FLUSH STATUS;
mysql&#62; SELECT ...
       &#60;A short version of the output from SELECT,
       including the time taken to run the query&#62;
mysql&#62; SHOW STATUS;
       &#60;output from SHOW STATUS&#62;
</PRE>

<LI>

If a bug or problem occurs while running <STRONG>MySQL</STRONG>, try to provide an
input script that will reproduce the anomaly. This script should include any
necessary source files. The more closely the script can reproduce your
situation, the better.

If you can't provide a script, you should at least include the output
from <CODE>mysqladmin variables extended-status processlist</CODE> in your mail to
provide some information of how your system is performing!

<LI>

If you think that <STRONG>MySQL</STRONG> produces a strange result from a query,
include not only the result, but also your opinion of what the result
should be and an account describing the basis for your opinion.

<LI>

When giving an example of the problem, it's better to use the variable names,
table names, etc., that exist in your actual situation than to come up with
new names. The problem could be related to the name of a variable, table,
etc.!  These cases are rare, perhaps, but it is better to be safe than
sorry.  After all, it should be easier for you to provide an example that
uses your actual situation and it is by all means better for us.  In case you
have data you don't want to show to others, you can use <CODE>ftp</CODE> to
transfer it to <a HREF="ftp://www.mysql.com/pub/mysql/secret/">ftp://www.mysql.com/pub/mysql/secret/</a>.  If the data are
really top secret and you don't want to show them even to us, then go ahead
and provide an example using other names, but please regard this as the last
choice.

<LI>

Include all the options given to the relevant programs, if possible.  For
example, indicate the options that you use when you start the <CODE>mysqld</CODE>
daemon and that you use to run any <STRONG>MySQL</STRONG> client programs.  The
options to programs like <CODE>mysqld</CODE> and <CODE>mysql</CODE>, and to the
<CODE>configure</CODE> script are often keys to answers and very relevant!  It is
never a bad idea to include them anyway!  If you use any modules, such as
Perl or PHP, please include the version number(s) of those as well.

<LI>

If you can't produce a test case in a few rows, or if the test table
is too big to be mailed to the mailing list (more than 10 rows), you should
dump your tables using <CODE>mysqldump</CODE> and create a <TT>`README'</TT> file
that describes your problem.

Create a compressed archive of your files using
<CODE>tar</CODE> and <CODE>gzip</CODE> or <CODE>zip</CODE>, and use <CODE>ftp</CODE>
to transfer the archive to <a HREF="ftp://www.mysql.com/pub/mysql/secret/">ftp://www.mysql.com/pub/mysql/secret/</a>.
Then send a short description of the problem to

<LI>

If your question is related to the privilege system, please include the
output of <CODE>mysqlaccess</CODE>, the output of <CODE>mysqladmin reload</CODE> and all
the error messages you get when trying to connect!  When you test your
privileges, you should first run <CODE>mysqlaccess</CODE>. After this, execute
<CODE>mysqladmin reload version</CODE>, and last you should try to connect with the
program that gives you trouble.  <CODE>mysqlaccess</CODE> can be found in the
<TT>`bin'</TT> directory under your <STRONG>MySQL</STRONG> installation directory.

<LI>

If you have a patch for a bug, that is good.  But don't assume the patch is
all we need or that we will use it even if you don't provide some necessary
information such as test cases showing the bug that your patch fixes.  We
might find problems with your patch or we might not understand it at all; if
so, we can't use it.

If we can't verify exactly what the patch is meant for, we won't use it.
Test cases will help us here.  Show that the patch will handle all the
situations that may occur. If we find a borderline case (even a rare one)
where the patch won't work, the patch may be useless.

<LI>

Guesses about what the bug is, why it occurs, or what it depends on,
are usually wrong. Even we can't guess such things without first
using a debugger to determine the real cause of a bug.

<LI>

Indicate in your mail message that you have checked the reference manual
and mail archive so others know that you have tried to solve your
problem yourself.

<LI>

If you get a <CODE>parse error</CODE>, please check your syntax closely! If you
can't find something wrong with it, it's extremely likely that your current
version of <STRONG>MySQL</STRONG> doesn't support the query you are using.  If you
are using the current version and the manual at
<a HREF="http://www.mysql.com/doc.html">http://www.mysql.com/doc.html</a> doesn't cover the syntax you are using,
<STRONG>MySQL</STRONG> doesn't support your query.  In this case, your only options
are to implement the syntax yourself or email <a HREF="mailto:mysql-support@mysql.com">mysql-support@mysql.com</a>
and ask for an offer to implement it!

If the manual covers the syntax you are using, but you have an older version
of <STRONG>MySQL</STRONG>, you should check the <STRONG>MySQL</STRONG> change history to see
when the syntax was implemented.  See section <A HREF="manual.html#News">D  <STRONG>MySQL</STRONG> change history</A>.  In this case, you have the
option of upgrading to a newer version of <STRONG>MySQL</STRONG>.

<LI>

If you have a problem such that your data appears corrupt or you get
errors when you access some particular table, you should first check and then
try repairing your tables with <CODE>isamchk</CODE>.
See section <A HREF="manual.html#Maintenance">13  Maintaining a <STRONG>MySQL</STRONG> installation</A>.

<LI>

If you often get corrupted tables you should try to find out when and
why this happens!  In this case, the
<TT>`mysql-data-directory/'hostname'.err'</TT> file may contain some
information about what happened.  Please include any relevant
information from this file in your bug report!  Normally <CODE>mysqld</CODE> should
<STRONG>NEVER</STRONG> crash a table if nothing killed it in the middle of an
update!  If you can find the source of why <CODE>mysqld</CODE> dies, it's much
easier for us to provide you with a fix for the problem!

<LI>

If possible, download the most recent version of <STRONG>MySQL</STRONG> and check
whether or not it solves your problem.  All versions of <STRONG>MySQL</STRONG> are
thoroughly tested and should work without problems!  We believe in making
everything as backward compatible as possible and you should be able to
switch <STRONG>MySQL</STRONG> versions in minutes!  See section <A HREF="manual.html#Which_version">4.3  Which <STRONG>MySQL</STRONG> version to use</A>.
</UL>

<P>
If you are a support customer, please cross-post the bug report to
the appropriate mailing list to see if someone else has experienced (and
perhaps solved) the problem.

</P>
<P>
For information on reporting bugs in <STRONG>MyODBC</STRONG>, see section <A HREF="manual.html#ODBC_Problems">16.2  How to report problems with <STRONG>MyODBC</STRONG></A>.

</P>
<P>
For solutions to some common problems, see See section <A HREF="manual.html#Problems">17  Problems and common errors</A>.

</P>
<P>
When answers are sent to you individually and not to the mailing list,
it is considered good etiquette to summarize the answers and send the
summary to the mailing list so that others may have the benefit of
responses you received that helped you solve your problem!

</P>
<P>
<A NAME="IDX13"></A>


<H2><A NAME="Answering_questions" HREF="manual_toc.html#Answering_questions">2.4  Guidelines for answering questions on the mailing list</A></H2>

<P>
If you consider your answer to have broad interest, you may want to post it
to the mailing list instead of replying directly to the individual who
asked.  Try to make your answer general enough that people other than the
original poster may benefit from it.  When you post to the list, please make
sure that your answer is not a duplication of a previous answer.

</P>
<P>
Try to summarize the essential part of the question in your reply; don't feel
obliged to quote the entire original message.

</P>
<P>
Please don't post mail messages from your browser with HTML mode turned on!
Many users doesn't read mail with a browser!

</P>
<P>
<A NAME="IDX14"></A>
<A NAME="IDX15"></A>


<H1><A NAME="Licensing_and_Support" HREF="manual_toc.html#Licensing_and_Support">3  <STRONG>MySQL</STRONG> licensing and support</A></H1>

<P>
This chapter describes <STRONG>MySQL</STRONG> licensing and support arrangements,
including:

</P>

<UL>
<LI>

Our licensing policies for non-Microsoft and Microsoft operating systems

<LI>

The copyrights under which <STRONG>MySQL</STRONG> is distributed
(see section <A HREF="manual.html#Copyright">3.2  Copyrights used by <STRONG>MySQL</STRONG></A>)

<LI>

Sample situations illustrating when a license is required
(see section <A HREF="manual.html#Licensing_examples">3.4  Example licensing situations</A>)

<LI>

Licensing and support costs (see section <A HREF="manual.html#Cost">3.5  <STRONG>MySQL</STRONG> licensing and support costs</A>), and
support benefits (see section <A HREF="manual.html#Support">3.6  Types of commercial support</A>)
</UL>

<P>
<A NAME="IDX16"></A>


<H2><A NAME="Licensing_policy" HREF="manual_toc.html#Licensing_policy">3.1  <STRONG>MySQL</STRONG> licensing policy</A></H2>

<P>
The formal terms of the license for non-Microsoft operating systems such as
Unix or OS/2 are specified in section <A HREF="manual.html#Public_license">J  The <STRONG>MySQL</STRONG> server license for non Microsoft operating systems</A>.  Basically, our licensing
policy is as follows:

</P>

<UL>
<LI>

For normal internal use, <STRONG>MySQL</STRONG> generally costs nothing.  You do not
have to pay us if you do not want to.

<LI>

A license is required if:


<UL>
<LI>

You sell the <STRONG>MySQL</STRONG> server directly or as a part of another product
or service

<LI>

You charge for installing and maintaining a <STRONG>MySQL</STRONG> server at some
client site

<LI>

You include <STRONG>MySQL</STRONG> in a distribution that is non redistributable
and you charge for some part of that distribution
</UL>

<LI>

For circumstances under which a <STRONG>MySQL</STRONG> license is required, you need
a license per machine that runs the <CODE>mysqld</CODE> server.  However, a
multiple-CPU machine counts as a single machine, and there is no restriction
on the number of <STRONG>MySQL</STRONG> servers that run on one machine, or on the
number of clients concurrently connected to a server running on that
machine!

<LI>

You do not need a license to include client code in commercial programs.  The
client access part of <STRONG>MySQL</STRONG> is in the public domain. The
<CODE>mysql</CODE> command line client includes code from the <CODE>readline</CODE>
library that is under the GNU Public License.

<LI>

<A NAME="IDX17"></A>
For customers who have purchased 10 licenses or a high enough level of
support, we provide additional functionality.  Currently, this means we
provide the <CODE>pack_isam</CODE> utility for creating fast compressed read-only
databases.  (The server includes support for reading such databases but not
the packing tool used to create them.)  If support agreements generate
sufficient revenue, we will probably release this tool under the same
license as the <STRONG>MySQL</STRONG> server.

<LI>

If your use of <STRONG>MySQL</STRONG> does not require a license, but you like
<STRONG>MySQL</STRONG> and want to encourage further development, you are certainly
welcome to purchase a license anyway.

<LI>

If you use <STRONG>MySQL</STRONG> in a commercial context such that
you profit by its use, we ask that you further the development of
<STRONG>MySQL</STRONG> by purchasing some level of support.  We feel that if
<STRONG>MySQL</STRONG> helps your business, it is reasonable to ask that you help
<STRONG>MySQL</STRONG>.  (Otherwise, if you ask us support questions, you are not
only using for free something into which we've put a lot a work, you're
asking us to provide free support, too.)
</UL>

<P>
For use under Microsoft operating systems (Win95/Win98/WinNT), you need a
<STRONG>MySQL</STRONG> license after a trial period of 30 days, with the exception
that licenses may be obtained upon request at no cost for educational
use or for university- or government-sponsored research settings.  See section <A HREF="manual.html#Win_license">K  The <STRONG>MySQL</STRONG> license for Microsoft operating systems</A>. A shareware version of <STRONG>MySQL</STRONG>-Win32 that you can try before
buying is available at <a HREF="http://www.mysql.com/mysql_w32.htmy">http://www.mysql.com/mysql_w32.htmy</a>.  After
you have paid, you will get a password that will enable you to access
the newest <STRONG>MySQL</STRONG>-Win32 version.

</P>
<P>
If you have any questions as to whether or not a license is required for your
particular use of <STRONG>MySQL</STRONG>, please contact us.
See section <A HREF="manual.html#Contact_information">3.5.2  Contact information</A>.

</P>
<P>
If you require a <STRONG>MySQL</STRONG> license, the easiest way to pay for it is to
use the license form at TcX's secure server at
https://www.tcx.se/license.htmy.  Other forms of payment are discussed
in section <A HREF="manual.html#Payment_information">3.5.1  Payment information</A>.

</P>
<P>
<A NAME="IDX18"></A>


<H2><A NAME="Copyright" HREF="manual_toc.html#Copyright">3.2  Copyrights used by <STRONG>MySQL</STRONG></A></H2>

<P>
There are several different copyrights on the <STRONG>MySQL</STRONG> distribution:

</P>

<OL>
<LI>

The <STRONG>MySQL</STRONG>-specific source needed to build the <CODE>mysqlclient</CODE>
library and programs in the <TT>`client'</TT> directory is in the public
domain. Each file that is in the public domain has a header which clearly
states so. This includes everything in the <TT>`client'</TT> directory and some parts of
the <CODE>mysys</CODE>, <CODE>mystring</CODE> and <CODE>dbug</CODE> libraries.

<LI>

Some small parts of the source (GNU <CODE>getopt</CODE>) are covered by the
"GNU LIBRARY LIBRARY GENERAL PUBLIC LICENSE".  See the
<TT>`mysys/COPYING.LIB'</TT> file.

<LI>

Some small parts of the source (GNU <CODE>readline</CODE>) are covered by the
"GNU GENERAL PUBLIC LICENSE". See the <TT>`readline/COPYING'</TT> file.

<LI>

Some parts of the source (the <CODE>regexp</CODE> library) are covered by a Berkeley
style copyright.

<LI>

The other source needed for the <STRONG>MySQL</STRONG> server on non-Microsoft
platforms is covered by the "MySQL FREE PUBLIC LICENSE", which is based on
the "Aladdin FREE PUBLIC LICENSE." See section <A HREF="manual.html#Public_license">J  The <STRONG>MySQL</STRONG> server license for non Microsoft operating systems</A>. When running
<STRONG>MySQL</STRONG> on any Microsoft operating system, other licensing applies.
</OL>

<P>
The following points set forth the philosophy behind our copyright policy:

</P>

<UL>
<LI>

The SQL client library should be totally free so that it can be included in
commercial products without limitations.

<LI>

People who want free access to the software into which we have put a lot of
work can have it, so long as they do not try to make money directly by
distributing it for profit.

<LI>

People who want the right to keep their own software proprietary, but also
want the value from our work, can pay for the privilege.

<LI>

That means normal in-house use is FREE. But if you use <STRONG>MySQL</STRONG> for
something important to you, you may want to help further its development by
purchasing a license or a support contract.  See section <A HREF="manual.html#Support">3.6  Types of commercial support</A>.
</UL>



<H3><A NAME="Copyright_changes" HREF="manual_toc.html#Copyright_changes">3.2.1  Possible future copyright changes</A></H3>

<P>
We may choose to distribute older versions of <STRONG>MySQL</STRONG> with the GPL in
the future. However, these versions will be identified as <STRONG>GNU MySQL</STRONG>.
Also, all copyright notices in the relevant files will be changed to the
GPL.

</P>


<H2><A NAME="Commercial_use" HREF="manual_toc.html#Commercial_use">3.3  Distributing <STRONG>MySQL</STRONG> commercially</A></H2>

<P>
This section is a clarification of the license terms that are set forth in
the "MySQL FREE PUBLIC LICENSE" (FPL).  See section <A HREF="manual.html#Public_license">J  The <STRONG>MySQL</STRONG> server license for non Microsoft operating systems</A>.

</P>
<P>
<STRONG>MySQL</STRONG> may be <STRONG>used</STRONG> freely, including by commercial
entities for evaluation or unsupported internal use. However,
<STRONG>distribution</STRONG> for commercial purposes of <STRONG>MySQL</STRONG>, or
anything containing or derived from <STRONG>MySQL</STRONG> in whole or in part,
requires a written commercial license from TcX AB, the sole entity
authorized to grant such licenses.

</P>
<P>
You may not include <STRONG>MySQL</STRONG> "free" in a package containing
anything for which a charge is being made, except as noted below.

</P>
<P>
The intent of the exception provided in the second clause of the license is
to allow commercial organizations operating an FTP server or a bulletin board
to distribute <STRONG>MySQL</STRONG> freely from it, provided that:

</P>

<OL>
<LI>

The organization complies with the other provisions of the FPL, which
include among other things a requirement to distribute the full source
code of <STRONG>MySQL</STRONG> and of any derived work, and to distribute the
FPL itself along with <STRONG>MySQL</STRONG>;

<LI>

The only charge for downloading <STRONG>MySQL</STRONG> is a charge based on the
distribution service and not one based on the content of the information
being retrieved (i.e., the charge would be the same for retrieving a
random collection of bits of the same size);

<LI>

The server or BBS is accessible to the general public, i.e., the phone
number or IP address is not kept secret, and anyone may obtain access to
the information (possibly by paying a subscription or access fee that is
not dependent on or related to purchasing anything else).
</OL>

<P>
If you want to distribute software in a commercial context that incorporates
<STRONG>MySQL</STRONG> and you do <STRONG>not</STRONG> want to meet these conditions, you
should contact TcX AB to find out about commercial licensing, which involves
a payment. The only ways you legally can distribute <STRONG>MySQL</STRONG> or
anything containing <STRONG>MySQL</STRONG> are by distributing <STRONG>MySQL</STRONG> under
the requirements of the FPL, or by getting a commercial license from TcX AB.

</P>


<H2><A NAME="Licensing_examples" HREF="manual_toc.html#Licensing_examples">3.4  Example licensing situations</A></H2>

<P>
This section describes some situations illustrating whether or not you must
license the <STRONG>MySQL</STRONG> server.  Generally these examples involve
providing <STRONG>MySQL</STRONG> as part of a product or service that you are selling
to a customer, or requiring that <STRONG>MySQL</STRONG> be used in conjunction with
your product.  In such cases, it is your responsibility to obtain a license
for the customer if one is necessary.  (This requirement is waived if your
customer already has a <STRONG>MySQL</STRONG> license.  But the seller must send
customer information and the license number to TcX, and the license must be a
full license, not an OEM license.)

</P>
<P>
Note that a single <STRONG>MySQL</STRONG> license covers any number of
CPUs/users/customers/<CODE>mysqld</CODE> servers on a machine!

</P>


<H3><A NAME="Products_that_use_MySQL" HREF="manual_toc.html#Products_that_use_MySQL">3.4.1  Selling products that use <STRONG>MySQL</STRONG></A></H3>

<P>
To determine whether or not you need a <STRONG>MySQL</STRONG> license when selling
your application, you should ask whether the proper functioning of your
application is contingent on the use of <STRONG>MySQL</STRONG> and whether you
include <STRONG>MySQL</STRONG> with your product.  There are several cases to
consider:

</P>

<UL>
<LI>

Does your application require <STRONG>MySQL</STRONG> to function properly?

If your product requires <STRONG>MySQL</STRONG>, you need a license for any machine
that runs the <CODE>mysqld</CODE> server.  For example, if you've designed your
application around <STRONG>MySQL</STRONG>, then you've really made a commercial
product that requires the engine, so you need a license.

If your application does not require <STRONG>MySQL</STRONG>, you need not obtain a
license.  For example, if <STRONG>MySQL</STRONG> just added some new optional
features to your product (such as adding logging to a database if
<STRONG>MySQL</STRONG> is used rather than logging to a text file), it should fall
within normal use, and a license would not be required.

In other words, you need a license if you sell a product designed
specifically for use with <STRONG>MySQL</STRONG> or that requires the <STRONG>MySQL</STRONG>
server to function at all.  This is true whether or not you provide
<STRONG>MySQL</STRONG> for your client as part of your product distribution.

It also depends on what you're doing for the client.  Do you plan to provide
your client with detailed instructions on installing <STRONG>MySQL</STRONG> with your
software?  Then your product may be contingent on the use of <STRONG>MySQL</STRONG>;
if so, you need to buy a license.  If you are simply tying into a database
that you expect already to have been installed by the time your software is
purchased, then you probably don't need a license.

<LI>

Do you include <STRONG>MySQL</STRONG> in a distribution and charge for that
distribution?

If you include <STRONG>MySQL</STRONG> with a distribution that you sell to customers,
you will need a license for any machine that runs the <CODE>mysqld</CODE> server,
because in this case you are selling a system that includes <STRONG>MySQL</STRONG>.

This is true whether the use of <STRONG>MySQL</STRONG> with your product
is required or optional.

<LI>

Do you neither require for your product nor include <STRONG>MySQL</STRONG> with it?

Suppose you want to sell a product that is designed generally to use "some
database" and that can be configured to use any of several supported
alternative database systems (<STRONG>MySQL</STRONG>, PostgreSQL, or something
else).  That is, your product does not not require <STRONG>MySQL</STRONG>, but can
support any database with a base level of functionality, and you don't rely
on anything that only <STRONG>MySQL</STRONG> supports.  Does one of you owe us money
if your customer actually does choose to use <STRONG>MySQL</STRONG>?

In this case, if you don't provide, obtain or set up <STRONG>MySQL</STRONG> for the
customer should the customer decide to use it, neither of you need a
license.  If you do perform that service, see section <A HREF="manual.html#MySQL_services">3.4.2  Selling <STRONG>MySQL</STRONG>-related services</A>.
</UL>



<H3><A NAME="MySQL_services" HREF="manual_toc.html#MySQL_services">3.4.2  Selling <STRONG>MySQL</STRONG>-related services</A></H3>

<P>
If you perform <STRONG>MySQL</STRONG> installation on a client's machine and any
money changes hands for the service (directly or indirectly), then you must
buy a <STRONG>MySQL</STRONG> license.

</P>
<P>
If you sell an application for which <STRONG>MySQL</STRONG> is not strictly required
but can be used, a license may be indicated, depending on how <STRONG>MySQL</STRONG>
is set up.  Suppose your product neither requires <STRONG>MySQL</STRONG> nor includes
it in your product distribution, but can be configured to use <STRONG>MySQL</STRONG>
for those customers who so desire.  (This would be the case, for example, if
your product can use any of a number of database engines.)

</P>
<P>
If the customer obtains and installs <STRONG>MySQL</STRONG>, no license is needed.
If you perform that service for your customer, then a license is needed
because then you are selling a service that includes <STRONG>MySQL</STRONG>.

</P>


<H3><A NAME="ISP" HREF="manual_toc.html#ISP">3.4.3  ISP <STRONG>MySQL</STRONG> services</A></H3>

<P>
Internet Service Providers (ISPs) often host <STRONG>MySQL</STRONG> servers for
their customers.

</P>
<P>
If you are an ISP that allows customers to install and administer
<STRONG>MySQL</STRONG> for themselves on your machine with no assistance from you,
neither you nor your customer need a <STRONG>MySQL</STRONG> license.

</P>
<P>
If you charge for <STRONG>MySQL</STRONG> installation and administrative support as
part of your customer service, then you need a license because you are selling
a service that includes <STRONG>MySQL</STRONG>.

</P>


<H3><A NAME="Web_server" HREF="manual_toc.html#Web_server">3.4.4  Running a web server using <STRONG>MySQL</STRONG></A></H3>

<P>
If you use <STRONG>MySQL</STRONG> in conjunction with a web server, you don't have to
pay for a license.

</P>
<P>
This is true even if you run a commercial web server that uses
<STRONG>MySQL</STRONG>, since you are not selling <STRONG>MySQL</STRONG> itself.  However, in
this case we would like you to purchase <STRONG>MySQL</STRONG> support, because
<STRONG>MySQL</STRONG> is helping your enterprise.

</P>
<P>
<A NAME="IDX19"></A>
<A NAME="IDX20"></A>
<A NAME="IDX21"></A>


<H2><A NAME="Cost" HREF="manual_toc.html#Cost">3.5  <STRONG>MySQL</STRONG> licensing and support costs</A></H2>

<P>
Our current license prices are shown below. All prices are in US
Dollars. If you pay by credit card, the currency is EURO (European Union Euro)
so the prices will differ slightly.

</P>
<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><STRONG>Number of licenses</STRONG> </TD><TD> <STRONG>Price per copy</STRONG> </TD><TD> <STRONG>Total</STRONG>
</TR NOSAVE>
<TR><TD>1 </TD><TD> US $200 </TD><TD> US $200
</TR NOSAVE>
<TR><TD>10 pack </TD><TD> US $150 </TD><TD> US $1500
</TR NOSAVE>
<TR><TD>50 pack </TD><TD> US $120 </TD><TD> US $6000
</TR>
</TABLE>

<P>
For high volume (OEM) purchases, the following prices apply:

</P>
<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><STRONG>Number of licenses</STRONG> </TD><TD> <STRONG>Price per copy</STRONG> </TD><TD> <STRONG>Minimum at one time</STRONG> </TD><TD> <STRONG>Minimum payment</STRONG>
</TR NOSAVE>
<TR><TD>100-999 </TD><TD> US $40 </TD><TD> 100 </TD><TD> US $4000
</TR NOSAVE>
<TR><TD>1000-2499 </TD><TD> US $25 </TD><TD> 200 </TD><TD> US $5000
</TR NOSAVE>
<TR><TD>2500-4999 </TD><TD> US $20 </TD><TD> 400 </TD><TD> US $8000
</TR>
</TABLE>

<P>
For OEM purchases, you must act as the middle-man for eventual problems
or extension requests from your users. We also require that OEM
customers have at least an extended email support contract.

</P>
<P>
If you have a low-margin high-volume product, you can always talk to us
about other terms (for example, a percent of the sale price). If you do,
please be informative about your product, pricing, market and any other
information that may be relevant.

</P>
<P>
<A NAME="IDX22"></A>
After buying 10 <STRONG>MySQL</STRONG> licenses, you will get a personal copy of
the <CODE>pack_isam</CODE> utility.  You are not allowed to redistribute this
utility but you can distribute tables packed with it.

</P>
<P>
A full-price license is not a support agreement and includes very minimal
support. This means that we try to answer any relevant question. If the
answer is in the documentation, we will direct you to the appropriate
section. If you have not purchased a license or support, we probably will not
answer at all.

</P>
<P>
If you discover what we consider a real bug, we are likely to fix it in
any case. But if you pay for support we will notify you about the fix
status instead of just fixing it in a later release.

</P>
<P>
More comprehensive support is sold separately.  Descriptions of what each
level of support includes are given in section <A HREF="manual.html#Support">3.6  Types of commercial support</A>.  Costs for the various
types of commercial support are shown below.  Support level prices are in
EURO (European Union Euro). One EURO is about 1.17 USD.

</P>
<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><STRONG>Type of support</STRONG> </TD><TD> <STRONG>Cost per year</STRONG>
</TR NOSAVE>
<TR><TD>Basic email support </TD><TD> EURO 170
</TR NOSAVE>
<TR><TD>Extended email support </TD><TD> EURO 1000
</TR NOSAVE>
<TR><TD>Login support </TD><TD> EURO 2000
</TR NOSAVE>
<TR><TD>Extended login support </TD><TD> EURO 5000
</TR>
</TABLE>

<P>
You may upgrade from any
lower level of support to a higher level of support for the difference
between the prices of the two support levels.

</P>
<P>
<A NAME="IDX23"></A>


<H3><A NAME="Payment_information" HREF="manual_toc.html#Payment_information">3.5.1  Payment information</A></H3>

<P>
Currently we can take SWIFT payments, cheques or credit cards.

</P>
<P>
Payment should be made to:

<PRE>
Postgirot Bank AB
105 06 STOCKHOLM, SWEDEN

TCX DataKonsult AB
BOX 6434
11382 STOCKHOLM, SWEDEN

SWIFT address: PGSI SESS
Account number: 96 77 06 - 3
</PRE>

<P>
Specify: license and/or support and your name and email address.

</P>
<P>
In Europe and Japan you can use EuroGiro (that should be less expensive) to the
same account.

</P>
<P>
If you want to pay by cheque, make it payable to "Monty Program KB" and
mail it to the address below:

</P>

<PRE>
TCX DataKonsult AB
BOX 6434
11382 STOCKHOLM, SWEDEN
</PRE>

<P>
If you want to pay by credit card over the Internet, you can use
<a HREF="https://www.tcx.se/license.htmy"> TcX's secure license form</a>.

</P>
<P>
You can also print a copy of the license form, fill it in and send it by fax
to:

</P>
<P>
+46-8-729 69 05

</P>
<P>
If you want us to bill you, you can use the license form and write "bill
us" in the comment field.  You can also mail a message to
with your company information and ask us to bill you.

</P>
<P>
<A NAME="IDX24"></A>


<H3><A NAME="Contact_information" HREF="manual_toc.html#Contact_information">3.5.2  Contact information</A></H3>

<P>
For commercial licensing, or if you have any questions about any of the
information in this section, please contact the <STRONG>MySQL</STRONG> licensing
team. The much preferred method is by E-Mail to
these may take much longer (Fax +46-8-729 69 05).

</P>

<P>
If you need to speak to us on the telephone:

</P>

<PRE>
David Axmark
Detron HB
Kungsgatan 65 B
753 21 UPPSALA
SWEDEN
Voice Phone +46-18-10 22 80     (Timezone GMT+1. Swedish and English spoken)
</PRE>

<P>
<A NAME="IDX25"></A>
<A NAME="IDX26"></A>


<H2><A NAME="Support" HREF="manual_toc.html#Support">3.6  Types of commercial support</A></H2>



<H3><A NAME="Basic_email_support" HREF="manual_toc.html#Basic_email_support">3.6.1  Basic email support</A></H3>

<P>
Basic email support is a very inexpensive support option and should be
thought of more as a way to support our development of <STRONG>MySQL</STRONG> than as
a real support option.

</P>
<P>
At this support level, the <STRONG>MySQL</STRONG> mailing lists are the preferred
means of communication.  Questions normally should be mailed to the primary
mailing list (<a HREF="mailto:mysql@lists.mysql.com">mysql@lists.mysql.com</a>) or one of the other regular
lists (for example, <a HREF="mailto:mysql-win32@lists.mysql.com">mysql-win32@lists.mysql.com</a> for Windows-related
<STRONG>MySQL</STRONG> questions), as someone else already may have experienced and
solved the problem you have.  See section <A HREF="manual.html#Asking_questions">2.2  Asking questions or reporting bugs</A>.

</P>
<P>
However, by purchasing basic email support, you also have access to the
support address <a HREF="mailto:mysql-support@mysql.com">mysql-support@mysql.com</a>, which is not available as part
of the minimal support that you get by purchasing a <STRONG>MySQL</STRONG> license.
This means that for especially critical questions, you can cross-post your
message to <a HREF="mailto:mysql-support@mysql.com">mysql-support@mysql.com</a>.  (If the message contains sensitive
data, you should post only to <a HREF="mailto:mysql-support@mysql.com">mysql-support@mysql.com</a>.)  Whenever you
send a message to <a HREF="mailto:mysql-support@mysql.com">mysql-support@mysql.com</a>, always remember to include
your registration number and expiration date to ensure a quick response.

</P>
<P>
Basic email support includes the following types of service:

</P>

<UL>
<LI>

If your question is already answered in the manual, we will inform you of the
correct section in which you can find the answer.  If the answer is not in
the manual, we will point you in the right direction to solve your problem.

<LI>

We guarantee a timely answer for your email messages.  We can't guarantee
that we can solve any problem, but at least you will receive an answer if we
can contact you by email.

<LI>

We will help with unexpected problems when you install <STRONG>MySQL</STRONG> from a
binary distribution on supported platforms.  This level of support does not
cover installing <STRONG>MySQL</STRONG> from a source distribution.  "Supported"
platforms are those for which <STRONG>MySQL</STRONG> is known to work.
See section <A HREF="manual.html#Which_OS">4.2  Operating systems supported by <STRONG>MySQL</STRONG></A>.

<LI>

We will help you with bugs and missing features. Any bugs that are found are
fixed for the next <STRONG>MySQL</STRONG> release. If the bug is critical for
you, we will mail you a patch for it as soon the bug is fixed.  Critical
bugs always have the highest priority for us, to ensure that they are
fixed as soon as possible.

<LI>

Your suggestions for the further development of <STRONG>MySQL</STRONG> will be
taken into consideration. By taking email support you have already
helped the further development of <STRONG>MySQL</STRONG>. If you want to have
more input, upgrade to a higher level of support.

<LI>

If you want us to help optimize your system, you must upgrade to a
higher level of support.
</UL>



<H3><A NAME="Extended_email_support" HREF="manual_toc.html#Extended_email_support">3.6.2  Extended email support</A></H3>

<P>
Extended email support includes everything in basic email support with
these additions:

</P>

<UL>
<LI>

Your email will be dealt with before mail from basic email support users and
non-registered users.

<LI>

Your suggestions for the further development of <STRONG>MySQL</STRONG> will
receive strong consideration. Simple extensions that suit the basic
goals of <STRONG>MySQL</STRONG> are implemented in a matter of days. By taking
extended email support you have already helped the further development
of <STRONG>MySQL</STRONG>.

<LI>

<A NAME="IDX27"></A>
We include a binary version of the <CODE>pack_isam</CODE> packing tool for creating
fast compressed read-only databases (it does not support <CODE>BLOB</CODE> or
<CODE>TEXT</CODE> types yet). The current server includes support for reading such
databases but not the packing tool used to create them.

<LI>

Typical questions that are covered by extended email support are:


<UL>
<LI>

We will answer and (within reason) solve questions that relate to possible
bugs in <STRONG>MySQL</STRONG>.  As soon as the bug is found and corrected, we
will mail a patch for it.

<LI>

We will help with unexpected problems when you install <STRONG>MySQL</STRONG> from a
source or binary distribution on supported platforms.

<LI>

We will answer questions about missing features and offer hints how to work
around them.

<LI>

We will provide hints on optimizing <CODE>mysqld</CODE> for your situation.
</UL>

<LI>

You are allowed to influence the priority of items on the <STRONG>MySQL</STRONG>
TODO. This will ensure that the features you really need will be implemented
sooner than they might be otherwise.
</UL>



<H3><A NAME="Login_support" HREF="manual_toc.html#Login_support">3.6.3  Login support</A></H3>

<P>
Login support includes everything in extended email support with
these additions:

</P>

<UL>
<LI>

Your email will be dealt with even before mail from extended email
support users.

<LI>

Your suggestions for the further development of <STRONG>MySQL</STRONG> will
be taken into very high consideration.  Realistic extensions that can be
implemented in a couple of hours and that suit the basic goals of
<STRONG>MySQL</STRONG> will be implemented as soon as possible.

<LI>

If you have a very specific problem, we can try to log in on your system
to solve the problem "in place."

<LI>

Like any database vendor, we can't guarantee that we can rescue any data from
crashed tables, but if the worst happens we will help you rescue as much as
possible. <STRONG>MySQL</STRONG> has proven itself very reliable, but anything is
possible due to circumstances beyond our control (for example, if your system
crashes or someone kills the server by executing a <CODE>kill -9</CODE> command).

<LI>

We will provide hints on optimizing your system and your queries.

<LI>

You are allowed to call a <STRONG>MySQL</STRONG> developer (in moderation) and
discuss your <STRONG>MySQL</STRONG>-related problems.
</UL>



<H3><A NAME="Extended_login_support" HREF="manual_toc.html#Extended_login_support">3.6.4  Extended login support</A></H3>

<P>
Extended login support includes everything in login support with these
additions:

</P>

<UL>
<LI>

Your email has the highest possible priority.

<LI>

We will actively examine your system and help you optimize it and your
queries. We may also optimize and/or extend <STRONG>MySQL</STRONG> to better
suit your needs.

<LI>

You may also request special extensions just for you. For example:

<PRE>
mysql&#62; select MY_CALCULATION(col_name1,col_name2) from tbl_name;
</PRE>

<LI>

We will provide a binary distribution of all important <STRONG>MySQL</STRONG>
releases for your system, as long as we can get an account on a
similar system. In the worst case, we may require access to your system
to be able to create a binary distribution.

<LI>

If you can provide accommodations and pay for traveler fares, you can even
get a <STRONG>MySQL</STRONG> developer to visit you and offer you help with your
troubles. Extended login support entitles you to one personal
encounter per year, but we are as always very flexible towards our customers!
</UL>



<H1><A NAME="Installing" HREF="manual_toc.html#Installing">4  Installing <STRONG>MySQL</STRONG></A></H1>

<P>
This chapter describes how to obtain and install <STRONG>MySQL</STRONG>:

</P>

<UL>
<LI>

For a list of sites from which you can obtain <STRONG>MySQL</STRONG>, see
section <A HREF="manual.html#Getting_MySQL">4.1  How to get <STRONG>MySQL</STRONG></A>.

<LI>

To see which platforms are supported, see section <A HREF="manual.html#Which_OS">4.2  Operating systems supported by <STRONG>MySQL</STRONG></A>.

<LI>

Several versions of
<STRONG>MySQL</STRONG> are available, in both binary and source distributions.
To determine which version and type of distribution
you should use, see section <A HREF="manual.html#Many_versions">4.4  How and when updates are released</A>.

<LI>

Installation instructions for binary and source distributions are described
in section <A HREF="manual.html#Installing_binary">4.6  Installing a <STRONG>MySQL</STRONG> binary distribution</A>, and section <A HREF="manual.html#Installing_source">4.7  Installing a <STRONG>MySQL</STRONG> source distribution</A>.  Each set of
instructions includes a section on system-specific problems you may run
into.

<LI>

For post-installation procedures, see section <A HREF="manual.html#Post-installation">4.15  Post-installation setup and testing</A>.  These
procedures apply whether you install <STRONG>MySQL</STRONG> using a binary or
source distribution.
</UL>

<P>
<A NAME="IDX28"></A>
<A NAME="IDX29"></A>
<A NAME="IDX30"></A>
<A NAME="IDX31"></A>


<H2><A NAME="Getting_MySQL" HREF="manual_toc.html#Getting_MySQL">4.1  How to get <STRONG>MySQL</STRONG></A></H2>

<P>
Check the <a HREF="http://www.mysql.com/"> <STRONG>MySQL</STRONG> home page</a> for
information about the current version and for downloading instructions.

</P>
<P>
However, the Internet connection at TcX is not so fast; we would
<EM>prefer</EM> that you do the actual downloading from one of the mirror sites
listed below.

</P>
<P>
Please report bad or out of date mirrors to <a HREF="mailto:webmaster@mysql.com">webmaster@mysql.com</a>.

</P>

<P>
<STRONG>Europe:</STRONG>

</P>

<UL>
<LI>

<IMG SRC="Img/austria.gif"> Austria [Univ. of Technology/Vienna]  
<a HREF="http://gd.tuwien.ac.at/db/mysql/"> WWW</a>
<a HREF="ftp://gd.tuwien.ac.at/db/mysql/"> FTP</a>
<LI>

<IMG SRC="Img/bulgaria.gif"> Bulgaria [Naturella]  
<a HREF="ftp://ftp.ntrl.net/pub/mirror/mysql"> FTP</a>
<LI>

<IMG SRC="Img/croatia.gif"> Croatia [HULK]  
<a HREF="http://ftp.linux.hr/pub/mysql/"> WWW</a>
<a HREF="ftp://ftp.linux.hr/pub/mysql/"> FTP</a>
<LI>

<IMG SRC="Img/czech-republic.gif"> Czech Republic [Masaryk University in Brno]  
<a HREF="http://mysql.linux.cz/"> WWW</a>
<a HREF="ftp://ftp.fi.muni.cz/pub/mysql/"> FTP</a>
<LI>

<IMG SRC="Img/denmark.gif"> Denmark [Ake]  
<a HREF="http://mysql.ake.dk"> WWW</a>
<LI>

<IMG SRC="Img/denmark.gif"> Denmark [SunSITE]  
<a HREF="http://SunSITE.auc.dk/mysql/"> WWW</a>
<a HREF="ftp://SunSITE.auc.dk/pub/databases/mysql/"> FTP</a>
<LI>

<IMG SRC="Img/estonia.gif"> Estonia [Tradenet]  
<a HREF="http://mysql.tradenet.ee"> WWW</a>
<LI>

<IMG SRC="Img/estonia.gif"> Estonia [OKinteractive]  
<a HREF="http://mysql.mirror.ok.ee"> WWW</a>
<LI>

<IMG SRC="Img/france.gif"> France [minet]  
<a HREF="http://www.minet.net/devel/mysql/"> WWW</a>
<LI>

<IMG SRC="Img/finland.gif"> Finland [EUnet] 
<a HREF="http://mysql.eunet.fi/"> WWW</a>
<LI>

<IMG SRC="Img/germany.gif"> Germany [Bonn University, Bonn]  
<a HREF="http://www.wipol.uni-bonn.de/MySQL//"> WWW</a>
<a HREF="ftp://ftp.wipol.uni-bonn.de/pub/mirror/MySQL/"> FTP</a>
<LI>

<IMG SRC="Img/germany.gif"> Germany [Wolfenbuettel]  
<a HREF="http://www.fh-wolfenbuettel.de/ftp/pub/database/mysql/"> WWW</a>
<a HREF="ftp://ftp.fh-wolfenbuettel.de/pub/database/mysql/"> FTP</a>
<LI>

<IMG SRC="Img/germany.gif"> Germany [Staufen]  
<a HREF="http://mysql.staufen.de/"> WWW</a>
<LI>

<IMG SRC="Img/germany.gif"> Germany [Cable &#38; Wireless]  
<a HREF="ftp://ftp.ecrc.net/pub/database/mysql/"> FTP</a>
<LI>

<IMG SRC="Img/greece.gif"> Greece [NTUA, Athens]  
<a HREF="http://www.ntua.gr/mysql/"> WWW</a>
<a HREF="ftp://ftp.ntua.gr/pub/databases/mysql/"> FTP</a>
<LI>

<IMG SRC="Img/hungary.gif"> Hungary [Xenia]  
<a HREF="http://xenia.sote.hu/ftp/mirrors/www.mysql.com/"> WWW</a>
<a HREF="ftp://xenia.sote.hu/pub/mirrors/www.mysql.com/">FTP</a>
<LI>

<IMG SRC="Img/israel.gif"> Israel [Netvision]  
<a HREF="http://mysql.netvision.net.il/"> WWW</a>
<LI>

<IMG SRC="Img/italy.gif"> Italy [Teta Srl]  
<a HREF="http://www.teta.it/mysql/"> WWW</a>
<LI>

<IMG SRC="Img/poland.gif"> Poland [Sunsite]  
<a HREF="http://sunsite.icm.edu.pl/mysql/"> WWW</a>
<a HREF="ftp://sunsite.icm.edu.pl/pub/unix/mysql/"> FTP</a>
<LI>

<IMG SRC="Img/portugal.gif"> Portugal [lerianet]  
<a HREF="http://mysql.leirianet.pt"> WWW</a>
<a HREF="ftp://ftp.leirianet.pt/pub/mysql/">FTP</a>
<LI>

<IMG SRC="Img/russia.gif"> Russia [DirectNet]  
<a HREF="http://mysql.directnet.ru"> WWW</a>
<LI>

<IMG SRC="Img/russia.gif"> Russia [IZHCOM]  
<a HREF="http://mysql.udm.net/"> WWW</a>
<a HREF="ftp://ftp.izhcom.ru/pub/mysql/">FTP</a>
<LI>

<IMG SRC="Img/russia.gif"> Russia [Scientific Center/Chernogolovka]  
<a HREF="ftp://ftp.chg.ru/pub/databases/mysql/"> FTP</a>
<LI>

<IMG SRC="Img/romania.gif"> Romania [Timisoara]  
<a HREF="http://www.dnttm.ro/mysql"> WWW</a>
<a HREF="ftp://ftp.dnttm.ro/pub/mysql"> FTP</a>
<LI>

<IMG SRC="Img/romania.gif"> Romania [Bucharest]  
<a HREF="http://www.lbi.ro/MySQL"> WWW</a>
<a HREF="ftp://ftp.lbi.ro/mirrors/ftp.tcx.se"> FTP</a>

<LI>

<IMG SRC="Img/sweden.gif"> Sweden [Sunet]  
<a HREF="http://ftp.sunet.se/pub/unix/databases/relational/mysql/"> WWW</a>
<a HREF="ftp://ftp.sunet.se/pub/unix/databases/relational/mysql/"> FTP</a>

<LI>

<IMG SRC="Img/switzerland.gif"> Switzerland [Sunsite]  
<a HREF="http://sunsite.cnlab-switch.ch/ftp/mirror/mysql/"> WWW</a>
<a HREF="ftp://sunsite.cnlab-switch.ch/mirror/mysql/"> FTP</a>

<LI>

<IMG SRC="Img/great-britain.gif"> UK [Omnipotent/UK]  
<a HREF="http://mysql.omnipotent.net/"> WWW</a>
<a HREF="ftp://mysql.omnipotent.net/"> FTP</a>

<LI>

<IMG SRC="Img/great-britain.gif"> UK [PLiG/UK]  
<a HREF="http://ftp.plig.org/pub/mysql/"> WWW</a>
<a HREF="ftp://ftp.plig.org/pub/mysql/"> FTP</a>

<LI>

<IMG SRC="Img/great-britain.gif"> UK [SunSITE] 
<a HREF="http://sunsite.org.uk/packages/mysql/"> WWW</a>
<a HREF="ftp://sunsite.org.uk/packages/mysql/"> FTP</a>

<LI>

<IMG SRC="Img/ukraine.gif"> Ukraine [PACO] 
<a HREF="http://mysql.paco.net.ua"> WWW</a>
<a HREF="ftp://mysql.paco.net.ua/"> FTP</a>

</UL>

<P>
<STRONG>North America:</STRONG>

</P>

<UL>

<LI>

<IMG SRC="Img/canada.gif"> Canada [Tryc]  
<a HREF="http://web.tryc.on.ca/mysql/"> WWW</a>

<LI>

<IMG SRC="Img/usa.gif"> USA [Hurricane Electric/San Jose]  
<a HREF="http://mysql.he.net"> WWW</a>

<LI>

<IMG SRC="Img/usa.gif"> USA [Buoy/New York]  
<a HREF="http://www.buoy.com/mysql/"> WWW</a>

<LI>

<IMG SRC="Img/usa.gif"> USA [Netcasting/West Coast]  
<a HREF="ftp://ftp.netcasting.net/pub/mysql/"> FTP</a>

<LI>

<IMG SRC="Img/usa.gif"> USA [Circle Net/North Carolina]  
<a HREF="http://www.mysql.net"> WWW</a>

<LI>

<IMG SRC="Img/usa.gif"> USA [Gina net/Florida]  
<a HREF="http://www.gina.net/mysql/"> WWW</a>

<LI>

<IMG SRC="Img/usa.gif"> USA [pingzero/Los Angeles] 
<a HREF="http://mysql.pingzero.net/"> WWW</a>

<LI>

<IMG SRC="Img/usa.gif"> USA [DIGEX]  
<a HREF="ftp://ftp.digex.net/pub/packages/database/mysql/download.html"> FTP</a>

</UL>

<P>
<STRONG>South America:</STRONG>

</P>

<UL>
<LI>

<IMG SRC="Img/chile.gif"> Chile [vision]  
<a HREF="http://mysql.vision.cl/">http://mysql.vision.cl/</a>
<LI>

<IMG SRC="Img/chile.gif"> Chile [Amerikanclaris]  
<a HREF="http://www.labs.amerikanclaris.cl/mysql"> WWW</a>
<a HREF="ftp://ftp.amerikanclaris.cl/pub/mysql"> FTP</a>
</UL>

<P>
<STRONG>Asia:</STRONG>

</P>

<UL>
<LI>

<IMG SRC="Img/south-korea.gif"> Korea [KREONet]  
<a HREF="http://linux.kreonet.re.kr/mysql/"> WWW</a>
<LI>

<IMG SRC="Img/japan.gif"> Japan [Soft Agency]  
<a HREF="http://www.softagency.co.jp/MySQL"> WWW</a>
<LI>

<IMG SRC="Img/japan.gif"> Japan [Nagoya Syouka University]  
<a HREF="http://www.happysize.co.jp/mysql/"> WWW</a>
<a HREF="ftp://ftp.happysize.co.jp/pub/mysql/"> FTP</a>

<LI>

<IMG SRC="Img/japan.gif"> Japan [HappySize]  
<a HREF="http://mirror.nucba.ac.jp/mirror/mysql"> WWW</a>
<a HREF="ftp://mirror.nucba.ac.jp/mirror/mysql"> FTP</a>

<LI>

<IMG SRC="Img/singapore.gif"> Singapore [HJC] 
<a HREF="http://mysql.hjc.edu.sg"> WWW</a>
<a HREF="ftp://ftp.hjc.edu.sg/mysql"> FTP</a>
<LI>

<IMG SRC="Img/taiwan.gif"> Taiwan [NCTU]  
<a HREF="http://mysql.taconet.com.tw"> WWW</a>
<LI>

<IMG SRC="Img/taiwan.gif"> Taiwan [TTN]  
<a HREF="http://mysql.ttn.net"> WWW</a>
</UL>

<P>
<STRONG>Australia:</STRONG>

</P>

<UL>
<LI>

<IMG SRC="Img/australia.gif"> Australia [AARNet/Queensland]  
<a HREF="http://mirror.aarnet.edu.au/mysql"> WWW</a>
<a HREF="ftp://mirror.aarnet.edu.au/pub/mysql"> FTP</a>

<LI>

<IMG SRC="Img/australia.gif"> Australia [Tas]  
<a HREF="http://ftp.tas.gov.au/mysql"> WWW</a>
<a HREF="ftp://ftp.tas.gov.au/pub/mysql"> FTP</a>

<LI>

<IMG SRC="Img/australia.gif"> Australia [Blue Planet/Melbourne]  
<a HREF="http://mysql.bluep.com/"> WWW</a>
<a HREF="ftp://mysql.bluep.com/pub/mirror1/mysql/"> FTP</a>

<LI>

<IMG SRC="Img/australia.gif"> Australia [ITworks Consulting/Victoria]  
<a HREF="http://mysql.itworks.com.au"> WWW</a>

</UL>

<P>
<STRONG>Africa:</STRONG>

</P>

<UL>

<LI>

<IMG SRC="Img/south-africa1.gif"> South-Africa [The Internet Solution/Johannesburg]  
<a HREF="ftp://ftp.is.co.za/linux/mysql/"> FTP</a>

<LI>

<IMG SRC="Img/south-africa1.gif"> South-Africa [Mweb/]  
<a HREF="http://www.mysql.mweb.co.za"> WWW</a>

</UL>



<H2><A NAME="Which_OS" HREF="manual_toc.html#Which_OS">4.2  Operating systems supported by <STRONG>MySQL</STRONG></A></H2>

<P>
We use GNU Autoconf so it is possible to port <STRONG>MySQL</STRONG> to all modern
systems with working Posix threads and a C++ compiler. (To compile only the
client code, a C++ compiler is required but not threads.)  We use and develop
the software ourselves primarily on Sun Solaris (versions 2.5 &#38; 2.6) and to a
lesser extent on RedHat Linux 5.0.

</P>
<P>
<STRONG>MySQL</STRONG> has been reported to compile sucessfully on the following
operating system/thread package combinations.  Note that for many operating
systems, the native thread support works only in the latest versions.

</P>

<UL>
<LI>

AIX 4.x with native threads
<LI>

BSDI 2.x with the included MIT-pthreads package
<LI>

BSDI 3.0, 3.1 and 4.x with native threads
<LI>

DEC UNIX 4.x with native threads
<LI>

FreeBSD 2.x with the included MIT-pthreads package
<LI>

FreeBSD 3.x with native threads
<LI>

HP-UX 10.20 with the included MIT-pthreads package
<LI>

HP-UX 11.x with the native threads.
<LI>

Linux 2.0+ with LinuxThreads 0.7.1 or <CODE>glibc</CODE> 2.0.7
<LI>

NetBSD 1.3 Intel and NetBSD 1.3 Alpha
<LI>

OpenBSD 2.x with the included MIT-pthreads package
<LI>

OS/2 Warp 3, FixPack 29 and OS/2 Warp 4, FixPack 4
<LI>

SGI Irix 6.x with native threads
<LI>

Solaris 2.5, 2.6 and 2.7 with native threads on SPARC and x86
<LI>

SunOS 4.x with the included MIT-pthreads package
<LI>

SCO OpenServer with a recent port of the FSU Pthreads package
<LI>

SCO UnixWare 7.0.1
<LI>

Tru64 Unix
<LI>

Win95, Win98 and NT (the newest version is currently available only for
users with a <STRONG>MySQL</STRONG> license or <STRONG>MySQL</STRONG> email support).
For those who wish to test before they buy, we have released
<a HREF="http://www.mysql.com/mysql_w32.htmy"><STRONG>MySQL</STRONG> 3.21.29</a> (an
older version) as shareware.
</UL>

<P>
<A NAME="IDX32"></A>
<A NAME="IDX33"></A>
<A NAME="IDX34"></A>
<A NAME="IDX35"></A>
<A NAME="IDX36"></A>


<H2><A NAME="Which_version" HREF="manual_toc.html#Which_version">4.3  Which <STRONG>MySQL</STRONG> version to use</A></H2>

<P>
The first decision to make is whether you want to use the latest development
release or the last stable release:

</P>

<UL>
<LI>

Normally, if you are beginning to use <STRONG>MySQL</STRONG> for the first time or
trying to port it to some system for which there is no binary distribution,
we recommend going with the development release (currently 3.22.x). This is
because there are usually no really serious bugs in the development release,
and you can easily test it on your machine with the <CODE>crash-me</CODE> and
benchmark tests.
See section <A HREF="manual.html#Benchmarks">11  The <STRONG>MySQL</STRONG> benchmark suite</A>.

<LI>

Otherwise, if you are running an old system and want to upgrade, but don't
want to take chances with 3.22, you should upgrade to 3.21.33.  We have tried
to fix only fatal bugs and make small, relatively safe changes to that
version.
</UL>

<P>
The second decision to make is whether you want to use a source distribution or
a binary distribution:

</P>

<UL>
<LI>

If you want to run <STRONG>MySQL</STRONG> on a platform for which a current binary
distribution exists, use that.  Generally, it will be easier to install
than a source distribution.

<LI>

If you want to read (and/or modify) the C and C++ code that makes up
<STRONG>MySQL</STRONG>, you should get a source distribution. The source code is
always the ultimate manual. Source distributions also contain more
tests and examples than binary distributions.
</UL>

<P>
The <STRONG>MySQL</STRONG> naming scheme uses release numbers that consist of three
numbers and a suffix.  For example, a release name like
<CODE>mysql-3.21.17-beta</CODE> is interpreted like this:

</P>

<UL>
<LI>

The first number (<CODE>3</CODE>) describes the file format.  All
version 3 releases have the same file format. When a version 4 appears, every
table will have to be converted to the new format (nice tools for this will
be included, of course).

<LI>

The second number (<CODE>21</CODE>) is the release level. Normally there are two to
choose from. One is the release/stable branch (currently <CODE>21</CODE>) and the
other is the development branch (currently <CODE>22</CODE>) . Normally both are
stable, but the development version may have quirks, missing documentation on
new features or may fail to compile on some systems.

<LI>

The third number (<CODE>17</CODE>) is the version number within the
release level. This is incremented for each new distribution. Usually you
want the latest version for the release level you have choosen.

<LI>

The suffix (<CODE>beta</CODE>) indicates the stability level of
the release.  The possible suffixes are:


<UL>
<LI><CODE>alpha</CODE> indicates that the release contains some large section of

new code that hasn't been 100% tested.  Known bugs (usually there are none)
should be documented in the News section.  See section <A HREF="manual.html#News">D  <STRONG>MySQL</STRONG> change history</A>.  There are also new
commands and extensions in most alpha releases.

<LI>

<CODE>beta</CODE> means that all new code has been tested. No major new features
were added. There should be no known bugs.

<LI>

<CODE>gamma</CODE> is a beta that has been around a while and seems to work fine.
This is what many other companies call a release.

<LI>

If there is no suffix, it means that the version has been run for a while
at many different sites with no reports of bugs other than platform-specific
bugs.  This is what we call a stable release.
</UL>

</UL>

<P>
All versions of <STRONG>MySQL</STRONG> are run through our standard tests and
benchmarks to ensure that they are relatively safe to use.  Since the standard
tests are extended over time to check for all previously found bugs,
the test suite keeps getting better.

</P>
<P>
Note that all releases have been tested at least with:

</P>
<DL COMPACT>

<DT>An internal test suite
<DD>
This is part of a production system for a customer. It has many tables with
hundreds of megabytes of data.

<DT>The <STRONG>MySQL</STRONG> benchmark suite
<DD>
This runs a range of common queries. It is also a test to see whether the
latest batch of optimizations actually made the code faster.
See section <A HREF="manual.html#Benchmarks">11  The <STRONG>MySQL</STRONG> benchmark suite</A>.

<DT>The <CODE>crash-me</CODE> test
<DD>
This tries to determine what features the database supports and what its
capabilities and limitations are.
See section <A HREF="manual.html#Benchmarks">11  The <STRONG>MySQL</STRONG> benchmark suite</A>.
</DL>

<P>
Another test is that we use the newest <STRONG>MySQL</STRONG> version in our internal
production environment, on at least one machine.  We have more than 100
gigabytes of data to work with.

</P>


<H2><A NAME="Many_versions" HREF="manual_toc.html#Many_versions">4.4  How and when updates are released</A></H2>

<P>
<STRONG>MySQL</STRONG> is evolving quite rapidly here at TcX and we want
to share this with other <STRONG>MySQL</STRONG> users. We try to make a release
when we have very useful features that others seem to have a need for.

</P>
<P>
We also try to help out users who request features that are easy to
implement. We also take note of what our licensed users want to have and
we especially take note of what our extended email supported customers
want and try to help them out.

</P>
<P>
No one has to download a new release. The News section will tell you if
the new release has something you really want. See section <A HREF="manual.html#News">D  <STRONG>MySQL</STRONG> change history</A>.

</P>
<P>
We use the following policy when updating <STRONG>MySQL</STRONG>:

</P>

<UL>
<LI>

For each minor update, the last number in the version string is incremented.
When there are major new features or minor incompatibilities with previous
versions, the second number in the version string is incremented. When the
file format changes, the first number is increased.

<LI>

Stable tested releases are meant to appear about 1-2 times a year, but
if small bugs are found, a release with only bug-fixes will be released.

<LI>

Working releases are meant to appear about every 1-8 weeks.

<LI>

Binary distributions for some platforms will be made by us for major releases.
Other people may make binary distributions for other systems but probably
less frequently.

<LI>

We usually make patches available as soon as we have located and fixed
small bugs.

<LI>

For non-critical but annoying bugs, we will make patches available if they
are sent to us. Otherwise we will combine many of them into a larger
patch.

<LI>

If there is, by any chance, a fatal bug in a release we will make a new
release as soon as possible. We would like other companies to do this,
too. :)
</UL>

<P>
The current stable release is 3.22; We have already moved active
development to 3.23. Bugs will still be fixed in the stable version. We
don't believe in a complete freeze, as this also leaves out bug fixes
and things that "must be done". "Somewhat frozen" means that we may
add small things that "almost surely will not affect anything that's
already working".

</P>


<H2><A NAME="Installation_layouts" HREF="manual_toc.html#Installation_layouts">4.5  Installation layouts</A></H2>

<P>
This section describes the default layout of the directories created by
installing binary and source distributions.

</P>
<P>
A binary distribution is installed by unpacking it at the installation
location you choose (typically <TT>`/usr/local/mysql'</TT>) and creates the
following directories in that location:

</P>
<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><STRONG>Directory</STRONG> </TD><TD> <STRONG>Contents of directory</STRONG>
</TR NOSAVE>
<TR><TD><TT>`bin'</TT> </TD><TD> Client programs and the <CODE>mysqld</CODE> server
</TR NOSAVE>
<TR><TD><TT>`data'</TT> </TD><TD> Log files, databases
</TR NOSAVE>
<TR><TD><TT>`include'</TT> </TD><TD> Include (header) files
</TR NOSAVE>
<TR><TD><TT>`lib'</TT> </TD><TD> Libraries
</TR NOSAVE>
<TR><TD><TT>`scripts'</TT> </TD><TD> <CODE>mysql_install_db</CODE>
</TR NOSAVE>
<TR><TD><TT>`share/mysql'</TT> </TD><TD> Error message files
</TR NOSAVE>
<TR><TD><TT>`sql-bench'</TT> </TD><TD> Benchmarks
</TR>
</TABLE>

<P>
A source distribution is installed after you configure and compile it.  By
default, the installation step installs files under <TT>`/usr/local'</TT>, in the
following subdirectories:

</P>
<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><STRONG>Directory</STRONG> </TD><TD> <STRONG>Contents of directory</STRONG>
</TR NOSAVE>
<TR><TD><TT>`bin'</TT> </TD><TD> Client programs and scripts
</TR NOSAVE>
<TR><TD><TT>`include/mysql'</TT> </TD><TD> Include (header) files
</TR NOSAVE>
<TR><TD><TT>`info'</TT> </TD><TD> Documentation in Info format
</TR NOSAVE>
<TR><TD><TT>`lib/mysql'</TT> </TD><TD> Libraries
</TR NOSAVE>
<TR><TD><TT>`libexec'</TT> </TD><TD> The <CODE>mysqld</CODE> server
</TR NOSAVE>
<TR><TD><TT>`share/mysql'</TT> </TD><TD> Error message files
</TR NOSAVE>
<TR><TD><TT>`sql-bench'</TT> </TD><TD> Benchmarks and <CODE>crash-me</CODE> test
</TR NOSAVE>
<TR><TD><TT>`var'</TT> </TD><TD> Databases and log files.
</TR>
</TABLE>

<P>
Within an installation directory, the layout of a source installation differs
from that of a binary installation in the following ways:

</P>

<UL>
<LI>

The <CODE>mysqld</CODE> server is installed in the <TT>`libexec'</TT>
directory rather than in the <TT>`bin'</TT> directory.

<LI>

The data directory is <TT>`var'</TT> rather than <TT>`data'</TT>.

<LI>

<CODE>mysql_install_db</CODE> is installed in the <TT>`/usr/local/bin'</TT> directory
rather than in <TT>`/usr/local/mysql/scripts'</TT>.

<LI>

The header file and library directories are <TT>`include/mysql'</TT> and
<TT>`lib/mysql'</TT> rather than <TT>`include'</TT> and <TT>`lib'</TT>.
</UL>



<H2><A NAME="Installing_binary" HREF="manual_toc.html#Installing_binary">4.6  Installing a <STRONG>MySQL</STRONG> binary distribution</A></H2>

<P>
You need the following tools to install a <STRONG>MySQL</STRONG> binary distribution:

</P>

<UL>
<LI>

GNU <CODE>gunzip</CODE> to uncompress the distribution.

<LI>

A reasonable <CODE>tar</CODE> to unpack the distribution. GNU <CODE>tar</CODE> is
known to work.
</UL>

<P>
<A NAME="IDX37"></A>
<A NAME="IDX38"></A>
An alternative installation method under Linux is to use RPM (RedHat Package
Manager) distributions. See section <A HREF="manual.html#Linux-RPM">4.6.1  Linux RPM notes</A>.

</P>
<P>
If you run into problems, <STRONG>PLEASE ALWAYS USE</STRONG> <CODE>mysqlbug</CODE> when
posting questions to <a HREF="mailto:mysql@lists.mysql.com">mysql@lists.mysql.com</a>.  Even if the problem
isn't a bug, <CODE>mysqlbug</CODE> gathers system information that will help others
solve your problem.  By not using <CODE>mysqlbug</CODE>, you lessen the likelihood
of getting a solution to your problem!  You will find <CODE>mysqlbug</CODE> in the
<TT>`bin'</TT> directory after you unpack the distribution.  See section <A HREF="manual.html#Bug_reports">2.3  How to report bugs or problems</A>.

</P>
<P>
The basic commands you must execute to install and use a <STRONG>MySQL</STRONG>
binary distribution are:

</P>

<PRE>
shell&#62; gunzip &#60; mysql-VERSION-OS.tar.gz | tar xvf -
shell&#62; ln -s mysql-VERSION-OS mysql
shell&#62; cd mysql
shell&#62; scripts/mysql_install_db
shell&#62; bin/safe_mysqld &#38;
</PRE>

<P>
You can add new users using the <CODE>bin/mysql_setpermission</CODE> script if
you install the <CODE>DBI</CODE> and <CODE>Msql-Mysql-modules</CODE> Perl modules.

</P>
<P>
Here follows a more detailed description:

</P>
<P>
To install a binary distribution, follow the steps below, then proceed
to section <A HREF="manual.html#Post-installation">4.15  Post-installation setup and testing</A>, for post-installation setup and testing:

</P>

<OL>
<LI>

Pick the directory under which you want to unpack the distribution, and move
into it.  In the example below, we unpack the distribution under
<TT>`/usr/local'</TT> and create a directory <TT>`/usr/local/mysql'</TT> into which
<STRONG>MySQL</STRONG> is installed.  (The following instructions therefore assume
you have permission to create files in <TT>`/usr/local'</TT>.  If that directory
is protected, you will need to perform the installation as <CODE>root</CODE>.)

<LI>

Obtain a distribution file from one of the sites listed in
section <A HREF="manual.html#Getting_MySQL">4.1  How to get <STRONG>MySQL</STRONG></A>.

<STRONG>MySQL</STRONG> binary distributions are provided as compressed <CODE>tar</CODE>
archives and have names like <TT>`mysql-VERSION-OS.tar.gz'</TT>, where
<CODE>VERSION</CODE> is a number (e.g., <CODE>3.21.15</CODE>), and <CODE>OS</CODE> indicates
the type of operating system for which the distribution is intended (e.g.,
<CODE>pc-linux-gnu-i586</CODE>).

<LI>

Unpack the distribution and create the installation directory:


<PRE>
shell&#62; gunzip &#60; mysql-VERSION-OS.tar.gz | tar xvf -
shell&#62; ln -s mysql-VERSION-OS mysql
</PRE>

The first command creates a directory named <TT>`mysql-VERSION-OS'</TT>.  The
second command makes a symbolic link to that directory.  This lets you refer
more easily to the installation directory as <TT>`/usr/local/mysql'</TT>.

<LI>

Change into the installation directory:


<PRE>
shell&#62; cd mysql
</PRE>

You will find several files and subdirectories in the <CODE>mysql</CODE> directory.
The most important for installation purposes are the <TT>`bin'</TT> and
<TT>`scripts'</TT> subdirectories.

<DL COMPACT>

<DT><TT>`bin'</TT>
<DD>
<A NAME="IDX39"></A>
<A NAME="IDX40"></A>
This directory contains client programs and the server
You should add the full pathname of this directory to your
<CODE>PATH</CODE> environment variable so that your shell finds the <STRONG>MySQL</STRONG>
programs properly.
<DT><TT>`scripts'</TT>
<DD>
This directory contains the <CODE>mysql_install_db</CODE> script used to initialize
the server access permissions.
</DL>

<LI>

If you would like to use <CODE>mysqlaccess</CODE> and have the <STRONG>MySQL</STRONG>
distribution in some nonstandard place, you must change the location where
<CODE>mysqlaccess</CODE> expects to find the <CODE>mysql</CODE> client. Edit the
<TT>`bin/mysqlaccess'</TT> script at approximately line 18. Search for a line
that looks like this:


<PRE>
$MYSQL     = '/usr/local/bin/mysql';    # path to mysql executable
</PRE>

Change the path to reflect the location where <CODE>mysql</CODE> actually is
stored on your system.  If you do not do this, you will get a <CODE>broken
pipe</CODE> error when you run <CODE>mysqlaccess</CODE>.

<LI>

Create the <STRONG>MySQL</STRONG> grant tables (necessary only if you haven't
installed <STRONG>MySQL</STRONG> before):

<PRE>
shell&#62; scripts/mysql_install_db
</PRE>

<LI>

If you want to install support for the Perl <CODE>DBI</CODE>/<CODE>DBD</CODE> interface,
see section <A HREF="manual.html#Perl_support">4.10  Perl installation comments</A>.

<LI>

If you would like <STRONG>MySQL</STRONG> to start automatically when you boot your
machine, you can copy <CODE>support-files/mysql.server</CODE> to the location where
your system has its startup files. More information can be found in the
<CODE>support-files/mysql.server</CODE> script itself, and in section <A HREF="manual.html#Automatic_start">4.15.3  Starting and stopping <STRONG>MySQL</STRONG> automatically</A>.

</OL>

<P>
After everything has been unpacked and installed, you should initialize
and test your distribution.

</P>
<P>
You can start the <STRONG>MySQL</STRONG> server with the following command:

</P>

<PRE>
shell&#62; bin/safe_mysqld &#38;
</PRE>

<P>
Note that <STRONG>MySQL</STRONG> versions before 3.22.10 started the <STRONG>MySQL</STRONG>
server when you run <CODE>mysql_install_db</CODE>.  This is no longer true!

</P>
<P>
See section <A HREF="manual.html#Post-installation">4.15  Post-installation setup and testing</A>.

</P>
<P>
<A NAME="IDX41"></A>
<A NAME="IDX42"></A>


<H3><A NAME="Linux-RPM" HREF="manual_toc.html#Linux-RPM">4.6.1  Linux RPM notes</A></H3>

<P>
The recommended way to install <STRONG>MySQL</STRONG> on Linux is by using an RPM
file. The <STRONG>MySQL</STRONG> RPMs are currently being built on a RedHat 5.2
system but should work on other versions of Linux that support <CODE>rpm</CODE> and
use <CODE>glibc</CODE>.

</P>
<P>
If you have problems with an RPM file, for example <CODE>Sorry, the host
'xxxx' could not be looked up</CODE>, see section <A HREF="manual.html#Binary_notes-Linux">4.6.3.1  Linux notes</A>.

</P>
<P>
The RPM files you may want to use are:

</P>

<UL>
<LI><CODE>MySQL-VERSION.i386.rpm</CODE>

The <STRONG>MySQL</STRONG> server.  You will need this unless you only want to
connect to another <STRONG>MySQL</STRONG> server running on another machine.

<LI><CODE>MySQL-client-VERSION.i386.rpm</CODE>

The standard <STRONG>MySQL</STRONG> client programs. You probably always want to
install this package.

<LI><CODE>MySQL-bench-VERSION.i386.rpm</CODE>

Tests and benchmarks. Requires Perl and msql-mysql-modules RPMs.

<LI><CODE>MySQL-devel-VERSION.i386.rpm</CODE>

Libraries and include files needed if you want to compile other
<STRONG>MySQL</STRONG> clients, such as the Perl modules.

<LI><CODE>MySQL-VERSION.src.rpm</CODE>

This contains the source code for all of the above packages. It can also
be used to try to build RPMs for other architectures (for example, Alpha
or SPARC).
</UL>

<P>
To see all files in an RPM package:

<PRE>
shell&#62; rpm -qpl MySQL-VERSION.i386.rpm
</PRE>

<P>
To perform a standard minimal installation, run this command:

</P>

<PRE>
shell&#62; rpm -i MySQL-VERSION.i386.rpm MySQL-client-VERSION.i386.rpm
</PRE>

<P>
To install just the client package:

</P>

<PRE>
shell&#62; rpm -i MySQL-client-VERSION.i386.rpm
</PRE>

<P>
The RPM places data in <TT>`/var/lib/mysql'</TT>. The RPM also creates the
appropriate entries in <TT>`/sbin/rc.d/'</TT> to start the server automatically
at boot time.  (This means that if you have performed a previous
installation, you may want to make a copy of your previously-installed
<STRONG>MySQL</STRONG> startup file if you made any changes to it, so you don't lose
your changes.)

</P>
<P>
After installing the RPM file(s), go to the binary install section and use
the instructions there, starting from the step that creates the
<STRONG>MySQL</STRONG> grant tables.
See section <A HREF="manual.html#Installing_binary">4.6  Installing a <STRONG>MySQL</STRONG> binary distribution</A>.

</P>
<P>
<A NAME="IDX43"></A>
<A NAME="IDX44"></A>


<H3><A NAME="Building_clients" HREF="manual_toc.html#Building_clients">4.6.2  Building client programs</A></H3>

<P>
If you compile <STRONG>MySQL</STRONG> clients that you've written yourself or that
you obtain from a third party, they must be linked using the
<CODE>-lmysqlclient</CODE> option on the link command.  You may also need to
specify a <CODE>-L</CODE> option to tell the linker where to find the library.  For
example, if the library is installed in <TT>`/usr/local/mysql/lib'</TT>, use
<CODE>-L/usr/local/mysql/lib -lmysqlclient</CODE> on the link command.

</P>
<P>
For clients that use <STRONG>MySQL</STRONG> header files, you may need to specify a
<CODE>-I</CODE> option when you compile them (for example,
<CODE>-I/usr/local/mysql/include</CODE>), so the compiler can find the header
files.

</P>


<H3><A NAME="Binary_install_system_issues" HREF="manual_toc.html#Binary_install_system_issues">4.6.3  System-specific issues</A></H3>

<P>
The following sections indicate some of the issues that have been observed to
occur on particular systems when installing <STRONG>MySQL</STRONG> from a binary
distribution.

</P>


<H4><A NAME="Binary_notes-Linux" HREF="manual_toc.html#Binary_notes-Linux">4.6.3.1  Linux notes</A></H4>

<P>
<STRONG>MySQL</STRONG> needs at least Linux 2.0.

</P>
<P>
The binary release is linked with <CODE>-static</CODE>, which means you not
normally need not worry about which version of the system libraries you
have. You need not install LinuxThreads, either.  A program linked with
<CODE>-static</CODE> is slightly bigger than a dynamically-linked program but
also slightly faster (3-5%).  The only problem is that you can't use
user definable functions (UDFs) with a statically-linked program.  If
you are going to write or use UDF functions (this is something only for
C or C++ programmers) you must compile <STRONG>MySQL</STRONG> yourself, using
dynamic linking.

</P>
<P>
If you are using a <CODE>libc</CODE>-based system (instead of a <CODE>glibc2</CODE>
system), you will probably get some problems with hostname resolving
with the binary release.  (This is because <CODE>glibc</CODE> unfortunately
depends on some external libraries to resolve hostnames, even when
compiled with <CODE>-static</CODE>). In this case you probably get the
following error message when you run <CODE>mysql_install_db</CODE>:

</P>

<PRE>
Sorry, the host 'xxxx' could not be looked up
</PRE>

<P>
You can solve this problem one of the following ways:

</P>

<UL>
<LI>

Get a <STRONG>MySQL</STRONG> source distribution (an RPM or the <CODE>tar</CODE>
distribution) and install this instead.
<LI>

Execute <CODE>mysql_install_db --force</CODE>; This will not execute the
<CODE>resolveip</CODE> test in <CODE>mysql_install_db</CODE>.  The downside is that
you can't use host names in the grant tables; you must use IP numbers
instead (except for <CODE>localhost</CODE>).  If you are using an old <STRONG>MySQL</STRONG>
release that doesn't support <CODE>--force</CODE> you have to remove the
<CODE>resolveip</CODE> test in <CODE>mysql_install</CODE> with an editor.
</UL>

<P>
The Linux-Intel binary and RPM releases of <STRONG>MySQL</STRONG> are configured
for the highest possible speed. We are always trying to use the fastest
stable compiler available.

</P>
<P>
<STRONG>MySQL</STRONG> Perl support requires Perl 5.004_03 or newer.

</P>


<H4><A NAME="Binary_notes-HP-UX" HREF="manual_toc.html#Binary_notes-HP-UX">4.6.3.2  HP-UX notes</A></H4>

<P>
The binary distribution of <STRONG>MySQL</STRONG> for HP-UX is distributed as an
HP depot file.  This means that you must be running at least HP-UX 10.x
to have access to HP's software depot tools.

</P>
<P>
The HP version of <STRONG>MySQL</STRONG> was compiled on an HP 9000/8xx server
under HP-UX 10.20, and uses MIT-pthreads. It is known to work
well under this configuration. This version does <STRONG>not</STRONG> use HP's native
thread package. It is highly unlikely that <STRONG>MySQL</STRONG> will use HP native
threads on anything but HP-UX 10.30 or later.

</P>
<P>
Other configurations that may work:

</P>

<UL>
<LI>

HP 9000/7xx running HP-UX 10.20+
<LI>

HP 9000/8xx running HP-UX 10.30 (does not use HP native threads)
</UL>

<P>
The following configurations almost definitely won't work:

</P>

<UL>
<LI>

HP 9000/7xx or 8xx running HP-UX 10.x where x &#60; 2
<LI>

HP 9000/7xx or 8xx running HP-UX 9.x
</UL>

<P>
To install the distribution, use one of the commands below, where
<CODE>/path/to/depot</CODE> is the full pathname of the depot file:

</P>

<UL>
<LI>

To install everything, including the server, client and development tools:


<PRE>
shell&#62; /usr/sbin/swinstall -s /path/to/depot mysql.full
</PRE>

<LI>

To install only the server:


<PRE>
shell&#62; /usr/sbin/swinstall -s /path/to/depot mysql.server
</PRE>

<LI>

To install only the client package:


<PRE>
shell&#62; /usr/sbin/swinstall -s /path/to/depot mysql.client
</PRE>

<LI>

To install only the development tools:


<PRE>
shell&#62; /usr/sbin/swinstall -s /path/to/depot mysql.developer
</PRE>

</UL>

<P>
The depot places binaries and libraries in <TT>`/opt/mysql'</TT> and data in
<TT>`/var/opt/mysql'</TT>. The depot also creates the appropriate entries in
<TT>`/sbin/init.d'</TT> and <TT>`/sbin/rc2.d'</TT> to start the server automatically
at boot time. Obviously, this entails being <CODE>root</CODE> to install.

</P>


<H2><A NAME="Installing_source" HREF="manual_toc.html#Installing_source">4.7  Installing a <STRONG>MySQL</STRONG> source distribution</A></H2>

<P>
You need the following tools to build and install <STRONG>MySQL</STRONG> from source:

</P>

<UL>
<LI>

GNU <CODE>gunzip</CODE> to uncompress the distribution.

<LI>

A reasonable <CODE>tar</CODE> to unpack the distribution. GNU <CODE>tar</CODE> is
known to work.

<LI>

A working ANSI C++ compiler. <CODE>gcc</CODE> &#62;= 2.8.1, <CODE>egcs</CODE> &#62;=
1.0.2, SGI C++ and SunPro C++ are some of the compilers that are known to
work.  <CODE>libg++</CODE> is not needed when using <CODE>gcc</CODE>.  <CODE>gcc</CODE>
2.7.x has a bug that makes it impossible to compile some perfectly legal
C++ files, such as <TT>`sql/sql_base.cc'</TT>. If you only have <CODE>gcc</CODE> 2.7.x,
you must upgrade your <CODE>gcc</CODE> to be able to compile <STRONG>MySQL</STRONG>.

<LI>

A good <CODE>make</CODE> program.  GNU <CODE>make</CODE> is always recommended and is
sometimes required.  If you have problems, we recommend trying GNU
<CODE>make</CODE> 3.75 or newer.
</UL>

<P>
If you run into problems, <STRONG>PLEASE ALWAYS USE <CODE>mysqlbug</CODE></STRONG> when
posting questions to <a HREF="mailto:mysql@lists.mysql.com">mysql@lists.mysql.com</a>.  Even if the problem
isn't a bug, <CODE>mysqlbug</CODE> gathers system information that will help others
solve your problem.  By not using <CODE>mysqlbug</CODE>, you lessen the likelihood
of getting a solution to your problem!  You will find <CODE>mysqlbug</CODE> in the
<TT>`scripts'</TT> directory after you unpack the distribution.  See section <A HREF="manual.html#Bug_reports">2.3  How to report bugs or problems</A>.

</P>



<H3><A NAME="Quick_install" HREF="manual_toc.html#Quick_install">4.7.1  Quick installation overview</A></H3>

<P>
The basic commands you must execute to install a <STRONG>MySQL</STRONG> source
distribution are (from an unpacked <CODE>tar</CODE> file):

</P>

<PRE>
shell&#62; configure
shell&#62; make
shell&#62; make install
shell&#62; scripts/mysql_install_db
shell&#62; /usr/local/mysql/bin/safe_mysqld &#38;
</PRE>

<P>
If you start from a source RPM, then do the following.

</P>

<PRE>
shell&#62; rpm --rebuild MySQL-VERSION.src.rpm
</PRE>

<P>
This will make a binary RPM that you can install.

</P>
<P>
You can add new users using the <CODE>bin/mysql_setpermission</CODE> script if
you install the <CODE>DBI</CODE> and <CODE>Msql-Mysql-modules</CODE> Perl modules.

</P>
<P>
Here follows a more detailed description:

</P>
<P>
To install a source distribution, follow the steps below, then proceed
to section <A HREF="manual.html#Post-installation">4.15  Post-installation setup and testing</A>, for post-installation initialization and testing.

</P>

<OL>
<LI>

Pick the directory under which you want to unpack the distribution, and move
into it.

<LI>

Obtain a distribution file from one of the sites listed in
section <A HREF="manual.html#Getting_MySQL">4.1  How to get <STRONG>MySQL</STRONG></A>.

<STRONG>MySQL</STRONG> source distributions are provided as compressed <CODE>tar</CODE>
archives and have names like <TT>`mysql-VERSION.tar.gz'</TT>, where
<CODE>VERSION</CODE> is a number like 3.23.1-alpha.

<LI>

Unpack the distribution into the current directory:

<PRE>
shell&#62; gunzip &#60; mysql-VERSION.tar.gz | tar xvf -
</PRE>

This command creates a directory named <TT>`mysql-VERSION'</TT>.

<LI>

Change into the top-level directory of the unpacked distribution:

<PRE>
shell&#62; cd mysql-VERSION
</PRE>

<LI>

Configure the release and compile everything:

<PRE>
shell&#62; ./configure --prefix=/usr/local/mysql
shell&#62; make
</PRE>

When you run <CODE>configure</CODE>, you might want to specify some options.
Run <CODE>./configure --help</CODE> for a list of options.
section <A HREF="manual.html#configure_options">4.7.3  Typical <CODE>configure</CODE> options</A>, discusses some of the
more useful options.

If <CODE>configure</CODE> fails, and you are going to send mail to
lines from <TT>`config.log'</TT> that you think can help solve the problem.  Also
include the last couple of lines of output from <CODE>configure</CODE> if
<CODE>configure</CODE> aborts. Post the bug report using the <CODE>mysqlbug</CODE>
script.  See section <A HREF="manual.html#Bug_reports">2.3  How to report bugs or problems</A>.

If the compile fails, see section <A HREF="manual.html#Compilation_problems">4.8  Problems compiling?</A>, for help with
a number of common problems.

<LI>

Install everything:

<PRE>
shell&#62; make install
</PRE>

You might need to run this command as <CODE>root</CODE>.

<LI>

Create the <STRONG>MySQL</STRONG> grant tables (necessary only if you haven't
installed <STRONG>MySQL</STRONG> before):

<PRE>
shell&#62; scripts/mysql_install_db
</PRE>

<LI>

If you want to install support for the Perl <CODE>DBI</CODE>/<CODE>DBD</CODE> interface,
see section <A HREF="manual.html#Perl_support">4.10  Perl installation comments</A>.

<LI>

If you would like <STRONG>MySQL</STRONG> to start automatically when you boot your
machine, you can copy <CODE>support-files/mysql.server</CODE> to the location where
your system has its startup files. More information can be found in the
<CODE>support-files/mysql.server</CODE> script itself, and in section <A HREF="manual.html#Automatic_start">4.15.3  Starting and stopping <STRONG>MySQL</STRONG> automatically</A>.
</OL>

<P>
After everything has been installed, you should initialize and test your
distribution.

</P>
<P>
You can start the <STRONG>MySQL</STRONG> server with the following command,
where <CODE>BINDIR</CODE> is the directory in which <CODE>safe_mysqld</CODE> is
installed (<TT>`/usr/local/bin'</TT> by default):

</P>

<PRE>
shell&#62; BINDIR/safe_mysqld &#38;
</PRE>

<P>
If that command fails immediately with <CODE>mysqld daemon ended</CODE> then you can
find some information in the file
<TT>`mysql-data-directory/'hostname'.err'</TT>.  The likely reason is that
you already have another <CODE>mysqld</CODE> server running.  See section <A HREF="manual.html#Multiple_servers">18.3  Running multiple <STRONG>MySQL</STRONG> servers on the same machine</A>.

</P>
<P>
Note that <STRONG>MySQL</STRONG> versions before 3.22.10 started the <STRONG>MySQL</STRONG>
server when you run <CODE>mysql_install_db</CODE>.  This is no longer true!

</P>
<P>
See section <A HREF="manual.html#Post-installation">4.15  Post-installation setup and testing</A>.

</P>


<H3><A NAME="Applying_patches" HREF="manual_toc.html#Applying_patches">4.7.2  Applying patches</A></H3>

<P>
Sometimes patches appear on the mailing list or are placed in the
<a HREF="ftp://www.mysql.com/pub/mysql/Downloads/Patches">patches area</a> of the
<STRONG>MySQL</STRONG> FTP site.

</P>
<P>
To apply a patch from the mailing list, save the message in which the patch
appears in a file, change into the top-level directory of your <STRONG>MySQL</STRONG>
source tree and run these commands:

</P>

<PRE>
shell&#62; patch -p1 &#60; patch-file-name
shell&#62; rm config.cache
shell&#62; make clean
</PRE>

<P>
Patches from the FTP site are distributed as plain text files or as files
compressed with <CODE>gzip</CODE> files.  Apply a plain patch as shown above for
mailing list patches.  To apply a compressed patch, change into the
top-level directory of your <STRONG>MySQL</STRONG> source tree and run these
commands:

</P>

<PRE>
shell&#62; gunzip &#60; patch-file-name.gz | patch -p1
shell&#62; rm config.cache
shell&#62; make clean
</PRE>

<P>
After applying a patch, follow the instructions for a normal source install,
beginning with the <CODE>./configure</CODE> step.  After running the <CODE>make
install</CODE> step, restart your <STRONG>MySQL</STRONG> server.

</P>
<P>
You may need to bring down any currently running server before you run
<CODE>make install</CODE>.  (Use <CODE>mysqladmin shutdown</CODE> to do this.)  Some
systems do not allow you to install a new version of a program if it replaces
the version that is currently executing.

</P>


<H3><A NAME="configure_options" HREF="manual_toc.html#configure_options">4.7.3  Typical <CODE>configure</CODE> options</A></H3>

<P>
The <CODE>configure</CODE> script gives you a great deal of control over how you
configure your <STRONG>MySQL</STRONG> distribution.  Typically you do this using
options on the <CODE>configure</CODE> command line.  You can also affect
<CODE>configure</CODE> using certain environment variables.  For a list of options
supported by <CODE>configure</CODE>, run this command:

</P>

<PRE>
shell&#62; ./configure --help
</PRE>

<P>
Some of the more commonly-used <CODE>configure</CODE> options are described below:

</P>

<UL>
<LI>

To compile just the <STRONG>MySQL</STRONG> client libraries and client programs and
not the server, use the <CODE>--without-server</CODE> option:


<PRE>
shell&#62; ./configure --without-server
</PRE>

If you don't have a C++ compiler, <CODE>mysql</CODE> will not compile (it is the
one client program that requires C++).  In this case,
you can remove the code in <CODE>configure</CODE> that tests for the C++ compiler
and then run <CODE>./configure</CODE> with the <CODE>--without-server</CODE> option. The
compile step will still try to build <CODE>mysql</CODE>, but you can ignore any
warnings about <TT>`mysql.cc'</TT>.  (If <CODE>make</CODE> stops, try <CODE>make -k</CODE>
to tell it to continue with the rest of the build even if errors occur.)

<LI>

If you don't want your log files and database directories located under
<TT>`/usr/local/var'</TT>, use a <CODE>configure</CODE> command something like one
of these:

<PRE>
shell&#62; ./configure --prefix=/usr/local/mysql
shell&#62; ./configure --prefix=/usr/local \
           --localstatedir=/usr/local/mysql/data
</PRE>

The first command changes the installation prefix so that everything is
installed under <TT>`/usr/local/mysql'</TT> rather than the default of
<TT>`/usr/local'</TT>.  The second command preserves the default installation
prefix, but overrides the default location for database directories
(normally <TT>`/usr/local/var'</TT>) and changes it to
<CODE>/usr/local/mysql/data</CODE>.

<LI>

If you are using Unix and you want the <STRONG>MySQL</STRONG> socket located somewhere
other than the default location (normally in the directory <TT>`/tmp'</TT> or
<TT>`/var/run'</TT>, use a <CODE>configure</CODE> command like this:

<PRE>
shell&#62; ./configure --with-unix-socket-path=/usr/local/mysql/tmp/mysql.sock
</PRE>

Note that the given file must be an absolute pathname!

<LI>

If you want to compile statically-linked programs (e.g., to make a binary
distribution, to get more speed or to work around problems with some RedHat
distributions), run <CODE>configure</CODE> like this:


<PRE>
shell&#62; ./configure --with-client-ldflags=-all-static \
           --with-mysqld-ldflags=-all-static
</PRE>

<LI>

If you are using <CODE>gcc</CODE> and don't have <CODE>libg++</CODE> or <CODE>libstdc++</CODE>
installed, you can tell <CODE>configure</CODE> to use <CODE>gcc</CODE> as your C++
compiler:

<A NAME="IDX45"></A>
<A NAME="IDX46"></A>
<A NAME="IDX47"></A>
<A NAME="IDX48"></A>

<PRE>
shell&#62; CC=gcc CXX=gcc ./configure
</PRE>

When you use <CODE>gcc</CODE> as your C++ compiler, it will not attempt to link in
<CODE>libg++</CODE> or <CODE>libstdc++</CODE>.

If the build fails and produces errors about your compiler or linker not
being able to create the shared library <TT>`libmysqlclient.so.#'</TT> (<SAMP>`#'</SAMP>
is a version number), you can work around this problem by giving the
<CODE>--disable-shared</CODE> option to <CODE>configure</CODE>.  In this case,
<CODE>configure</CODE> will not build a shared <CODE>libmysqlclient.so.#</CODE> library.

<LI>

You can configure <STRONG>MySQL</STRONG> not to use <CODE>DEFAULT</CODE> column values for
non-<CODE>NULL</CODE> columns (i.e., columns that are not allowed to be
<CODE>NULL</CODE>).  This causes <CODE>INSERT</CODE> statements to generate an error
unless you explicitly specify values for all columns that require a
non-<CODE>NULL</CODE> value.  To suppress use of default values, run
<CODE>configure</CODE> like this:

<A NAME="IDX49"></A>
<A NAME="IDX50"></A>

<PRE>
shell&#62; CXXFLAGS=-DDONT_USE_DEFAULT_FIELDS ./configure
</PRE>

<LI>

By default, <STRONG>MySQL</STRONG> uses the ISO-8859-1 (Latin1) character set. To
change the default set, use the <CODE>--with-charset</CODE> option:

<PRE>
shell&#62; ./configure --with-charset=CHARSET
</PRE>

<CODE>CHARSET</CODE> may be one of <CODE>big5</CODE>, <CODE>cp1251</CODE>, <CODE>cp1257</CODE>,
<CODE>czech</CODE>, <CODE>danish</CODE>,<CODE>dec8</CODE>, <CODE>dos</CODE>, <CODE>euc_kr</CODE>,
<CODE>german1</CODE>, <CODE>hebrew</CODE>, <CODE>hp8</CODE>, <CODE>hungarian</CODE>,
<CODE>koi8_ru</CODE>, <CODE>koi8_ukr</CODE>, <CODE>latin1</CODE>, <CODE>latin2</CODE>,
<CODE>sjis</CODE>, <CODE>swe7</CODE>, <CODE>tis620</CODE>, <CODE>ujis</CODE>, <CODE>usa7</CODE>,
<CODE>win1251</CODE> or <CODE>win1251ukr</CODE>.
  See section <A HREF="manual.html#Character_sets">9.1.1  The character set used for data and sorting</A>.

Note that if you want to change the character set, you must do a <CODE>make
distclean</CODE> between configurations!

If you want to convert characters between the server and the client,
you should take a look at the <CODE>SET OPTION CHARACTER SET</CODE> command.
See section <A HREF="manual.html#SET_OPTION">7.24  <CODE>SET OPTION</CODE> syntax</A>.

<A NAME="IDX51"></A>
<STRONG>Warning:</STRONG> If you change character sets after having created any
tables, you will have to run <CODE>isamchk -r -q</CODE> on every
table. Your indexes may be sorted incorrectly otherwise.
(This can happen if you install <STRONG>MySQL</STRONG>, create some tables,
then reconfigure <STRONG>MySQL</STRONG> to use a different character set and
reinstall it.)

<LI>

To configure
<STRONG>MySQL</STRONG> with debugging code, use the <CODE>--with-debug</CODE> option:

<PRE>
shell&#62; ./configure --with-debug
</PRE>

This causes a safe memory allocator to be included that can find some errors
and that provides output about what is happening.
See section <A HREF="manual.html#Debugging_server">G.1  Debugging a <STRONG>MySQL</STRONG> server</A>.

<LI>

Options that pertain to particular systems can be found in the
system-specific sections later in this chapter.
See section <A HREF="manual.html#Source_install_system_issues">4.11  System-specific issues</A>.
</UL>



<H2><A NAME="Compilation_problems" HREF="manual_toc.html#Compilation_problems">4.8  Problems compiling?</A></H2>

<P>
All <STRONG>MySQL</STRONG> programs compile cleanly for us with no warnings on
Solaris using <CODE>gcc</CODE>. On other systems, warnings may occur due to
differences in system include files. See section <A HREF="manual.html#MIT-pthreads">4.9  MIT-pthreads notes</A>, for warnings
that may occur when using MIT-pthreads.  For other problems, check the list
below.

</P>
<P>
The solution to many problems involves reconfiguring.  If you do need to
reconfigure, take note of the following:

</P>
<P>
<A NAME="IDX52"></A>
<A NAME="IDX53"></A>

<UL>
<LI>

If <CODE>configure</CODE> is run after it already has been run, it may use
information that was gathered during its previous invocation.  This
information is stored in <TT>`config.cache'</TT>.  When <CODE>configure</CODE> starts
up, it looks for that file and reads its contents if it exists, on the
assumption that the information is still correct.  That assumption is invalid
when you reconfigure.
<LI>

Each time you run <CODE>configure</CODE>, you must run <CODE>make</CODE> again
to recompile.  However, you may want to remove old object files from previous
builds first, since they were compiled using different configuration options.
</UL>

<P>
To prevent old configuration information or object files from being used,
run these commands before rerunning <CODE>configure</CODE>:

</P>

<PRE>
shell&#62; rm config.cache
shell&#62; make clean
</PRE>

<P>
Alternatively, you can run <CODE>make distclean</CODE>.

</P>
<P>
The list below describes some of the problems compiling <STRONG>MySQL</STRONG>
that have been found to occur most often:

</P>

<UL>
<LI>

<A NAME="IDX54"></A>
<A NAME="IDX55"></A>
<A NAME="IDX56"></A>
<A NAME="IDX57"></A>
<A NAME="IDX58"></A>
If you get errors when compiling <TT>`sql_yacc.cc'</TT> such as the ones shown
below, you have probably run out of memory or swap space:


<PRE>
Internal compiler error: program cc1plus got fatal signal 11
  or
Out of virtual memory
  or
Virtual memory exhausted
</PRE>

The problem is that <CODE>gcc</CODE> requires huge amounts of memory to compile
<TT>`sql_yacc.cc'</TT> with inline functions.  Try running <CODE>configure</CODE> with
the <CODE>--with-low-memory</CODE> option:


<PRE>
shell&#62; ./configure --with-low-memory
</PRE>

This option causes <CODE>-fno-inline</CODE> to be added to the compile line if you
are using <CODE>gcc</CODE> and <CODE>-O0</CODE> if you are using something else.  You
should try the <CODE>--with-low-memory</CODE> option even if you have so much
memory and swap space that you think you can't possibly have run out.  This
problem has been observed to occur even on systems with generous hardware
configurations, and the <CODE>--with-low-memory</CODE> option usually fixes it.

<LI>

By default, <CODE>configure</CODE> picks <CODE>c++</CODE> as the compiler name and
GNU <CODE>c++</CODE> links with <CODE>-lg++</CODE>.  If you are using <CODE>gcc</CODE>,
that behavior can cause problems during configuration such as this:

<A NAME="IDX59"></A>

<PRE>
configure: error: installation or configuration problem:
C++ compiler cannot create executables.
</PRE>

<A NAME="IDX60"></A>
<A NAME="IDX61"></A>
You might also observe problems during compilation related to
<CODE>g++</CODE>, <CODE>libg++</CODE> or <CODE>libstdc++</CODE>.

One cause of these problems is that you may not have <CODE>g++</CODE>, or you may
have <CODE>g++</CODE> but not <CODE>libg++</CODE> or <CODE>libstdc++</CODE>.  Take a look at
the <TT>`config.log'</TT> file.  It should contain the exact reason why your c++
compiler didn't work!  To work around these problems, you can use <CODE>gcc</CODE>
as your C++ compiler.  Try setting the environment variable <CODE>CXX</CODE> to
<CODE>"gcc -O3"</CODE>.  For example:

<A NAME="IDX62"></A>
<A NAME="IDX63"></A>

<PRE>
shell&#62; CXX="gcc -O3" ./configure
</PRE>

This works because <CODE>gcc</CODE> compiles C++ sources as well as <CODE>g++</CODE>
does, but does not link in <CODE>libg++</CODE> or <CODE>libstdc++</CODE> by default.

Another way to fix these problems, of course, is to install <CODE>g++</CODE>,
<CODE>libg++</CODE> and <CODE>libstdc++</CODE>.

<LI>

If your compile fails with errors such as any of the following,
you must upgrade your version of <CODE>make</CODE> to GNU <CODE>make</CODE>:


<PRE>
making all in mit-pthreads
make: Fatal error in reader: Makefile, line 18:
Badly formed macro assignment
  or
make: file `Makefile' line 18: Must be a separator (:
  or
pthread.h: No such file or directory
</PRE>

<A NAME="IDX64"></A>
<A NAME="IDX65"></A>
<A NAME="IDX66"></A>
<A NAME="IDX67"></A>
Solaris and FreeBSD are known to have troublesome <CODE>make</CODE> programs.

GNU <CODE>make</CODE> version 3.75 is known to work.

<A NAME="IDX68"></A>
<A NAME="IDX69"></A>
<A NAME="IDX70"></A>
<A NAME="IDX71"></A>
<A NAME="IDX72"></A>
<A NAME="IDX73"></A>
<A NAME="IDX74"></A>
<A NAME="IDX75"></A>
<LI>

If you want to define flags to be used by your C or C++ compilers, do so by
adding the flags to the <CODE>CFLAGS</CODE> and <CODE>CXXFLAGS</CODE> environment
variables.  You can also specify the compiler names this way using <CODE>CC</CODE>
and <CODE>CXX</CODE>.  For example:


<PRE>
shell&#62; CC=gcc
shell&#62; CFLAGS=-O6
shell&#62; CXX=gcc
shell&#62; CXXFLAGS=-O6
shell&#62; export CC CFLAGS CXX CXXFLAGS
</PRE>

See section <A HREF="manual.html#TcX_binaries">4.14  TcX binaries</A>, for a list of flag definitions that have been found
to be useful on various systems.

<LI>

If you get an error message like this,
you need to upgrade your <CODE>gcc</CODE> compiler:


<PRE>
client/libmysql.c:273: parse error before `__attribute__'
</PRE>

<CODE>gcc</CODE> 2.8.1 is known to work, but we recommend using <CODE>egcs</CODE>
1.0.3a or newer instead.

<LI>

If you get errors such as those shown below when compiling <CODE>mysqld</CODE>,
<CODE>configure</CODE> didn't correctly detect the type of the last argument to
<CODE>accept()</CODE>, <CODE>getsockname()</CODE> or <CODE>getpeername()</CODE>:


<PRE>
cxx: Error: mysqld.cc, line 645: In this statement, the referenced
     type of the pointer value "&#38;length" is "unsigned long", which
     is not compatible with "int".
new_sock = accept(sock, (struct sockaddr *)&#38;cAddr, &#38;length);
</PRE>

To fix this, edit the <TT>`config.h'</TT> file (which is generated by
<CODE>configure</CODE>).  Look for these lines:


<PRE>
/* Define as the base type of the last arg to accept */
#define SOCKET_SIZE_TYPE XXX
</PRE>

Change <CODE>XXX</CODE> to <CODE>size_t</CODE> or <CODE>int</CODE>, depending on your
operating system.  (Note that you will have to do this each time you run
<CODE>configure</CODE>, since <CODE>configure</CODE> regenerates <TT>`config.h'</TT>.)

<LI>

The <TT>`sql_yacc.cc'</TT> file is generated from <TT>`sql_yacc.yy'</TT>.  Normally
the build process doesn't need to create <TT>`sql_yacc.cc'</TT>, because
<STRONG>MySQL</STRONG> comes with an already-generated copy.  However, if you do need
to recreate it, you might encounter this error:


<PRE>
"sql_yacc.yy", line xxx fatal: default action causes potential...
</PRE>

This is a sign that your version of <CODE>yacc</CODE> is deficient.
You probably need to install <CODE>bison</CODE> (the GNU version of <CODE>yacc</CODE>)
and use that instead.

<LI>

If you need to debug <CODE>mysqld</CODE> or a <STRONG>MySQL</STRONG> client, run
<CODE>configure</CODE> with the <CODE>--with-debug</CODE> option, then recompile and
link your clients with the new client library.
See section <A HREF="manual.html#Debugging_client">G.2  Debugging a <STRONG>MySQL</STRONG> client</A>.
</UL>



<H2><A NAME="MIT-pthreads" HREF="manual_toc.html#MIT-pthreads">4.9  MIT-pthreads notes</A></H2>

<P>
This section describes some of the issues involved in using MIT-pthreads.

</P>
<P>
Note that on Linux you should NOT use MIT-pthreads but install LinuxThreads!
See section <A HREF="manual.html#Linux">4.11.5  Linux notes (all Linux versions)</A>.

</P>
<P>
If your system does not provide native thread support, you will need to
build <STRONG>MySQL</STRONG> using the MIT-pthreads package.  This includes
most FreeBSD systems, SunOS 4.x, Solaris 2.4 and earlier, and some others.
See section <A HREF="manual.html#Which_OS">4.2  Operating systems supported by <STRONG>MySQL</STRONG></A>.

</P>

<UL>
<LI>

On most systems, you can force MIT-pthreads to be used by running
<CODE>configure</CODE> with the <CODE>--with-mit-threads</CODE> option:


<PRE>
shell&#62; ./configure --with-mit-threads
</PRE>

Building in a non-source directory is not supported when using
MIT-pthreads, because we want to minimize our changes to this code.

<LI>

MIT-pthreads doesn't support the <CODE>AF_UNIX</CODE> protocol used to implement
Unix sockets.  This means that if you compile using MIT-pthreads, all
connections must be made using TCP/IP (which is a little slower).  If you
find after building <STRONG>MySQL</STRONG> that you cannot connect to the local
server, it may be that your client is attempting to connect to
<CODE>localhost</CODE> using a Unix socket as the default. Try making a TCP/IP
connection with <CODE>mysql</CODE> by using a host option (<CODE>-h</CODE> or
<CODE>--host</CODE>) to specify the local host name explicitly.

<LI>

The checks that determine whether or not to use MIT-pthreads occur only
during the part of the configuration process that deals with the server
code.  If you have configured the distribution using <CODE>--without-server</CODE>
to build only the client code, clients will not know whether or not
MIT-pthreads is being used and will use Unix socket connections by default.
Since Unix sockets do not work under MIT-pthreads, this means you will need
to use <CODE>-h</CODE> or <CODE>--host</CODE> when you run client programs.

<LI>

When <STRONG>MySQL</STRONG> is compiled using MIT-pthreads, system locking is
disabled by default for performance reasons. You can tell the server to use
system locking with the <CODE>--use-locking</CODE> option.

<LI>

Sometimes the pthread <CODE>bind()</CODE> command fails to bind to a socket without
any error message (at least on Solaris). The result is that all connections
to the server fail.  For example:


<PRE>
shell&#62; mysqladmin version
mysqladmin: connect to server at " failed;
error: 'Can't connect to mysql server on localhost (146)'
</PRE>

The solution to this is to kill the <CODE>mysqld</CODE> server and restart it.
This has only happened to us when we have forced the server down and done
a restart immediately.

<LI>

With MIT-pthreads, the <CODE>sleep()</CODE> system call isn't interruptible with
<CODE>SIGINT</CODE> (break). This is only noticeable when you run <CODE>mysqladmin
--sleep</CODE>.  You must wait for the <CODE>sleep()</CODE> call to terminate before the
interrupt is served and the process stops.

<LI>

When linking you may receive warning messages like these (at least on
Solaris); they can be ignored:


<PRE>
ld: warning: symbol `_iob' has differing sizes:
    (file /my/local/pthreads/lib/libpthread.a(findfp.o) value=0x4;
file /usr/lib/libc.so value=0x140);
    /my/local/pthreads/lib/libpthread.a(findfp.o) definition taken
ld: warning: symbol `__iob' has differing sizes:
    (file /my/local/pthreads/lib/libpthread.a(findfp.o) value=0x4;
file /usr/lib/libc.so value=0x140);
    /my/local/pthreads/lib/libpthread.a(findfp.o) definition taken
</PRE>

<LI>

Some other warnings also can be ignored:


<PRE>
implicit declaration of function `int strtoll(...)'
implicit declaration of function `int strtoul(...)'
</PRE>

<LI>

We haven't gotten <CODE>readline</CODE> to work with MIT-pthreads. (This isn't
needed, but may be interesting for someone.)
</UL>



<H2><A NAME="Perl_support" HREF="manual_toc.html#Perl_support">4.10  Perl installation comments</A></H2>



<H3><A NAME="Perl_installation" HREF="manual_toc.html#Perl_installation">4.10.1  Installing Perl on Unix</A></H3>

<P>
Perl support for <STRONG>MySQL</STRONG> is provided by means of the
<CODE>DBI</CODE>/<CODE>DBD</CODE> client interface.  See section <A HREF="manual.html#Perl">19.5  <STRONG>MySQL</STRONG> Perl API</A>.  The Perl
<CODE>DBD</CODE>/<CODE>DBI</CODE> client code requires Perl 5.004 or later.  The
interface <EM>will not work</EM> if you have an older version of Perl.

</P>
<P>
<STRONG>MySQL</STRONG> Perl support also requires that you've installed
<STRONG>MySQL</STRONG> client programming support.  If you installed <STRONG>MySQL</STRONG>
from RPM files, client programs are in the client RPM, but client programming
support is in the developer RPM.  Make sure you've installed the latter RPM.

</P>
<P>
As of release 3.22.8, Perl support is distributed separately from the main
<STRONG>MySQL</STRONG> distribution.  If you want to install Perl support, the files
you will need can be obtained from <a HREF="http://www.mysql.com/Contrib">http://www.mysql.com/Contrib</a>.

</P>
<P>
The Perl distributions are provided as compressed <CODE>tar</CODE> archives and
have names like <TT>`MODULE-VERSION.tar.gz'</TT>, where <CODE>MODULE</CODE> is the
module name and <CODE>VERSION</CODE> is the version number.  You should get the
<CODE>Data-Dumper</CODE>, <CODE>DBI</CODE>, and <CODE>Msql-Mysql-modules</CODE> distributions
and install them in that order.  The installation procedure is shown below.
The example shown is for the <CODE>Data-Dumper</CODE> module, but the procedure is
the same for all three distributions.

</P>

<OL>
<LI>

Unpack the distribution into the current directory:

<PRE>
shell&#62; gunzip &#60; Data-Dumper-VERSION.tar.gz | tar xvf -
</PRE>

This command creates a directory named <TT>`Data-Dumper-VERSION'</TT>.

<LI>

Change into the top-level directory of the unpacked distribution:

<PRE>
shell&#62; cd Data-Dumper-VERSION
</PRE>

<LI>

Build the distribution and compile everything:

<PRE>
shell&#62; perl Makefile.PL
shell&#62; make
shell&#62; make test
shell&#62; make install
</PRE>

</OL>

<P>
The <CODE>make test</CODE> command is important, because it verifies that the
module is working.  Note that when you run that command during the
<CODE>Msql-Mysql-modules</CODE> installation to exercise the interface code, the
<STRONG>MySQL</STRONG> server must be running or the test will fail.

</P>
<P>
It is a good idea to rebuild and reinstall the <CODE>Msql-Mysql-modules</CODE>
distribution whenever you install a new release of <STRONG>MySQL</STRONG>,
particularly if you notice symptoms such as all your <CODE>DBI</CODE> scripts
dumping core after you upgrade <STRONG>MySQL</STRONG>.

</P>
<P>
If you don't have the right to install Perl modules in the system directory
or if you to install local Perl modules, the following reference may help
you:

</P>

<PRE>
<a HREF="http://www.iserver.com/support/contrib/perl5/modules.html">http://www.iserver.com/support/contrib/perl5/modules.html</a>
</PRE>

<P>
Look under the heading
<CODE>Installing New Modules that Require Locally Installed Modules</CODE>.

</P>


<H3><A NAME="ActiveState_Perl" HREF="manual_toc.html#ActiveState_Perl">4.10.2  Installing ActiveState Perl on Win32</A></H3>

<P>
To install the <STRONG>MySQL</STRONG> <CODE>DBD</CODE> module with ActiveState Perl on
Win32, you should do the following:

</P>

<UL>
<LI>Open a DOS shell.

<LI>If required, set the HTTP_proxy variable. For example, you might try:

<CODE>set HTTP_proxy=my.proxy.com:3128</CODE>
<LI>Start the PPM program: <CODE>C:\perl\bin\ppm.pl</CODE>

<LI>If you have not already done so, install <CODE>DBI</CODE>: <CODE>install DBI</CODE>

<LI>If this succeeds, install <CODE>DBD::mysql:</CODE>

<CODE>http://www.mysql.com/Contrib/ppd/DBD-mysql.ppd</CODE>
</UL>

<P>
If you can't get the above to work, you should instead install the <STRONG>MyODBC</STRONG>
driver and connect to <STRONG>MySQL</STRONG> server through ODBC.

</P>

<PRE>
use DBI;
$dbh= DBI-&#62;connect("DBI:ODBC:$dsn","$user","$password") || 
  die "Got error $DBI::errstr when connecting to $dsn\n";
</PRE>



<H3><A NAME="Win32_Perl" HREF="manual_toc.html#Win32_Perl">4.10.3  Installing the <STRONG>MySQL</STRONG> Perl distribution on Win32</A></H3>

<P>
The <STRONG>MySQL</STRONG> Perl distribution contains <CODE>DBI</CODE>,
<CODE>DBD:MySQL</CODE> and <CODE>DBD:ODBC</CODE>.

</P>

<UL>
<LI>Get the Perl distribution for Win32 from

<a HREF="http://www.mysql.com/download.html">http://www.mysql.com/download.html</a>.
<LI>Unzip the distribution in <CODE>C:</CODE> so that you get a <TT>`C:\PERL'</TT> directory.

<LI>Add the directory <TT>`C:\PERL\BIN'</TT> to your path.

<LI>Add the directory <TT>`C:\PERL\BIN\MSWin32-x86-thread'</TT> or

<TT>`C:\PERL\BIN\MSWin32-x86'</TT> to your path.
<LI>Test that <CODE>perl</CODE> works by executing <CODE>perl -v</CODE> in a DOS shell.

</UL>



<H3><A NAME="Perl_support_problems" HREF="manual_toc.html#Perl_support_problems">4.10.4  Problems using the Perl <CODE>DBI</CODE>/<CODE>DBD</CODE> interface</A></H3>

<P>
If Perl reports that it can't find the <CODE>../mysql/mysql.so</CODE> module,
then the problem is probably that Perl can't locate the shared library
<TT>`libmysqlclient.so'</TT>.

</P>
<P>
You can fix this by any of the following methods:

</P>

<UL>
<LI>

Compile the <CODE>Msql-Mysql-modules</CODE> distribution with <CODE>perl
Makefile.PL -static</CODE> rather than <CODE>perl Makefile.PL</CODE>

<LI>

Copy <CODE>libmysqlclient.so</CODE> to the directory where your other shared
libraries are located (probably <TT>`/usr/lib'</TT> or <TT>`/lib'</TT>).

<LI>

On <CODE>Linux</CODE> you can add the pathname of the directory where
<CODE>libmysqlclient.so</CODE> is located to the <TT>`/etc/ld.so.conf'</TT> file.

<LI>

<A NAME="IDX76"></A>
<A NAME="IDX77"></A>
Add the pathname of the directory where <CODE>libmysqlclient.so</CODE> is located
to the <CODE>LD_RUN_PATH</CODE> environment variable.
</UL>

<P>
If you get the following errors from <CODE>DBD-mysql</CODE>,
you are probably using <CODE>gcc</CODE> (or using an old binary compiled with
<CODE>gcc</CODE>):

</P>

<PRE>
/usr/bin/perl: can't resolve symbol '__moddi3'
/usr/bin/perl: can't resolve symbol '__divdi3'
</PRE>

<P>
Add <CODE>-L/usr/lib/gcc-lib/... -lgcc</CODE> to the link command when the
<TT>`mysql.so'</TT> library gets built (check the output from <CODE>make</CODE> for
<TT>`mysql.so'</TT> when you compile the Perl client).  The <CODE>-L</CODE> option
should specify the pathname of the directory where <TT>`libgcc.a'</TT> is located
on your system.

</P>
<P>
Another cause of this problem may be that Perl and <STRONG>MySQL</STRONG> aren't both
compiled with <CODE>gcc</CODE>.  In this case, you can solve the mismatch by
compiling both with <CODE>gcc</CODE>.

</P>
<P>
If you want to use the Perl module on a system that doesn't support dynamic
linking (like SCO) you can generate a static version of Perl that includes
<CODE>DBI</CODE> and <CODE>DBD-mysql</CODE>.  The way this works is that you generate a
version of Perl with the <CODE>DBI</CODE> code linked in and install it on top of
your current Perl.  Then you use that to build a version of Perl that
additionally has the <CODE>DBD</CODE> code linked in, and install that.

</P>
<P>
On SCO, you must have the following environment variables set:

</P>

<PRE>
shell&#62; LD_LIBRARY_PATH=/lib:/usr/lib:/usr/local/lib:/usr/progressive/lib
or
shell&#62; LD_LIBRARY_PATH=/usr/lib:/lib:/usr/local/lib:/usr/ccs/lib:/usr/progressive/lib:/usr/skunk/lib
shell&#62; LIBPATH=/usr/lib:/lib:/usr/local/lib:/usr/ccs/lib:/usr/progressive/lib:/usr/skunk/lib
shell&#62; MANPATH=scohelp:/usr/man:/usr/local1/man:/usr/local/man:/usr/skunk/man:
</PRE>

<P>
First, create a Perl that includes a statically-linked <CODE>DBI</CODE> by running
these commands in the directory where your <CODE>DBI</CODE> distribution is
located:

</P>

<PRE>
shell&#62; perl Makefile.PL LINKTYPE=static
shell&#62; make
shell&#62; make install
shell&#62; make perl
</PRE>

<P>
Then you must install the new Perl. The output of <CODE>make perl</CODE> will
indicate the exact <CODE>make</CODE> command you will need to execute to perform
the installation.  On SCO, this is <CODE>make -f Makefile.aperl inst_perl
MAP_TARGET=perl</CODE>.

</P>
<P>
Next, use the just-created Perl to create another Perl that also includes a
statically-linked <CODE>DBD::mysql</CODE> by running these commands in the
directory where your <CODE>Msql-Mysql-modules</CODE> distribution is located:

</P>

<PRE>
shell&#62; perl Makefile.PL LINKTYPE=static
shell&#62; make
shell&#62; make install
shell&#62; make perl
</PRE>

<P>
Finally, you should install this new Perl.  Again, the output of <CODE>make
perl</CODE> indicates the command to use.

</P>


<H2><A NAME="Source_install_system_issues" HREF="manual_toc.html#Source_install_system_issues">4.11  System-specific issues</A></H2>

<P>
The following sections indicate some of the issues that have been observed to
occur on particular systems when installing <STRONG>MySQL</STRONG> from a source
distribution.

</P>



<H3><A NAME="Solaris" HREF="manual_toc.html#Solaris">4.11.1  Solaris notes</A></H3>

<P>
On Solaris, you may run into trouble even before you get the <STRONG>MySQL</STRONG>
distribution unpacked!  Solaris <CODE>tar</CODE> can't handle long file names, so
you may see an error like this when you unpack <STRONG>MySQL</STRONG>:

</P>

<PRE>
x mysql-3.22.12-beta/bench/Results/ATIS-mysql_odbc-NT_4.0-cmp-db2,informix,ms-sql,mysql,oracle,solid,sybase, 0 bytes, 0 tape blocks
tar: directory checksum error
</PRE>

<P>
In this case, you must use GNU <CODE>tar</CODE> (<CODE>gtar</CODE>) to unpack the
distribution.  You can find a precompiled copy for Solaris at
<a HREF="http://www.mysql.com/Downloads/">http://www.mysql.com/Downloads/</a>.

</P>
<P>
Sun native threads work only on Solaris 2.5 and higher. For 2.4 and
earlier versions, <STRONG>MySQL</STRONG> will automatically use
MIT-pthreads. See section <A HREF="manual.html#MIT-pthreads">4.9  MIT-pthreads notes</A>.

</P>
<P>
If you are using Solaris on a SPARC, the recommended compiler is <CODE>egcs</CODE>
1.1.2 or newer.  You can find this at <a HREF="http://egcs.cygnus.com/">http://egcs.cygnus.com/</a>.
Note that <CODE>egs</CODE> 1.1.1 and <CODE>gcc</CODE> 2.8.1 don't work reliably on SPARC!

</P>
<P>
The recommended <CODE>configure</CODE> line when using <CODE>egcs</CODE> 1.1.2 is:

</P>

<PRE>
shell&#62; CC=gcc CFLAGS="-O6" \
       CXX=gcc CXXFLAGS="-O6 -felide-constructors -fno-exceptions -fno-rtti" \
       ./configure --prefix=/usr/local/mysql --with-low-memory
</PRE>

<P>
If you have the Sun Workshop 4.2 compiler, you can run <CODE>configure</CODE> like
this:

</P>
<P>
CC=cc CFLAGS="-xstrconst -Xa -xO4 -native -mt" CXX=CC CXXFLAGS="-xO4 -native -noex -mt" ./configure --prefix=/usr/local/mysql

</P>

<PRE>
shell&#62; CC=cc CFLAGS="-Xa -fast -xO4 -native -xstrconst -mt" \
       CXX=CC CXXFLAGS="-noex -XO4 -mt" \
       ./configure
</PRE>

<P>
You may also have to edit the <CODE>configure</CODE> script to change this line:

</P>

<PRE>
#if !defined(__STDC__) || __STDC__ != 1
</PRE>

<P>
to this:

</P>

<PRE>
#if !defined(__STDC__)
</PRE>

<P>
If you turn on <CODE>__STDC__</CODE> with the <CODE>-Xc</CODE> option, the Sun compiler
can't compile with the Solaris <TT>`pthread.h'</TT> header file. This is a Sun
bug (broken compiler or broken include file).

</P>
<P>
If <CODE>mysqld</CODE> issues the error message shown below when you run it, you have
tried to compile <STRONG>MySQL</STRONG> with the Sun compiler without enabling the
multi-thread option (<CODE>-mt</CODE>):

</P>

<PRE>
libc internal error: _rmutex_unlock: rmutex not held
</PRE>

<P>
Add <CODE>-mt</CODE> to <CODE>CFLAGS</CODE> and <CODE>CXXFLAGS</CODE> and try again.

</P>
<P>
If you get the following error when compiling <STRONG>MySQL</STRONG> with <CODE>gcc</CODE>,
it means that your <CODE>gcc</CODE> is not configured for your version of Solaris!

</P>

<PRE>
shell&#62; gcc -O3 -g -O2 -DDBUG_OFF  -o thr_alarm ...
./thr_alarm.c: In function `signal_hand':
./thr_alarm.c:556: too many arguments to function `sigwait'
</PRE>

<P>
The proper thing to do in this case is to get the newest version of
<CODE>egcs</CODE> and compile it with your current <CODE>gcc</CODE> compiler!  At
least for Solaris 2.5, almost all binary versions of <CODE>gcc</CODE> have
old, unusable include files that will break all programs that use
threads (and possibly other programs)!

</P>
<P>
Solaris doesn't provide static versions of all system libraries
(<CODE>libpthreads</CODE> and <CODE>libdl</CODE>), so you can't compile <STRONG>MySQL</STRONG>
with <CODE>--static</CODE>.  If you try to do so, you will get the error:

</P>

<PRE>
ld: fatal: library -ldl: not found
</PRE>

<P>
If too many processes try to connect very rapidly to <CODE>mysqld</CODE>, you will
see this error in the <STRONG>MySQL</STRONG> log:

</P>

<PRE>
Error in accept: Protocol error
</PRE>

<P>
You might try starting the server with the <CODE>--set-variable back_log=50</CODE>
option as a workaround for this.

</P>
<P>
If you are linking your own <STRONG>MySQL</STRONG> client, you might get the
following error when you try to execute it:

</P>

<PRE>
ld.so.1: ./my: fatal: libmysqlclient.so.#: open failed: No such file or directory
</PRE>

<P>
The problem can be avoided by one of the following methods:

</P>

<UL>
<LI>

Link the client with the following flag (instead of <CODE>-Lpath</CODE>):
<CODE>-Wl,r/full-path-to-libmysqlclient.so</CODE>.
<LI>

Copy <CODE>libmysqclient.so</CODE> to <TT>`/usr/lib'</TT>.
<LI>

<A NAME="IDX78"></A>
<A NAME="IDX79"></A>
Add the pathname of the directory where <CODE>libmysqlclient.so</CODE> is located
to the <CODE>LD_RUN_PATH</CODE> environment variable before running your client.
</UL>



<H3><A NAME="Solaris_2.7" HREF="manual_toc.html#Solaris_2.7">4.11.2  Solaris 2.7 notes</A></H3>

<P>
You can normally use a Solaris 2.6 binary on Solaris 2.7.  Most of the
Solaris 2.6 issues also apply for Solaris 2.7.

</P>
<P>
Solaris 2.7 has some bugs in the include files. You may see the following
error when you use <CODE>gcc</CODE>:

</P>

<PRE>
/usr/include/widec.h:42: warning: `getwc' redefined
/usr/include/wchar.h:326: warning: this is the location of the previous
definition
</PRE>

<P>
If this occurs, you can do the following to fix the problem:

</P>
<P>
Copy <CODE>/usr/include/widec.h</CODE> to
<CODE>.../lib/gcc-lib/os/gcc-version/include</CODE> and change line 41 from:

</P>

<PRE>
#if     !defined(lint) &#38;& !defined(__lint)

to

#if     !defined(lint) &#38;& !defined(__lint) &#38;& !defined(getwc)
</PRE>

<P>
Alternatively, you can edit <TT>`/usr/include/widec.h'</TT> directly.  Either
way, after you make the fix, you should remove <TT>`config.cache'</TT> and run
<CODE>configure</CODE> again!

</P>
<P>
If you get errors like this when you run <CODE>make</CODE>, it's because <CODE>configure</CODE>
didn't detect the <TT>`curses.h'</TT> file (probably because of the error in
<CODE>/usr/include/widec.h</CODE>:

</P>

<PRE>
In file included from mysql.cc:50:
/usr/include/term.h:1060: syntax error before `,'
/usr/include/term.h:1081: syntax error before `;'
</PRE>

<P>
The solution to this is to do one of the following steps:

</P>

<UL>
<LI>

Edit <TT>`/usr/include/widec.h'</TT> as indicted above and rerun configure
<LI>

Remove the <CODE>#define HAVE_TERM</CODE> line from <TT>`config.h'</TT> file and
run <CODE>make</CODE> again.
<LI>

Configure with <CODE>CFLAGS=-DHAVE_CURSES CXXFLAGS=-DCURSES ./configure</CODE>
</UL>



<H3><A NAME="Solaris_x86" HREF="manual_toc.html#Solaris_x86">4.11.3  Solaris x86 notes</A></H3>

<P>
If you are using <CODE>gcc</CODE> or <CODE>egcs</CODE> on Solaris x86 and you
experience problems with core dumps under load, you should use the
following <CODE>configure</CODE> command:

</P>

<PRE>
shell&#62; CC=gcc CFLAGS="-O6 -fomit-frame-pointer" \
       CXX=gcc \
       CXXFLAGS="-O6 -fomit-frame-pointer -felide-constructors -fno-exceptions -fno-rtti" \
       ./configure --prefix=/usr/local/mysql
</PRE>

<P>
This will avoid problems with the <CODE>libstdc++</CODE> library and with C++
exceptions.

</P>
<P>
If this doesn't help, you should compile a debug version and run
it with a trace file or under <CODE>gdb</CODE>.  See section <A HREF="manual.html#Debugging_server">G.1  Debugging a <STRONG>MySQL</STRONG> server</A>.

</P>


<H3><A NAME="SunOS" HREF="manual_toc.html#SunOS">4.11.4  SunOS 4 notes</A></H3>

<P>
On SunOS 4, MIT-pthreads is needed to compile <STRONG>MySQL</STRONG>, which in turn
means you will need GNU <CODE>make</CODE>.

</P>
<P>
Some SunOS 4 systems have problems with dynamic libraries and
<CODE>libtool</CODE>. You can use the following <CODE>configure</CODE> line to avoid
this problem:

</P>

<PRE>
shell&#62; ./configure --disable-shared --with-mysqld-ldflags=-all-static
</PRE>

<P>
When compiling <CODE>readline</CODE>, you may get warnings about duplicate defines.
These may be ignored.

</P>
<P>
When compiling <CODE>mysqld</CODE>, there will be some <CODE>implicit declaration
of function</CODE> warnings. These may be ignored.

</P>


<H3><A NAME="Linux" HREF="manual_toc.html#Linux">4.11.5  Linux notes (all Linux versions)</A></H3>

<P>
<STRONG>MySQL</STRONG> uses LinuxThreads on Linux.  If you are using an old Linux
version that doesn't have <CODE>glibc2</CODE>, you must install LinuxThreads before
trying to compile
<STRONG>MySQL</STRONG>. <a HREF="http://www.mysql.com/Downloads/Linux">http://www.mysql.com/Downloads/Linux</a>

</P>
<P>
If you can't start <CODE>mysqld</CODE> or if <CODE>mysql_install_db</CODE> doesn't work,
please continue reading!  This only happens on Linux system with problems in
the LinuxThreads or <CODE>libc</CODE>/<CODE>glibc</CODE> libraries. There are a lot of
simple workarounds to get <STRONG>MySQL</STRONG> to work!  The simplest is to use the
binary version of <STRONG>MySQL</STRONG> (not the RPM) for Linux x86.  One nice
aspect of this version is that it's probably 10% faster than any version you
would compile yourself!  See section <A HREF="manual.html#Compile_and_link_options">10.3  How compiling and linking affects the speed of <STRONG>MySQL</STRONG></A>.

</P>
<P>
One known problem with the binary distribution is that with older Linux
systems that use <CODE>libc</CODE> (like RedHat 4.x or Slackware), you will get
some non-fatal problems with hostname resolution
See section <A HREF="manual.html#Binary_notes-Linux">4.6.3.1  Linux notes</A>.

</P>
<P>
<CODE>isamchk</CODE> hangs with <CODE>libc.so.5.3.12</CODE>. Upgrading to the newest
<CODE>libc</CODE> fixes this problem.

</P>
<P>
When using LinuxThreads you will see a minimum of three processes
running. These are in fact threads. There will be one thread for the
LinuxThreads manager, one thread to handle connections, and one thread
to handle alarms and signals.

</P>
<P>
If you see a dead <CODE>mysqld</CODE> daemon process with <CODE>ps</CODE>, this usually
means that you have found a bug in <STRONG>MySQL</STRONG> or you have got a corrupted
table. See section <A HREF="manual.html#Crashing">17.1  What to do if <STRONG>MySQL</STRONG> keeps crashing</A>.

</P>
<P>
If you are using LinuxThreads and <CODE>mysqladmin shutdown</CODE> doesn't work,
you must upgrade to LinuxThreads 0.7.1 or newer.

</P>
<P>
If you are using RedHat, you might get errors like this:

</P>

<PRE>
/usr/bin/perl is needed...
/usr/sh is needed...
/usr/sh is needed...
</PRE>

<P>
If so, you should upgrade your version of <CODE>rpm</CODE> to
<TT>`rpm-2.4.11-1.i386.rpm'</TT> and <TT>`rpm-devel-2.4.11-1.i386.rpm'</TT> (or later).

</P>
<P>
You can get the upgrades of libraries to RedHat 4.2 from
<a HREF="ftp://ftp.redhat.com/updates/4.2/i386">ftp://ftp.redhat.com/updates/4.2/i386</a>. Or
<a HREF="http://www.sunsite.unc.edu/pub/Linux/distributions/redhat/code/rpm/">http://www.sunsite.unc.edu/pub/Linux/distributions/redhat/code/rpm/</a>
for other distributions.

</P>
<P>
If you are linking your own <STRONG>MySQL</STRONG> client and get the error:

</P>

<PRE>
ld.so.1: ./my: fatal: libmysqlclient.so.4: open failed: No such file or directory
</PRE>

<P>
when executing them, the problem can be avoided by one of the following
methods:

</P>

<UL>
<LI>

Link the client with the following flag (instead of <CODE>-Lpath</CODE>):
<CODE>-Wl,r/path-libmysqlclient.so</CODE>.
<LI>

Copy <CODE>libmysqclient.so</CODE> to <TT>`/usr/lib'</TT>.
<LI>

<A NAME="IDX80"></A>
<A NAME="IDX81"></A>
Add the pathname of the directory where <CODE>libmysqlclient.so</CODE> is located
to the <CODE>LD_RUN_PATH</CODE> environment variable before running your client.
</UL>

<P>
If you are using the Fujitsu compiler <CODE>(fcc / FCC)</CODE> you will have
some problems compiling <STRONG>MySQL</STRONG> because the Linux header files are very
<CODE>gcc</CODE> oriented.

</P>
<P>
The following <CODE>configure</CODE> line should work with <CODE>fcc/FCC</CODE>:

</P>

<PRE>
CC=fcc CFLAGS="-O -K fast -K lib -K omitfp -Kpreex -D_GNU_SOURCE -DCONST=const -DNO_STRTOLL_PROTO" CXX=FCC CXXFLAGS="-O -K fast -K lib  -K omitfp -K preex --no_exceptions --no_rtti -D_GNU_SOURCE -DCONST=const -Dalloca=__builtin_alloca -DNO_STRTOLL_PROTO '-D_EXTERN_INLINE=static __inline'" ./configure --prefix=/usr/local/mysql --enable-assembler --with-mysqld-ldflags=-all-static --disable-shared --with-low-memory
</PRE>



<H4><A NAME="Linux-x86" HREF="manual_toc.html#Linux-x86">4.11.5.1  Linux-x86 notes</A></H4>

<P>
<STRONG>MySQL</STRONG> requires <CODE>libc</CODE> version 5.4.12 or newer. It's known to
work with <CODE>libc</CODE> 5.4.46. <CODE>glibc</CODE> version 2.0.6 and later should
also work. There have been some problems with the <CODE>glibc</CODE> RPMs from
RedHat so if you have problems, check whether or not there are any updates!
The <CODE>glibc</CODE> 2.0.7-19 and 2.0.7-29 RPMs are known to work.

</P>
<P>
On some older Linux distributions, <CODE>configure</CODE> may produce an error
like this:

</P>

<PRE>
Syntax error in sched.h. Change _P to __P in the /usr/include/sched.h file.
See the Installation chapter in the Reference Manual.
</PRE>

<P>
Just do what the error message says and add an extra underscore to the
<CODE>_P</CODE> macro that has only one underscore, then try again.

</P>
<P>
You may get some warnings when compiling; those shown below can be ignored:

</P>

<PRE>
mysqld.cc -o objs-thread/mysqld.o
mysqld.cc: In function `void init_signals()':
mysqld.cc:315: warning: assignment of negative value `-1' to `long unsigned int'
mysqld.cc: In function `void * signal_hand(void *)':
mysqld.cc:346: warning: assignment of negative value `-1' to `long unsigned int'
</PRE>

<P>
In Debian GNU/Linux, if you want <STRONG>MySQL</STRONG> to start automatically when
the system boots, do the following:

</P>

<PRE>
shell&#62; cp support-files/mysql.server /etc/init.d/mysql.server
shell&#62; /usr/sbin/update-rc.d mysql.server defaults 99
</PRE>

<P>
<CODE>mysql.server</CODE> can be found in the <TT>`share/mysql'</TT> directory
under the <STRONG>MySQL</STRONG> installation directory, or in the
<TT>`support-files'</TT> directory of the <STRONG>MySQL</STRONG> source tree.

</P>
<P>
If <CODE>mysqld</CODE> always core dumps when it starts up, the problem may be that
you have an old <TT>`/lib/libc.a'</TT>.  Try renaming it, then remove
<TT>`sql/mysqld'</TT> and do a new <CODE>make install</CODE> and try again.  This
problem has been reported on some Slackware installations. RedHat 5.0 has
also a similar problem with some new <CODE>glibc</CODE> versions.
See section <A HREF="manual.html#Linux-RedHat50">4.11.5.2  RedHat 5.0 notes</A>.

</P>
<P>
If you get the following error when linking <CODE>mysqld</CODE>,
it means that your <TT>`libg++.a'</TT> is not installed correctly:

</P>

<PRE>
/usr/lib/libc.a(putc.o): In function `_IO_putc':
putc.o(.text+0x0): multiple definition of `_IO_putc'
</PRE>

<P>
You can avoid using <TT>`libg++.a'</TT> by running <CODE>configure</CODE> like this:

</P>

<PRE>
shell&#62; CXX=gcc ./configure
</PRE>



<H4><A NAME="Linux-RedHat50" HREF="manual_toc.html#Linux-RedHat50">4.11.5.2  RedHat 5.0 notes</A></H4>

<P>
If you have any problems with <STRONG>MySQL</STRONG> on RedHat, you should start by
upgrading <CODE>glibc</CODE> to the newest possible version!

</P>
<P>
If you install all the official RedHat patches (including
<CODE>glibc-2.0.7-19</CODE> and <CODE>glibc-devel-2.0.7-19</CODE>), both the
binary and source distributions of <STRONG>MySQL</STRONG> should work without
any trouble!

</P>
<P>
The updates are needed since there is a bug in <CODE>glibc</CODE> 2.0.5 in how
<CODE>pthread_key_create</CODE> variables are freed. With <CODE>glibc</CODE> 2.0.5, you
must use a statically-linked <STRONG>MySQL</STRONG> binary distribution. If you
want to compile from source, you must install the corrected version of
LinuxThreads from <a HREF="http://www.mysql.com/Downloads/Linux">http://www.mysql.com/Downloads/Linux</a> or upgrade your
<CODE>glibc</CODE>.

</P>
<P>
If you have an incorrect version of <CODE>glibc</CODE> or LinuxThreads, the symptom
is that <CODE>mysqld</CODE> crashes after each connection. For example,
<CODE>mysqladmin version</CODE> will crash <CODE>mysqld</CODE> when it finishes!

</P>
<P>
Another symptom of incorrect libraries is that <CODE>mysqld</CODE> crashes at
once when it starts. On some Linux systems, this can be fixed by configuring
like this:

</P>

<PRE>
shell&#62; ./configure --with-mysqld-ldflags=-all-static
</PRE>

<P>
On Redhat 5.0, the easy way out is to install the <CODE>glibc</CODE> 2.0.7-19 RPM
and run <CODE>configure</CODE> <STRONG>without</STRONG> the
<CODE>--with-mysqld-ldflags=-all-static</CODE> option.

</P>
<P>
For the source distribution of <CODE>glibc</CODE> 2.0.7, a patch that is easy to
apply and is tested with <STRONG>MySQL</STRONG> may be found at:

<PRE>
<a HREF="http://www.mysql.com/Download/Linux/glibc-2.0.7-total-patch.tar.gz">http://www.mysql.com/Download/Linux/glibc-2.0.7-total-patch.tar.gz</a>
</PRE>

<P>
If you experience crashes like these when you build <STRONG>MySQL</STRONG>, you can
always download the newest binary version of <STRONG>MySQL</STRONG>.  This is
statically-linked to avoid library conflicts and should work on all Linux
systems!

</P>
<P>
<STRONG>MySQL</STRONG> comes with an internal debugger that can generate
trace files with a lot of information that can be used to find and solve a
wide range of different problems.
See section <A HREF="manual.html#Debugging_server">G.1  Debugging a <STRONG>MySQL</STRONG> server</A>.

</P>


<H4><A NAME="Linux-RedHat51" HREF="manual_toc.html#Linux-RedHat51">4.11.5.3  RedHat 5.1 notes</A></H4>

<P>
The <CODE>glibc</CODE> of RedHat 5.1 (<CODE>glibc</CODE> 2.0.7-13) has a memory leak, so
to get a stable <STRONG>MySQL</STRONG> version, you must upgrade <CODE>glibc</CODE> to
2.0.7-19, downgrade <CODE>glibc</CODE> or use a binary version of <CODE>mysqld</CODE>. If
you don't do this, you will encounter memory problems (out of memory, etc.,
etc.).  The most common error in this case is:

</P>

<PRE>
Can't create a new thread (errno 11). If you are not out of available
memory, you can consult the manual for any possible OS dependent bug
</PRE>

<P>
After you have upgraded to <CODE>glibc</CODE> 2.0.7-19, you can configure
<STRONG>MySQL</STRONG> with dynamic linking (the default), but you <STRONG>cannot</STRONG>
run <CODE>configure</CODE> with the <CODE>--with-mysqld-ldflags=-all-static</CODE> option
until you have installed <CODE>glibc</CODE> 2.0.7-19 from source!

</P>
<P>
You can check which version of <CODE>glibc</CODE> you have with <CODE>rpm -q glibc</CODE>.

</P>


<H4><A NAME="Linux-SPARC" HREF="manual_toc.html#Linux-SPARC">4.11.5.4  Linux-SPARC notes</A></H4>

<P>
In some implementations, <CODE>readdir_r()</CODE> is broken.  The symptom is that
<CODE>SHOW DATABASES</CODE> always returns an empty set.  This
can be fixed by removing <CODE>HAVE_READDIR_R</CODE> from <TT>`config.h'</TT> after
configuring and before compiling.

</P>
<P>
Some problems will require patching your Linux installation.  The patch can
be found at
<a HREF="http://www.mysql.com/patches/Linux-sparc-2.0.30.diff">http://www.mysql.com/patches/Linux-sparc-2.0.30.diff</a>. This patch is
against the Linux distribution <TT>`sparclinux-2.0.30.tar.gz'</TT> that is
available at <CODE>vger.rutgers.edu</CODE> (a version of Linux that was
never merged with the official 2.0.30).  You must also install
LinuxThreads 0.6 or newer.

</P>
<P>
Thanks to <a HREF="mailto:jacques@solucorp.qc.ca">jacques@solucorp.qc.ca</a> for this information.

</P>


<H4><A NAME="Linux-Alpha" HREF="manual_toc.html#Linux-Alpha">4.11.5.5  Linux-Alpha notes</A></H4>

<P>
The big problem on Linux-Alpha is that there are still some problems with
threads in <CODE>glibc</CODE> on this platform.  You should start by getting the
newest <CODE>glibc</CODE> version you can find.

</P>
<P>
Note that before you run any programs that use threads (like <CODE>mysqld</CODE>,
<CODE>thr_alarm</CODE> or <CODE>thr_lock</CODE>), you should raise the shared memory
limit (with <CODE>ulimit</CODE>). The <STRONG>MySQL</STRONG> benchmarks are known to fail
if you forget to do this!

</P>

<P>
Configure <STRONG>MySQL</STRONG> with the following command:

</P>

<PRE>
shell&#62; CC=gcc CCFLAGS="-Dalpha_linux_port" \
       CXX=gcc CXXFLAGS="-O3 -Dalpha_linux_port -felide-constructors -fno-exceptions -fno-rtti" \
       ./configure --prefix=/usr/local/mysql
</PRE>

<P>
Try to compile <CODE>mysys/thr_lock</CODE> and <CODE>mysys/thr_alarm</CODE>.
Test that these programs work!  (Invoke each one with no arguments.
Each should end with <CODE>test_succeeded</CODE> if everything
was okay.)

</P>
<P>
After installing <STRONG>MySQL</STRONG>, uncomment the <CODE>ulimit</CODE> command in
<CODE>safe_mysqld</CODE> and add options to increase shared memory.

</P>
<P>
Note that Linux-Alpha is still an alpha-quality platform for <STRONG>MySQL</STRONG>.
With the newest <CODE>glibc</CODE>, you have a very good chance of it working.

</P>
<P>
If you have problems with signals (<STRONG>MySQL</STRONG> dies unexpectedly
under high load) you may have found an OS bug with threads and
signals. In this case you can tell <STRONG>MySQL</STRONG> not to use signals by
configuring with:

</P>

<PRE>
shell&#62; CFLAGS=-DDONT_USE_THR_ALARM \
       CXXFLAGS=-DDONT_USE_THR_ALARM \
       ./configure ...
</PRE>

<P>
This doesn't affect the performance of <STRONG>MySQL</STRONG>, but has the side
effect that you can't kill clients that are "sleeping" on a connection with
<CODE>mysqladmin kill</CODE> or <CODE>mysqladmin shutdown</CODE>.  Instead, the client
will die when it issues its next command.

</P>


<H4><A NAME="MKLinux" HREF="manual_toc.html#MKLinux">4.11.5.6  MkLinux notes</A></H4>

<P>
<STRONG>MySQL</STRONG> should work on MkLinux with the newest <CODE>glibc</CODE> package
(tested with <CODE>glibc</CODE> 2.0.7).

</P>


<H3><A NAME="Alpha-DEC-Unix" HREF="manual_toc.html#Alpha-DEC-Unix">4.11.6  Alpha-DEC-Unix notes</A></H3>

<P>
When compiling threaded programs under Digital UNIX, the documentation
recommends using the <CODE>-pthread</CODE> option for <CODE>cc</CODE> and <CODE>cxx</CODE> and
the libraries <CODE>-lmach -lexc</CODE> (in addition to <CODE>-lpthread</CODE>).  You
should run <CODE>configure</CODE> something like this:

</P>

<PRE>
shell&#62; CC="cc -pthread" CXX="cxx -pthread -O" \
       ./configure --with-named-thread-libs="-lpthread -lmach -lexc -lc"
</PRE>

<P>
When compiling <CODE>mysqld</CODE>, you may see a couple of warnings like this:

</P>

<PRE>
mysqld.cc: In function void handle_connections()':
mysqld.cc:626: passing long unsigned int *' as argument 3 of
accept(int,sockadddr *, int *)'
</PRE>

<P>
You can safely ignore these warnings. They occur because <CODE>configure</CODE>
can detect only errors, not warnings.

</P>
<P>
If you start the server directly from the command line, you may have problems
with it dying when you log out.  (When you log out, your outstanding processes
receive a <CODE>SIGHUP</CODE> signal.)  If so, try starting the server like this:

</P>

<PRE>
shell&#62; nohup mysqld [options] &#38;
</PRE>

<P>
<CODE>nohup</CODE> causes the command following it to ignore any <CODE>SIGHUP</CODE>
signal sent from the terminal.  Alternatively, start the server by running
<CODE>safe_mysqld</CODE>, which invokes <CODE>mysqld</CODE> using <CODE>nohup</CODE> for you.

</P>


<H3><A NAME="Alpha-DEC-OSF1" HREF="manual_toc.html#Alpha-DEC-OSF1">4.11.7  Alpha-DEC-OSF1 notes</A></H3>

<P>
If you have problems compiling and have DEC <CODE>CC</CODE> and <CODE>gcc</CODE>
installed, try running <CODE>configure</CODE> like this:

</P>

<PRE>
shell&#62; CC=cc CFLAGS=-O CXX=gcc CXXFLAGS=-O3 \
       ./configure --prefix=/usr/local/mysql
</PRE>

<P>
If you get problems with the <TT>`c_asm.h'</TT> file, you can create and use a 'dummy'
<TT>`c_asm.h'</TT> file with:

</P>

<PRE>
shell&#62; touch include/c_asm.h
shell&#62; CC=gcc CFLAGS=-I./include \
       CXX=gcc CXXFLAGS=-O3 \
       ./configure --prefix=/usr/local/mysql
</PRE>

<P>
On OSF1 V4.0D and compiler "DEC C V5.6-071 on Digital UNIX V4.0 (Rev. 878)"
the compiler had some strange behavior (undefined <CODE>asm</CODE> symbols).
<CODE>/bin/ld</CODE> also appears to be broken (problems with <CODE>_exit
undefined</CODE> errors occuring while linking <CODE>mysqld</CODE>).  On this system, we
have managed to compile <STRONG>MySQL</STRONG> with the following <CODE>configure</CODE>
line, after replacing <CODE>/bin/ld</CODE> with the version from OSF 4.0C:

</P>

<PRE>
shell&#62; CC=gcc CXX=gcc CXXFLAGS=-O3 ./configure --prefix=/usr/local/mysql
</PRE>

<P>
In some versions of OSF1, the <CODE>alloca()</CODE> function is broken. Fix
this by removing the line in <TT>`config.h'</TT> that defines <CODE>'HAVE_ALLOCA'</CODE>.

</P>
<P>
The <CODE>alloca()</CODE> function also may have an incorrect prototype in
<CODE>/usr/include/alloca.h</CODE>.  This warning resulting from this can be ignored.

</P>
<P>
<CODE>configure</CODE> will use the following thread libraries automatically:
<CODE>--with-named-thread-libs="-lpthread -lmach -lexc -lc"</CODE>.

</P>
<P>
When using <CODE>gcc</CODE>, you can also try running <CODE>configure</CODE> like this:

</P>

<PRE>
shell&#62; CFLAGS=-D_PTHREAD_USE_D4 CXX=gcc CXXFLAGS=-O3 ./configure ....
</PRE>

<P>
If you have problems with signals (<STRONG>MySQL</STRONG> dies unexpectedly
under high load) you may have found an OS bug with threads and
signals. In this case you can tell <STRONG>MySQL</STRONG> not to use signals by
configuring with:

</P>

<PRE>
shell&#62; CFLAGS=-DDONT_USE_THR_ALARM \
       CXXFLAGS=-DDONT_USE_THR_ALARM \
       ./configure ...
</PRE>

<P>
This doesn't affect the performance of <STRONG>MySQL</STRONG>, but has the side
effect that you can't kill clients that are "sleeping" on a connection with
<CODE>mysqladmin kill</CODE> or <CODE>mysqladmin shutdown</CODE>.  Instead, the client
will die when it issues its next command.

</P>


<H3><A NAME="SGI-Irix" HREF="manual_toc.html#SGI-Irix">4.11.8  SGI-Irix notes</A></H3>

<P>
You may have to undefine some things in <TT>`config.h'</TT> after running
<CODE>configure</CODE> and before compiling.

</P>
<P>
In some Irix implementations, the <CODE>alloca()</CODE> function is broken. If the
<CODE>mysqld</CODE> server dies on some <CODE>SELECT</CODE> statements, remove the lines
from <TT>`config.h'</TT> that define <CODE>HAVE_ALLOC</CODE> and <CODE>HAVE_ALLOCA_H</CODE>.
If <CODE>mysqladmin create</CODE> doesn't work, remove the line from
<TT>`config.h'</TT> that defines <CODE>HAVE_READDIR_R</CODE>. You may have to remove
the <CODE>HAVE_TERM_H</CODE> line as well.

</P>
<P>
SGI recommends that you install all of the patches on this page as a set:
http://support.sgi.com/surfzone/patches/patchset/6.2_indigo.rps.html

</P>
<P>
At the very minimum, you should install the latest kernel rollup, the
latest <CODE>rld</CODE> rollup, and the latest <CODE>libc</CODE> rollup.

</P>
<P>
You definately need all the POSIX patches on this page, for pthreads support:

</P>
<P>
http://support.sgi.com/surfzone/patches/patchset/6.2_posix.rps.html

</P>
<P>
If you get the something like the following error when compiling
<TT>`mysql.cc'</TT>:

</P>

<PRE>
"/usr/include/curses.h", line 82: error(1084): invalid combination of type
</PRE>

<P>
Then type the following in the top-level directory of your <STRONG>MySQL</STRONG>
source tree:

</P>

<PRE>
shell&#62; extra/replace bool curses_bool &#60; /usr/include/curses.h &#62; include/curses.h
shell&#62; make
</PRE>

<P>
There have also been reports of scheduling problems.  If only one thread is
running, things go slow. Avoid this by starting another client. This may lead
to a 2-to-10-fold increase in execution speed thereafter for the other
thread.  This is a poorly-understood problem with Irix threads; you may have
to improvise to find solutions until this can be fixed.

</P>
<P>
If you are compiling with <CODE>gcc</CODE>, you can use the following
<CODE>configure</CODE> command:

</P>

<PRE>
shell&#62; CC=gcc CXX=gcc CXXFLAGS=-O3 \
       ./configure --prefix=/usr/local/mysql --with-thread-safe-client --with-named-thread-libs=-lpthread
</PRE>



<H3><A NAME="FreeBSD" HREF="manual_toc.html#FreeBSD">4.11.9  FreeBSD notes</A></H3>

<P>
If you notice that <CODE>configure</CODE> will use MIT-pthreads, you should read
the MIT-pthreads notes. See section <A HREF="manual.html#MIT-pthreads">4.9  MIT-pthreads notes</A>.

</P>
<P>
If you get an error from <CODE>make install</CODE> that it can't find
<TT>`/usr/include/pthreads'</TT>, <CODE>configure</CODE> didn't detect that you need
MIT-pthreads. This is fixed by executing these commands:

</P>

<PRE>
shell&#62; rm config.cache
shell&#62; ./configure --with-mit-threads
</PRE>

<P>
The behavior of FreeBSD <CODE>make</CODE> is slightly different from that of GNU
<CODE>make</CODE>. If you have <CODE>make</CODE>-related problems, you should install GNU
<CODE>make</CODE>.

</P>
<P>
If <CODE>mysql</CODE> or <CODE>mysqladmin</CODE> takes a long time to respond, a user
said the following:

</P>
<P>
Are you running the <CODE>ppp</CODE> user process? On one FreeBSD box (2.2.5)
<STRONG>MySQL</STRONG>
clients takes a couple of seconds to connect to <CODE>mysqld</CODE> if the <CODE>ppp</CODE>
process is running.

</P>
<P>
FreeBSD is also known to have a very low default file handle limit.
See section <A HREF="manual.html#Not_enough_file_handles">17.10  File not found</A>.

</P>
<P>
<A NAME="IDX82"></A>
<A NAME="IDX83"></A>
<A NAME="IDX84"></A>
If you have a problem with <CODE>SELECT NOW()</CODE> returning values in GMT and
not your local time, you have to set the <CODE>TZ</CODE> environment variable to
your current timezone.  This should be done for the environment in which
the server runs, for example, in <CODE>safe_mysqld</CODE> or <CODE>mysql.server</CODE>.

</P>
<P>
Make sure that the <CODE>localhost</CODE> entry in the <TT>`/etc/hosts'</TT> file is
correct (otherwise you will have problems connecting to the database).  The
<TT>`/etc/hosts'</TT> file should start with a line:

</P>

<PRE>
127.0.0.1       localhost localhost.your.domain
</PRE>

<P>
If you are using FreeBSD 2.2.6, don't forget to apply the ttcp and mmap-22
patches to the OS (for security reasons).  Please see
<a HREF="http://www.freebsd.org">http://www.freebsd.org</a> for these CERT patches.

</P>
<P>
If you are using FreeBSD 2.2.7 and you have problems killing the <CODE>mysqld</CODE>
daemon, you should get new sources using <CODE>cvsup</CODE> and recompile
<CODE>libc_r</CODE>.

</P>



<H4><A NAME="FreeBSD-3.0" HREF="manual_toc.html#FreeBSD-3.0">4.11.9.1  FreeBSD-3.0 notes</A></H4>

<P>
You have to run <CODE>configure</CODE> with the
<CODE>--with-named-thread-libs=-lc_r</CODE> option.

</P>
<P>
The pthreads library for FreeBSD doesn't contain the <CODE>sigwait()</CODE>
function and there are some bugs in it.  To fix this, get the
<TT>`FreeBSD-3.0-libc_r-1.0.diff'</TT> file from the
<a HREF="ftp://www.mysql.com/pub/mysql/Downloads/FreeBSD">FreeBSD area</a> of the
<STRONG>MySQL</STRONG> FTP site and apply it in the
<TT>`/usr/src/lib/libc_r/uthread'</TT> directory. Then follow the instructions
that can be found with <CODE>man pthread</CODE> about how to recompile the
<CODE>libc_r</CODE> library.

</P>
<P>
You can test if you have a "modern" <CODE>libpthread.a</CODE> with this command:

</P>

<PRE>
shell&#62; nm /usr/lib/libc_r.a | grep sigwait
</PRE>

<P>
If the above doesn't find <CODE>sigwait</CODE>, you must use the patch above
and recompile <CODE>libc_r</CODE>.

</P>


<H3><A NAME="BSDI" HREF="manual_toc.html#BSDI">4.11.10  BSD/OS notes</A></H3>



<H4><A NAME="BSDI2" HREF="manual_toc.html#BSDI2">4.11.10.1  BSD/OS 2.x notes</A></H4>

<P>
If you get the following error when compiling <STRONG>MySQL</STRONG>, your
<CODE>ulimit</CODE> value for virtual memory is too low:

</P>

<PRE>
item_func.h: In method `Item_func_ge::Item_func_ge(const Item_func_ge &#38;)':
item_func.h:28: virtual memory exhausted
make[2]: *** [item_func.o] Error 1
</PRE>

<P>
Try using <CODE>ulimit -v 80000</CODE> and run <CODE>make</CODE> again.  If this
doesn't work and you are using <CODE>bash</CODE>, try switching to <CODE>csh</CODE>
or <CODE>sh</CODE>; some BSDI users have reported problems with <CODE>bash</CODE>
and <CODE>ulimit</CODE>.

</P>
<P>
If you are using <CODE>gcc</CODE>, you may also use have to use the
<CODE>--with-low-memory</CODE> flag for <CODE>configure</CODE> to be able to compile
<TT>`sql_yacc.cc'</TT>.

</P>
<P>
<A NAME="IDX85"></A>
<A NAME="IDX86"></A>
<A NAME="IDX87"></A>
If you have a problem with <CODE>SELECT NOW()</CODE> returning values in GMT and
not your local time, you have to set the <CODE>TZ</CODE> environment variable to
your current timezone.  This should be done for the environment in which
the server runs, for example in <CODE>safe_mysqld</CODE> or <CODE>mysql.server</CODE>.

</P>


<H4><A NAME="BSDI3" HREF="manual_toc.html#BSDI3">4.11.10.2  BSD/OS 3.x notes</A></H4>

<P>
Upgrade to BSD/OS 3.1. If that is not possible, install BSDIpatch M300-038.

</P>
<P>
Use the following command when configuring <STRONG>MySQL</STRONG>:

</P>

<PRE>
shell&#62; env CXX=shlicc++ CC=shlicc2 \
       ./configure \
           --prefix=/usr/local/mysql \
           --localstatedir=/var/mysql \
           --without-perl \
           --with-unix-socket-path=/var/mysql/mysql.sock
</PRE>

<P>
The following is also known to work:

</P>

<PRE>
shell&#62; env CC=gcc CXX=gcc CXXFLAGS=-O3 \
       ./configure \
           --prefix=/usr/local/mysql \
           --with-unix-socket-path=/var/mysql/mysql.sock
</PRE>

<P>
You can change the directory locations if you wish, or just use the
defaults by not specifying any locations.

</P>
<P>
If you have problems with performance under heavy load, try using the
<CODE>--skip-thread-priority</CODE> option to <CODE>safe_mysqld</CODE>!  This will run
all threads with the same priority; on BSDI 3.1, this gives better
performance (at least until BSDI fixes their thread scheduler).

</P>
<P>
If you get the error <CODE>virtual memory exhausted</CODE> while compiling,
you should try using <CODE>ulimit -v 80000</CODE> and run <CODE>make</CODE> again.
If this doesn't work and you are using <CODE>bash</CODE>, try switching to
<CODE>csh</CODE> or <CODE>sh</CODE>; some BSDI users have reported problems with
<CODE>bash</CODE> and <CODE>ulimit</CODE>.

</P>


<H4><A NAME="BSDI4" HREF="manual_toc.html#BSDI4">4.11.10.3  BSD/OS 4.x notes</A></H4>

<P>
BSDI 4.x has some thread related bugs.  If you want to use <STRONG>MySQL</STRONG>
on this, you should install all thread related patches. At least
M400-023 should be installed.

</P>


<H3><A NAME="SCO" HREF="manual_toc.html#SCO">4.11.11  SCO notes</A></H3>

<P>
The current port is tested only on a "sco3.2v5.0.4" and
"sco3.2v5.0.5" system.  There has also been a lot of progress on a
port to "sco 3.2v4.2".

</P>

<OL>
<LI>

For OpenServer 5.0.X you need to use GDS in Skunkware 95 (95q4c).  This
is necessary because GNU <CODE>gcc</CODE> 2.7.2 in Skunkware 97 does not have
GNU <CODE>as</CODE>.  You can also use <CODE>egcs</CODE> 1.1.2 or newer
<a HREF="http://www.egcs.com/">http://www.egcs.com/</a>.  If you are using <CODE>egcs</CODE> 1.1.2 you have
to execute the following command:


<PRE>
shell&#62; cp -p /usr/include/pthread/stdtypes.h /usr/local/lib/gcc-lib/i386-pc-sco3.2v5.0.5/egcs-2.91.66/include/pthread/
</PRE>

<LI>

You need the port of GCC 2.5.? for this product and the Development
system.  They are required on this version of SCO UNIX.  You cannot
just use the GCC Dev system.
<LI>

You should get the FSU Pthreads package and install it first.  This can be
found at
<a HREF="http://www.cs.wustl.edu/~schmidt/ACE_wrappers/FSU-threads.tar.gz">http://www.cs.wustl.edu/~schmidt/ACE_wrappers/FSU-threads.tar.gz</a>.
You can also get a precompiled package from
<a HREF="ftp://www.mysql.com/pub/mysql/Downloads/SCO/FSU-threads-3.5c.tar.gz">ftp://www.mysql.com/pub/mysql/Downloads/SCO/FSU-threads-3.5c.tar.gz</a>.
<LI>

FSU Pthreads can be compiled with SCO UNIX 4.2 with tcpip.  Or
OpenServer 3.0 or Open Desktop 3.0 (OS 3.0 ODT 3.0), with the SCO
Development System installed using a good port of GCC 2.5.X ODT or OS
3.0 you will need a good port of GCC 2.5.? There are a lot of problems
without a good port.  The port for this product requires the SCO UNIX
Development system.  Without it, you are missing the libraries and the
linker that is needed.
<LI>

To build FSU Pthreads on your system, do the following:

<OL>
<LI>

Run <CODE>./configure</CODE> in the <TT>`threads/src'</TT> directory and select
the SCO OpenServer option. This command copies <TT>`Makefile.SCO5'</TT> to
<TT>`Makefile'</TT>.
<LI>

Run <CODE>make</CODE>.
<LI>

To install in the default <TT>`/usr/include'</TT> directory, login as root,
then <CODE>cd</CODE> to the <TT>`thread/src'</TT> directory, and run <CODE>make
install</CODE>.
</OL>

<LI>

Remember to use GNU <CODE>make</CODE> when making <STRONG>MySQL</STRONG>.
<LI>

On OSR 5.0.5, you should use the following configure line:

<PRE>
shell&#62; CC="gcc -DSCO" CXX="gcc -DSCO" ./configure
</PRE>

The <CODE>-DSCO</CODE> is needed to help configure detect some thread
functions properly.  If you forget <CODE>-DSCO</CODE>, you will get the following
error message while compiling:

<PRE>
my_pthread.c: In function `my_pthread_mutex_init':
my_pthread.c:374: `pthread_mutexattr_default' undeclared (first use this function)
</PRE>

<LI>

If you don't start <CODE>safe_mysqld</CODE> as root, you probably will get only the
default 110 open files per process.  <CODE>mysqld</CODE> will write a note about this
in the log file.
<LI>

With SCO 3.2V5.0.5, you should use a FSU Pthreads version 3.5c or newer.
The following <CODE>configure</CODE> command should work:

<PRE>
shell&#62; CC="gcc -belf" ./configure --prefix=/usr/local/mysql --disable-shared
</PRE>

<LI>

With SCO 3.2V4.2, you should use a FSU Pthreads version 3.5c or newer.
The following <CODE>configure</CODE> command should work:

<PRE>
shell&#62; CFLAGS="-D_XOPEN_XPG4" CXX=gcc CXXFLAGS="-D_XOPEN_XPG4" \
       ./configure \
           --with-debug --prefix=/usr/local/mysql \
           --with-named-thread-libs="-lgthreads -lsocket -lgen -lgthreads" \
           --with-named-curses-libs="-lcurses"
</PRE>

You may get some problems with some include files. In this case, you can
find new SCO-specific include files at
<a HREF="ftp://www.mysql.com/pub/mysql/Downloads/SCO/SCO-3.2v4.2-includes.tar.gz">ftp://www.mysql.com/pub/mysql/Downloads/SCO/SCO-3.2v4.2-includes.tar.gz</a>.
You should unpack this file in the <TT>`include'</TT>
directory of your <STRONG>MySQL</STRONG> source tree.
</OL>

<P>
SCO development notes:

</P>

<UL>
<LI>

<STRONG>MySQL</STRONG> should automatically detect FSU Pthreads and link <CODE>mysqld</CODE>
with <CODE>-lgthreads -lsocket -lgthreads</CODE>.
<LI>

The SCO development libraries are reentrant in FSU Pthreads. SCO claims
that its libraries' functions are reentrant, so they must be reentrant with
FSU Pthreads. FSU Pthreads on OpenServer tries to use the SCO scheme to
make reentrant library.
<LI>

FSU Pthreads (at least the version at <CODE>www.mysql.com</CODE>) comes linked with
GNU <CODE>malloc</CODE>.  If you encounter problems with memory usage, make sure that
<TT>`gmalloc.o'</TT>
is included in <TT>`libgthreads.a'</TT> and <TT>`libgthreads.so'</TT>.
<LI>

In FSU Pthreads, the following system calls are pthreads-aware: <CODE>read()</CODE>,
<CODE>write()</CODE>, <CODE>getmsg()</CODE>, <CODE>connect()</CODE>, <CODE>accept()</CODE>,
<CODE>select()</CODE> and <CODE>wait()</CODE>.
</UL>

<P>
If you want to install DBI on SCO, you have to edit the <TT>`Makefiles'</TT> in
DBI-xxx and each subdirectory:

</P>

<PRE>
OLD:                                  NEW:
CC = cc                               CC = gcc -belf
CCCDLFLAGS = -KPIC -W1,-Bexport       CCCDLFLAGS = -fpic
CCDLFLAGS = -wl,-Bexport              CCDLFLAGS =

LD = ld                               LD = gcc -belf -G -fpic
LDDLFLAGS = -G -L/usr/local/lib       LDDLFLAGS = -L/usr/local/lib
LDFLAGS = -belf -L/usr/local/lib      LDFLAGS = -L/usr/local/lib

LD = ld                               LD = gcc -belf -G -fpic
OPTIMISE = -Od         		      OPTIMISE = -O1

OLD:
CCCFLAGS = -belf -dy -w0 -U M_XENIX -DPERL_SCO5 -I/usr/local/include

NEW:
CCFLAGS = -U M_XENIX -DPERL_SCO5 -I/usr/local/include
</PRE>

<P>
This is because the Perl dynaloader will not load the <CODE>DBI</CODE> modules
if they were compiled with <CODE>icc</CODE> or <CODE>cc</CODE>.

</P>
<P>
Perl works best when compiled with <CODE>cc</CODE>.

</P>


<H3><A NAME="SCO_Unixware" HREF="manual_toc.html#SCO_Unixware">4.11.12  SCO Unixware 7.0 notes</A></H3>

<P>
You must use a version of <STRONG>MySQL</STRONG> at least as recent as 3.22.13, since
that version fixes some portability problems under Unixware.

</P>
<P>
We have been able to compile <STRONG>MySQL</STRONG> with the following <CODE>configure</CODE>
command on UnixWare 7.0.1:

</P>

<PRE>
shell&#62; CC=cc CXX=CC ./configure --prefix=/usr/local/mysql
</PRE>



<H3><A NAME="IBM-AIX" HREF="manual_toc.html#IBM-AIX">4.11.13  IBM-AIX notes</A></H3>

<P>
Automatic detection of <CODE>xlC</CODE> is missing from Autoconf, so a
<CODE>configure</CODE> command something like this is needed when using the IBM
compiler:

</P>

<PRE>
shell&#62; CC="xlc_r -ma -O3 -qstrict" \
       CXX="xlC_r -ma -O3 -qstrict" \
       ./configure
</PRE>

<P>
If you are using <CODE>egcs</CODE> to compile <STRONG>MySQL</STRONG>, you
<STRONG>MUST</STRONG> use the <CODE>-fno-exceptions</CODE> flag, as the exception
handling in <CODE>egcs</CODE> is not thread-safe!  (This is tested with
<CODE>egcs</CODE> 1.1.)  We recommend the following <CODE>configure</CODE> line with
<CODE>egcs</CODE> and <CODE>gcc</CODE> on AIX:

</P>

<PRE>
shell&#62; CXX=gcc \
       CXXFLAGS="-felide-constructors -fno-exceptions -fno-rtti" \
       ./configure --prefix=/home/monty --with-debug --with-low-memory
</PRE>

<P>
If you have problems with signals (<STRONG>MySQL</STRONG> dies unexpectedly
under high load) you may have found an OS bug with threads and
signals. In this case you can tell <STRONG>MySQL</STRONG> not to use signals by
configuring with:

</P>

<PRE>
shell&#62; CFLAGS=-DDONT_USE_THR_ALARM CXX=gcc \
       CXXFLAGS="-felide-constructors -fno-exceptions -fno-rtti -DDONT_USE_THR_ALARM" \
       ./configure --prefix=/home/monty --with-debug --with-low-memory
</PRE>

<P>
This doesn't affect the performance of <STRONG>MySQL</STRONG>, but has the side
effect that you can't kill clients that are "sleeping" on a connection with
<CODE>mysqladmin kill</CODE> or <CODE>mysqladmin shutdown</CODE>.  Instead, the client
will die when it issues its next command.

</P>


<H3><A NAME="HP-UX" HREF="manual_toc.html#HP-UX">4.11.14  HP-UX notes</A></H3>

<P>
There are a couple of "small" problems when compiling <STRONG>MySQL</STRONG> on
HP-UX.  We recommend that you use <CODE>gcc</CODE> instead of the HP-UX native
compiler, because <CODE>gcc</CODE> produces better code!

</P>
<P>
<CODE>gcc</CODE> 2.8.0 can't compile <CODE>readline</CODE> on HP-UX (an internal
compiler error occurs) if you are compiling with <CODE>-O6</CODE>.  On the
other hand, MIT-pthreads can't be compiled with the HP-UX compiler,
because it can't compile <CODE>.S</CODE> (assembler) files.  We got
<STRONG>MySQL</STRONG> to compile on HP-UX 10.20 by doing the following:

</P>

<PRE>
shell&#62; CC=gcc CXX=gcc \
       ./configure --prefix=/usr/local/mysql --with-low-memory
shell&#62; cd readline
shell&#62; edit Makefile and change -O6 to something lower
shell&#62; cd ..
shell&#62; make
shell&#62; make install
shell&#62; scripts/mysql_install_db
shell&#62; /usr/local/mysql/bin/safe_mysqld &#38;
</PRE>



<H2><A NAME="Win32" HREF="manual_toc.html#Win32">4.12  Win32 notes</A></H2>

<P>
This section describes installation and use of <STRONG>MySQL</STRONG> on Win32.  This
is also described in the <TT>`README'</TT> file that comes with the
<STRONG>MySQL</STRONG> Win32 distribution.

</P>



<H3><A NAME="Win32_installation" HREF="manual_toc.html#Win32_installation">4.12.1  Installing <STRONG>MySQL</STRONG> on Win32</A></H3>

<P>
If you don't have a registered version of <STRONG>MySQL</STRONG>, you should first
download the shareware version from:

</P>
<P>
<a HREF="http://www.mysql.com/mysql_w32.htmy"><STRONG>MySQL</STRONG> 3.21.29</a>

</P>
<P>
If you plan to connect to <STRONG>MySQL</STRONG> from some other program, you will
probably also need the <STRONG>MyODBC</STRONG> driver. You can find this at:

</P>
<P>
<a HREF="http://www.mysql.com/download.htmy"><STRONG>MySQL</STRONG> download page</a>

</P>
<P>
To install either distribution, unzip it in some empty directory and run the
<CODE>Setup.exe</CODE> program.

</P>
<P>
Installation takes place in <TT>`C:\mysql'</TT>.

</P>


<H3><A NAME="Win95_start" HREF="manual_toc.html#Win95_start">4.12.2  Starting <STRONG>MySQL</STRONG> on Win95 / Win98</A></H3>

<P>
<STRONG>MySQL</STRONG> uses TCP/IP to connect a client to a server. (This will
allow any machine on your network to connect to your <STRONG>MySQL</STRONG>
server). Because of this, you must install TCP/IP on your machine before
starting <STRONG>MySQL</STRONG>.  You can find TCP/IP on your Windows CD-ROM.

</P>
<P>
Note that if you are using an old Win95 release (for example OSR2), it's
likely that you have an old Winsock package!  <STRONG>MySQL</STRONG> requires
Winsock 2!  You can get the newest Winsock from
<a HREF="http://www.microsoft.com">Microsoft</a>.  Win98 has as default the new
Winsock 2 library, so the above doesn't apply for Win98.

</P>
<P>
There are 2 different <STRONG>MySQL</STRONG> servers you can use:

</P>
<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><CODE>mysqld</CODE> </TD><TD> Compiled with full debugging and automatic memory allocation checking
</TR NOSAVE>
<TR><TD><CODE>mysqld-opt</CODE> </TD><TD> Optimized for a Pentium processor.
</TR>
</TABLE>

<P>
Both of the above should work on any Intel processor &#62;= i386.

</P>
<P>
To start the <CODE>mysqld</CODE> server, you should start a MS-DOS window and type:

</P>

<PRE>
C:\mysql\bin\mysqld
</PRE>

<P>
This will start <CODE>mysqld</CODE> in the background without a window.

</P>
<P>
You can kill the <STRONG>MySQL</STRONG> server by executing:

</P>

<PRE>
C:\mysql\bin\mysqladmin -u root shutdown
</PRE>

<P>
Note that Win95/Win98 don't support creation of named pipes.  On
Win95/Win98, you can only use named pipes to connect to a remote
<STRONG>MySQL</STRONG> running on an NT server.

</P>


<H3><A NAME="NT_start" HREF="manual_toc.html#NT_start">4.12.3  Starting <STRONG>MySQL</STRONG> on NT</A></H3>

<P>
The Win95/Win98 section also applies to <STRONG>MySQL</STRONG> on NT, with the
following differences:

</P>
<P>
To get <STRONG>MySQL</STRONG> to work with TCP/IP, you must install service pack 3
(or newer)! 

</P>
<P>
For NT, the server name is <CODE>mysqld-nt</CODE>.  Normally you should install
<STRONG>MySQL</STRONG> as a service on NT:

</P>

<PRE>
C:\mysql\bin\mysqld-nt --install
</PRE>

<P>
(You could use the <CODE>mysqld</CODE> or <CODE>mysqld-opt</CODE> servers on NT,
but those cannot be started as a service or use named pipes.)

</P>
<P>
You can start and stop the <STRONG>MySQL</STRONG> service with:

</P>

<PRE>
NET START mysql
NET STOP mysql
</PRE>

<P>
Note that in this case you can't use any other options for <CODE>mysqld-nt</CODE>!

</P>
<P>
You can also run <CODE>mysqld-nt</CODE> as a standalone program on NT if you need
to start <CODE>mysqld-nt</CODE> with any options!  If you start <CODE>mysqld-nt</CODE>
without options on NT, <CODE>mysqld-nt</CODE> tries to starts itself as a service
with the default service options.  If you have stopped <CODE>mysqld-nt</CODE>, you
have to start it with <CODE>NET START mysql</CODE>.

</P>
<P>
The service is installed with the name <CODE>MySql</CODE>. Once installed, it must
be started using Services Control Manager (SCM) Utility (found in Control
Panel) or by using the <CODE>NET START MySQL</CODE> command. If any options are
desired, they must be specified as "Startup parameters" in the SCM utility
before you start the <STRONG>MySQL</STRONG> service.  Once running, <CODE>mysqld-nt</CODE>
can be stopped using <CODE>mysqladmin</CODE> or from the SCM utility or by using
the command <CODE>NET STOP MySQL</CODE>. If you use SCM to stop <CODE>mysqld-nt</CODE>,
there is a strange message from SCM about <CODE>mysqld shutdown normally</CODE>.
When run as a service, <CODE>mysqld-nt</CODE> has no access to a console and so no
messages can be seen.

</P>
<P>
On NT you can get the following service error messages:

</P>
<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD>Permission Denied </TD><TD> Means that it cannot find <CODE>mysqld-nt.exe</CODE>
</TR NOSAVE>
<TR><TD>Cannot Register </TD><TD> Means that the path is incorrect
</TR>
</TABLE>

<P>
If you have problems installing <CODE>mysqld-nt</CODE> as a service, try starting
it with the full path:

</P>

<PRE>
C:\mysql\bin\mysqld --install
</PRE>

<P>
If this doesn't work, you can get <CODE>mysqld-nt</CODE> to start properly by fixing
the path in the registry!

</P>
<P>
If you don't want to start <CODE>mysqld-nt</CODE> as a service, you can start it as
follows:

</P>

<PRE>
C:\mysql\bin\mysqld-nt --standalone
</PRE>

<P>
or

</P>

<PRE>
C:\mysql\bin\mysqld-nt --standalone --debug
</PRE>

<P>
The last version gives you a debug trace in <TT>`C:\mysqld.trace'</TT>.

</P>


<H3><A NAME="Win32_running" HREF="manual_toc.html#Win32_running">4.12.4  Running <STRONG>MySQL</STRONG> on Win32</A></H3>

<P>
<STRONG>MySQL</STRONG> supports TCP/IP on all Win32 platforms and named pipes on NT.
The default is to use named pipes for local connections on NT and TCP/IP for
all other cases if the client has TCP/IP installed.  The host name specifies
which protocol is used:

</P>
<TABLE BORDER WIDTH="100%" NOSAVE >
<STRONG>Host name</STRONG> </TD><TD> <STRONG>protocol</STRONG>
<TR><TD>NULL (none) </TD><TD> On NT, try named pipes first; if that doesn't work, use TCP/IP. On Win95/Win98, TCP/IP is used.
</TR NOSAVE>
<TR><TD>. </TD><TD> Named pipes
</TR NOSAVE>
<TR><TD>localhost </TD><TD> TCP/IP to current host
</TR NOSAVE>
<TR><TD>hostname </TD><TD> TCP/IP
</TR>
</TABLE>

<P>
You can force a <STRONG>MySQL</STRONG> client to use named pipes by specifying the
<CODE>--pipe</CODE> option.  Use the <CODE>--socket</CODE> option to specify the name of
the pipe.

</P>
<P>
You can test whether or not <STRONG>MySQL</STRONG> is working by executing the
following commands:

</P>

<PRE>
C:\mysql\bin\mysqlshow
C:\mysql\bin\mysqlshow -u root mysql
C:\mysql\bin\mysqladmin version status proc
C:\mysql\bin\mysql test
</PRE>

<P>
By default, <STRONG>MySQL</STRONG>-Win32 is configured to be installed in
<TT>`C:\mysql'</TT>.  If you want to install <STRONG>MySQL</STRONG> elsewhere, install it
in <TT>`C:\mysql'</TT>, then move the installation to where you want it.  If you
do move <STRONG>MySQL</STRONG>, you must tell <CODE>mysqld</CODE> where everything is by
supplying options to <CODE>mysqld</CODE>. Use <CODE>C:\mysql\bin\mysqld --help</CODE> to
display all options!  If, for example, you have moved the <STRONG>MySQL</STRONG>
distribution to <TT>`D:\programs\mysql'</TT>, you must start <CODE>mysqld</CODE> with:
<CODE>D:\programs\mysql\bin\mysqld --basedir D:\programs\mysql</CODE>

</P>
<P>
With the registered version of <STRONG>MySQL</STRONG>, you can also create a
<TT>`C:\my.cnf'</TT> file that holds any default options for the
<STRONG>MySQL</STRONG> server.  Copy the file <TT>`\mysql\my-example.cnf'</TT> to
<TT>`C:\my.cnf'</TT> and edit this to suit your setup.  Note that you should
specify all paths with <CODE>/</CODE> instead of <CODE>\</CODE>. If you use
<CODE>\</CODE>, you need to specify this twice, as <CODE>\</CODE> is the escape
character in <STRONG>MySQL</STRONG>.
See section <A HREF="manual.html#Option_files">4.15.4  Option files</A>.

</P>
<P>
If <CODE>mysqld</CODE> is slow to answer to connections on Win95/Win98, there is
probably a problem with your DNS. In this case, start <CODE>mysqld</CODE> with
<CODE>--skip-name-resolve</CODE> and use only <CODE>localhost</CODE> and IP numbers in
the <STRONG>MySQL</STRONG> grant tables.  You can also avoid DNS when connecting to a
<CODE>mysqld-nt</CODE> <STRONG>MySQL</STRONG> server running on NT by using the
<CODE>--pipe</CODE> argument to specify use of named pipes.  This works for most
<STRONG>MySQL</STRONG> clients.

</P>
<P>
There are two versions of the <STRONG>MySQL</STRONG> command line tool:
<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><CODE>mysql</CODE> </TD><TD> Compiled on native Win32, which offers very limited text
editing capabilities.
</TR NOSAVE>
<TR><TD><CODE>mysqlc</CODE> </TD><TD> Compiled with the Cygnus GNU compiler and libraries, which offers <CODE>readline</CODE> editing.
</TR>
</TABLE>

</P>
<P>
If you want to use <CODE>mysqlc.exe</CODE>, you must copy
<TT>`C:\mysql\lib\cygwinb19.dll'</TT> to <TT>`\windows\system'</TT> (or similar
place).

</P>
<P>
The default privileges on Win32 give all local users full privileges
to all databases.  To make <STRONG>MySQL</STRONG> more secure, you
should set a password for all users and remove the row in the
<CODE>mysql.user</CODE> table that has <CODE>Host='localhost'</CODE> and
<CODE>User="</CODE>.

</P>
<P>
You should also add a password for the <CODE>root</CODE> user:

</P>

<PRE>
C:\mysql\bin\mysql mysql
mysql&#62; DELETE FROM user WHERE Host='localhost' AND User=";
mysql&#62; QUIT
C:\mysql\bin\mysqladmin reload
C:\mysql\bin\mysqladmin -u root password your_password
</PRE>

<P>
After you've set the password, if you want to take down the <CODE>mysqld</CODE>
server, you can do so using this command:

</P>

<PRE>
mysqladmin --user=root --password=your_password shutdown
</PRE>



<H3><A NAME="Win32_and_SSH" HREF="manual_toc.html#Win32_and_SSH">4.12.5  Connecting to a remote <STRONG>MySQL</STRONG> from Win32 with SSH</A></H3>

<P>
Here is a note about how to connect to get a secure connection to remote MySQL
server with SSH (by David Carlson).

</P>

<UL>
<LI>

Install SSH client on your windows machine - I used a free SSH client
from <a HREF="http://www.doc.ic.ac.uk/~ci2/ssh/">http://www.doc.ic.ac.uk/~ci2/ssh/</a>.
Other useful links:
<a HREF="http://www.npaci.edu/Security/npaci_security_software.html">http://www.npaci.edu/Security/npaci_security_software.html</a> and
<a HREF="http://www.npaci.edu/Security/samples/ssh32_windows/index.html">http://www.npaci.edu/Security/samples/ssh32_windows/index.html</a>.
<LI>

Start SSH. Set Host Name = yourmysqlserver name or IP address. Set
userid=your userid to log in to your server
<LI>

Click on "local forwards". Set <CODE>local port: 3306</CODE>,
<CODE>host: localhost</CODE>, <CODE>remote port: 3306</CODE>
<LI>

Save everything otherwise you'll have to redo it the next time.
<LI>

Log in to your server with SSH.
<LI>

Start some ODBC application (for example Access)
<LI>

Create a new file and link to mySQL using the ODBC driver the same way
you normally do except for server, user "localhost".
</UL>

<P>
That's it. It works very well with a direct Internet connection. I'm
having problems with SSH conflicting with my Win95 network and Wingate -
but that'll be the topic of a posting on another software company's
usegroup!

</P>


<H3><A NAME="Win32_vs._Unix" HREF="manual_toc.html#Win32_vs._Unix">4.12.6  <STRONG>MySQL</STRONG>-Win32 compared to Unix <STRONG>MySQL</STRONG></A></H3>

<P>
<STRONG>MySQL</STRONG>-Win32 has by now proven itself to be very stable. This version
of <STRONG>MySQL</STRONG> has the same features as the corresponding Unix version
with the following exceptions:

</P>
<DL COMPACT>

<DT><STRONG>Win95 and threads</STRONG>
<DD>
Win95 leaks about 200 bytes of main memory for each thread creation.  Because
of this, you shouldn't run <CODE>mysqld</CODE> for an extended time on Win95 if
you do many connections, since each connection in <STRONG>MySQL</STRONG> creates
a new thread!  NT and Win98 don't suffer from this bug.

<DT><STRONG>Blocking read</STRONG>
<DD>
<STRONG>MySQL</STRONG> uses a blocking read for each connection.
This means that:


<UL>
<LI>

A connection will not be disconnected automatically after 8 hours, as happens
with the Unix version of <STRONG>MySQL</STRONG>.

<LI>

If a connection "hangs," it's impossible to break it without killing
<STRONG>MySQL</STRONG>.

<LI>

<CODE>mysqladmin kill</CODE> will not work on a sleeping connection.

<LI>

<CODE>mysqladmin shutdown</CODE> can't abort as long as there are sleeping
connections.
</UL>

We plan to fix this in the near future.

<DT><STRONG>UDF functions</STRONG>
<DD>
For the moment, <STRONG>MySQL</STRONG>-Win32 does not support user definable functions.

<DT><STRONG><CODE>DROP DATABASE</CODE></STRONG>
<DD>
You can't drop a database that is in use by some thread.

<DT><STRONG>Killing <STRONG>MySQL</STRONG> from the task manager</STRONG>
<DD>
You can't kill <STRONG>MySQL</STRONG> from the task manager or with the shutdown
utility in Windows95. You must take it down with <CODE>mysqladmin shutdown</CODE>.

<DT><STRONG>Case-insensitive names</STRONG>
<DD>
Filenames are case insensitive on Win32, so database and table names
are also case insensitive in <STRONG>MySQL</STRONG> for Win32.  The only restriction is
that database and table names must be given in the same case throughout a
given statement.  The following query would not work because it refers to
a table both as <CODE>my_table</CODE> and as <CODE>MY_TABLE</CODE>:

<PRE>
SELECT * FROM my_table WHERE MY_TABLE.col=1;
</PRE>

<DT><STRONG>The <SAMP>`\'</SAMP> directory character</STRONG>
<DD>
Pathname components in Win95 are separated by <SAMP>`\'</SAMP> characters, which is
also the escape character in <STRONG>MySQL</STRONG>.  If you are using <CODE>LOAD
DATA INFILE</CODE> or <CODE>SELECT ... INTO OUTFILE</CODE>, you must double the <SAMP>`\'</SAMP>
character or use Unix style filenames <SAMP>`/'</SAMP> characters:

<PRE>
LOAD DATA INFILE "C:\\tmp\\skr.txt" INTO TABLE skr;
SELECT * FROM skr INTO OUTFILE 'C:/tmp/skr.txt';
</PRE>

<DT><STRONG><CODE>Can't open named pipe</CODE> error</STRONG>
<DD>
If you use the shareware version of <STRONG>MySQL</STRONG>-Win32 on NT with the
newest mysql-clients you will get the following error:


<PRE>
error 2017: can't open named pipe to host: . pipe...
</PRE>

<A NAME="IDX88"></A>
This is because the release version of <STRONG>MySQL</STRONG> uses
named pipes on NT by default.  You can avoid this error by using the
<CODE>--host=localhost</CODE> option to the new <STRONG>MySQL</STRONG> clients
or create a file <TT>`C:\my.cnf'</TT> that contains the following information:


<PRE>
[client]
host = localhost
</PRE>

<DT><STRONG><CODE>Access denied for user</CODE> error</STRONG>
<DD>
If you get the error <CODE>Access denied for user: 'some-user@unknown'
to database 'mysql'</CODE> when accessing a <STRONG>MySQL</STRONG> server on the same
machine, this means that <STRONG>MySQL</STRONG> can't resolve your host name
properly.

To fix this, you should create a file <TT>`\windows\hosts'</TT> with the
following information:


<PRE>
127.0.0.1       localhost
</PRE>

</DL>

<P>
Here are some open issues for anyone who might want to help us with the Win32
release:

</P>

<UL>
<LI>

Make a single user <CODE>MYSQL.DLL</CODE> server.  This should include everything in
a standard <STRONG>MySQL</STRONG> server, except thread creation.  This will make
<STRONG>MySQL</STRONG> much easier to use in applications that don't need a true
client/server and don't need to access the server from other hosts.

<LI>

Add some nice "start" and "shutdown" icons to the <STRONG>MySQL</STRONG> installation.

<LI>

Create a tool to manage registry entries for the <STRONG>MySQL</STRONG> startup
options.  The registry entry reading is already coded into <CODE>mysqld.cc</CODE>,
but it should be recoded to be more "parameter" oriented.
The tool should also be able to update the <TT>`\my.cnf'</TT> file if the user
would prefer to use this instead of the registry.

<LI>

When registering <CODE>mysqld</CODE> as a service with <CODE>--install</CODE> (on NT)
it would be nice if you could also add default options on the command line.
For the moment, the workaround is to update the <TT>`C:\my.cnf'</TT> file
instead.

<LI>

When you suspend a laptop running Win95, the <CODE>mysqld</CODE>
daemon doesn't accept new connections when the laptop is resumed.
We don't know if this is a problem with Win95, TCP/IP or <STRONG>MySQL</STRONG>.

<LI>

It would be real nice to be able to kill <CODE>mysqld</CODE> from the
task manager.  For the moment, you must use <CODE>mysqladmin shutdown</CODE>.

<LI>

Port <CODE>readline</CODE> to Win32 for use in the <CODE>mysql</CODE> command line tool.

<LI>

GUI versions of the standard <STRONG>MySQL</STRONG> clients (<CODE>mysql</CODE>,
<CODE>mysqlshow</CODE>, <CODE>mysqladmin</CODE>, and <CODE>mysqldump</CODE>) would be nice.

<LI>

It would be nice if the socket "read" and "write" functions in
<TT>`net.c'</TT> were interruptible. This would make it possible to kill open
threads with <CODE>mysqladmin kill</CODE> on Win32.

<LI>

Documentation of which Windows programs work with
<STRONG>MySQL</STRONG>-Win32/<STRONG>MyODBC</STRONG> and what must be done to get them working.

<LI>

<CODE>mysqld</CODE> always starts in the "C" locale and not in the default locale.
We would like to have <CODE>mysqld</CODE> use the current locale for the sort order.

<LI>

Port <CODE>sqlclient</CODE> to Win32 (almost done) and add more features to it!

<LI>

Add more options to MysqlManager.

<LI>

Change the communication protocol between the server and client to use Windows
internal communication instead of sockets and TCP/IP.

<LI>

Implement UDF functions with <CODE>.DLL</CODE>s.

<LI>

Add macros to use the faster thread-safe increment/decrement methods
provided by Win32.

</UL>

<P>
Other Win32-specific issues are described in the <TT>`README'</TT> file that comes
with the <STRONG>MySQL</STRONG>-Win32 distribution.

</P>


<H2><A NAME="OS_2" HREF="manual_toc.html#OS_2">4.13  OS/2 notes</A></H2>

<P>
<STRONG>MySQL</STRONG> uses quite a few open files. Because of this, you
should add something like the following to your <TT>`CONFIG.SYS'</TT> file:

</P>

<PRE>
SET EMXOPT=-c -n -h1024
</PRE>

<P>
If you don't do this, you will probably run into the following error:

</P>

<PRE>
File 'xxxx' not found (Errcode: 24)
</PRE>

<P>
When using <STRONG>MySQL</STRONG> with OS/2 Warp 3, FixPack 29 or above is
required.  With OS/2 Warp 4, FixPack 4 or above is required. This is a
requirement of the Pthreads library.  <STRONG>MySQL</STRONG> must be installed
in a partition that supports long file names such as HPFS, FAT32, etc.

</P>
<P>
The <TT>`INSTALL.CMD'</TT> script must be run from OS/2's own <TT>`CMD.EXE'</TT>
and may not work with replacement shells such as <TT>`4OS2.EXE'</TT>.

</P>
<P>
The <TT>`scripts/mysql-install-db'</TT> script has been renamed: it is now called
<TT>`install.cmd'</TT> and is a REXX script which will set up the default
<STRONG>MySQL</STRONG> security settings and create the WorkPlace Shell icons
for <STRONG>MySQL</STRONG>.

</P>
<P>
Dynamic module support is compiled in but not fully tested. Dynamic
modules should be compiled using the Pthreads runtime library.

</P>

<PRE>
gcc -Zdll -Zmt -Zcrtdll=pthrdrtl -I../include -I../regex -I.. \
    -o example udf_example.cc -L../lib -lmysqlclient udf_example.def
mv example.dll example.udf
</PRE>

<P>
<STRONG>Note:</STRONG> Due to limitations in OS/2, UDF module name stems must not
exceed 8 characters. Modules are stored in the <TT>`/mysql2/udf'</TT>
directory; the <CODE>safe-mysqld.cmd</CODE> script will put this directory in
the <CODE>BEGINLIBPATH</CODE> environment variable. When using UDF modules,
specified extensions are ignored -- it is assumed to be <TT>`.udf'</TT>.
For example, in Unix, the shared module might be named <TT>`example.so'</TT>
and you would load a function from it like this:

</P>

<PRE>
CREATE FUNCTION metaphon RETURNS STRING SONAME "example.so";
</PRE>

<P>
Is OS/2, the module would be named <TT>`example.udf'</TT>, but you would not
specify the module extension:

</P>

<PRE>
CREATE FUNCTION metaphon RETURNS STRING SONAME "example";
</PRE>



<H2><A NAME="TcX_binaries" HREF="manual_toc.html#TcX_binaries">4.14  TcX binaries</A></H2>

<P>
As a service, TcX provides a set of binary distributions of <STRONG>MySQL</STRONG>
that are compiled at TcX or at sites where customers kindly have given us
access to their machines.

</P>
<P>
These distributions
are generated with <CODE>scripts/make_binary_distribution</CODE> and are
configured with the following compilers and options:

</P>
<DL COMPACT>

<DT>SunOS 4.1.4 2 sun4c with <CODE>gcc</CODE> 2.7.2.1
<DD>
<CODE>CC=gcc CXX=gcc CXXFLAGS=-O3 ./configure --prefix=/usr/local/mysql --disable-shared</CODE>

<DT>SunOS 5.5.1 sun4u with <CODE>egcs</CODE> 1.0.3a
<DD>
<CODE>CC=gcc CFLAGS="-O6 -fomit-frame-pointer" CXX=gcc CXXFLAGS="-O6 -fomit-frame-pointer -felide-constructors -fno-exceptions -fno-rtti" ./configure --prefix=/usr/local/mysql --with-low-memory</CODE>

<DT>SunOS 5.6 sun4u with <CODE>egcs</CODE> 2.90.27
<DD>
<CODE>CC=gcc CFLAGS="-O6 -fomit-frame-pointer" CXX=gcc CXXFLAGS="-O6 -fomit-frame-pointer -felide-constructors -fno-exceptions -fno-rtti" ./configure --prefix=/usr/local/mysql --with-low-memory</CODE>

<DT>SunOS 5.6 i86pc with <CODE>gcc</CODE> 2.8.1
<DD>
<CODE>CC=gcc CXX=gcc CXXFLAGS=-O3 ./configure --prefix=/usr/local/mysql --with-low-memory</CODE>

<DT>Linux 2.0.33 i386 with <CODE>pgcc</CODE> 2.90.29 (<CODE>egcs</CODE> 1.0.3a)
<DD>
<CODE>CFLAGS="-O6 -mpentium -mstack-align-double -fomit-frame-pointer" CXX=gcc CXXFLAGS="-O6 -mpentium -mstack-align-double -fomit-frame-pointer -felide-constructors -fno-exceptions -fno-rtti" ./configure --prefix=/usr/local/mysql --enable-assembler --with-mysqld-ldflags=-all-static</CODE>

<DT>SCO 3.2v5.0.4 i386 with <CODE>gcc</CODE> 2.7-95q4
<DD>
<CODE>CC=gcc CXX=gcc CXXFLAGS=-O3 ./configure --prefix=/usr/local/mysql</CODE>

<DT>AIX 2 4 with <CODE>gcc</CODE> 2.7.2.2
<DD>
<CODE>CC=gcc CXX=gcc CXXFLAGS=-O3 ./configure --prefix=/usr/local/mysql</CODE>

<DT>OSF1 V4.0 564 alpha with <CODE>gcc</CODE> 2.8.1
<DD>
<CODE>CC=gcc CFLAGS=-O CXX=gcc CXXFLAGS=-O3 ./configure --prefix=/usr/local/mysql --with-low-memory</CODE>

<DT>Irix 6.3 IP32 with <CODE>gcc</CODE> 2.8.0
<DD>
<CODE>CC=gcc CXX=gcc CXXFLAGS=-O3 ./configure --prefix=/usr/local/mysql</CODE>

<DT>BSDI BSD/OS 3.1 i386 with <CODE>gcc</CODE> 2.7.2.1
<DD>
<CODE>CC=gcc CXX=gcc CXXFLAGS=-O ./configure --prefix=/usr/local/mysql</CODE>

<DT>BSDI BSD/OS 2.1 i386 with <CODE>gcc</CODE> 2.7.2
<DD>
<CODE>CC=gcc CXX=gcc CXXFLAGS=-O3 ./configure --prefix=/usr/local/mysql</CODE>
</DL>

<P>
Anyone who has more optimal options for any of the configurations listed
above can always mail them to the developer's mailing list at

</P>
<P>
RPM distributions prior to <STRONG>MySQL</STRONG> 3.22 are user-contributed.
Beginning with 3.22, some RPMs are TcX-generated.

</P>


<H2><A NAME="Post-installation" HREF="manual_toc.html#Post-installation">4.15  Post-installation setup and testing</A></H2>

<P>
Once you've installed <STRONG>MySQL</STRONG> (from either a binary or source
distribution), you need to initialize the grant tables, start the server
and make sure that the server works okay.  You may also wish to arrange
for the server to be started and stopped automatically when your system
starts up and shuts down.

</P>
<P>
Normally you install the grant tables and start the server like this:

</P>

<PRE>
shell&#62; ./scripts/mysql_install_db
shell&#62; cd mysql_installation_directory
shell&#62; ./bin/safe_mysqld &#38;
</PRE>

<P>
Testing is most easily done from the top-level directory of the <STRONG>MySQL</STRONG>
distribution.  For a binary distribution, this is your installation directory
(typically something like <TT>`/usr/local/mysql'</TT>).  For a source
distribution, this is the main directory of your <STRONG>MySQL</STRONG> source tree.

</P>
<P>
In the commands shown below in this section and in the following
subsections, <CODE>BINDIR</CODE> is the path to the location in which programs
like <CODE>mysqladmin</CODE> and <CODE>safe_mysqld</CODE> are installed.  For a
binary distribution, this is the <TT>`bin'</TT> directory within the
distribution.  For a source distribution, <CODE>BINDIR</CODE> is probably
<TT>`/usr/local/bin'</TT>, unless you specified an installation directory
other than <TT>`/usr/local'</TT> when you ran <CODE>configure</CODE>.
<CODE>EXECDIR</CODE> is the location in which the <CODE>mysqld</CODE> server is
installed.  For a binary distribution, this is the same as
<CODE>BINDIR</CODE>.  For a source distribution, <CODE>EXECDIR</CODE> is probably
<TT>`/usr/local/libexec'</TT>.

</P>
<P>
Testing is described in detail below:

</P>

<OL>
<LI>

If necessary, start the <CODE>mysqld</CODE> server and set up the initial
<STRONG>MySQL</STRONG> grant tables containing the privileges that determine how
users are allowed to connect to the server.  This is normally done with the
<CODE>mysql_install_db</CODE> script:


<PRE>
shell&#62; scripts/mysql_install_db
</PRE>

Normally, <CODE>mysql_install_db</CODE> needs to be run only the first time you
install <STRONG>MySQL</STRONG>.  Therefore, if you are upgrading an existing
installation, you can skip this step. (However, <CODE>mysql_install_db</CODE> is
quite safe to use and will not update any tables that already exist, so if
you are unsure what to do, you can always run <CODE>mysql_install_db</CODE>.)

<CODE>mysql_install_db</CODE> creates six tables (<CODE>user</CODE>, <CODE>db</CODE>,
<CODE>host</CODE>, <CODE>tables_priv</CODE>, <CODE>columns_priv</CODE> and <CODE>func</CODE>) in the
<CODE>mysql</CODE> database.  A description of the initial privileges is given in
section <A HREF="manual.html#Default_privileges">6.10  Setting up the initial <STRONG>MySQL</STRONG> privileges</A>.  Briefly, these privileges allow the <STRONG>MySQL</STRONG>
<CODE>root</CODE> user to do anything, and allow anybody to create or use databases
with a name of <CODE>'test'</CODE> or starting with <CODE>'test_'</CODE>.

If you don't set up the grant tables, the following error will appear in the
log file when you start the server:

<A NAME="IDX89"></A>

<PRE>
mysqld: Can't find file: 'host.frm'
</PRE>

The above may also happens with a binary <STRONG>MySQL</STRONG> distribution if you
don't start <STRONG>MySQL</STRONG> by executing exactly <CODE>./bin/safe_mysqld</CODE>!

You might need to run <CODE>mysql_install_db</CODE> as <CODE>root</CODE>.  However,
if you prefer, you can run the <STRONG>MySQL</STRONG> server as an unprivileged
(non-<CODE>root</CODE>) user, provided that user can read and write files in
the database directory.  Instructions for running <STRONG>MySQL</STRONG> as an
unprivileged user are given in section <A HREF="manual.html#Changing_MySQL_user">17.8  How to run <STRONG>MySQL</STRONG> as a normal user</A>.

If you have problems with <CODE>mysql_install_db</CODE>, see
section <A HREF="manual.html#mysql_install_db">4.15.1  Problems running <CODE>mysql_install_db</CODE></A>.

There are some alternatives to running the <CODE>mysql_install_db</CODE>
script as it is provided in the <STRONG>MySQL</STRONG> distribution:


<UL>
<LI>

You may want to edit <CODE>mysql_install_db</CODE> before running it, to
change the initial privileges that are installed into the grant tables.
This is useful if you want to install <STRONG>MySQL</STRONG> on a lot of machines
with the same privileges.  In this case you probably should need only to add
a few extra <CODE>INSERT</CODE> statements to the <CODE>mysql.user</CODE> and
<CODE>mysql.db</CODE> tables!

<LI>

If you want to change things in the grant tables after installing them, you
can run <CODE>mysql_install_db</CODE>, then use <CODE>mysql -u root mysql</CODE> to
connect to the grant tables as the <STRONG>MySQL</STRONG> <CODE>root</CODE> user and issue
SQL statements to modify the grant tables directly.

<LI>

It is possible to recreate the grant tables completely after they have
already been created.  You might want to do this if you've already installed
the tables but then want to recreate them after editing
<CODE>mysql_install_db</CODE>.
</UL>

For more information about these alternatives, see section <A HREF="manual.html#Default_privileges">6.10  Setting up the initial <STRONG>MySQL</STRONG> privileges</A>.

<LI>

Start the <STRONG>MySQL</STRONG> server like this:

<PRE>
shell&#62; cd mysql_installation_directory
shell&#62; bin/safe_mysqld &#38;
</PRE>

If you have problems starting the server, see section <A HREF="manual.html#Starting_server">4.15.2  Problems starting the <STRONG>MySQL</STRONG> server</A>.

<LI>

Use <CODE>mysqladmin</CODE> to verify that the server is running.  The following
commands provide a simple test to check that the server is up and responding
to connections:


<PRE>
shell&#62; BINDIR/mysqladmin version
shell&#62; BINDIR/mysqladmin variables
</PRE>

The output from <CODE>mysqladmin version</CODE> varies slightly depending on your
platform and version of <STRONG>MySQL</STRONG>, but should be similar to that shown
below:


<PRE>
shell&#62; BINDIR/mysqladmin version
mysqladmin  Ver 6.3 Distrib 3.22.9-beta, for pc-linux-gnu on i686
TCX Datakonsult AB, by Monty

Server version          3.22.9-beta
Protocol version        10
Connection              Localhost via UNIX socket
TCP port                3306
UNIX socket             /tmp/mysql.sock
Uptime:                 16 sec

Running threads: 1  Questions: 20  Reloads: 2  Open tables: 3
</PRE>

To get a feeling for what else you can do with <CODE>BINDIR/mysqladmin</CODE>,
invoke it with the <CODE>--help</CODE> option.

<LI>

Verify that you can shut down the server:


<PRE>
shell&#62; BINDIR/mysqladmin -u root shutdown
</PRE>

<LI>

Verify that you can restart the server.  Do this using <CODE>safe_mysqld</CODE> or
by invoking <CODE>mysqld</CODE> directly.  For example:


<PRE>
shell&#62; BINDIR/safe_mysqld --log &#38;
</PRE>

If <CODE>safe_mysqld</CODE> fails, try running it from the <STRONG>MySQL</STRONG>
installation directory (if you are not already there).  If that doesn't work,
see section <A HREF="manual.html#Starting_server">4.15.2  Problems starting the <STRONG>MySQL</STRONG> server</A>.

<LI>

Run some simple tests to verify that the server is working.
The output should be similar to what is shown below:


<PRE>
shell&#62; BINDIR/mysqlshow
+-----------+
| Databases |
+-----------+
| mysql     |
+-----------+

shell&#62; BINDIR/mysqlshow mysql
Database: mysql
+--------------+
|    Tables    |
+--------------+
| columns_priv |
| db           |
| func         |
| host         |
| tables_priv  |
| user         |
+--------------+

shell&#62; BINDIR/mysql -e "select host,db,user from db" mysql
+------+--------+------+
| host | db     | user |
+------+--------+------+
| %    | test   |      |
| %    | test_% |      |
+------+--------+------+
</PRE>

There is also a benchmark suite in the <TT>`sql-bench'</TT> directory (under the
<STRONG>MySQL</STRONG> installation directory) that you can use to compare how
<STRONG>MySQL</STRONG> performs on different platforms. The <TT>`sql-bench/Results'</TT>
directory contains the results from many runs against different databases and
platforms.  To run all tests, execute these commands:


<PRE>
shell&#62; cd sql-bench
shell&#62; run-all-tests
</PRE>

If you don't have the <TT>`sql-bench'</TT> directory, you are probably using an
RPM for a binary distribution.  (Source distribution RPMs include the
benchmark directory.) In this case, you must first install the benchmark
suite before you can use it.  Beginning with <STRONG>MySQL</STRONG> 3.22, there are
benchmark RPM files named <TT>`mysql-bench-VERSION-i386.rpm'</TT> that contain
benchmark code and data.

If you have a source distribution, you can also run the tests in the
<TT>`tests'</TT> subdirectory. For example, to run <TT>`auto_increment.tst'</TT>, do
this:


<PRE>
shell&#62; BINDIR/mysql -vvf test &#60; ./tests/auto_increment.tst
</PRE>

The expected results are shown in the <TT>`./tests/auto_increment.res'</TT> file.
</OL>



<H3><A NAME="mysql_install_db" HREF="manual_toc.html#mysql_install_db">4.15.1  Problems running <CODE>mysql_install_db</CODE></A></H3>

<P>
This section lists problems you might encounter when you run
<CODE>mysql_install_db</CODE>:

</P>
<DL COMPACT>

<DT><STRONG><CODE>mysql_install_db</CODE> doesn't install the grant tables</STRONG>
<DD>
You may find that <CODE>mysql_install_db</CODE> fails to install the grant
tables and terminates after displaying the following messages:


<PRE>
starting mysqld daemon with databases from XXXXXX
mysql daemon ended
</PRE>

In this case, you should examine the log file very carefully!  The log
should be located in the directory <TT>`XXXXXX'</TT> named by the error message,
and should indicate why <CODE>mysqld</CODE> didn't start.  If you don't understand
what happened, include the log when you post a bug report using
<CODE>mysqlbug</CODE>!
See section <A HREF="manual.html#Bug_reports">2.3  How to report bugs or problems</A>.

<DT><STRONG>There is already a <CODE>mysqld</CODE> daemon running</STRONG>
<DD>
In this case, you have probably don't have to run <CODE>mysql_install_db</CODE> at
all.  You have to run <CODE>mysql_install_db</CODE> only once, when you install
<STRONG>MySQL</STRONG> the first time.

<DT><STRONG>Installing a second <CODE>mysqld</CODE> daemon doesn't work when one daemon is running</STRONG>
<DD>
This can happen when you already have an existing <STRONG>MySQL</STRONG>
installation, but want to put a new installation in a different place (e.g.,
for testing, or perhaps you simply want to run two installations at the same
time).  Generally the problem that occurs when you try to run the second
server is that it tries to use the same socket and port as the old one.  In
this case you will get the error message: <CODE>Can't start server: Bind on
TCP/IP port: Address already in use</CODE> or <CODE>Can't start server : Bind on
unix socket...</CODE>  You can start the new server with a different socket and
port as follows:

<A NAME="IDX90"></A>
<A NAME="IDX91"></A>
<A NAME="IDX92"></A>
<A NAME="IDX93"></A>

<PRE>
shell&#62; MYSQL_UNIX_PORT=/tmp/mysqld-new.sock
shell&#62; MYSQL_TCP_PORT=3307
shell&#62; export MYSQL_UNIX_PORT MYSQL_TCP_PORT
shell&#62; scripts/mysql_install_db
shell&#62; bin/safe_mysqld &#38;
</PRE>

After this, you should edit your server boot script to start both daemons
with different sockets and ports.  For example, it could invoke
<CODE>safe_mysqld</CODE> twice, but with different <CODE>--socket</CODE>, <CODE>--port</CODE>
and <CODE>--basedir</CODE> options for each invocation.

<DT><STRONG>You don't have write access to <TT>`/tmp'</TT></STRONG>
<DD>
If you don't have write access to create a socket file at the default place
(in <TT>`/tmp'</TT>) or permission to create temporary files in <TT>`/tmp,'</TT>
you will get an error when running <CODE>mysql_install_db</CODE> or when
starting or using <CODE>mysqld</CODE>.

You can specify a different socket and temporary directory as follows:

<A NAME="IDX94"></A>
<A NAME="IDX95"></A>
<A NAME="IDX96"></A>
<A NAME="IDX97"></A>

<PRE>
shell&#62; TMPDIR=/some_tmp_dir/
shell&#62; MYSQL_UNIX_PORT=/some_tmp_dir/mysqld.sock
shell&#62; export TMPDIR MYSQL_UNIX_PORT
</PRE>

<TT>`some_tmp_dir'</TT> should be the path to some directory for which you
have write permission.

After this you should be able to run <CODE>mysql_install_db</CODE> and start
the server with these commands:


<PRE>
shell&#62; scripts/mysql_install_db
shell&#62; BINDIR/safe_mysqld &#38;
</PRE>

<DT><STRONG><CODE>mysqld</CODE> crashes immediately</STRONG>
<DD>
If you are running RedHat 5.0 with a version of <CODE>glibc</CODE> older than
2.0.7-5, you should make sure you have installed all <CODE>glibc</CODE> patches!
There is a lot of information about this in the <STRONG>MySQL</STRONG> mail
archives.  Links to the mail archives are available at the online
<a HREF="http://www.mysql.com/doc.html"> <STRONG>MySQL</STRONG> documentation page</a>.
Also, see section <A HREF="manual.html#Linux">4.11.5  Linux notes (all Linux versions)</A>.

You can also start <CODE>mysqld</CODE> manually using the <CODE>--skip-grant</CODE>
option and add the privilege information yourself using <CODE>mysql</CODE>:


<PRE>
shell&#62; BINDIR/safe_mysqld --skip-grant &#38;
shell&#62; BINDIR/mysql -u root mysql
</PRE>

From <CODE>mysql</CODE>, manually execute the SQL commands in <CODE>mysql_install_db</CODE>.
Make sure you run <CODE>mysqladmin reload</CODE> afterward to tell the
server to reload the grant tables.
</DL>



<H3><A NAME="Starting_server" HREF="manual_toc.html#Starting_server">4.15.2  Problems starting the <STRONG>MySQL</STRONG> server</A></H3>

<P>
Generally, you start the <CODE>mysqld</CODE> server in one of three ways:

</P>

<UL>
<LI>

By invoking <CODE>mysql.server</CODE>.  This script is used primarily at
system startup and shutdown, and is described more fully in
section <A HREF="manual.html#Automatic_start">4.15.3  Starting and stopping <STRONG>MySQL</STRONG> automatically</A>.
<LI>

By invoking <CODE>safe_mysqld</CODE>, which tries to determine the proper options
for <CODE>mysqld</CODE> and then runs it with those options.
<LI>

By invoking <CODE>mysqld</CODE> directly.
</UL>

<P>
Whichever method you use to start the server, if it fails to start up
correctly, check the log file to see if you can find out why.  Log files
are located in the data directory (typically
<TT>`/usr/local/mysql/data'</TT> for a binary distribution,
<TT>`/usr/local/var'</TT> for a source distribution).  Look in the data
directory for files with names of the form <TT>`host_name.err'</TT> and
<TT>`host_name.log'</TT> where <CODE>host_name</CODE> is the name of your server
host.  Then check the last few lines of these files:

</P>

<PRE>
shell&#62; tail host_name.err
shell&#62; tail host_name.log
</PRE>

<P>
When the <CODE>mysqld</CODE> daemon starts up, it changes directory to the
data directory.  This is where it expects to write log files and the pid
(process ID) file, and where it expects to find databases.

</P>
<P>
The data directory location is hardwired in when the distribution is
compiled.  However, if <CODE>mysqld</CODE> expects to find the data directory
somewhere other than where it really is on your system, it will not work
properly.  If you have problems with incorrect paths, you can find out
what options <CODE>mysqld</CODE> allows and what the default path settings are by
invoking <CODE>mysqld</CODE> with the <CODE>--help</CODE> option.  You can override the
defaults by specifying the correct pathnames as command-line arguments to
<CODE>mysqld</CODE>.  (These options can be used with <CODE>safe_mysqld</CODE> as well.)

</P>
<P>
Normally you should need to tell <CODE>mysqld</CODE> only the base directory under
which <STRONG>MySQL</STRONG> is installed.  You can do this with the <CODE>--basedir</CODE>
option.  You can also use <CODE>--help</CODE> to check the effect of changing path
options (note that <CODE>--help</CODE> <EM>must</EM> be the final option of the
<CODE>mysqld</CODE> command).  For example:

</P>

<PRE>
shell&#62; EXECDIR/mysqld --basedir=/usr/local --help
</PRE>

<P>
Once you determine the path settings you want, start the server without
the <CODE>--help</CODE> option.

</P>
<P>
If you get the following error, it means that some other program (or another
<CODE>mysqld</CODE> server) is already using the TCP/IP port or socket
<CODE>mysqld</CODE> is trying to use:

</P>

<PRE>
Can't start server: Bind on TCP/IP port: Address already in use
  or
Can't start server : Bind on unix socket...
</PRE>

<P>
Use <CODE>ps</CODE> to make sure that you don't have another <CODE>mysqld</CODE> server
running.  If you can't find another server running, you can try to execute
the command <CODE>telnet your-host-name tcp-ip-port-number</CODE> and press
<CODE>RETURN</CODE> a couple of times.  If you don't get a error message like
<CODE>telnet: Unable to connect to remote host: Connection refused</CODE>,
something is using the TCP/IP port <CODE>mysqld</CODE> is trying to use.
See section <A HREF="manual.html#mysql_install_db">4.15.1  Problems running <CODE>mysql_install_db</CODE></A>, and section <A HREF="manual.html#Multiple_servers">18.3  Running multiple <STRONG>MySQL</STRONG> servers on the same machine</A>.

</P>
<P>
The <CODE>safe_mysqld</CODE> script is written so that it normally is able to start
a server that was installed from either a source or a binary version of
<STRONG>MySQL</STRONG>, even if these install the server in slightly different
locations.  <CODE>safe_mysqld</CODE> expects one of these conditions to be true:

</P>

<UL>
<LI>

The server and databases can be found relative to the directory from which
<CODE>safe_mysqld</CODE> is invoked.  <CODE>safe_mysqld</CODE> looks under its working
directory for <TT>`bin'</TT> and <TT>`data'</TT> directories (for binary
distributions) or for <TT>`libexec'</TT> and <TT>`var'</TT> directories (for source
distributions).  This condition should be met if you execute
<CODE>safe_mysqld</CODE> from your <STRONG>MySQL</STRONG> installation directory (for
example, <TT>`/usr/local/mysql'</TT> for a binary distribution).

<LI>

If the server and databases cannot be found relative to its working directory,
<CODE>safe_mysqld</CODE> attempts to locate them by absolute pathnames.  Typical
locations are <TT>`/usr/local/libexec'</TT> and <TT>`/usr/local/var'</TT>.
The actual locations are determined when the distribution was built from which
<CODE>safe_mysqld</CODE> comes.  They should be correct if
<STRONG>MySQL</STRONG> was installed in a standard location.
</UL>

<P>
Since <CODE>safe_mysqld</CODE> will try to find the server and databases relative
to its own working directory, you can install a binary distribution of
<STRONG>MySQL</STRONG> anywhere, as long as you start <CODE>safe_mysqld</CODE> from the
<STRONG>MySQL</STRONG> installation directory:

</P>

<PRE>
shell&#62; cd mysql_installation_directory
shell&#62; bin/safe_mysqld &#38;
</PRE>

<P>
If <CODE>safe_mysqld</CODE> fails, even when invoked from the <STRONG>MySQL</STRONG>
installation directory, you can modify it to use the path to <CODE>mysqld</CODE>
and the pathname options that are correct for your system.  Note that if you
upgrade <STRONG>MySQL</STRONG> in the future, your modified version of
<CODE>safe_mysqld</CODE> will be overwritten, so you should make a copy of your
edited version that you can reinstall.

</P>
<P>
If <CODE>mysqld</CODE> is currently running, you can find out what path settings
it is using by executing this command:

</P>

<PRE>
shell&#62; mysqladmin variables

or

shell&#62; mysqladmin -h 'your-host-name' variables
</PRE>

<P>
If <CODE>safe_mysqld</CODE> starts the server but you can't connect to it,
you should make sure you have an entry in <TT>`/etc/hosts'</TT> that looks like
this:

</P>

<PRE>
127.0.0.1       localhost
</PRE>

<P>
This problem occurs only on systems that don't have a working thread
library and for which <STRONG>MySQL</STRONG> must be configured to use MIT-pthreads.

</P>


<H3><A NAME="Automatic_start" HREF="manual_toc.html#Automatic_start">4.15.3  Starting and stopping <STRONG>MySQL</STRONG> automatically</A></H3>

<P>
The <CODE>mysql.server</CODE> script can be used to start or stop the server,
by invoking it with <CODE>start</CODE> or <CODE>stop</CODE> arguments:

</P>

<PRE>
shell&#62; mysql.server start
shell&#62; mysql.server stop
</PRE>

<P>
<CODE>mysql.server</CODE> can be found in the <TT>`share/mysql'</TT> directory
under the <STRONG>MySQL</STRONG> installation directory, or in the <TT>`support-files'</TT>
directory of the <STRONG>MySQL</STRONG> source tree.

</P>
<P>
Before <CODE>mysql.server</CODE> starts the server, it changes directory to
the <STRONG>MySQL</STRONG> installation directory, then invokes
<CODE>safe_mysqld</CODE>.  You might need to edit <CODE>mysql.server</CODE> if you
have a binary distribution that you've installed in a non-standard
location.  Modify it to <CODE>cd</CODE> into the proper directory before it
runs <CODE>safe_mysqld</CODE>. If you want the server to run as some specific
user, you can change the <CODE>mysql_daemon_user=root</CODE> line to use
another user.  You can also modify <CODE>mysql.server</CODE> to pass other
options to <CODE>safe_mysqld</CODE>.

</P>
<P>
<CODE>mysql.server stop</CODE> brings down server by sending a signal to it.
You can take down the server manually by executing <CODE>mysqladmin shutdown</CODE>.

</P>
<P>
You might want to add these start and stop commands to the appropriate places
in your <TT>`/etc/rc*'</TT> files when you start using <STRONG>MySQL</STRONG> for
production applications.  Note that if you modify <CODE>mysql.server</CODE>, then
if you upgrade <STRONG>MySQL</STRONG> sometime, your modified version will be
overwritten, so you should make a copy of your edited version that you can
reinstall.

</P>
<P>
If your system uses <TT>`/etc/rc.local'</TT> to start external scripts, you
should append the following to it:

<PRE>
/bin/sh -c 'cd /usr/local/mysql ; ./bin/safe_mysqld &#38;'
</PRE>

<P>
You can also add options or <CODE>mysql.server</CODE> in a global
<TT>`/etc/my.cnf'</TT> file.  A typical <TT>`/etc/my.cnf'</TT> file might look like
this:

</P>

<PRE>
[mysqld]
datadir=/usr/local/mysql/var
socket=/tmp/mysqld.sock
port=3306

[mysql.server]
user=mysql
basedir=/usr/local/mysql
</PRE>

<P>
The <CODE>mysql.server</CODE> script uses the following variables:
<CODE>user</CODE>, <CODE>datadir</CODE>, <CODE>basedir</CODE>, <CODE>bindir</CODE> and <CODE>pid-file</CODE>.

</P>
<P>
See section <A HREF="manual.html#Option_files">4.15.4  Option files</A>.

</P>
<P>
<A NAME="IDX98"></A>
<A NAME="IDX99"></A>


<H3><A NAME="Option_files" HREF="manual_toc.html#Option_files">4.15.4  Option files</A></H3>

<P>
<STRONG>MySQL</STRONG> 3.22 can read default startup options for the server and
for clients from option files.

</P>
<P>
<STRONG>MySQL</STRONG> reads default options from the following files on Unix:

</P>
<P>
<A NAME="IDX100"></A>
<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><STRONG>Filename</STRONG> </TD><TD> <STRONG>Purpose</STRONG>
</TR NOSAVE>
<TR><TD><CODE>/etc/my.cnf</CODE> </TD><TD> Global options
</TR NOSAVE>
<TR><TD><CODE>DATADIR/my.cnf</CODE> </TD><TD> Server-specific options
</TR NOSAVE>
<TR><TD><CODE>~/.my.cnf</CODE> </TD><TD> User-specific options
</TR>
</TABLE>

</P>
<P>
<CODE>DATADIR</CODE> is the <STRONG>MySQL</STRONG> data directory (typically
<TT>`/usr/local/mysql/data'</TT> for a binary installation, or
<TT>`/usr/local/var'</TT> for a source installation).  Note that this is the
directory that was specified at configuration time, not the one specified
with <CODE>--datadir</CODE> when <CODE>mysqld</CODE> starts up!  (<CODE>--datadir</CODE> has no
effect on where the server looks for option files, because it looks for them
before it processes any command-line arguments.)

</P>
<P>
<STRONG>MySQL</STRONG> reads default options from the following files on Win32:

</P>
<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><STRONG>Filename</STRONG> </TD><TD> <STRONG>Purpose</STRONG>
</TR NOSAVE>
<TR><TD><CODE>windows-system-directory\my.ini</CODE>
</TR NOSAVE>
<TR><TD><CODE>C:\my.cnf</CODE> </TD><TD> Global options
</TR NOSAVE>
<TR><TD><CODE>C:\mysql\data\my.cnf</CODE> </TD><TD> Server-specific options
</TR>
</TABLE>

<P>
Note that you on Win32 should specify all paths with <CODE>/</CODE> instead of
<CODE>\</CODE>. If you use <CODE>\</CODE>, you need to specify this twice, as
<CODE>\</CODE> is the escape character in <STRONG>MySQL</STRONG>.

</P>
<P>
<A NAME="IDX101"></A>
<STRONG>MySQL</STRONG> tries to read option files in the order listed above.  If
multiple option files exist, an option specified in a file read later takes
precedence over the same option specified in a file read earlier.  Options
specified on the command line take precedence over options specified in any
option file.  Some options can be specified using environment variables.
Options specified on the command line or in option files take precedence over
environment variable values.

</P>
<P>
The following programs support option files:  <CODE>mysql</CODE>,
<CODE>mysqladmin</CODE>, <CODE>mysqld</CODE>, <CODE>mysqldump</CODE>, <CODE>mysqlimport</CODE>,
<CODE>mysql.server</CODE>, <CODE>isamchk</CODE> and <CODE>pack_isam</CODE>.

</P>
<P>
You can use option files to specify any long option that a program supports!
Run the program with <CODE>--help</CODE> to get a list of available options.

</P>
<P>
An option file can contain lines of the following forms:

</P>
<DL COMPACT>

<DT><CODE>#comment</CODE>
<DD>
Comment lines starts with <SAMP>`#'</SAMP> or <SAMP>`;'</SAMP>. Empty lines are ignored.

<DT><CODE>[group]</CODE>
<DD>
<CODE>group</CODE> is the name of the program or group for which you want to set
options.  After a group line, any <CODE>option</CODE> or <CODE>set-variable</CODE> lines
apply to the named group until the end of the option file or another group
line is given.

<DT><CODE>option</CODE>
<DD>
This is equivalent to <CODE>--option</CODE> on the command line.

<DT><CODE>option=value</CODE>
<DD>
This is equivalent to <CODE>--option=value</CODE> on the command line.

<DT><CODE>set-variable = variable=value</CODE>
<DD>
This is equivalent to <CODE>--set-variable variable=value</CODE> on the command line.
This syntax must be used to set a <CODE>mysqld</CODE> variable.
</DL>

<P>
The <CODE>client</CODE> group allows you to specify options that apply to all
<STRONG>MySQL</STRONG> clients (not <CODE>mysqld</CODE>). This is the perfect group to use
to specify the password you use to connect to the server.  (But make
sure the option file is readable and writable only to yourself.)

</P>
<P>
Note that for options and values, all leading and trailing blanks are
automatically deleted.  You may use the escape sequences <SAMP>`\b'</SAMP>,
<SAMP>`\t'</SAMP>, <SAMP>`\n'</SAMP>, <SAMP>`\r'</SAMP>, <SAMP>`\\'</SAMP> and <SAMP>`\s'</SAMP> in your value string
(<SAMP>`\s'</SAMP> == blank).

</P>
<P>
Here is a typical global option file:

</P>

<PRE>
[client]
port=3306
socket=/tmp/mysql.sock

[mysqld]
port=3306
socket=/tmp/mysql.sock
set-variable = key_buffer=16M
set-variable = max_allowed_packet=1M

[mysqldump]
quick
</PRE>

<P>
Here is typical user option file:

</P>

<PRE>
[client]
# The following password will be sent to all standard MySQL clients
password=my_password

[mysql]
no-auto-rehash
</PRE>

<P>
<A NAME="IDX102"></A>
If you have a source distribution, you will find a sample configuration file
named <TT>`my-example.cnf'</TT> in the <TT>`support-files'</TT> directory.  If you
have a binary distribution, look in the <TT>`DIR/share/mysql'</TT> directory,
where <CODE>DIR</CODE> is the pathname to the <STRONG>MySQL</STRONG> installation directory
(typically <TT>`/usr/local/mysql'</TT>). You can copy <TT>`my-example.cnf'</TT> to
your home directory (rename the copy to <TT>`.my.cnf'</TT>) to experiment with.

</P>
<P>
To tell a <STRONG>MySQL</STRONG> program not to read any option files, specify
<CODE>--no-defaults</CODE> as the first option on the command line.  This
<STRONG>MUST</STRONG> be the first option or it will have no effect!
If you want to check which options are used, you can give the option
<CODE>--print-defaults</CODE> as the first option.

</P>
<P>
If you want to force the use of a specific config file, you can use the option
<CODE>--defaults-file=full-path-to-default-file</CODE>. If you do this, only the
specified file will be read.

</P>
<P>
Note for developers:  Option file handling is implemented simply by
processing all matching options (i.e., options in the appropriate group)
before any command line arguments. This works nicely for programs that use
the last instance of an option that is specified multiple times. If you have
an old program that handles multiply-specified options this way but doesn't
read option files, you need add only two lines to give it that capability.
Check the source code of any of the standard <STRONG>MySQL</STRONG> clients to see
how to do this.

</P>


<H2><A NAME="Upgrade" HREF="manual_toc.html#Upgrade">4.16  Is there anything special to do when upgrading/downgrading <STRONG>MySQL</STRONG>?</A></H2>

<P>
You can always move the <STRONG>MySQL</STRONG> form and data files between
different versions on the same architecture as long as you have the same
base version of <STRONG>MySQL</STRONG>. The current base version is
3. If you change the character set by recompiling <STRONG>MySQL</STRONG> (which may
also change the sort order), you must run <CODE>isamchk -r -q</CODE> on all tables.
Otherwise your indexes may not be ordered correctly.

</P>
<P>
If you are paranoid and/or afraid of new versions, you can always rename your
old <CODE>mysqld</CODE> to something like <CODE>mysqld</CODE>-'old-version-number'.  If
your new <CODE>mysqld</CODE> then does something unexpected, you can simply shut it
down and restart with your old <CODE>mysqld</CODE>!

</P>
<P>
When you do an upgrade you should also backup your old databases, of course.
Sometimes it's good to be a little paranoid!

</P>
<P>
After an upgrade, if you experience problems with recompiled client programs,
like <CODE>Commands out of sync</CODE> or unexpected core dumps, you probably have
used an old header or library file when compiling your programs.  In this
case you should check the date for your <TT>`mysql.h'</TT> file and
<TT>`libmysqlclient.a'</TT> library to verify that they are from the new
<STRONG>MySQL</STRONG> distribution.  If not, please recompile your programs!

</P>
<P>
If you get some problems that the new <CODE>mysqld</CODE> server doesn't want to
start or that you can't connect without a password, check that you don't
have some old <TT>`my.cnf'</TT> file from your old installation!  You can
check this with: <CODE>program-name --print-defaults</CODE>.  If this outputs
anything other than the program name, you have a active <CODE>my.cnf</CODE>
file that will may affect things!

</P>
<P>
It is a good idea to rebuild and reinstall the <CODE>Msql-Mysql-modules</CODE>
distribution whenever you install a new release of <STRONG>MySQL</STRONG>,
particularly if you notice symptoms such as all your <CODE>DBI</CODE> scripts
dumping core after you upgrade <STRONG>MySQL</STRONG>.

</P>

<P>
<A NAME="IDX103"></A>


<H3><A NAME="Upgrading-from-3.22" HREF="manual_toc.html#Upgrading-from-3.22">4.16.1  Upgrading from a 3.22 version to 3.23</A></H3>

<P>
<STRONG>MySQL</STRONG> 3.23 supports tables of the new <CODE>MyISAM</CODE> type and
the old <CODE>NISAM</CODE> type.  You don't have to convert your old tables to
use these with 3.23.  By default, all new tables will be created with
type <CODE>MyISAM</CODE> (unless you start <CODE>mysqld</CODE> with the
<CODE>--default-table-type=isam</CODE> option. You can change an <CODE>ISAM</CODE>
table to a <CODE>MyISAM</CODE> table with <CODE>ALTER TABLE</CODE> or the Perl script
<CODE>mysql_convert_table_format</CODE>.

</P>
<P>
3.22 and 3.21 clients will work without any problems with a 3.23 server.

</P>
<P>
The following lists what you have to watch out for when upgrading to 3.23:

</P>

<UL>
<LI><CODE>INNER</CODE> and <CODE>DELAYED</CODE> are now reserved words.

<LI><CODE>FLOAT(4)</CODE> and <CODE>FLOAT(8)</CODE> are now true floating point types.

<LI>When declaring <CODE>DECIMAL(length,dec)</CODE> the length argument no

longer includes a place for the sign or the decimal point. 
<LI>A <CODE>TIME</CODE> string must now be of one of the following formats: <CODE>[[[DAYS] [H]H:]MM:]SS[.fraction]</CODE> or <CODE>[[[[[H]H]H]H]MM]SS[.fraction]</CODE>

<LI><CODE>LIKE</CODE> now compares strings using the same character comparison rules as <CODE>'='</CODE>.  If you require the old behaveour, you can compile <STRONG>MySQL</STRONG> with the <CODE>CXXFLAGS=-DLIKE_CMP_TOUPPER</CODE> flag.

<LI>When you check/repair tables you should use <CODE>myisamchk</CODE> for <CODE>MyISAM</CODE> tables (<CODE>.MYI</CODE>) and <CODE>isamchk</CODE> for ISAM (<CODE>.ISM</CODE>) tables.

<LI>If you want your <CODE>mysqldump</CODE>s to be compatible between <STRONG>MySQL</STRONG> 3.22 and 3.23, you should not use the <CODE>--opt</CODE> or <CODE>--full</CODE> option to <CODE>mysqldump</CODE>.

<LI>Check all your calls to <CODE>DATE_FORMAT()</CODE> to make sure there is a <SAMP>`%'</SAMP> before each format character.

<LI>

<CODE>mysql_fetch_fields_direct</CODE> is now a function (it was a macro) and it
returns a pointer to a <CODE>MYSQL_FIELD</CODE> instead of a <CODE>MYSQL_FIELD</CODE>
<LI>

<CODE>mysql_num_fields()</CODE> can no longer be used on a <CODE>MYSQL*</CODE> object (it's
now a function that takes <CODE>MYSQL_RES*</CODE> as an argument. You should now
use <CODE>mysql_field_count()</CODE> instead.
<LI>

In <CODE>MySQL</CODE> 3.22, the output of <CODE>SELECT DISTINCT ...</CODE> was almost
always sorted.  In 3.23 you have to use <CODE>GROUP BY</CODE> or <CODE>ORDER BY</CODE>
to get it sorted.
</UL>

<P>
<A NAME="IDX104"></A>


<H3><A NAME="Upgrading-from-3.21" HREF="manual_toc.html#Upgrading-from-3.21">4.16.2  Upgrading from a 3.21 version to 3.22</A></H3>

<P>
Nothing that affects compatibility has changed between 3.21 and 3.22.  The
only pitfall is that new tables that are created with <CODE>DATE</CODE> type
columns will use the new way to store the date. You can't access these new
fields from an old version of <CODE>mysqld</CODE>.

</P>
<P>
After installing <STRONG>MySQL</STRONG> 3.22, you should start the new server and
then run the <CODE>mysql_fix_privilege_tables</CODE> script. This will add the new
privileges that you need to use the <CODE>GRANT</CODE> command.  If you forget
this, you will get <CODE>Access denied</CODE> when you try to use <CODE>ALTER
TABLE</CODE>, <CODE>CREATE INDEX</CODE> or <CODE>DROP INDEX</CODE>. If your <STRONG>MySQL</STRONG> root
user requires a password, you should give this as an argument to
<CODE>mysql_fix_privilege_tables</CODE>.

</P>
<P>
The C API interface to <CODE>mysql_real_connect()</CODE> has changed.  If you have
an old client program that calls this function, you must place a <CODE>0</CODE> for
the new <CODE>db</CODE> argument (or recode the client to send the <CODE>db</CODE>
element for faster connections).  You must also call <CODE>mysql_init()</CODE>
before calling <CODE>mysql_real_connect()</CODE>!  This change was done to allow
the new <CODE>mysql_options()</CODE> function to save options in the <CODE>MYSQL</CODE>
handler structure.

</P>


<H3><A NAME="Upgrading-from-3.20" HREF="manual_toc.html#Upgrading-from-3.20">4.16.3  Upgrading from a 3.20 version to 3.21</A></H3>

<P>
If you are running a version older than 3.20.28 and want to
switch to 3.21.x, you need to do the following:

</P>
<P>
You can start the <CODE>mysqld</CODE> 3.21 server with <CODE>safe_mysqld
--old-protocol</CODE> to use it with clients from the 3.20 distribution.
In this case, the new client function <CODE>mysql_errno()</CODE> will not
return any server error, only <CODE>CR_UNKNOWN_ERROR</CODE>, (but it
works for client errors) and the server uses the old password() checking
rather than the new one.

</P>
<P>
If you are <STRONG>NOT</STRONG> using the <CODE>--old-protocol</CODE> option to
<CODE>mysqld</CODE>, you will need to make the following changes:

</P>

<UL>
<LI>

All client code must be recompiled. If you are using ODBC, you must get
the new <STRONG>MyODBC</STRONG> 2.x driver.
<LI>

The script <CODE>scripts/add_long_password</CODE> must be run to convert the
<CODE>Password</CODE> field in the <CODE>mysql.user</CODE> table to <CODE>CHAR(16)</CODE>.
<LI>

All passwords must be reassigned in the <CODE>mysql.user</CODE> table (to get 62-bit
rather than 31-bit passwords).
<LI>

The table format hasn't changed, so you don't have to convert any tables.
</UL>

<P>
<STRONG>MySQL</STRONG> 3.20.28 and above can handle the new <CODE>user</CODE> table format
without affecting clients. If you have a <STRONG>MySQL</STRONG> version earlier than
3.20.28, passwords will no longer work with it if you convert the <CODE>user</CODE>
table. So to be safe, you should first upgrade to at least 3.20.28 and then
upgrade to 3.21.x.

</P>
<P>
<A NAME="IDX105"></A>
The new client code works with a 3.20.x <CODE>mysqld</CODE> server, so
if you experience problems with 3.21.x, you can use the old 3.20.x server
without having to recompile the clients again.

</P>
<P>
If you are not using the <CODE>--old-protocol</CODE> option to <CODE>mysqld</CODE>,
old clients will issue the error message:

</P>

<PRE>
ERROR: Protocol mismatch. Server Version = 10 Client Version = 9
</PRE>

<P>
The new Perl <CODE>DBI</CODE>/<CODE>DBD</CODE> interface also supports the old
<CODE>mysqlperl</CODE> interface.  The only change you have to make if you use
<CODE>mysqlperl</CODE> is to change the arguments to the <CODE>connect()</CODE> function.
The new arguments are: <CODE>host</CODE>, <CODE>database</CODE>, <CODE>user</CODE>,
<CODE>password</CODE> (the <CODE>user</CODE> and <CODE>password</CODE> arguments have changed
places).
See section <A HREF="manual.html#Perl_DBI_Class">19.5.2  The <CODE>DBI</CODE> interface</A>.

</P>
<P>
The following changes may affect queries in old applications:

</P>

<UL>
<LI>

<CODE>HAVING</CODE> must now be specified before any <CODE>ORDER BY</CODE> clause.
<LI>

The parameters to <CODE>LOCATE()</CODE> have been swapped.
<LI>

There are some new reserved words. The most notable are <CODE>DATE</CODE>,
<CODE>TIME</CODE> and <CODE>TIMESTAMP</CODE>.
</UL>



<H3><A NAME="Upgrading-to-arch" HREF="manual_toc.html#Upgrading-to-arch">4.16.4  Upgrading to another architecture</A></H3>

<P>
If you are using <STRONG>MySQL</STRONG> 3.23, you can copy the <CODE>.frm</CODE>, the
<CODE>.MYI</CODE> and the <CODE>.MYD</CODE> files between different architectures
that support the same floating point format.  (<STRONG>MySQL</STRONG> takes care of
any byte swapping issues).

</P>
<P>
The <STRONG>MySQL</STRONG> data <TT>`*.ISD'</TT> and the index files <TT>`*.ISM'</TT>
files) are architecture-dependent and in some case OS-dependent.  If you
want to move your applications to another machine that has a different
architecture or OS than your current machine, you should not try to move
a database by simply copying the files to the other machine.  Use
<CODE>mysqldump</CODE> instead.

</P>
<P>
By default, <CODE>mysqldump</CODE> will create a file full of SQL statements.  You
can then transfer the file to the other machine and feed it as input to the
<CODE>mysql</CODE> client.

</P>
<P>
Try <CODE>mysqldump --help</CODE> to see what options are available.
If you are moving the data to a newer version of <STRONG>MySQL</STRONG>, you should use
<CODE>mysqldump --opt</CODE> with the newer version to get a fast, compact dump.

</P>
<P>
The easiest (although not the fastest) way to move a database between two
machines is to run the following commands on the machine on which the
database is located:

</P>

<PRE>
shell&#62; mysqladmin -h 'other hostname' create db_name
shell&#62; mysqldump --opt db_name \
        | mysql -h 'other hostname' db_name
</PRE>

<P>
If you want to copy a database from a remote machine over a slow network,
you can use:

</P>

<PRE>
shell&#62; mysqladmin create db_name
shell&#62; mysqldump -h 'other hostname' --opt --compress db_name \
        | mysql db_name
</PRE>

<P>
You can also store the result in a file, then transfer the file to the
target machine and load the file into the database there.  For example,
you can dump a database to a file on the source machine like this:

</P>

<PRE>
shell&#62; mysqldump --quick db_name | gzip &#62; db_name.contents.gz
</PRE>

<P>
(The file created in this example is compressed.) Transfer the file
containing the database contents to the target machine and run these commands
there:

</P>

<PRE>
shell&#62; mysqladmin create db_name
shell&#62; gunzip &#60; db_name.contents.gz | mysql db_name
</PRE>

<P>
<A NAME="IDX106"></A>
<A NAME="IDX107"></A>
You can also use <CODE>mysqldump</CODE> and <CODE>mysqlimport</CODE> to accomplish
the database transfer.
For big tables, this is much faster than simply using <CODE>mysqldump</CODE>.
In the commands shown below, <CODE>DUMPDIR</CODE> represents the full pathname
of the directory you use to store the output from <CODE>mysqldump</CODE>.

</P>
<P>
First, create the directory for the output files and dump the database:

</P>

<PRE>
shell&#62; mkdir DUMPDIR
shell&#62; mysqldump --tab=DUMPDIR db_name
</PRE>

<P>
Then transfer the files in the <CODE>DUMPDIR</CODE> directory to some corresponding
directory on the target machine and load the files into <STRONG>MySQL</STRONG>
there:

</P>

<PRE>
shell&#62; mysqladmin create db_name           # create database
shell&#62; cat DUMPDIR/*.sql | mysql db_name   # create tables in database
shell&#62; mysqlimport db_name DUMPDIR/*.txt   # load data into tables
</PRE>

<P>
Also, don't forget to copy the <CODE>mysql</CODE> database, since that's where the
grant tables (<CODE>user</CODE>, <CODE>db</CODE>, <CODE>host</CODE>) are stored.  You may have
to run commands as the <STRONG>MySQL</STRONG> <CODE>root</CODE> user on the new machine
until you have the <CODE>mysql</CODE> database in place.

</P>
<P>
After you import the <CODE>mysql</CODE> database on the new machine, execute
<CODE>mysqladmin flush-privileges</CODE> so that the server reloads the grant table
information.

</P>
<P>
<A NAME="IDX108"></A>


<H1><A NAME="Compatibility" HREF="manual_toc.html#Compatibility">5  How standards-compatible is <STRONG>MySQL</STRONG>?</A></H1>



<H2><A NAME="Extensions_to_ANSI" HREF="manual_toc.html#Extensions_to_ANSI">5.1  <STRONG>MySQL</STRONG> extensions to ANSI SQL92</A></H2>

<P>
<STRONG>MySQL</STRONG> includes some extensions that you probably will not find in
other SQL databases.  Be warned that if you use them, your code will not be
portable to other SQL servers.  In some cases, you can write code that
includes <STRONG>MySQL</STRONG> extensions, but is still portable, by using comments
of the form <CODE>/*! ... */</CODE>.  In this case, <STRONG>MySQL</STRONG> will parse and
execute the code within the comment as it would any other <STRONG>MySQL</STRONG>
statement, but other SQL servers will ignore the extensions.  For example:

</P>

<PRE>
SELECT /*! STRAIGHT_JOIN */ col_name FROM table1,table2 WHERE ...
</PRE>

<P>
<STRONG>MySQL</STRONG> extensions are listed below:

</P>

<UL>
<LI>

The field types <CODE>MEDIUMINT</CODE>, <CODE>SET</CODE>, <CODE>ENUM</CODE> and the
different <CODE>BLOB</CODE> and <CODE>TEXT</CODE> types.

<LI>

The field attributes <CODE>AUTO_INCREMENT</CODE>, <CODE>BINARY</CODE>,
<CODE>UNSIGNED</CODE> and <CODE>ZEROFILL</CODE>.

<LI>

All string comparisons are case insensitive by default, with sort
ordering determined by the current character set (ISO-8859-1 Latin1 by
default).  If you don't like this, you should declare your columns with
the <CODE>BINARY</CODE> attribute or use the <CODE>BINARY</CODE> cast, which causes
comparisons to be done according to the ASCII order used on the
<STRONG>MySQL</STRONG> server host.

<LI>

<STRONG>MySQL</STRONG> maps each database to a directory under the <STRONG>MySQL</STRONG>
data directory, and tables within a database to filenames in the database
directory.
This has two implications:


<UL>
<LI>

<A NAME="IDX109"></A>
<A NAME="IDX110"></A>
<A NAME="IDX111"></A>
<A NAME="IDX112"></A>
Database names and table names are case sensitive in <STRONG>MySQL</STRONG> on
operating systems that have case sensitive filenames (like most Unix
systems). If you have a problem remembering table names, adopt a consistent
convention, such as always creating databases and tables using lowercase
names.

<LI>

Database, table, index, column or alias names may begin with a digit
(but may not consist solely of digits).

<LI>

You can use standard system commands to backup, rename, move, delete and copy
tables.  For example, to rename a table, rename the <TT>`.ISD'</TT>, <TT>`.ISM'</TT>
and <TT>`.frm'</TT> files to which the table corresponds.
</UL>

<LI>

In SQL statements, you can access tables from different databases
with the <CODE>db_name.tbl_name</CODE> syntax.  Some SQL servers provide
the same functionality but call this <CODE>User space</CODE>.
<STRONG>MySQL</STRONG> dosen't support tablespaces like in:
<CODE>create table ralph.my_table...IN my_tablespace</CODE>.

<LI>

<CODE>LIKE</CODE> is allowed on numeric columns.

<LI>

Use of <CODE>INTO OUTFILE</CODE> and <CODE>STRAIGHT_JOIN</CODE> in a <CODE>SELECT</CODE>
statement. See section <A HREF="manual.html#SELECT">7.11  <CODE>SELECT</CODE> syntax</A>.

<LI>

The <CODE>SQL_SMALL_RESULT</CODE> option in a <CODE>SELECT</CODE> statement.

<LI>

<CODE>EXPLAIN SELECT</CODE> to get a description on how tables are joined.

<LI>

Use of index names, indexes on a prefix of a field, and use of
<CODE>INDEX</CODE> or <CODE>KEY</CODE> in a <CODE>CREATE TABLE</CODE>
statement. See section <A HREF="manual.html#CREATE_TABLE">7.6  <CODE>CREATE TABLE</CODE> syntax</A>.

<LI>

Use of <CODE>CHANGE col_name</CODE>, <CODE>DROP col_name</CODE> or <CODE>DROP INDEX</CODE>
in an <CODE>ALTER TABLE</CODE> statement. See section <A HREF="manual.html#ALTER_TABLE">7.7  <CODE>ALTER TABLE</CODE> syntax</A>.

<LI>

Use of <CODE>IGNORE</CODE> in an <CODE>ALTER TABLE</CODE> statement.

<LI>

Use of multiple <CODE>ADD</CODE>, <CODE>ALTER</CODE>, <CODE>DROP</CODE> or <CODE>CHANGE</CODE>
clauses in an <CODE>ALTER TABLE</CODE> statement.

<LI>

Use of <CODE>DROP TABLE</CODE> with the keywords <CODE>IF EXISTS</CODE>.

<LI>

You can drop multiple tables with a single <CODE>DROP TABLE</CODE> statement.

<LI>

The <CODE>LIMIT</CODE> clause of the <CODE>DELETE</CODE> statement.

<LI>

The <CODE>DELAYED</CODE> clause of the <CODE>INSERT</CODE> and <CODE>REPLACE</CODE>
statements.

<LI>

The <CODE>LOW_PRIORITY</CODE> clause of the <CODE>INSERT</CODE>, <CODE>REPLACE</CODE>,
<CODE>DELETE</CODE> and <CODE>UPDATE</CODE> statements.

<A NAME="IDX113"></A>
<A NAME="IDX114"></A>
<LI>

Use of <CODE>LOAD DATA INFILE</CODE>. In many cases, this syntax is compatible with
Oracle's <CODE>LOAD DATA INFILE</CODE>. See section <A HREF="manual.html#LOAD_DATA">7.15  <CODE>LOAD DATA INFILE</CODE> syntax</A>.

<LI>

The <CODE>OPTIMIZE TABLE</CODE> statement.
See section <A HREF="manual.html#OPTIMIZE_TABLE">7.8  <CODE>OPTIMIZE TABLE</CODE> syntax</A>.

<LI>

The <CODE>SHOW</CODE> statement.
See section <A HREF="manual.html#SHOW">7.20  <CODE>SHOW</CODE> syntax (Get information about tables, columns,...)</A>.

<LI>

Strings may be enclosed by either <SAMP>`"'</SAMP> or <SAMP>`''</SAMP>, not just by <SAMP>`''</SAMP>.

<LI>

Use of the escape <SAMP>`\'</SAMP> character.

<LI>

The <CODE>SET OPTION</CODE> statement. See section <A HREF="manual.html#SET_OPTION">7.24  <CODE>SET OPTION</CODE> syntax</A>.

<LI>

You don't need to name all selected columns in the <CODE>GROUP BY</CODE> part.
This gives better performance for some very specific, but quite normal
queries.
See section <A HREF="manual.html#Group_by_functions">7.3.13  Functions for use with <CODE>GROUP BY</CODE> clauses</A>.

<LI>

To make it easier for users that come from other SQL environments,
<STRONG>MySQL</STRONG> supports aliases for many functions. For example, all
string functions support both ANSI SQL syntax and ODBC syntax.

<LI>

<STRONG>MySQL</STRONG> understands the <CODE>||</CODE> and <CODE>&#38;&</CODE> operators to mean
logical OR and AND, as in the C programming language.  In <STRONG>MySQL</STRONG>,
<CODE>||</CODE> and <CODE>OR</CODE> are synonyms, as are <CODE>&#38;&</CODE> and <CODE>AND</CODE>.
Because of this nice syntax, <STRONG>MySQL</STRONG> doesn't support
the ANSI SQL <CODE>||</CODE> operator for string concatenation; use
<CODE>CONCAT()</CODE> instead. Since <CODE>CONCAT()</CODE> takes any number
of arguments, it's easy to convert use of the <CODE>||</CODE> operator to
<STRONG>MySQL</STRONG>.

<LI>

<CODE>CREATE DATABASE</CODE> or <CODE>DROP DATABASE</CODE>.
See section <A HREF="manual.html#CREATE_DATABASE">7.4  <CODE>CREATE DATABASE</CODE> syntax</A>.

<A NAME="IDX115"></A>
<A NAME="IDX116"></A>
<LI>

The <CODE>%</CODE> operator is a synonym for <CODE>MOD()</CODE>.  That is,
<CODE>N % M</CODE> is equivalent to <CODE>MOD(N,M)</CODE>.  <CODE>%</CODE> is supported
for C programmers and for compatibility with PostgreSQL.

<LI>

The <CODE>=</CODE>, <CODE>&#60;&#62;</CODE>, <CODE>&#60;=</CODE> ,<CODE>&#60;</CODE>, <CODE>&#62;=</CODE>,<CODE>&#62;</CODE>,
<CODE>&#60;&#60;</CODE>, <CODE>&#62;&#62;</CODE>, <CODE>&#60;=&#62;</CODE>, <CODE>AND</CODE>, <CODE>OR</CODE> or <CODE>LIKE</CODE>
operators may be used in column comparisons to the left of the
<CODE>FROM</CODE> in <CODE>SELECT</CODE> statements.  For example:


<PRE>
mysql&#62; SELECT col1=1 AND col2=2 FROM tbl_name;
</PRE>

<LI>

The <CODE>LAST_INSERT_ID()</CODE> function.
See section <A HREF="manual.html#mysql_insert_id">19.4.28  <CODE>mysql_insert_id()</CODE></A>.

<LI>

The <CODE>REGEXP</CODE> and <CODE>NOT REGEXP</CODE> extended regular expression
operators.

<LI>

<CODE>CONCAT()</CODE> or <CODE>CHAR()</CODE> with one argument or more than two
arguments.  (In <STRONG>MySQL</STRONG>, these functions can take any number of
arguments.)

<LI>

The <CODE>BIT_COUNT()</CODE>, <CODE>ELT()</CODE>, <CODE>FROM_DAYS()</CODE>, <CODE>FORMAT()</CODE>,
<CODE>IF()</CODE>, <CODE>PASSWORD()</CODE>, <CODE>ENCRYPT()</CODE>,
<CODE>ENCODE()</CODE>, <CODE>DECODE()</CODE>, <CODE>PERIOD_ADD()</CODE>,
<CODE>PERIOD_DIFF()</CODE>, <CODE>TO_DAYS()</CODE>, or <CODE>WEEKDAY()</CODE> functions.

<LI>

Use of <CODE>TRIM()</CODE> to trim substrings. ANSI SQL only supports removal
of single characters.

<LI>

The <CODE>GROUP BY</CODE> functions <CODE>STD()</CODE>, <CODE>BIT_OR()</CODE> and
<CODE>BIT_AND()</CODE>.

<LI>

Use of <CODE>REPLACE</CODE> instead of <CODE>DELETE</CODE> + <CODE>INSERT</CODE>.
See section <A HREF="manual.html#REPLACE">7.14  <CODE>REPLACE</CODE> syntax</A>.

<LI>

The <CODE>FLUSH flush_option</CODE> statement.
</UL>



<H2><A NAME="Differences_from_ANSI" HREF="manual_toc.html#Differences_from_ANSI">5.2  <STRONG>MySQL</STRONG> differences compared to ANSI SQL92</A></H2>

<P>
We try to make <STRONG>MySQL</STRONG> follow the ANSI SQL standard and the
ODBC SQL standard, but in some cases <STRONG>MySQL</STRONG> does some things
differently:

</P>

<UL>
<LI>

<CODE>--</CODE> is not a comment. See section <A HREF="manual.html#Missing_comments">5.3.7  <SAMP>`--'</SAMP> as the start of a comment</A>.
<LI>

For <CODE>VARCHAR</CODE> columns, trailing spaces are removed when the value is
stored. See section <A HREF="manual.html#Bugs">E  Known errors and design deficiencies in <STRONG>MySQL</STRONG></A>.
<LI>

In some cases, <CODE>CHAR</CODE> columns are silently changed to <CODE>VARCHAR</CODE>
columns. See section <A HREF="manual.html#Silent_column_changes">7.6.1  Silent column specification changes</A>.
<LI>

Privileges for a table is not automatically revoked when you delete a
table. You must explicitly issue a <CODE>REVOKE</CODE> to revoke privileges for
a table. See section <A HREF="manual.html#GRANT">7.25  <CODE>GRANT</CODE> and <CODE>REVOKE</CODE> syntax</A>.
</UL>



<H2><A NAME="Missing_functions" HREF="manual_toc.html#Missing_functions">5.3  Functionality missing from <STRONG>MySQL</STRONG></A></H2>

<P>
The following functionality is missing in the current version of
<STRONG>MySQL</STRONG>.  For a prioritized list indicating when new extensions may be
added to <STRONG>MySQL</STRONG>, you should consult
<a HREF="http://www.mysql.com/Manual_chapter/manual_Todo.html"> the online
<STRONG>MySQL</STRONG> TODO list</a>. That is the latest version of the TODO list in
this manual. See section <A HREF="manual.html#TODO">F  List of things we want to add to <STRONG>MySQL</STRONG> in the future (The TODO)</A>.

</P>



<H3><A NAME="Missing_Sub-selects" HREF="manual_toc.html#Missing_Sub-selects">5.3.1  Sub-selects</A></H3>

<P>
The following will not yet work in <STRONG>MySQL</STRONG>:

</P>

<PRE>
SELECT * FROM table1 WHERE id IN (SELECT id FROM table2);
SELECT * FROM table1 WHERE id NOT IN (SELECT id FROM table2);
</PRE>

<P>
However, in many cases you can rewrite the query without a sub select:

</P>

<PRE>
SELECT table1.* FROM table1,table2 WHERE table1.id=table2.id;
SELECT table1.* FROM table1 LEFT JOIN table2 ON table1.id=table2.id where table2.id IS NULL
</PRE>

<P>
For more complicated sub queries you can create temporary tables to hold the
sub query.

</P>
<P>
<STRONG>MySQL</STRONG> only supports <CODE>INSERT ... SELECT ...</CODE> and <CODE>REPLACE
... SELECT ...</CODE> Independent sub-selects will be probably be available in
3.23.2.  You can now use the function <CODE>IN()</CODE> in other contexts,
however.

</P>


<H3><A NAME="Missing_SELECT_INTO_TABLE" HREF="manual_toc.html#Missing_SELECT_INTO_TABLE">5.3.2  <CODE>SELECT INTO TABLE</CODE></A></H3>

<P>
<STRONG>MySQL</STRONG> doesn't yet support the Oracle SQL extension:
<CODE>SELECT ... INTO TABLE ...</CODE>.  <STRONG>MySQL</STRONG> supports instead the
ANSI SQL syntax <CODE>INSERT INTO ... SELECT ...</CODE>, which is basically
the same thing.

</P>
<P>
Alternatively, you can use <CODE>SELECT INTO OUTFILE...</CODE> or <CODE>CREATE
TABLE ... SELECT</CODE> to solve your problem.

</P>


<H3><A NAME="Missing_Transactions" HREF="manual_toc.html#Missing_Transactions">5.3.3  Transactions</A></H3>

<P>
Transactions are not supported. <STRONG>MySQL</STRONG> shortly will support atomic
operations, which are like transactions without rollback. With atomic
operations, you can execute a group of <CODE>INSERT</CODE>/<CODE>SELECT</CODE>/whatever
commands and be guaranteed that no other thread will interfere. In this
context, you won't usually need rollback. Currently, you can prevent
interference from other threads by using the <CODE>LOCK TABLES</CODE> and
<CODE>UNLOCK TABLES</CODE> commands.
See section <A HREF="manual.html#LOCK_TABLES">7.23  <CODE>LOCK TABLES/UNLOCK TABLES</CODE> syntax</A>.

</P>


<H3><A NAME="Missing_Triggers" HREF="manual_toc.html#Missing_Triggers">5.3.4  Stored procedures and triggers</A></H3>

<P>
A stored procedure is a set of SQL commands that can be compiled and stored
in the server. Once this has been done, clients don't need to keep reissuing
the entire query but can refer to the stored procedure. This provides better
performance because the query has to be parsed only once and less information
needs to be sent between the server and the client. You can also raise the
conceptual level by having libraries of functions in the server.

</P>
<P>
A trigger is a stored procedure that is invoked when a particular event
occurs.  For example, you can install a stored procedure that is triggered
each time a record is deleted from a transaction table and that automatically
deletes the corresponding customer from a customer table when all his
transactions are deleted.

</P>
<P>
The planned update language will be able to
handle stored procedures, but without triggers. Triggers usually slow
down everything, even queries for which they are not needed.

</P>
<P>
To see when <STRONG>MySQL</STRONG> might get stored procedures, see section <A HREF="manual.html#TODO">F  List of things we want to add to <STRONG>MySQL</STRONG> in the future (The TODO)</A>.

</P>


<H3><A NAME="Missing_Foreign_Keys" HREF="manual_toc.html#Missing_Foreign_Keys">5.3.5  Foreign Keys</A></H3>

<P>
Note that foreign keys in SQL are not used to join tables, but are used
mostly for checking referential integrity.  If you want to get results from
multiple tables from a <CODE>SELECT</CODE> statement, you do this by joining
tables!

</P>

<PRE>
SELECT * from table1,table2 where table1.id = table2.id;
</PRE>

<P>
See section <A HREF="manual.html#JOIN">7.12  <CODE>JOIN</CODE> syntax</A>.

</P>
<P>
The <CODE>FOREIGN KEY</CODE> syntax in <STRONG>MySQL</STRONG> exists only for compatibility
with other SQL vendors' <CODE>CREATE TABLE</CODE> commands; it doesn't do
anything.  The <CODE>FOREIGN KEY</CODE> syntax without <CODE>ON DELETE ...</CODE> is
mostly used for documentation purposes. Some ODBC applications may use this
to produce automatic <CODE>WHERE</CODE> clauses, but this is usually easy to
override. <CODE>FOREIGN KEY</CODE> is sometimes used as a constraint check, but
this check is unnecessary in practice if rows are inserted into the tables in
the right order. <STRONG>MySQL</STRONG> only supports these clauses because some
applications require them to exist (regardless of whether or not they
work!).

</P>
<P>
In <STRONG>MySQL</STRONG>, you can work around the problem of <CODE>ON DELETE
...</CODE> not being implemented by adding the appropriate <CODE>DELETE</CODE> statement to
an application when you delete records from a table that has a foreign key.
In practice this is as quick (in some cases quicker) and much more portable
than using foreign keys.

</P>
<P>
In the near future we will extend the <CODE>FOREIGN KEY</CODE> implementation so
that at least the information will be saved in the table specification file
and may be retrieved by <CODE>mysqldump</CODE> and ODBC.

</P>



<H4><A NAME="Broken_Foreign_KEY" HREF="manual_toc.html#Broken_Foreign_KEY">5.3.5.1  Reasons NOT to use foreign keys</A></H4>

<P>
There are so many problems with <CODE>FOREIGN KEY</CODE>s that we don't
know where to start:

</P>

<UL>
<LI>

Foreign keys make life very complicated, because the foreign key definitions
must be stored in a database and implementing them would destroy the whole
"nice approach" of using files that can be moved, copied and removed.

<LI>

The speed impact is terrible for <CODE>INSERT</CODE> and <CODE>UPDATE</CODE> statements,
and in this case almost all <CODE>FOREIGN KEY</CODE> checks are useless because you
usually insert records in the right tables in the right order, anyway.

<LI>

There is also a need to hold locks on many more tables when updating one
table, because the side effects can cascade through the entire database. It's
MUCH faster to delete records from one table first and subsequently delete
them from the other tables.

<LI>

You can no longer restore a table by doing a full delete from
the table and then restoring all records (from a new source or from a backup).

<LI>

If you have foreign keys you can't dump and restore tables unless you do so
in a very specific order.

<LI>

It's very easy to do "allowed" circular definitions that make the
tables impossible to recreate each table with a single create statement, even if
the definition works and is usable.
</UL>

<P>
The only nice aspect of <CODE>FOREIGN KEY</CODE> is that it gives ODBC and some
other client programs the ability to see how a table is connected and to use
this to show connection diagrams and to help in building applicatons.

</P>
<P>
<STRONG>MySQL</STRONG> will soon store <CODE>FOREIGN KEY</CODE> definitions so that
a client can ask for and receive an answer how the original connection was
made. The current <TT>`.frm'</TT> file format does not have any place for it.

</P>


<H3><A NAME="Missing_Views" HREF="manual_toc.html#Missing_Views">5.3.6  Views</A></H3>

<P>
<STRONG>MySQL</STRONG> doesn't support views, but this is on the TODO.

</P>


<H3><A NAME="Missing_comments" HREF="manual_toc.html#Missing_comments">5.3.7  <SAMP>`--'</SAMP> as the start of a comment</A></H3>

<P>
Some other SQL databases use <SAMP>`--'</SAMP> to start comments. <STRONG>MySQL</STRONG>
has <SAMP>`#'</SAMP> as the start comment character, even if the <CODE>mysql</CODE>
command line tool removes all lines that start with <SAMP>`--'</SAMP>.
You can also use the C comment style <CODE>/* this is a comment */</CODE> with
<STRONG>MySQL</STRONG>.
See section <A HREF="manual.html#Comments">7.28  Comment syntax</A>.

</P>
<P>
<STRONG>MySQL</STRONG> will not support <SAMP>`--'</SAMP>; this degenerate comment style has
caused many problems with automatically-generated SQL queries that have used
something like the following code, where we automatically insert the value of
the payment for <CODE>!payment!</CODE>:

</P>

<PRE>
UPDATE tbl_name SET credit=credit-!payment!
</PRE>

<P>
What do you think will happen when the value of <CODE>payment</CODE> is negative?

</P>
<P>
Because <CODE>1--1</CODE> is legal in SQL, we think it is terrible that
<SAMP>`--'</SAMP> means start comment.

</P>
<P>
If you have a SQL program in a text file that contains <SAMP>`--'</SAMP> comments
you should use:

</P>

<PRE>
shell&#62; replace " --" " #" &#60; text-file-with-funny-comments.sql \
         | mysql database
</PRE>

<P>
instead of the usual:

</P>

<PRE>
shell&#62; mysql database &#60; text-file-with-funny-comments.sql
</PRE>

<P>
You can also edit the command file "in place" to change the <SAMP>`--'</SAMP>
comments to <SAMP>`#'</SAMP> comments:

</P>

<PRE>
shell&#62; replace " --" " #" -- text-file-with-funny-comments.sql
</PRE>

<P>
Change them back with this command:

</P>

<PRE>
shell&#62; replace " #" " --" -- text-file-with-funny-comments.sql
</PRE>



<H2><A NAME="Standards" HREF="manual_toc.html#Standards">5.4  What standards does <STRONG>MySQL</STRONG> follow?</A></H2>

<P>
Entry level SQL92. ODBC level 0-2.

</P>


<H2><A NAME="Commit-rollback" HREF="manual_toc.html#Commit-rollback">5.5  How to cope without <CODE>COMMIT</CODE>-<CODE>ROLLBACK</CODE></A></H2>

<P>
<STRONG>MySQL</STRONG> doesn't support <CODE>COMMIT</CODE>-<CODE>ROLLBACK.</CODE> The problem is
that handling <CODE>COMMIT</CODE>-<CODE>ROLLBACK</CODE> efficiently would require a
completely different table layout than <STRONG>MySQL</STRONG> uses today.
<STRONG>MySQL</STRONG> would also need extra threads that do automatic cleanups on
the tables and the disk usage would be much higher. This would make
<STRONG>MySQL</STRONG> about 2-4 times slower than it is today.  <STRONG>MySQL</STRONG> is
much faster than almost all other SQL databases (typically at least 2-3 times
faster).  One of the reasons for this is the lack of
<CODE>COMMIT</CODE>-<CODE>ROLLBACK</CODE>.

</P>
<P>
For the moment, we are much more for implementing the SQL server
language (something like stored procedures). With this you would very
seldom really need <CODE>COMMIT</CODE>-<CODE>ROLLBACK.</CODE> This would also give much
better performance.

</P>
<P>
Loops that need transactions normally can be coded with the help of
<CODE>LOCK TABLES</CODE>, and you don't need cursors when you can update records
on the fly.

</P>
<P>
We have transactions and cursors on the TODO but not quite prioritized. If
we implement these, it will be as an option to <CODE>CREATE TABLE</CODE>. That
means that <CODE>COMMIT</CODE>-<CODE>ROLLBACK</CODE> will work only on those tables,
so that a speed penalty will be imposed on those table only.

</P>
<P>
We at TcX have a greater need for a real fast database than a 100%
general database. Whenever we find a way to implement these features without
any speed loss, we will probably do it. For the moment, there are many more
important things to do. Check the TODO for how we prioritize things at
the moment. (Customers with higher levels of support can alter this, so
things may be reprioritized.)

</P>
<P>
The current problem is actually <CODE>ROLLBACK</CODE>. Without <CODE>ROLLBACK</CODE>, you
can do any kind of <CODE>COMMIT</CODE> action with <CODE>LOCK TABLES</CODE>. To support
<CODE>ROLLBACK</CODE>, <STRONG>MySQL</STRONG> would have to be changed to store all old
records that were updated and revert everything back to the starting point if
<CODE>ROLLBACK</CODE> was issued. For simple cases, this isn't that hard to do (the
current <CODE>isamlog</CODE> could be used for this purpose), but it would be much
more difficult to implement <CODE>ROLLBACK</CODE> for <CODE>ALTER/DROP/CREATE
TABLE</CODE>.

</P>
<P>
To avoid using <CODE>ROLLBACK</CODE>, you can use the following strategy:

</P>

<OL>
<LI>

Use <CODE>LOCK TABLES ...</CODE> to lock all the tables you want to access.
<LI>

Test conditions.
<LI>

Update if everything is okay.
<LI>

Use <CODE>UNLOCK TABLES</CODE> to release your locks.
</OL>

<P>
This is usually a much faster method than using transactions with possible
<CODE>ROLLBACK</CODE>s, although not always. The only situation this solution
doesn't handle is when someone kills the threads in the middle of an
update. In this case, all locks will be released but some of the updates may
not have been executed.

</P>
<P>
You can also use functions to update records in a single operation.
You can get a very efficient application by using the following techniques:

</P>

<UL>
<LI>

Modify fields relative to their current value

<LI>

Update only those fields that actually have changed
</UL>

<P>
For example, when we are doing updates to some customer information, we
update only the customer data that have changed and test only that none of
the changed data, or data that depend on the changed data, have changed
compared to the original row. The test for changed data is done with the
<CODE>WHERE</CODE> clause in the <CODE>UPDATE</CODE> statement. If the record wasn't
updated, we give the client a message: "Some of the data you have changed
have been changed by another user". Then we show the old row versus the new
row in a window, so the user can decide which version of the customer record
he should use.

</P>
<P>
This gives us something that is similar to "column locking" but is actually
even better, because we only update some of the columns, using values that
are relative to their current values.  This means that typical <CODE>UPDATE</CODE>
statements look something like these:

</P>

<PRE>
UPDATE tablename SET pay_back=pay_back+'relative change';

UPDATE customer
  SET
    customer_date='current_date',
    address='new address',
    phone='new phone',
    money_he_owes_us=money_he_owes_us+'new_money'
  WHERE
    customer_id=id AND address='old address' AND phone='old phone';
</PRE>

<P>
As you can see, this is very efficient and works even if another client has
changed the values in the <CODE>pay_back</CODE> or <CODE>money_he_owes_us</CODE> columns.

</P>
<P>
<A NAME="IDX117"></A>
<A NAME="IDX118"></A>
In many cases, users have wanted <CODE>ROLLBACK</CODE> and/or <CODE>LOCK
TABLES</CODE> for the purpose of managing unique identifiers for some tables. This
can be handled much more efficiently by using an <CODE>AUTO_INCREMENT</CODE> column
and either the SQL function <CODE>LAST_INSERT_ID()</CODE> or the C API function
<CODE>mysql_insert_id()</CODE>. See section <A HREF="manual.html#mysql_insert_id">19.4.28  <CODE>mysql_insert_id()</CODE></A>.

</P>
<P>
<A NAME="IDX119"></A>
At TcX, we have never had any need for row-level locking because we have
always been able to code around it. Some cases really need row
locking, but they are very few. If you want row-level locking, you
can use a flag column in the table and do something like this:

</P>

<PRE>
UPDATE tbl_name SET row_flag=1 WHERE id=ID;
</PRE>

<P>
<STRONG>MySQL</STRONG> returns 1 for the number of affected rows if the row was
found and <CODE>row_flag</CODE> wasn't already 1 in the original row.

</P>
<P>
You can think of it as <STRONG>MySQL</STRONG> changed the above query to:

</P>

<PRE>
UPDATE tbl_name SET row_flag=1 WHERE id=ID and row_flag &#60;&#62; 1;
</PRE>



<H1><A NAME="Privilege_system" HREF="manual_toc.html#Privilege_system">6  The <STRONG>MySQL</STRONG> access privilege system</A></H1>

<P>
<STRONG>MySQL</STRONG> has an advanced but non-standard security/privilege
system.  This section describes how it works.

</P>



<H2><A NAME="What_Privileges" HREF="manual_toc.html#What_Privileges">6.1  What the privilege system does</A></H2>

<P>
The primary function of the <STRONG>MySQL</STRONG> privilege system is to
authenticate a user connecting from a given host, and to associate that user
with <STRONG>select</STRONG>, <STRONG>insert</STRONG>, <STRONG>update</STRONG> and <STRONG>delete</STRONG>
privileges on a database.

</P>
<P>
Additional functionality includes the ability to have an anonymous user and
to grant privileges for <STRONG>MySQL</STRONG>-specific functions such as <CODE>LOAD
DATA INFILE</CODE> and administrative operations.

</P>


<H2><A NAME="User_names" HREF="manual_toc.html#User_names">6.2  <STRONG>MySQL</STRONG> user names and passwords</A></H2>

<P>
There are several distinctions between the way user names and passwords are
used by <STRONG>MySQL</STRONG>, and the way they are used by Unix or Windows:

</P>

<UL>
<LI>

User names, as used by <STRONG>MySQL</STRONG> for authentication purposes, have
nothing to do with Unix user names (login names) or Windows user names.  Most
<STRONG>MySQL</STRONG> clients by default try to log in using the current Unix user
name as the <STRONG>MySQL</STRONG> user name, but that is for convenience only.
Client programs allow a different name to be specified with the <CODE>-u</CODE> or
<CODE>--user</CODE> options. This means that you can't make a database secure in
any way unless all <STRONG>MySQL</STRONG> user names have passwords.  Anyone may
attempt to connect to the server using any name, and they will succeed if
they specify any name that doesn't have a password.

<LI>

<STRONG>MySQL</STRONG> user names can be up to 16 characters long; Unix user names
typically are limited to 8 characters.

<LI>

<STRONG>MySQL</STRONG> passwords have nothing to do with Unix passwords.  There is no
necessary connection between the password you use to log in to a Unix machine
and the password you use to access a database on that machine.

<LI>

<STRONG>MySQL</STRONG> encrypts passwords using a different algorithm than the one
used during the Unix login process.  See the descriptions of the
<CODE>PASSWORD()</CODE> and <CODE>ENCRYPT()</CODE> functions in section <A HREF="manual.html#Miscellaneous_functions">7.3.12  Miscellaneous functions</A>.
</UL>



<H2><A NAME="Connecting" HREF="manual_toc.html#Connecting">6.3  Connecting to the <STRONG>MySQL</STRONG> server</A></H2>

<P>
<STRONG>MySQL</STRONG> client programs generally require that you specify connection
parameters when you want to access a <STRONG>MySQL</STRONG> server: the host you want
to connect to, your user name and your password.  For example, the
<CODE>mysql</CODE> client can be started like this (optional arguments are enclosed
between <SAMP>`['</SAMP> and <SAMP>`]'</SAMP>):

</P>

<PRE>
shell&#62; mysql [-h host_name] [-u user_name] [-pyour_pass]
</PRE>

<P>
Alternate forms of the <CODE>-h</CODE>, <CODE>-u</CODE> and <CODE>-p</CODE> options are
<CODE>--host=host_name</CODE>, <CODE>--user=user_name</CODE> and
<CODE>--password=your_pass</CODE>.  Note that there is <EM>no space</EM> between
<CODE>-p</CODE> or <CODE>--password=</CODE> and the password following it.

</P>
<P>
<EM>Note:</EM> Specifing a password on the command line is not secure!
Any user on your system may then find out your password by typing a command
like: <CODE>ps auxww</CODE>.  See section <A HREF="manual.html#Option_files">4.15.4  Option files</A>.

</P>
<P>
<CODE>mysql</CODE> uses default values for connection parameters that are missing
from the command line:

</P>

<UL>
<LI>

The default hostname is <CODE>localhost</CODE>.

<LI>

The default user name is your Unix login name.

<LI>

No password is supplied if <CODE>-p</CODE> is missing.
</UL>

<P>
Thus, for a Unix user <CODE>joe</CODE>, the following commands are equivalent:

</P>

<PRE>
shell&#62; mysql -h localhost -u joe
shell&#62; mysql -h localhost
shell&#62; mysql -u joe
shell&#62; mysql
</PRE>

<P>
Other <STRONG>MySQL</STRONG> clients behave similarly.

</P>
<P>
On Unix systems, you can specify different default values to be used when you
make a connection, so that you need not enter them on the command line each
time you invoke a client program.  This can be done in a couple of ways:

</P>

<UL>
<LI>

<A NAME="IDX120"></A>
You can specify connection parameters in the <CODE>[client]</CODE> section of the
<TT>`.my.cnf'</TT> configuration file in your home directory.  The relevant
section of the file might look like this:


<PRE>
[client]
host=host_name
user=user_name
password=your_pass
</PRE>

See section <A HREF="manual.html#Option_files">4.15.4  Option files</A>.

<LI>

<A NAME="IDX121"></A>
<A NAME="IDX122"></A>
<A NAME="IDX123"></A>
<A NAME="IDX124"></A>
<A NAME="IDX125"></A>
<A NAME="IDX126"></A>
<A NAME="IDX127"></A>
<A NAME="IDX128"></A>
<A NAME="IDX129"></A>
<A NAME="IDX130"></A>
You can specify connection parameters using environment values.  The host can
be specified using <CODE>MYSQL_HOST</CODE>.  The <STRONG>MySQL</STRONG> user name can be
specified using <CODE>USER</CODE>, <CODE>LOGNAME</CODE> or <CODE>LOGIN</CODE> (although these
variables might already be set to your Unix login name, and it may be unwise
to change them).  The password can be specified using <CODE>MYSQL_PWD</CODE>
(but this is insecure; see next section).
</UL>

<P>
<A NAME="IDX131"></A>
If connection parameters are specified in multiple ways, values specified on
the command line take precedence over values specified in configuration files
and environment variables, and values in configuration files take precedence
over values in environment variables.

</P>


<H2><A NAME="Password_security" HREF="manual_toc.html#Password_security">6.4  Keeping your password secure</A></H2>

<P>
It is inadvisable to specify your password in a way that exposes it to
discovery by other users.  The methods you can use to specify your password
when you run client programs are listed below, along with an assessment of
the risks of each method:

</P>

<UL>
<LI>

Use a <CODE>-pyour_pass</CODE> or <CODE>--password=your_pass</CODE> option on the command
line.  This is convenient but insecure, since your password becomes visible
to system status programs (such as <CODE>ps</CODE>) that may be invoked by other
users to display command lines.  (<STRONG>MySQL</STRONG> clients typically overwrite
the command line argument with zeroes during their initialization sequence,
but there is still a brief interval during which the value is visible.)

<LI>

Use a <CODE>-p</CODE> or <CODE>--password</CODE> option (with no <CODE>your_pass</CODE> value
specified).  In this case, the client program solicits the password from
the terminal:


<PRE>
shell&#62; mysql -u user_name -p
Enter password: ********
</PRE>

The client echoes <SAMP>`*'</SAMP> characters to the terminal as you enter your
password so that onlookers cannot see it.

It is more secure to enter your password this way than to specify it on the
command line because it is not visible to other users.  However, this method
of entering a password is suitable only for programs that you run
interactively.  If you want to invoke a client from a script that runs
non-interactively, there is no opportunity to enter the password from the
terminal.

<LI>

<A NAME="IDX132"></A>
Store your password in a configuration file.  For example, you can list your
password in the <CODE>[client]</CODE> section of the <TT>`.my.cnf'</TT> file in your
home directory:


<PRE>
[client]
password=your_pass
</PRE>

If you store your password in <TT>`.my.cnf'</TT>, the file should not be group or
world readable or writable.  Make sure the file's access mode is <CODE>400</CODE>
or <CODE>600</CODE>.

See section <A HREF="manual.html#Option_files">4.15.4  Option files</A>.
<LI>

You can store your password in the <CODE>MYSQL_PWD</CODE> environment variable, but
this method must be considered extremely insecure and should not be used.
Some versions of <CODE>ps</CODE> include an option to display the environment of
running processes; your password will be in plain sight for all to see if
you set <CODE>MYSQL_PWD</CODE>.  Even on systems without such a version of
<CODE>ps</CODE>, it is unwise to assume there is no other method to observe process
environments.
</UL>

<P>
All in all, the safest methods are to have the client program prompt for the
password or to specify the password in a properly-protected <TT>`.my.cnf'</TT>
file.

</P>


<H2><A NAME="Privileges_provided" HREF="manual_toc.html#Privileges_provided">6.5  Privileges provided by <STRONG>MySQL</STRONG></A></H2>

<P>
Privilege information is stored in the <CODE>user</CODE>, <CODE>db</CODE>, <CODE>host</CODE>,
<CODE>tables_priv</CODE> and <CODE>columns_priv</CODE> tables in the <CODE>mysql</CODE>
database (that is, in the database named <CODE>mysql</CODE>).  The <STRONG>MySQL</STRONG>
server reads the contents of these tables when it starts up and under the
circumstances indicated in section <A HREF="manual.html#Privilege_changes">6.9  When privilege changes take effect</A>.

</P>
<P>
The names used in this manual to refer to the privileges provided by
<STRONG>MySQL</STRONG> are shown below, along with the table column name associated
with each privilege in the grant tables and the context in which the
privilege applies:

</P>
<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><STRONG>Privilege</STRONG> </TD><TD> <STRONG>Column</STRONG> </TD><TD> <STRONG>Context</STRONG>
</TR NOSAVE>
<TR><TD><STRONG>select</STRONG> </TD><TD> <CODE>Select_priv</CODE> </TD><TD> tables
</TR NOSAVE>
<TR><TD><STRONG>insert</STRONG> </TD><TD> <CODE>Insert_priv</CODE> </TD><TD> tables
</TR NOSAVE>
<TR><TD><STRONG>update</STRONG> </TD><TD> <CODE>Update_priv</CODE> </TD><TD> tables
</TR NOSAVE>
<TR><TD><STRONG>delete</STRONG> </TD><TD> <CODE>Delete_priv</CODE> </TD><TD> tables
</TR NOSAVE>
<TR><TD><STRONG>index</STRONG> </TD><TD> <CODE>Index_priv</CODE> </TD><TD> tables
</TR NOSAVE>
<TR><TD><STRONG>alter</STRONG> </TD><TD> <CODE>Alter_priv</CODE> </TD><TD> tables
</TR NOSAVE>
<TR><TD><STRONG>create</STRONG> </TD><TD> <CODE>Create_priv</CODE> </TD><TD> databases, tables or indexes
</TR NOSAVE>
<TR><TD><STRONG>drop</STRONG> </TD><TD> <CODE>Drop_priv</CODE> </TD><TD> databases or tables
</TR NOSAVE>
<TR><TD><STRONG>grant</STRONG> </TD><TD> <CODE>Grant_priv</CODE> </TD><TD> databases or tables
</TR NOSAVE>
<TR><TD><STRONG>reload</STRONG> </TD><TD> <CODE>Reload_priv</CODE> </TD><TD> server administration
</TR NOSAVE>
<TR><TD><STRONG>shutdown</STRONG> </TD><TD> <CODE>Shutdown_priv</CODE> </TD><TD> server administration
</TR NOSAVE>
<TR><TD><STRONG>process</STRONG> </TD><TD> <CODE>Process_priv</CODE> </TD><TD> server administration
</TR NOSAVE>
<TR><TD><STRONG>file</STRONG> </TD><TD> <CODE>File_priv</CODE> </TD><TD> file access on server
</TR>
</TABLE>

<P>
The <STRONG>select</STRONG>, <STRONG>insert</STRONG>, <STRONG>update</STRONG> and <STRONG>delete</STRONG>
privileges allow you to perform operations on rows in existing tables in
a database.

</P>
<P>
<CODE>SELECT</CODE> statements require the <STRONG>select</STRONG> privilege only if they
actually retrieve rows from a table.  You can execute certain <CODE>SELECT</CODE>
statements even without permission to access any of the databases on the
server.  For example, you could use the <CODE>mysql</CODE> client as a simple
calculator:

</P>

<PRE>
mysql&#62; SELECT 1+1;
mysql&#62; SELECT PI()*2;
</PRE>

<P>
The <STRONG>index</STRONG> privilege allows you to create or drop (remove) indexes.

</P>
<P>
The <STRONG>alter</STRONG> privilege allows you to use <CODE>ALTER TABLE</CODE>.

</P>
<P>
The <STRONG>create</STRONG> and <STRONG>drop</STRONG> privileges allow you to create new
databases and tables, or to drop (remove) existing databases and tables.

</P>
<P>
Note that if you grant the <STRONG>drop</STRONG> privilege for the <CODE>mysql</CODE>
database to a user, that user can drop the database in which the
<STRONG>MySQL</STRONG> access privileges are stored!

</P>
<P>
The <STRONG>grant</STRONG> privilege allows you to give to other users those
privileges you yourself possess.

</P>
<P>
The <STRONG>file</STRONG> privilege gives you permission to read and write files on
the server using the <CODE>LOAD DATA INFILE</CODE> and <CODE>SELECT ... INTO
OUTFILE</CODE> statements.  Any user to whom this privilege is granted can read or
write any file that the <STRONG>MySQL</STRONG> server can read or write.

</P>
<P>
The remaining privileges are used for administrative operations, which are
performed using the <CODE>mysqladmin</CODE> program.  The table below shows which
<CODE>mysqladmin</CODE> commands each administrative privilege allows you to
execute:

</P>
<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><STRONG>Privilege</STRONG> </TD><TD> <STRONG>Commands permitted to privilege holders</STRONG>
</TR NOSAVE>
<TR><TD><STRONG>reload</STRONG> </TD><TD> <CODE>reload</CODE>, <CODE>refresh</CODE>,
<CODE>flush-privileges</CODE>,
<CODE>flush-hosts</CODE>, <CODE>flush-logs</CODE>, <CODE>flush-tables</CODE>
</TR NOSAVE>
<TR><TD><STRONG>shutdown</STRONG> </TD><TD> <CODE>shutdown</CODE>
</TR NOSAVE>
<TR><TD><STRONG>process</STRONG> </TD><TD> <CODE>processlist</CODE>, <CODE>kill</CODE>
</TR>
</TABLE>

<P>
The <CODE>reload</CODE> command tells the server to reread the grant tables.  The
<CODE>refresh</CODE> command flushes all tables and opens and closes the log
files.  <CODE>flush-privileges</CODE> is a synonym for <CODE>reload</CODE>.  The other
<CODE>flush-*</CODE> commands perform functions similar to <CODE>refresh</CODE> but are
more limited in scope, and may be preferable in some instances.  For example,
if you want to flush just the log files, <CODE>flush-logs</CODE> is a better choice
than <CODE>refresh</CODE>.

</P>
<P>
The <CODE>shutdown</CODE> command shuts down the server.

</P>
<P>
The <CODE>processlist</CODE> command displays information about the threads
executing within the server.  The <CODE>kill</CODE> command kills server threads.
You can always display or kill your own threads, but you need the
<STRONG>process</STRONG> privilege to display or kill threads initiated by other
users.

</P>
<P>
It is a good idea in general to grant privileges only to those users who need
them, but you should exercise particular caution in granting certain
privileges:

</P>

<UL>
<LI>

The <STRONG>grant</STRONG> privilege allows users to give away their privileges to
other users.  Two users with different privileges and with the <STRONG>grant</STRONG>
privilege are able to combine privileges.

<LI>

The <STRONG>alter</STRONG> privilege may be used to subvert the privilege system
by renaming tables.

<LI>

The <STRONG>file</STRONG> privilege can be abused to read any world-readable file on
the server into a database table, the contents of which can then be
accessed using <CODE>SELECT</CODE>.

<LI>

The <STRONG>shutdown</STRONG> privilege can be abused to deny service to other
users entirely, by terminating the server.

<LI>

The <STRONG>process</STRONG> privilege can be used to view the plain text of
currently executing queries, including queries that set or change passwords.

<LI>

Privileges on the <CODE>mysql</CODE> database can be used to change passwords and
other access privilege information.  (Passwords are stored encrypted, so a
malicious user cannot simply read them.  However, with sufficient privileges,
that same user can replace a password with a different one.)
</UL>

<P>
There are some things that you cannot do with the <STRONG>MySQL</STRONG>
privilege system:

</P>

<UL>
<LI>

You cannot explicitly specify that a given user should be denied access.
That is, you cannot explicitly match a user and then refuse the connection.

<LI>

You cannot specify that a user has privileges to create or drop tables
in a database but not to create or drop the database itself.
</UL>



<H2><A NAME="Privileges" HREF="manual_toc.html#Privileges">6.6  How the privilege system works</A></H2>

<P>
The <STRONG>MySQL</STRONG> privilege system ensures that all users may do exactly the
things that they are supposed to be allowed to do.  When you connect to a
<STRONG>MySQL</STRONG> server, your identity is determined by <STRONG>the host from
which you connect</STRONG> and <STRONG>the user name you specify</STRONG>.  The system grants
privileges according to your identity and <STRONG>what you want to do</STRONG>.

</P>
<P>
<STRONG>MySQL</STRONG> considers both your hostname and user name in identifying you
because there is little reason to assume that a given user name belongs to
the same person everywhere on the Internet.  For example, the user
<CODE>bill</CODE> who connects from <CODE>whitehouse.gov</CODE> need not be the same
person as the user <CODE>bill</CODE> who connects from <CODE>microsoft.com</CODE>.
<STRONG>MySQL</STRONG> handles this by allowing you to distinguish users on different
hosts that happen to have the same name:  you can grant <CODE>bill</CODE> one set
of privileges for connections from <CODE>whitehouse.gov</CODE>, and a different set
of privileges for connections from <CODE>microsoft.com</CODE>.

</P>
<P>
<STRONG>MySQL</STRONG> access control involves two stages:

</P>

<UL>
<LI>

Stage 1: The server checks whether or not you are even allowed to connect.

<LI>

Stage 2: Assuming you can connect, the server checks each request you issue
to see whether or not you have sufficient privileges to perform it.  For
example, if you try to select rows from a table in a database or drop a table
from the database, the server makes sure you have the <STRONG>select</STRONG>
privilege for the table or the <STRONG>drop</STRONG> privilege for the database.
</UL>

<P>
The server uses the <CODE>user</CODE>, <CODE>db</CODE> and <CODE>host</CODE> tables in the
<CODE>mysql</CODE> database at both stages of access control.  The fields in these
grant tables are shown below:

</P>
<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><STRONG>Table name</STRONG> </TD><TD> <CODE>user</CODE> </TD><TD> <CODE>db</CODE> </TD><TD> <CODE>host</CODE>

</TR NOSAVE>
<TR><TD><STRONG>Scope fields</STRONG> </TD><TD> <CODE>Host</CODE> </TD><TD> <CODE>Host</CODE> </TD><TD> <CODE>Host</CODE>
</TR NOSAVE>
<TR><TD></TD><TD> <CODE>User</CODE> </TD><TD> <CODE>Db</CODE> </TD><TD> <CODE>Db</CODE>
</TR NOSAVE>
<TR><TD></TD><TD> <CODE>Password</CODE> </TD><TD> <CODE>User</CODE> </TD><TD>

</TR NOSAVE>
<TR><TD><STRONG>Privilege fields</STRONG> </TD><TD> <CODE>Select_priv</CODE> </TD><TD> <CODE>Select_priv</CODE> </TD><TD> <CODE>Select_priv</CODE>
</TR NOSAVE>
<TR><TD></TD><TD> <CODE>Insert_priv</CODE> </TD><TD> <CODE>Insert_priv</CODE> </TD><TD> <CODE>Insert_priv</CODE>
</TR NOSAVE>
<TR><TD></TD><TD> <CODE>Update_priv</CODE> </TD><TD> <CODE>Update_priv</CODE> </TD><TD> <CODE>Update_priv</CODE>
</TR NOSAVE>
<TR><TD></TD><TD> <CODE>Delete_priv</CODE> </TD><TD> <CODE>Delete_priv</CODE> </TD><TD> <CODE>Delete_priv</CODE>
</TR NOSAVE>
<TR><TD></TD><TD> <CODE>Index_priv</CODE> </TD><TD> <CODE>Index_priv</CODE> </TD><TD> <CODE>Index_priv</CODE>
</TR NOSAVE>
<TR><TD></TD><TD> <CODE>Alter_priv</CODE> </TD><TD> <CODE>Alter_priv</CODE> </TD><TD> <CODE>Alter_priv</CODE>
</TR NOSAVE>
<TR><TD></TD><TD> <CODE>Create_priv</CODE> </TD><TD> <CODE>Create_priv</CODE> </TD><TD> <CODE>Create_priv</CODE>
</TR NOSAVE>
<TR><TD></TD><TD> <CODE>Drop_priv</CODE> </TD><TD> <CODE>Drop_priv</CODE> </TD><TD> <CODE>Drop_priv</CODE>
</TR NOSAVE>
<TR><TD></TD><TD> <CODE>Grant_priv</CODE> </TD><TD> <CODE>Grant_priv</CODE> </TD><TD> <CODE>Grant_priv</CODE>
</TR NOSAVE>
<TR><TD></TD><TD> <CODE>Reload_priv</CODE> </TD><TD> </TD><TD> 
</TR NOSAVE>
<TR><TD></TD><TD> <CODE>Shutdown_priv</CODE> </TD><TD> </TD><TD> 
</TR NOSAVE>
<TR><TD></TD><TD> <CODE>Process_priv</CODE> </TD><TD> </TD><TD> 
</TR NOSAVE>
<TR><TD></TD><TD> <CODE>File_priv</CODE> </TD><TD> </TD><TD> 
</TR>
</TABLE>

<P>
For the second stage of access control (request verification), the server
may, if the request involves tables, additionally consult the
<CODE>tables_priv</CODE> and <CODE>columns_priv</CODE> tables.  The fields in these
tables are shown below:

</P>
<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><STRONG>Table name</STRONG> </TD><TD> <CODE>tables_priv</CODE> </TD><TD> <CODE>columns_priv</CODE>

</TR NOSAVE>
<TR><TD><STRONG>Scope fields</STRONG> </TD><TD> <CODE>Host</CODE> </TD><TD> <CODE>Host</CODE>
</TR NOSAVE>
<TR><TD></TD><TD> <CODE>Db</CODE> </TD><TD> <CODE>Db</CODE>
</TR NOSAVE>
<TR><TD></TD><TD> <CODE>User</CODE> </TD><TD> <CODE>User</CODE>
</TR NOSAVE>
<TR><TD></TD><TD> <CODE>Table_name</CODE> </TD><TD> <CODE>Table_name</CODE>
</TR NOSAVE>
<TR><TD></TD><TD> </TD><TD> <CODE>Column_name</CODE>

</TR NOSAVE>
<TR><TD><STRONG>Privilege fields</STRONG> </TD><TD> <CODE>Table_priv</CODE> </TD><TD> <CODE>Column_priv</CODE>
</TR NOSAVE>
<TR><TD></TD><TD> <CODE>Column_priv</CODE> </TD><TD>

</TR NOSAVE>
<TR><TD><STRONG>Other fields</STRONG> </TD><TD> <CODE>Timestamp</CODE> </TD><TD> <CODE>Timestamp</CODE>
</TR NOSAVE>
<TR><TD></TD><TD> <CODE>Grantor</CODE> </TD><TD>
</TR>
</TABLE>

<P>
Each grant table contains scope fields and privilege fields.

</P>
<P>
Scope fields determine the scope of each entry in the tables, i.e., the
context in which the entry applies.  For example, a <CODE>user</CODE> table entry
with <CODE>Host</CODE> and <CODE>User</CODE> values of <CODE>'thomas.loc.gov'</CODE> and
<CODE>'bob'</CODE> would be used for authenticating connections made to the server
by <CODE>bob</CODE> from the host <CODE>thomas.loc.gov</CODE>.  Similarly, a <CODE>db</CODE>
table entry with <CODE>Host</CODE>, <CODE>User</CODE> and <CODE>Db</CODE> fields of
<CODE>'thomas.loc.gov'</CODE>, <CODE>'bob'</CODE> and <CODE>'reports'</CODE> would be used when
<CODE>bob</CODE> connects from the host <CODE>thomas.loc.gov</CODE> to access the
<CODE>reports</CODE> database.  The <CODE>tables_priv</CODE> and <CODE>columns_priv</CODE>
tables contain scope fields indicating tables or table/column combinations
to which each entry applies.

</P>
<P>
<A NAME="IDX133"></A>
For access-checking purposes, comparisons of <CODE>Host</CODE> values are
case insensitive.  <CODE>User</CODE>, <CODE>Password</CODE>, <CODE>Db</CODE> and
<CODE>Table_name</CODE> values are case sensitive.
<CODE>Column_name</CODE> values are case insensitive in <STRONG>MySQL</STRONG> 3.22.12
or later.

</P>
<P>
Privilege fields indicate the privileges granted by a table entry, that is,
what operations can be performed.  The server combines the information in the
various grant tables to form a complete description of a user's privileges.
The rules used to do this are described in section <A HREF="manual.html#Request_access">6.8  Access control, stage 2: Request verification</A>.

</P>
<P>
Scope fields are strings, declared as shown below; the default value for
each is the empty string:

</P>
<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><STRONG>Field name</STRONG> </TD><TD> <STRONG>Type</STRONG>
</TR NOSAVE>
<TR><TD><CODE>Host</CODE> </TD><TD> <CODE>CHAR(60)</CODE>
</TR NOSAVE>
<TR><TD><CODE>User</CODE> </TD><TD> <CODE>CHAR(16)</CODE>
</TR NOSAVE>
<TR><TD><CODE>Password</CODE> </TD><TD> <CODE>CHAR(16)</CODE>
</TR NOSAVE>
<TR><TD><CODE>Db</CODE> </TD><TD> <CODE>CHAR(64)</CODE> </TD><TD> (<CODE>CHAR(60)</CODE> for the
<CODE>tables_priv</CODE> and <CODE>columns_priv</CODE> tables)
</TR>
</TABLE>

<P>
In the <CODE>user</CODE>, <CODE>db</CODE> and <CODE>host</CODE> tables,
all privilege fields are declared as <CODE>ENUM('N','Y')</CODE> -- each can have a
value of <CODE>'N'</CODE> or <CODE>'Y'</CODE>, and the default value is <CODE>'N'</CODE>.

</P>
<P>
In the <CODE>tables_priv</CODE> and <CODE>columns_priv</CODE> tables, the privilege
fields are declared as <CODE>SET</CODE> fields:

</P>
<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><STRONG>Table name</STRONG> </TD><TD> <STRONG>Field name</STRONG> </TD><TD> <STRONG>Possible set elements</STRONG>
</TR NOSAVE>
<TR><TD><CODE>tables_priv</CODE> </TD><TD> <CODE>Table_priv</CODE> </TD><TD> <CODE>'Select', 'Insert',
'Update', 'Delete', 'Create', 'Drop', 'Grant', 'References', 'Index', 'Alter'</CODE>
</TR NOSAVE>
<TR><TD><CODE>tables_priv</CODE> </TD><TD> <CODE>Column_priv</CODE> </TD><TD> <CODE>'Select', 'Insert',
'Update', 'References'</CODE>
</TR NOSAVE>
<TR><TD><CODE>columns_priv</CODE> </TD><TD> <CODE>Column_priv</CODE> </TD><TD> <CODE>'Select', 'Insert',
'Update', 'References'</CODE>
</TR>
</TABLE>

<P>
Briefly, the server uses the grant tables like this:

</P>

<UL>
<LI>

The <CODE>user</CODE> table scope fields determine whether to allow or reject
incoming connections.  For allowed connections, the privilege fields indicate
the user's global (superuser) privileges.

<LI>

The <CODE>db</CODE> and <CODE>host</CODE> tables are used together:


<UL>
<LI>

The <CODE>db</CODE> table scope fields determine which users can access which
databases from which hosts.  The privilege fields determine which operations
are allowed.

<LI>

The <CODE>host</CODE> table is used as an extension of the <CODE>db</CODE> table when you
want a given <CODE>db</CODE> table entry to apply to several hosts.  For example,
if you want a user to be able to use a database from several hosts in
your network, leave the <CODE>Host</CODE> value empty in the user's <CODE>db</CODE> table
entry, then populate the <CODE>host</CODE> table with an entry for each of those
hosts.  This mechanism is described more detail in section <A HREF="manual.html#Request_access">6.8  Access control, stage 2: Request verification</A>.
</UL>

<LI>

The <CODE>tables_priv</CODE> and <CODE>columns_priv</CODE> tables are similar to
the <CODE>db</CODE> table, but are more fine-grained: they apply at the
table and column level rather than at the database level.
</UL>

<P>
Note that administrative privileges (<STRONG>reload</STRONG>, <STRONG>shutdown</STRONG>,
etc.) are specified only in the <CODE>user</CODE> table.  This is because
administrative operations are operations on the server itself and are not
database-specific, so there is no reason to list such privileges in the
other grant tables.  In fact, only the <CODE>user</CODE> table need
be consulted to determine whether or not you can perform an administrative
operation.

</P>
<P>
The <STRONG>file</STRONG> privilege is specified only in the <CODE>user</CODE> table, too.
It is not an administrative privilege as such, but your ability to read or
write files on the server host is independent of the database you are
accessing.

</P>
<P>
The <CODE>mysqld</CODE> server reads the contents of the grant tables once, when it
starts up.  Changes to the grant tables take effect as indicated in
section <A HREF="manual.html#Privilege_changes">6.9  When privilege changes take effect</A>.

</P>
<P>
When you modify the contents of the grant tables, it is a good idea to make
sure that your changes set up privileges the way you want.  For help in
diagnosing problems, see section <A HREF="manual.html#Access_denied">6.13  Causes of <CODE>Access denied</CODE> errors</A>.  For advice on security issues,
section <A HREF="manual.html#Security">6.14  How to make <STRONG>MySQL</STRONG> secure against crackers</A>.

</P>
<P>
A useful
diagnostic tool is the <CODE>mysqlaccess</CODE> script, which Yves Carlier has
provided for the <STRONG>MySQL</STRONG> distribution.  Invoke <CODE>mysqlaccess</CODE> with
the <CODE>--help</CODE> option to find out how it works.
Note that <CODE>mysqlaccess</CODE> checks access using only the <CODE>user</CODE>,
<CODE>db</CODE> and <CODE>host</CODE> tables.  It does not check table- or column-level
privileges.

</P>


<H2><A NAME="Connection_access" HREF="manual_toc.html#Connection_access">6.7  Access control, stage 1: Connection verification</A></H2>

<P>
When you attempt to connect to a <STRONG>MySQL</STRONG> server, the server accepts or
rejects the connection based on your identity and whether or not you can
verify your identity by supplying the correct password.  If not, the server
denies access to you completely.  Otherwise, the server accepts the
connection, then enters stage 2 and waits for requests.

</P>
<P>
Your identity is based on two pieces of information:

</P>

<UL>
<LI>

The host from which you connect

<LI>

Your <STRONG>MySQL</STRONG> user name
</UL>

<P>
Identity checking is performed using the three <CODE>user</CODE> table scope fields
(<CODE>Host</CODE>, <CODE>User</CODE> and <CODE>Password</CODE>).  The server accepts the
connection only if a <CODE>user</CODE> table entry matches your hostname and user
name, and you supply the correct password.

</P>
<P>
Values in the <CODE>user</CODE> table scope fields may be specified as follows:

</P>

<UL>
<LI>

A <CODE>Host</CODE> value may be a hostname or an IP number, or <CODE>'localhost'</CODE>
to indicate the local host.

<LI>

<A NAME="IDX134"></A>
You can use the wildcard characters <SAMP>`%'</SAMP> and <SAMP>`_'</SAMP> in the <CODE>Host</CODE>
field.

<LI>

A <CODE>Host</CODE> value of <CODE>'%'</CODE> matches any hostname.  A blank <CODE>Host</CODE>
value is equivalent to <CODE>'%'</CODE>.  Note that these values match <EM>any
host that can create a connection to your server!</EM>

<LI>

<A NAME="IDX135"></A>
Wildcard characters are not allowed in the <CODE>User</CODE> field, but you can
specify a blank value, which matches any name.  If the <CODE>user</CODE> table
entry that matches an incoming connection has a blank user name, the user is
considered to be the anonymous user (the user with no name), rather than the
name that the client actually specified.  This means that a blank user name
is used for all further access checking for the duration of the connection
(that is, during stage 2).

<LI>

The <CODE>Password</CODE> field can be blank.  This does not mean that any password
matches, it means the user must connect without specifying a password.
</UL>

<P>
<A NAME="IDX136"></A>
Non-blank <CODE>Password</CODE> values represent encrypted passwords.
<STRONG>MySQL</STRONG> does not store passwords in plaintext form for anyone to see.
Rather, the password supplied by a user who is attempting to connect is
encrypted (using the <CODE>PASSWORD()</CODE> function) and compared to the
already-encrypted version stored in the <CODE>user</CODE> table.  If they match,
the password is correct.

</P>
<P>
The examples below show how various combinations of <CODE>Host</CODE> and
<CODE>User</CODE> values in <CODE>user</CODE> table entries apply to incoming
connections:

</P>
<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><CODE>Host</CODE> <STRONG>value</STRONG> </TD><TD> <CODE>User</CODE> <STRONG>value</STRONG> </TD><TD> <STRONG>Connections matched by entry</STRONG>
</TR NOSAVE>
<TR><TD><CODE>'thomas.loc.gov'</CODE> </TD><TD> <CODE>'fred'</CODE> </TD><TD> <CODE>fred</CODE>, connecting from <CODE>thomas.loc.gov</CODE>
</TR NOSAVE>
<TR><TD><CODE>'thomas.loc.gov'</CODE> </TD><TD> <CODE>"</CODE> </TD><TD> Any user, connecting from <CODE>thomas.loc.gov</CODE>
</TR NOSAVE>
<TR><TD><CODE>'%'</CODE> </TD><TD> <CODE>'fred'</CODE> </TD><TD> <CODE>fred</CODE>, connecting from any host
</TR NOSAVE>
<TR><TD><CODE>'%'</CODE> </TD><TD> <CODE>"</CODE> </TD><TD> Any user, connecting from any host
</TR NOSAVE>
<TR><TD><CODE>'%.loc.gov'</CODE> </TD><TD> <CODE>'fred'</CODE> </TD><TD> <CODE>fred</CODE>, connecting from any host in the <CODE>loc.gov</CODE> domain
</TR NOSAVE>
<TR><TD><CODE>'x.y.%'</CODE> </TD><TD> <CODE>'fred'</CODE> </TD><TD> <CODE>fred</CODE>, connecting from <CODE>x.y.net</CODE>, <CODE>x.y.com</CODE>,<CODE>x.y.edu</CODE>, etc. (this is probably not useful)
</TR NOSAVE>
<TR><TD><CODE>'144.155.166.177'</CODE> </TD><TD> <CODE>'fred'</CODE> </TD><TD> <CODE>fred</CODE>, connecting from the host with IP address <CODE>144.155.166.177</CODE>
</TR NOSAVE>
<TR><TD><CODE>'144.155.166.%'</CODE> </TD><TD> <CODE>'fred'</CODE> </TD><TD> <CODE>fred</CODE>, connecting from any host in the <CODE>144.155.166</CODE> class C subnet
</TR>
</TABLE>

<P>
Since you can use IP wildcard values in the <CODE>Host</CODE> field (e.g.,
<CODE>'144.155.166.%'</CODE> to match every host on a subnet), there is the
possibility that someone might try to exploit this capability by naming a
host <CODE>144.155.166.somewhere.com</CODE>.  To foil such attempts, <STRONG>MySQL</STRONG>
disallows matching on hostnames that start with digits and a dot. Thus, if
you have a host named something like <CODE>1.2.foo.com</CODE>, its name will never
match the <CODE>Host</CODE> column of the grant tables.  Only an IP number can
match an IP wildcard value.

</P>
<P>
An incoming connection may be matched by more than one entry in the
<CODE>user</CODE> table.  For example, a connection from <CODE>thomas.loc.gov</CODE> by
<CODE>fred</CODE> would be matched by several of the entries just shown above.  How
does the server choose which entry to use if more than one matches?  The
server resolves this question by sorting the <CODE>user</CODE> table after reading
it at startup time, then looking through the entries in sorted order when a
user attempts to connect.  The first matching entry is the one that is used.

</P>
<P>
<CODE>user</CODE> table sorting works as follows.  Suppose the <CODE>user</CODE> table
looks like this:

</P>

<PRE>
+-----------+----------+-
| Host      | User     | ...
+-----------+----------+-
| %         | root     | ...
| %         | jeffrey  | ...
| localhost | root     | ...
| localhost |          | ...
+-----------+----------+-
</PRE>

<P>
When the server reads in the table, it orders the entries with the
most-specific <CODE>Host</CODE> values first (<CODE>'%'</CODE> in the <CODE>Host</CODE> column
means "any host" and is least specific).  Entries with the same <CODE>Host</CODE>
value are ordered with the most-specific <CODE>User</CODE> values first (a blank
<CODE>User</CODE> value means "any user" and is least specific).  The resulting
sorted <CODE>user</CODE> table looks like this:

</P>

<PRE>
+-----------+----------+-
| Host      | User     | ...
+-----------+----------+-
| localhost | root     | ...
| localhost |          | ...
| %         | jeffrey  | ...
| %         | root     | ...
+-----------+----------+-
</PRE>

<P>
<A NAME="IDX137"></A>
<A NAME="IDX138"></A>
<A NAME="IDX139"></A>
When a connection is attempted, the server looks through the sorted entries
and uses the first match found.  For a connection from <CODE>localhost</CODE> by
<CODE>jeffrey</CODE>, the entries with <CODE>'localhost'</CODE> in the <CODE>Host</CODE> column
match first.  Of those, the entry with the blank user name matches both the
connecting hostname and user name.  (The <CODE>'%'/'jeffrey'</CODE> entry would
have matched, too, but it is not the first match in the table.)

</P>
<P>
Here is another example.  Suppose the <CODE>user</CODE> table looks like this:

</P>

<PRE>
+----------------+----------+-
| Host           | User     | ...
+----------------+----------+-
| %              | jeffrey  | ...
| thomas.loc.gov |          | ...
+----------------+----------+-
</PRE>

<P>
The sorted table looks like this:

</P>

<PRE>
+----------------+----------+-
| Host           | User     | ...
+----------------+----------+-
| thomas.loc.gov |          | ...
| %              | jeffrey  | ...
+----------------+----------+-
</PRE>

<P>
A connection from <CODE>thomas.loc.gov</CODE> by <CODE>jeffrey</CODE> is matched by the
first entry, whereas a connection from <CODE>whitehouse.gov</CODE> by
<CODE>jeffrey</CODE> is matched by the second.

</P>
<P>
A common misconception is to think that for a given user name, all entries
that explicitly name that user will be used first when the server attempts to
find a match for the connection.  This is simply not true.  The previous
example illustrates this, where a connection from <CODE>thomas.loc.gov</CODE> by
<CODE>jeffrey</CODE> is first matched not by the entry containing <CODE>'jeffrey'</CODE>
as the <CODE>User</CODE> field value, but by the entry with no user name!

</P>
<P>
If you have problems connecting to the server, print out the <CODE>user</CODE>
table and sort it by hand to see where the first match is being made.

</P>


<H2><A NAME="Request_access" HREF="manual_toc.html#Request_access">6.8  Access control, stage 2: Request verification</A></H2>

<P>
Once you establish a connection, the server enters stage 2.  For each request
that comes in on the connection, the server checks whether you have
sufficient privileges to perform it, based on the type of operation you wish
to perform.  This is where the privilege fields in the grant tables come into
play.  These privileges can come from any of the <CODE>user</CODE>, <CODE>db</CODE>,
<CODE>host</CODE>, <CODE>tables_priv</CODE> or <CODE>columns_priv</CODE> tables.  The grant
tables are manipulated with <CODE>GRANT</CODE> and <CODE>REVOKE</CODE> commands.
See section <A HREF="manual.html#GRANT">7.25  <CODE>GRANT</CODE> and <CODE>REVOKE</CODE> syntax</A>.  (You may find it helpful to refer to
section <A HREF="manual.html#Privileges">6.6  How the privilege system works</A>, which lists the fields present in each of the grant
tables.)

</P>
<P>
The <CODE>user</CODE> table grants privileges that are assigned to you on a global
basis and that apply no matter what the current database is.  For example, if
the <CODE>user</CODE> table grants you the <STRONG>delete</STRONG> privilege, you can
delete rows from any database on the server host!  In other words,
<CODE>user</CODE> table privileges are superuser privileges.  It is wise to grant
privileges in the <CODE>user</CODE> table only to superusers such as server or
database administrators.  For other users, you should leave the privileges
in the <CODE>user</CODE> table set to <CODE>'N'</CODE> and grant privileges on a
database-specific basis only, using the <CODE>db</CODE> and <CODE>host</CODE> tables.

</P>
<P>
<A NAME="IDX140"></A>
<A NAME="IDX141"></A>
<A NAME="IDX142"></A>
The <CODE>db</CODE> and <CODE>host</CODE> tables grant database-specific privileges.
Values in the scope fields may be specified as follows:

</P>

<UL>
<LI>

The
wildcard characters <SAMP>`%'</SAMP> and <SAMP>`_'</SAMP> can be used in the <CODE>Host</CODE> and
<CODE>Db</CODE> fields of either table.

<LI>

A <CODE>'%'</CODE> <CODE>Host</CODE> value in the <CODE>db</CODE> table means "any host." A
blank <CODE>Host</CODE> value in the <CODE>db</CODE> table means "consult the
<CODE>host</CODE> table for further information."

<LI>

A <CODE>'%'</CODE> or blank <CODE>Host</CODE> value in the <CODE>host</CODE> table means "any
host."

<LI>

A <CODE>'%'</CODE> or blank <CODE>Db</CODE> value in either table means "any database."

<LI>

A blank <CODE>User</CODE> value in either table matches the anonymous user.
</UL>

<P>
<A NAME="IDX143"></A>
<A NAME="IDX144"></A>
<A NAME="IDX145"></A>
<A NAME="IDX146"></A>
The <CODE>db</CODE> and <CODE>host</CODE> tables are read in and sorted when the server
starts up (at the same time that it reads the <CODE>user</CODE> table).  The
<CODE>db</CODE> table is sorted on the <CODE>Host</CODE>, <CODE>Db</CODE> and <CODE>User</CODE> scope
fields, and the <CODE>host</CODE> table is sorted on the <CODE>Host</CODE> and <CODE>Db</CODE>
scope fields.  As with the <CODE>user</CODE> table, sorting puts the most-specific
values first and least-specific values last, and when the server looks for
matching entries, it uses the first match that it finds.

</P>

<P>
<A NAME="IDX147"></A>
<A NAME="IDX148"></A>
The <CODE>tables_priv</CODE> and <CODE>columns_priv</CODE> tables grant table- and
column-specific privileges.  Values in the scope fields may be specified as
follows:

</P>

<UL>
<LI>

The wildcard characters <SAMP>`%'</SAMP> and <SAMP>`_'</SAMP>
can be used in the <CODE>Host</CODE> field of either table.

<LI>

A <CODE>'%'</CODE> or blank <CODE>Host</CODE> value in either table means "any host."

<LI>

The <CODE>Db</CODE>, <CODE>Table_name</CODE> and <CODE>Column_name</CODE> fields cannot contain
wildcards or be blank in either table.
</UL>

<P>
The <CODE>tables_priv</CODE> and <CODE>columns_priv</CODE> tables are sorted on
the <CODE>Host</CODE>, <CODE>Db</CODE> and <CODE>User</CODE> fields.  This is similar to
<CODE>db</CODE> table sorting, although since only the <CODE>Host</CODE> field may
contain wildcards, the sorting is simpler.

</P>
<P>
The request verification process is described below.  (If you are familiar
with the access-checking source code, you will notice that the description
here differs slightly from the algorithm used in the code.  The description
is equivalent to what the code actually does; it differs only to make the
explanation simpler.)

</P>
<P>
For administrative requests (<STRONG>shutdown</STRONG>, <STRONG>reload</STRONG>, etc.), the
server checks only the <CODE>user</CODE> table entry, since that is the only table
that specifies administrative privileges.  Access is granted if the entry
allows the requested operation and denied otherwise.  For example, if you
want to execute <CODE>mysqladmin shutdown</CODE> but your <CODE>user</CODE> table entry
doesn't grant the <STRONG>shutdown</STRONG> privilege to you, access is denied
without even checking the <CODE>db</CODE> or <CODE>host</CODE> tables.  (Since they
contain no <CODE>Shutdown_priv</CODE> column, there is no need to do so.)

</P>
<P>
For database-related requests (<STRONG>insert</STRONG>, <STRONG>update</STRONG>, etc.), the
server first checks the user's global (superuser) privileges by looking in
the <CODE>user</CODE> table entry.  If the entry allows the requested operation,
access is granted.  If the global privileges in the <CODE>user</CODE> table are
insufficient, the server determines the user's database-specific privileges
by checking the <CODE>db</CODE> and <CODE>host</CODE> tables:

</P>

<OL>
<LI>

The server looks in the <CODE>db</CODE> table for a match on the <CODE>Host</CODE>,
<CODE>Db</CODE> and <CODE>User</CODE> fields.  <CODE>Host</CODE> and <CODE>User</CODE> are matched to
the connecting user's hostname and <STRONG>MySQL</STRONG> user name.  The <CODE>Db</CODE>
field is matched to the database the user wants to access.  If there is no
entry for the <CODE>Host</CODE> and <CODE>User</CODE>, access is denied.

<LI>

If there is a matching <CODE>db</CODE> table entry and its <CODE>Host</CODE> field is
not blank, that entry defines the user's database-specific privileges.

<LI>

If the matching <CODE>db</CODE> table entry's <CODE>Host</CODE> field is blank, it
signifies that the <CODE>host</CODE> table enumerates which hosts should be allowed
access to the database.  In this case, a further lookup is done in the
<CODE>host</CODE> table to find a match on the <CODE>Host</CODE> and <CODE>Db</CODE> fields.
If no <CODE>host</CODE> table entry matches, access is denied.  If there is a
match, the user's database-specific privileges are computed as the
intersection (<EM>not</EM> the union!) of the privileges in the <CODE>db</CODE> and
<CODE>host</CODE> table entries, i.e., the privileges that are <CODE>'Y'</CODE> in both
entries.  (This way you can grant general privileges in the <CODE>db</CODE> table
entry and then selectively restrict them on a host-by-host basis using the
<CODE>host</CODE> table entries.)
</OL>

<P>
After determining the database-specific privileges granted by the <CODE>db</CODE>
and <CODE>host</CODE> table entries, the server adds them to the global privileges
granted by the <CODE>user</CODE> table.  If the result allows the requested
operation, access is granted.  Otherwise, the server checks the user's
table and column privileges in the <CODE>tables_priv</CODE> and <CODE>columns_priv</CODE>
tables and adds those to the user's privileges.  Access is allowed or denied
based on the result.

</P>
<P>
Expressed in boolean terms, the preceding description of how a user's
privileges are calculated may be summarized like this:

</P>

<PRE>
global privileges
OR (database privileges AND host privileges)
OR table privileges
OR column privileges
</PRE>

<P>
It may not be apparent why, if the global <CODE>user</CODE> entry privileges are
initially found to be insufficient for the requested operation, the server
adds those privileges to the database-, table- and column-specific privileges
later. The reason is that a request might require more than one type of
privilege.  For example, if you execute an <CODE>INSERT ...  SELECT</CODE>
statement, you need both <STRONG>insert</STRONG> and <STRONG>select</STRONG> privileges.
Your privileges might be such that the <CODE>user</CODE> table entry grants one
privilege and the <CODE>db</CODE> table entry grants the other.  In this case, you
have the necessary privileges to perform the request, but the server cannot
tell that from either table by itself; the privileges granted by both entries
must be combined.

</P>
<P>
The <CODE>host</CODE> table can be used to maintain a list of "secure" servers.
At TcX, the <CODE>host</CODE> table contains a list of all machines on the local
network. These are granted all privileges.

</P>
<P>
You can also use the <CODE>host</CODE> table to indicate hosts that are <EM>not</EM>
secure.  Suppose you have a machine <CODE>public.your.domain</CODE> that is located
in a public area that you do not consider secure.  You can allow access to
all hosts on your network except that machine by using <CODE>host</CODE> table
entries
like this:

</P>

<PRE>
+--------------------+----+-
| Host               | Db | ...
+--------------------+----+-
| public.your.domain | %  | ... (all privileges set to 'N')
| %.your.domain      | %  | ... (all privileges set to 'Y')
+--------------------+----+-
</PRE>

<P>
Naturally, you should always test your entries in the grant tables (e.g.,
using <CODE>mysqlaccess</CODE>) to make sure your access privileges are actually
set up the way you think they are.

</P>


<H2><A NAME="Privilege_changes" HREF="manual_toc.html#Privilege_changes">6.9  When privilege changes take effect</A></H2>

<P>
When <CODE>mysqld</CODE> starts, all grant table contents are read into memory and
become effective at that point.

</P>
<P>
Modifications to the grant tables that you perform using <CODE>GRANT</CODE>,
<CODE>REVOKE</CODE>, or <CODE>SET PASSWORD</CODE> are noticed by the server immediately.

</P>
<P>
If you modify the grant tables manually (using <CODE>INSERT</CODE>, <CODE>UPDATE</CODE>,
etc.), you should execute a <CODE>FLUSH PRIVILEGES</CODE> statement or run
<CODE>mysqladmin flush-privileges</CODE> to tell the server to reload the grant
tables.  Otherwise your changes will have <EM>no effect</EM> until
you restart the server.

</P>
<P>
When the server notices that the grant tables have been changed,
existing client connections are affected as follows:

</P>

<UL>
<LI>

Table and column privilege changes take effect with the client's next
request.

<LI>

Database privilege changes take effect at the next <CODE>USE db_name</CODE>
command.
</UL>

<P>
Global privilege changes and password changes take effect the next time the
client connects.

</P>


<H2><A NAME="Default_privileges" HREF="manual_toc.html#Default_privileges">6.10  Setting up the initial <STRONG>MySQL</STRONG> privileges</A></H2>

<P>
After installing <STRONG>MySQL</STRONG>, you set up the initial access privileges by
running <CODE>scripts/mysql_install_db</CODE>.
See section <A HREF="manual.html#Quick_install">4.7.1  Quick installation overview</A>.
The <CODE>scripts/mysql_install_db</CODE> script starts up the <CODE>mysqld</CODE>
server, then initializes the grant tables to contain the following set
of privileges:

</P>

<UL>
<LI>

The <STRONG>MySQL</STRONG> <CODE>root</CODE> user is created as a superuser who can do
anything.  Connections must be made from the local host.

<STRONG>Note:</STRONG>
The initial <CODE>root</CODE> password is empty, so anyone can connect as <CODE>root</CODE>
<EM>without a password</EM> and be granted all privileges.

<LI>

<A NAME="IDX149"></A>
An anonymous user is created that can do anything with databases that have a
name of <CODE>'test'</CODE> or starting with <CODE>'test_'</CODE>.  Connections must be
made from the local host.  This means any local user can connect and be
treated as the anonymous user.

<LI>

Other privileges are denied.  For example, normal users can't use
<CODE>mysqladmin shutdown</CODE> or <CODE>mysqladmin processlist</CODE>.
</UL>

<P>
<STRONG>Note:</STRONG> The default privileges are different for Win32.
See section <A HREF="manual.html#Win32_running">4.12.4  Running <STRONG>MySQL</STRONG> on Win32</A>.

</P>

<P>
Since your installation is initially wide open, one of the first things you
should do is specify a password for the <STRONG>MySQL</STRONG>
<CODE>root</CODE> user.  You can do this as follows (note that you specify the
password using the <CODE>PASSWORD()</CODE> function):

</P>

<PRE>
shell&#62; mysql -u root mysql
mysql&#62; UPDATE user SET Password=PASSWORD('new_password')
           WHERE user='root';
mysql&#62; FLUSH PRIVILEGES;
</PRE>

<P>
You can also use the <CODE>SET PASSWORD</CODE> statement:

</P>

<PRE>
shell&#62; mysql -u root mysql
mysql&#62; SET PASSWORD FOR root=PASSWORD('new_password');
</PRE>

<P>
Another way to set the password is by using the <CODE>mysqladmin</CODE> command:

</P>

<PRE>
shell&#62; mysqladmin -u root password new_password
</PRE>

<P>
Note that if you update the password in the <CODE>user</CODE> table directly using
the first method, you must tell the server to reread the grant tables (with
<CODE>FLUSH PRIVILEGES</CODE>), since the change will go unnoticed otherwise.

</P>
<P>
Once the <CODE>root</CODE> password has been set, thereafter you must supply that
password when you connect to the server as <CODE>root</CODE>.

</P>
<P>
You may wish to leave the <CODE>root</CODE> password blank so that you don't need
to specify it while you perform additional setup or testing, but be sure to
set it before using your installation for any real production work.

</P>
<P>
See the <CODE>scripts/mysql_install_db</CODE> script to see how it sets up
the default privileges.  You can use this as a basis to see how to
add other users.

</P>
<P>
If you want the initial privileges to be different than those just described
above, you can modify <CODE>mysql_install_db</CODE> before you run it.

</P>
<P>
To recreate the grant tables completely, remove all the <TT>`*.frm'</TT>,
<TT>`*.ISM'</TT> and <TT>`*.ISD'</TT> files in the directory containing the
<CODE>mysql</CODE> database.  (This is the directory named <TT>`mysql'</TT> under
the database directory, which is listed when you run <CODE>mysqld
--help</CODE>.) Then run the <CODE>mysql_install_db</CODE> script, possibly after
editing it first to have the privileges you want.

</P>
<P>
<STRONG>NOTE:</STRONG> For <STRONG>MySQL</STRONG> versions before 3.22.10, you should NOT
delete the <TT>`*.frm'</TT> files.  If you accidentally do this, you should
copy them back from your <STRONG>MySQL</STRONG> distribution before running
<CODE>mysql_install_db</CODE>.

</P>


<H2><A NAME="Adding_users" HREF="manual_toc.html#Adding_users">6.11  Adding new user privileges to <STRONG>MySQL</STRONG></A></H2>

<P>
You can add users two different ways: by using <CODE>GRANT</CODE> statements
or by manipulating the <STRONG>MySQL</STRONG> grant tables directly.  The
preferred method is to use <CODE>GRANT</CODE> statements, because they are
more concise and less error-prone.

</P>
<P>
The examples below show how to use the <CODE>mysql</CODE> client to set up new
users.  These examples assume that privileges are set up according to the
defaults described in the previous section.  This means that to make changes,
you must be on the same machine where <CODE>mysqld</CODE> is running, you must
connect as the <STRONG>MySQL</STRONG> <CODE>root</CODE> user, and the <CODE>root</CODE> user must
have the <STRONG>insert</STRONG> privilege for the <CODE>mysql</CODE> database and the
<STRONG>reload</STRONG> administrative privilege.  Also, if you have changed the
<CODE>root</CODE> user password, you must specify it for the <CODE>mysql</CODE> commands
below.

</P>
<P>
You can add new users by issuing <CODE>GRANT</CODE> statements:

</P>

<PRE>
shell&#62; mysql --user=root mysql
mysql&#62; GRANT ALL PRIVILEGES ON *.* TO monty@localhost
           IDENTIFIED BY 'something' WITH GRANT OPTION;
mysql&#62; GRANT ALL PRIVILEGES ON *.* TO monty@"%"
           IDENTIFIED BY 'something' WITH GRANT OPTION;
mysql&#62; GRANT RELOAD,PROCESS ON *.* TO admin@localhost;
mysql&#62; GRANT USAGE ON *.* TO dummy@localhost;
</PRE>

<P>
These <CODE>GRANT</CODE> statements set up three new users:

</P>
<DL COMPACT>

<DT><CODE>monty</CODE>
<DD>
A full superuser who can connect to the server from anywhere, but who must
use a password (<CODE>'something'</CODE> to do so.  Note that we must issue
<CODE>GRANT</CODE> statements for both <CODE>monty@localhost</CODE> and
<CODE>monty@"%"</CODE>.  If we don't add the entry with <CODE>localhost</CODE>, the
anonymous user entry for <CODE>localhost</CODE> that is created by
<CODE>mysql_install_db</CODE> will take precedence when we connect from the local
host, because it has a more specific <CODE>Host</CODE> field value and thuse comes
earlier in the <CODE>user</CODE> table sort order.

<DT><CODE>admin</CODE>
<DD>
A user who can connect from <CODE>localhost</CODE> without a password and who is
granted the <STRONG>reload</STRONG> and <STRONG>process</STRONG> administrative privileges.
This allows the user to execute the <CODE>mysqladmin reload</CODE>,
<CODE>mysqladmin refresh</CODE> and <CODE>mysqladmin flush-*</CODE> commands, as well as
<CODE>mysqladmin processlist</CODE> .  No database-related privileges are granted.
They can be granted later by issuing additional <CODE>GRANT</CODE> statements.

<DT><CODE>dummy</CODE>
<DD>
A user who can connect without a password, but only from the local host.  The
global privileges are all set to <CODE>'N'</CODE> -- the <CODE>USAGE</CODE> privilege
type allows you to set up a user with no privileges.  It is assumed that you
will grant database-specific privileges later.
</DL>

<P>
You can also add the same user access information directly by issuing
<CODE>INSERT</CODE> statements and then telling the server to reload the grant
tables:

</P>

<PRE>
shell&#62; mysql --user=root mysql
mysql&#62; INSERT INTO user VALUES('localhost','monty',PASSWORD('something'),
                'Y','Y','Y','Y','Y','Y','Y','Y','Y','Y','Y','Y','Y','Y')
mysql&#62; INSERT INTO user VALUES('%','monty',PASSWORD('something'),
                'Y','Y','Y','Y','Y','Y','Y','Y','Y','Y','Y','Y','Y','Y')
mysql&#62; INSERT INTO user SET Host='localhost',User='admin',
                 Reload_priv='Y', Process_priv='Y';
mysql&#62; INSERT INTO user (Host,User,Password)
                        VALUES('localhost','dummy',");
mysql&#62; FLUSH PRIVILEGES;
</PRE>

<P>
Depending on your <STRONG>MySQL</STRONG> version, you may have to use a different
number of <CODE>'Y'</CODE> values above (versions prior to 3.22.11 had fewer
privilege columns).  For the <CODE>admin</CODE> user, the more readable extended
<CODE>INSERT</CODE> syntax that is available starting with 3.22.11 is used.

</P>
<P>
Note that to set up a superuser, you need only create a <CODE>user</CODE> table
entry with the privilege fields set to <CODE>'Y'</CODE>.  No <CODE>db</CODE> or
<CODE>host</CODE> table entries are necessary.

</P>
<P>
The privilege columns in the <CODE>user</CODE> table were not set explicitly in the
last <CODE>INSERT</CODE> statement (for the <CODE>dummy</CODE> user), so those columns
are assigned the default value of <CODE>'N'</CODE>.  This is the same thing that
<CODE>GRANT USAGE</CODE> does.

</P>
<P>
The following example adds a user <CODE>custom</CODE> who can connect from hosts
<CODE>localhost</CODE>, <CODE>server.domain</CODE> and <CODE>whitehouse.gov</CODE>.  He wants
to access the <CODE>bankaccount</CODE> database only from <CODE>localhost</CODE>,
the <CODE>expenses</CODE> database only from <CODE>whitehouse.gov</CODE> and
the <CODE>customer</CODE> database from all three hosts.  He wants
to use the password <CODE>stupid</CODE> from all three hosts.

</P>
<P>
To set up this user's privileges using <CODE>GRANT</CODE> statements, run these
commands:

</P>

<PRE>
shell&#62; mysql --user=root mysql
mysql&#62; GRANT SELECT,INSERT,UPDATE,DELETE,CREATE,DROP
           ON bankaccount.*
           TO custom@localhost
           IDENTIFIED BY 'stupid';
mysql&#62; GRANT SELECT,INSERT,UPDATE,DELETE,CREATE,DROP
           ON expenses.*
           TO custom@whitehouse.gov
           IDENTIFIED BY 'stupid';
mysql&#62; GRANT SELECT,INSERT,UPDATE,DELETE,CREATE,DROP
           ON customer.*
           TO custom@'%'
           IDENTIFIED BY 'stupid';
</PRE>

<P>
To set up the user's privileges by modifying the grant tables directly,
run these commands (note the <CODE>FLUSH PRIVILEGES</CODE> at the end):

</P>

<PRE>
shell&#62; mysql --user=root mysql
mysql&#62; INSERT INTO user (Host,User,Password)
       VALUES('localhost','custom',PASSWORD('stupid'));
mysql&#62; INSERT INTO user (Host,User,Password)
       VALUES('server.domain','custom',PASSWORD('stupid'));
mysql&#62; INSERT INTO user (Host,User,Password)
       VALUES('whitehouse.gov','custom',PASSWORD('stupid'));
mysql&#62; INSERT INTO db
       (Host,Db,User,Select_priv,Insert_priv,Update_priv,Delete_priv,
        Create_priv,Drop_priv)
       VALUES
       ('localhost','bankaccount','custom','Y','Y','Y','Y','Y','Y');
mysql&#62; INSERT INTO db
       (Host,Db,User,Select_priv,Insert_priv,Update_priv,Delete_priv,
        Create_priv,Drop_priv)
       VALUES
       ('whitehouse.gov','expenses','custom','Y','Y','Y','Y','Y','Y');
mysql&#62; INSERT INTO db
       (Host,Db,User,Select_priv,Insert_priv,Update_priv,Delete_priv,
        Create_priv,Drop_priv)
       VALUES('%','customer','custom','Y','Y','Y','Y','Y','Y');
mysql&#62; FLUSH PRIVILEGES;
</PRE>

<P>
The first three <CODE>INSERT</CODE> statements add <CODE>user</CODE> table entries that
allow user <CODE>custom</CODE> to connect from the various hosts with the given
password, but grant no permissions to him (all privileges are set to the
default value of <CODE>'N'</CODE>).  The next three <CODE>INSERT</CODE> statements add
<CODE>db</CODE> table entries that grant privileges to <CODE>custom</CODE> for the
<CODE>bankaccount</CODE>, <CODE>expenses</CODE> and <CODE>customer</CODE> databases, but only
when accessed from the proper hosts.  As usual, when the grant tables are
modified directly, the server must be told to reload them (with
<CODE>FLUSH PRIVILEGES</CODE>) so that the privilege changes take effect.

</P>
<P>
If you want to give a specific user access from any machine in a given
domain, you can issue a <CODE>GRANT</CODE> statement like the following:

</P>

<PRE>
mysql&#62; GRANT ...
           ON *.*
           TO myusername@"%.mydomainname.com"
           IDENTIFIED BY 'mypassword';
</PRE>

<P>
To do the same thing by modifying the grant tables directly, do this:

</P>

<PRE>
mysql&#62; INSERT INTO user VALUES ('%.mydomainname.com', 'myusername',
           PASSWORD('mypassword'),...);
mysql&#62; FLUSH PRIVILEGES;
</PRE>

<P>
You can also use <CODE>xmysqladmin</CODE>, <CODE>mysql_webadmin</CODE> and even
<CODE>xmysql</CODE> to insert, change and update values in the grant tables.
You can find these utilities at the <STRONG>MySQL</STRONG>
<a HREF="http://www.mysql.com/Contrib/">Contrib directory</a>.

</P>


<H2><A NAME="Passwords" HREF="manual_toc.html#Passwords">6.12  How to set up passwords</A></H2>
<P>
<A NAME="IDX150"></A>
<A NAME="IDX151"></A>

</P>
<P>
The examples in the preceding sections illustrate an important principle:
when you store a non-empty password using <CODE>INSERT</CODE> or <CODE>UPDATE</CODE>
statements, you must use the <CODE>PASSWORD()</CODE> function to encrypt it.  This
is because the <CODE>user</CODE> table stores passwords in encrypted form, not as
plaintext.  If you forget that fact, you are likely to attempt to set
passwords like this:

</P>

<PRE>
shell&#62; mysql -u root mysql
mysql&#62; INSERT INTO user (Host,User,Password)
       VALUES('%','jeffrey','biscuit');
mysql&#62; FLUSH PRIVILEGES;
</PRE>

<P>
The result is that the plaintext value <CODE>'biscuit'</CODE> is stored as the
password in the <CODE>user</CODE> table.  When the user <CODE>jeffrey</CODE> attempts to
connect to the server using this password, the <CODE>mysql</CODE> client encrypts
it with <CODE>PASSWORD()</CODE> and sends the result to the server.  The server
compares the value in the <CODE>user</CODE> table (which is the plaintext value
<CODE>'biscuit'</CODE>) to the encrypted password (which is <EM>not</EM>
<CODE>'biscuit'</CODE>).  The comparison fails and the server rejects the
connection:

</P>

<PRE>
shell&#62; mysql -u jeffrey -pbiscuit test
Access denied
</PRE>

<P>
Since passwords must be encrypted when they are inserted in the <CODE>user</CODE>
table, the <CODE>INSERT</CODE> statement should have been specified like this
instead:

</P>

<PRE>
mysql&#62; INSERT INTO user (Host,User,Password)
       VALUES('%','jeffrey',PASSWORD('biscuit'));
</PRE>

<P>
You must also use the <CODE>PASSWORD()</CODE> function when you use <CODE>SET
PASSWORD</CODE> statements:

</P>

<PRE>
mysql&#62; SET PASSWORD FOR jeffrey@"%" = PASSWORD('biscuit');
</PRE>

<P>
If you set passwords using the <CODE>GRANT ... IDENTIFIED BY</CODE> statement
or the <CODE>mysqladmin password</CODE> command, the <CODE>PASSWORD()</CODE> function
is unnecessary.  They both take care of encrypting the password for you,
so you would specify a password of <CODE>'biscuit'</CODE> like this:

</P>

<PRE>
mysql&#62; GRANT USAGE ON *.* TO jeffrey@"%" IDENTIFIED BY 'biscuit';
</PRE>

<P>
or

</P>

<PRE>
shell&#62; mysqladmin -u jeffrey password biscuit
</PRE>

<P>
Note: <CODE>PASSWORD()</CODE> does not perform password encryption in the same way
that Unix passwords are encrypted.  You should not assume that if your Unix
password and your <STRONG>MySQL</STRONG> password are the same, <CODE>PASSWORD()</CODE>
will result in the same encrypted value as is stored in the Unix password
file.
See section <A HREF="manual.html#User_names">6.2  <STRONG>MySQL</STRONG> user names and passwords</A>.

</P>


<H2><A NAME="Access_denied" HREF="manual_toc.html#Access_denied">6.13  Causes of <CODE>Access denied</CODE> errors</A></H2>

<P>
If you encounter <CODE>Access denied</CODE> errors when you try to connect to the
<STRONG>MySQL</STRONG> server, the list below indicates some courses of
action you can take to correct the problem:

</P>

<UL>
<LI>

Did you run the <CODE>mysql_install_db</CODE> script after installing
<STRONG>MySQL</STRONG>, to set up the initial grant table contents?  If not, do
so.  See section <A HREF="manual.html#Default_privileges">6.10  Setting up the initial <STRONG>MySQL</STRONG> privileges</A>.  Test the initial privileges by
executing this command:


<PRE>
shell&#62; mysql -u root test
</PRE>

The server should let you connect without error.  You should also make sure
you have a file <TT>`user.ISD'</TT> in the <STRONG>MySQL</STRONG> database directory.
Ordinarily, this is <TT>`PATH/var/mysql/user.ISD'</TT>, where <CODE>PATH</CODE> is the
pathname to the <STRONG>MySQL</STRONG> installation root.

<LI>

After a fresh installation, you should connect to the server and set up
your users and their access permissions:


<PRE>
shell&#62; mysql -u root mysql
</PRE>

The server should let you connect because the <STRONG>MySQL</STRONG> <CODE>root</CODE> user
has no password initially.  Since that is also a security risk, setting the
<CODE>root</CODE> password is something you should do while you're setting up
your other <STRONG>MySQL</STRONG> users.

If you try to connect as <CODE>root</CODE> and get this error:


<PRE>
Access denied for user: '@unknown' to database mysql
</PRE>

this means that you don't have an entry in the <CODE>user</CODE> table with a
<CODE>User</CODE> column value of <CODE>'root'</CODE> and that <CODE>mysqld</CODE> cannot
resolve the hostname for your client.  In this case, you must restart the
server with the <CODE>--skip-grant-tables</CODE> option and edit your
<TT>`/etc/hosts'</TT> or <TT>`\windows\hosts'</TT> file to add a entry for your
host.

<LI>

<A NAME="IDX152"></A>
If you updated an existing <STRONG>MySQL</STRONG> installation from a pre-3.22.11
version to 3.22.11 or later, did you run the
<CODE>mysql_fix_privilege_tables</CODE> script?  If not, do so.  The structure of
the grant tables changed with <STRONG>MySQL</STRONG> 3.22.11 when the <CODE>GRANT</CODE>
statement became functional.

<LI>

If you make changes to the grant tables directly (using <CODE>INSERT</CODE> or
<CODE>UPDATE</CODE> statement) and your changes seem to be ignored, remember that
you must issue a <CODE>FLUSH PRIVILEGES</CODE> statement or execute a
<CODE>mysqladmin flush-privileges</CODE> command to cause the server to reread the
tables.  Otherwise your changes have no effect until the next time the server
is restarted.  Remember that after you set the <CODE>root</CODE> password, you
won't need to specify it until after you flush the privileges, because the
server still won't know you've changed the password yet!

<LI>

If your privileges seem to have changed in the middle of a session, it may be
that a superuser has changed them.  Reloading the grant tables affects new
client connections, but it also affects existing connections as indicated in
section <A HREF="manual.html#Privilege_changes">6.9  When privilege changes take effect</A>.

<LI>

For testing, start the <CODE>mysqld</CODE> daemon with the
<CODE>--skip-grant-tables</CODE> option.  Then you can change the <STRONG>MySQL</STRONG>
grant tables and use the <CODE>mysqlaccess</CODE> script to check whether or not
your modifications have the desired effect.  When you are satisfied with your
changes, execute <CODE>mysqladmin flush-privileges</CODE> to tell the <CODE>mysqld</CODE>
server to start using the new grant tables.  <STRONG>Note:</STRONG> Reloading the
grant tables overrides the <CODE>--skip-grant-tables</CODE> option.  This allows
you to tell the server to begin using the grant tables again without bringing
it down and restarting it.

<LI>

If you have access problems with a Perl, Python or ODBC program, try to
connect to the server with <CODE>mysql -u user_name db_name</CODE> or <CODE>mysql
-u user_name -pyour_pass db_name</CODE>.  If you are able to connect using the
<CODE>mysql</CODE> client, there is a problem with your program and not with the
access privileges.  (Notice that there is no space between <CODE>-p</CODE> and the
password; you can also use the <CODE>--password=your_pass</CODE> syntax to specify
the password.)

<LI>

If you can't get your password to work, remember that you must use
the <CODE>PASSWORD()</CODE> function if you set the password with the
<CODE>INSERT</CODE>, <CODE>UPDATE</CODE> or <CODE>SET PASSWORD</CODE> statements.  The
<CODE>PASSWORD()</CODE> function is unnecessary if you specify the password using
the <CODE>GRANT ... INDENTIFIED BY</CODE> statement or the <CODE>mysqladmin
password</CODE> command.
See section <A HREF="manual.html#Passwords">6.12  How to set up passwords</A>.

<LI>

<CODE>localhost</CODE> is a synonym for your local hostname, and is also the
default host to which clients try to connect if you specify no host
explicitly.  However, connections to <CODE>localhost</CODE> do not work if you are
running on a system that uses MIT-pthreads (<CODE>localhost</CODE> connections are
made using Unix sockets, which are not supported by MIT-pthreads).  To avoid
this problem on such systems, you should use the <CODE>--host</CODE> option to name
the server host explicitly.  This will make a TCP/IP connection to the
<CODE>mysqld</CODE> server.  In this case, you must have your real hostname in
<CODE>user</CODE> table entries on the server host.  (This is true even if you are
running a client program on the same host as the server.)

<LI>

If you get an <CODE>Access denied</CODE> error when trying to connect to the
database with <CODE>mysql -u user_name db_name</CODE>, you may have a problem
with the <CODE>user</CODE> table. Check this by executing <CODE>mysql -u root
mysql</CODE> and issuing this SQL statement:


<PRE>
mysql&#62; SELECT * FROM user;
</PRE>

The result should include an entry with the <CODE>Host</CODE> and <CODE>User</CODE>
columns matching your computer's hostname and your <STRONG>MySQL</STRONG> user name.

<LI>

The <CODE>Access denied</CODE> error message will tell you who you are trying
to log in as, the host from which you are trying to connect, and whether
or not you were using a password. Normally, you should have one entry in
the <CODE>user</CODE> table that exactly matches the hostname and user name
that were given in the error message.

<LI>

If you get the following error when you try to connect from a different host
than the one on which the <STRONG>MySQL</STRONG> server is running, then there is no
row in the <CODE>user</CODE> table that matches that host:


<PRE>
Host ... is not allowed to connect to this MySQL server
</PRE>

You can fix this by using the command line tool <CODE>mysql</CODE> (on the server
host!) to add a row to the <CODE>user</CODE> table for the user/hostname combination
from which you are trying to connect.  If you are not running <STRONG>MySQL</STRONG>
3.22 and you don't know the IP number or hostname of the machine from which
you are connecting, you should put an entry with <CODE>'%'</CODE> as the
<CODE>Host</CODE> column value in the <CODE>user</CODE> table and restart <CODE>mysqld</CODE>
with the <CODE>--log</CODE> option on the server machine.  After trying to connect
from the client machine, the information in the <STRONG>MySQL</STRONG> log will
indicate how you really did connect.  (Then replace the <CODE>'%'</CODE> in the
<CODE>user</CODE> table entry with the actual hostname that shows up in the log.
Otherwise, you'll have a system that is insecure.)

<LI>

If <CODE>mysql -u root test</CODE> works but <CODE>mysql -h your_hostname -u root
test</CODE> results in <CODE>Access denied</CODE>, then you may not have the correct name
for your host in the <CODE>user</CODE> table.  A common problem here is that the
<CODE>Host</CODE> value in the user table entry specifies an unqualified hostname,
but your system's name resolution routines return a fully-qualified domain
name (or vice-versa).  For example, if you have an entry with host
<CODE>'tcx'</CODE> in the <CODE>user</CODE> table, but your DNS tells <STRONG>MySQL</STRONG> that
your hostname is <CODE>'tcx.subnet.se'</CODE>, the entry will not work. Try adding
an entry to the <CODE>user</CODE> table that contains the IP number of your host as
the <CODE>Host</CODE> column value.  (Alternatively, you could add an entry to the
<CODE>user</CODE> table with a <CODE>Host</CODE> value that contains a wildcard--for
example, <CODE>'tcx.%'</CODE>.  However, use of hostnames ending with <SAMP>`%'</SAMP> is
<EM>insecure</EM> and is <EM>not</EM> recommended!)

<LI>

If <CODE>mysql -u user_name test</CODE> works but <CODE>mysql -u user_name
other_db_name</CODE> doesn't work, you don't have an entry for <CODE>other_db_name</CODE>
listed in the <CODE>db</CODE> table.

<LI>

If <CODE>mysql -u user_name db_name</CODE> works when executed on the server
machine, but <CODE>mysql -u host_name -u user_name db_name</CODE> doesn't work when
executed on another client machine, you don't have the client machine listed
in the <CODE>user</CODE> table or the <CODE>db</CODE> table.

<LI>

If you can't figure out why you get <CODE>Access denied</CODE>, remove from the
<CODE>user</CODE> table all entries that have <CODE>Host</CODE> values containing
wildcards (entries that contain <SAMP>`%'</SAMP> or <SAMP>`_'</SAMP>).  A very common error
is to insert a new entry with <CODE>Host</CODE>=<CODE>'%'</CODE> and
<CODE>User</CODE>=<CODE>'some user'</CODE>, thinking that this will allow you to specify
<CODE>localhost</CODE> to connect from the same machine.  The reason that this
doesn't work is that the default privileges include an entry with
<CODE>Host</CODE>=<CODE>'localhost'</CODE> and <CODE>User</CODE>=<CODE>"</CODE>.  Since that entry
has a <CODE>Host</CODE> value <CODE>'localhost'</CODE> that is more specific than
<CODE>'%'</CODE>, it is used in preference to the new entry when connecting from
<CODE>localhost</CODE>!  The correct procedure is to insert a second entry with
<CODE>Host</CODE>=<CODE>'localhost'</CODE> and <CODE>User</CODE>=<CODE>'some_user'</CODE>, or to
remove the entry with with <CODE>Host</CODE>=<CODE>'localhost'</CODE> and
<CODE>User</CODE>=<CODE>"</CODE>.

<LI>

If you get the following error, you may have a problem with the <CODE>db</CODE> or
<CODE>host</CODE> table:


<PRE>
Access to database denied
</PRE>

If the entry selected from the <CODE>db</CODE> table has an empty value in the
<CODE>Host</CODE> column, make sure there are one or more corresponding entries in
the <CODE>host</CODE> table specifying which hosts the <CODE>db</CODE> table entry
applies to.

If you get the error when using the SQL commands <CODE>SELECT ...
INTO OUTFILE</CODE> or <CODE>LOAD DATA INFILE</CODE>, your entry in the <CODE>user</CODE> table
probably doesn't have the <STRONG>file</STRONG> privilege enabled.

<LI>

<A NAME="IDX153"></A>
<A NAME="IDX154"></A>
<A NAME="IDX155"></A>
Remember that client programs will use connection parameters specified in
configuration files or environment variables.  If a client seems to be
sending the wrong default connection parameters when you don't specify them
on the command line, check your environment and the <TT>`.my.cnf'</TT> file in
your home directory.  You might also check the system-wide <STRONG>MySQL</STRONG>
configuration files, though it is far less likely that client connection
parameters will be specified there. See section <A HREF="manual.html#Option_files">4.15.4  Option files</A>.  If you get
<CODE>Access denied</CODE> when you run a client without any options, make sure you
haven't specified an old password in any of your option files!
See section <A HREF="manual.html#Option_files">4.15.4  Option files</A>.

<LI>

If everything else fails, start the <CODE>mysqld</CODE> daemon with a debugging
option (for example, <CODE>--debug=d,general,query</CODE>). This will print host and
user information about attempted connections, as well as information about
each command issued. See section <A HREF="manual.html#Debugging_server">G.1  Debugging a <STRONG>MySQL</STRONG> server</A>.

<LI>

If you have any other problems with the <STRONG>MySQL</STRONG> grant tables and
feel you must post the problem to the mailing list, always provide a
dump of the <STRONG>MySQL</STRONG> grant tables. You can dump the tables with
the <CODE>mysqldump mysql</CODE> command. As always, post your problem using
the <CODE>mysqlbug</CODE> script.  In some cases you may restart <CODE>mysqld</CODE> with
<CODE>--skip-grant-tables</CODE> to be able to run <CODE>mysqldump</CODE>.
</UL>



<H2><A NAME="Security" HREF="manual_toc.html#Security">6.14  How to make <STRONG>MySQL</STRONG> secure against crackers</A></H2>

<P>
When you connect to a <STRONG>MySQL</STRONG> server, you should normally use
a password.  The password is not transmitted in clear text over the connection.

</P>
<P>
All other information is transferred as text that can be read by anyone that
is able to watch the connection.  If you are concerned about this, you can
use the compressed protocol (in <STRONG>MySQL</STRONG> 3.22 and above) to make things
much harder.  To make things even more secure you should install <CODE>ssh</CODE>
(see <a HREF="http://www.cs.hut.fi/ssh">http://www.cs.hut.fi/ssh</a>).  With this, you can get an encrypted
TCP/IP connection between a <STRONG>MySQL</STRONG> server and a <STRONG>MySQL</STRONG>
client.

</P>
<P>
To make a <STRONG>MySQL</STRONG> system secure, you should strongly consider the
following suggestions:

</P>

<UL>
<LI>

Use passwords for all <STRONG>MySQL</STRONG> users. Remember that anyone can log in
as any other person as simply as <CODE>mysql -u other_user db_name</CODE> if
<CODE>other_user</CODE> has no password.  It is common behavior with client/server
applications that the client may specify any user name.  You can change the
password of all users by editing the <CODE>mysql_install_db</CODE> script before
you run it, or only the password for the <STRONG>MySQL</STRONG> <CODE>root</CODE> user like
this:


<PRE>
shell&#62; mysql -u root mysql
mysql&#62; UPDATE user SET Password=PASSWORD('new_password')
           WHERE user='root';
mysql&#62; FLUSH PRIVILEGES;
</PRE>

<LI>

Don't run the <STRONG>MySQL</STRONG> daemon as the Unix <CODE>root</CODE> user.
<CODE>mysqld</CODE> can be run as any user.  You can also create a new Unix user
<CODE>mysql</CODE> to make everything even more secure.  If you run <CODE>mysqld</CODE>
as another Unix user, you don't need to change the <CODE>root</CODE> user name in
the <CODE>user</CODE> table, because <STRONG>MySQL</STRONG> user names have nothing to do
with Unix user names.  You can edit the <CODE>mysql.server</CODE> script to start
<CODE>mysqld</CODE> as another Unix user.  Normally this is done with the <CODE>su</CODE>
command.  For more details, see section <A HREF="manual.html#Changing_MySQL_user">17.8  How to run <STRONG>MySQL</STRONG> as a normal user</A>.

<LI>

If you put a password for the Unix <CODE>root</CODE> user in the <CODE>mysql.server</CODE>
script, make sure this script is readable only by <CODE>root</CODE>.

<LI>

Check that the Unix user that <CODE>mysqld</CODE> runs as is the only user with
read/write privileges in the database directories.

<LI>

Don't give the <STRONG>process</STRONG> privilege to all users.  The output of
<CODE>mysqladmin processlist</CODE> shows the text of the currently executing
queries, so any user who is allowed to execute that command might be able to
see if another user issues an <CODE>UPDATE user SET
password=PASSWORD('not_secure')</CODE> query.

<CODE>mysqld</CODE> saves an extra connection for users who have the
<STRONG>process</STRONG> privilege, so that a <STRONG>MySQL</STRONG> <CODE>root</CODE> user can log
in and check things even if all normal connections are in use.

<LI>

Don't give the <STRONG>file</STRONG> privilege to all users.  Any user that has this
privilege can write a file anywhere in the file system with the privileges of
the <CODE>mysqld</CODE> daemon!  To make this a bit safer, all files generated with
<CODE>SELECT ... INTO OUTFILE</CODE> are readable to everyone, and you can't
overwrite existing files.

<A NAME="IDX156"></A>
The <STRONG>file</STRONG> privilege may also be used to read any file accessible
to the Unix user that the server runs as.  This could be abused, for example,
by using <CODE>LOAD DATA</CODE> to load <TT>`/etc/passwd'</TT> into a table, which
can then be read with <CODE>SELECT</CODE>.

<LI>

If you don't trust your DNS, you should use IP numbers instead of hostnames
in the grant tables.  In principle, the <CODE>--secure</CODE> option to
<CODE>mysqld</CODE> should make hostnames safe.  In any case, you should be very
careful about using hostname values that contain wildcards!
</UL>

<P>
The following <CODE>mysqld</CODE> options affect security:

</P>
<DL COMPACT>

<DT><CODE>--secure</CODE>
<DD>
IP numbers returned by the <CODE>gethostbyname()</CODE> system call are checked to
make sure they resolve back to the original hostname. This makes it harder
for someone on the outside to get access by simulating another host.  This
option also adds some sanity checks of hostnames.  The option is turned off
by default in <STRONG>MySQL</STRONG> 3.21 since it sometimes takes a long time to
perform backward resolutions.  <STRONG>MySQL</STRONG> 3.22 caches hostnames and has
this option enabled by default.

<DT><CODE>--skip-grant-tables</CODE>
<DD>
This option causes the server not to use the privilege system at all. This
gives everyone <EM>full access</EM> to all databases!  (You can tell a running
server to start using the grant tables again by executing <CODE>mysqladmin
reload</CODE>.)

<DT><CODE>--skip-name-resolve</CODE>
<DD>
Hostnames are not resolved.  All <CODE>Host</CODE> column values in the grant
tables must be IP numbers or <CODE>localhost</CODE>.

<DT><CODE>--skip-networking</CODE>
<DD>
Don't allow TCP/IP connections over the network.  All connections to
<CODE>mysqld</CODE> must be made via Unix sockets. This option is unsuitable for
systems that use MIT-pthreads, because the MIT-pthreads package doesn't
support Unix sockets.
</DL>



<H1><A NAME="Reference" HREF="manual_toc.html#Reference">7  <STRONG>MySQL</STRONG> language reference</A></H1>

<P>
<A NAME="IDX157"></A>
<A NAME="IDX158"></A>


<H2><A NAME="Literals" HREF="manual_toc.html#Literals">7.1  Literals: how to write strings and numbers</A></H2>



<H3><A NAME="String_syntax" HREF="manual_toc.html#String_syntax">7.1.1  Strings</A></H3>

<P>
A string is a sequence of characters, surrounded by either single quote
(<SAMP>`''</SAMP>) or double quote (<SAMP>`"'</SAMP>) characters.  Examples:

</P>

<PRE>
'a string'
"another string"
</PRE>

<P>
Within a string, certain sequences have special meaning.  Each of these
sequences begins with a backslash (<SAMP>`\'</SAMP>), known as the <EM>escape
character</EM>.  <STRONG>MySQL</STRONG> recognizes the following escape sequences:

</P>
<DL COMPACT>

<DT><CODE>\0</CODE>
<DD>
<A NAME="IDX159"></A>
 <A NAME="IDX160"></A>
 
An ASCII 0 (<CODE>NUL</CODE>) character.

<A NAME="IDX161"></A>
<A NAME="IDX162"></A>
<DT><CODE>\n</CODE>
<DD>
A newline character.

<A NAME="IDX163"></A>
<A NAME="IDX164"></A>
<DT><CODE>\t</CODE>
<DD>
A tab character.

<A NAME="IDX165"></A>
<A NAME="IDX166"></A>
<A NAME="IDX167"></A>
<DT><CODE>\r</CODE>
<DD>
A carriage return character.

<A NAME="IDX168"></A>
<A NAME="IDX169"></A>
<DT><CODE>\b</CODE>
<DD>
A backspace character.

<A NAME="IDX170"></A>
<A NAME="IDX171"></A>
<DT><CODE>\'</CODE>
<DD>
A single quote (<SAMP>`''</SAMP>) character.

<A NAME="IDX172"></A>
<A NAME="IDX173"></A>
<DT><CODE>\"</CODE>
<DD>
A double quote (<SAMP>`"'</SAMP>) character.

<A NAME="IDX174"></A>
<A NAME="IDX175"></A>
<DT><CODE>\\</CODE>
<DD>
A backslash (<SAMP>`\'</SAMP>) character.

<A NAME="IDX176"></A>
<A NAME="IDX177"></A>
<DT><CODE>\%</CODE>
<DD>
A <SAMP>`%'</SAMP> character. This is used to search for literal instances of
<SAMP>`%'</SAMP> in contexts where <SAMP>`%'</SAMP> would otherwise be interpreted
as a wildcard character.

<A NAME="IDX178"></A>
<A NAME="IDX179"></A>
<DT><CODE>\_</CODE>
<DD>
A <SAMP>`_'</SAMP> character. This is used to search for literal instances of
<SAMP>`_'</SAMP> in contexts where <SAMP>`_'</SAMP> would otherwise be interpreted
as a wildcard character.
</DL>

<P>
There are several ways to include quotes within a string:

</P>

<UL>
<LI>

A <SAMP>`''</SAMP> inside a string quoted with <SAMP>`''</SAMP> may be written as <SAMP>`"'</SAMP>.

<LI>

A <SAMP>`"'</SAMP> inside a string quoted with <SAMP>`"'</SAMP> may be written as <SAMP>`""'</SAMP>.

<LI>

You can precede the quote character with an escape character (<SAMP>`\'</SAMP>).

<LI>

A <SAMP>`''</SAMP> inside a string quoted with <SAMP>`"'</SAMP> needs no special treatment
and need not be doubled or escaped.  In the same way, <SAMP>`"'</SAMP> inside a
string quoted with <SAMP>`''</SAMP> needs no special treatment.
</UL>

<P>
The <CODE>SELECT</CODE> statements shown below demonstrate how quoting and
escaping work:

</P>

<PRE>
mysql&#62; SELECT 'hello', '"hello"', '""hello""', 'hel"lo', '\'hello';
+-------+---------+-----------+--------+--------+
| hello | "hello" | ""hello"" | hel'lo | 'hello |
+-------+---------+-----------+--------+--------+

mysql&#62; SELECT "hello", "'hello'", ""hello"", "hel""lo", "\"hello";
+-------+---------+-----------+--------+--------+
| hello | 'hello' | "hello" | hel"lo | "hello |
+-------+---------+-----------+--------+--------+

mysql&#62; SELECT "This\nIs\nFour\nlines";
+--------------------+
| This
Is
Four
lines |
+--------------------+
</PRE>

<P>
<A NAME="IDX180"></A>

</P>
<P>
If you want to insert binary data into a <CODE>BLOB</CODE> column, the following
characters must be represented by escape sequences:
<DL COMPACT>

<DT><CODE>NUL</CODE>
<DD>
ASCII 0. You should represent this by <SAMP>`\0'</SAMP> (a backslash and an ASCII <SAMP>`0'</SAMP> character).
<DT><CODE>\</CODE>
<DD>
ASCII 92, backslash.  Represent this by <SAMP>`\\'</SAMP>.
<DT><CODE>'</CODE>
<DD>
ASCII 39, single quote.  Represent this by <SAMP>`\''</SAMP>.
<DT><CODE>"</CODE>
<DD>
ASCII 34, double quote.  Represent this by <SAMP>`\"'</SAMP>.
</DL>

<P>
<A NAME="IDX181"></A>
<A NAME="IDX182"></A>
<A NAME="IDX183"></A>
<A NAME="IDX184"></A>
If you write C code, you can use the C API function
<CODE>mysql_escape_string()</CODE> to escape characters for the <CODE>INSERT</CODE>
statement.  See section <A HREF="manual.html#C_API_function_overview">19.3  C API function overview</A>.  In Perl, you can use the
<CODE>quote</CODE> method of the <CODE>DBI</CODE> package to convert special
characters to the proper escape sequences.  See section <A HREF="manual.html#Perl_DBI_Class">19.5.2  The <CODE>DBI</CODE> interface</A>.

</P>
<P>
You should use an escape function on any string that might contain any of the
special characters listed above!

</P>


<H3><A NAME="Number_syntax" HREF="manual_toc.html#Number_syntax">7.1.2  Numbers</A></H3>

<P>
Integers are represented as a sequence of digits. Floats use <SAMP>`.'</SAMP> as a
decimal separator.  Either type of number may be preceded by <SAMP>`-'</SAMP> to
indicate a negative value.

</P>
<P>
Examples of valid integers:

</P>

<PRE>
1221
0
-32
</PRE>

<P>
Examples of valid floating-point numbers:

</P>

<PRE>
294.42
-32032.6809e+10
148.00
</PRE>

<P>
An integer may be used in a floating-point context; it is interpreted
as the equivalent floating-point number.

</P>
<P>
<A NAME="IDX185"></A>


<H3><A NAME="NULL_values" HREF="manual_toc.html#NULL_values">7.1.3  <CODE>NULL</CODE> values</A></H3>

<P>
The <CODE>NULL</CODE> value means "no data" and is different from values such
as <CODE>0</CODE> for numeric types or the empty string for string types.
See section <A HREF="manual.html#Problems_with_NULL">17.14  Problems with <CODE>NULL</CODE> values</A>.

</P>
<P>
<CODE>NULL</CODE> may be represented by <CODE>\N</CODE> when using the text file import
or export formats (<CODE>LOAD DATA INFILE</CODE>, <CODE>SELECT ... INTO OUTFILE</CODE>).
See section <A HREF="manual.html#LOAD_DATA">7.15  <CODE>LOAD DATA INFILE</CODE> syntax</A>.

</P>


<H3><A NAME="Legal_names" HREF="manual_toc.html#Legal_names">7.1.4  Database, table, index, column and alias names</A></H3>

<P>
Database, table, index, column and alias names all follow the same rules in
<STRONG>MySQL</STRONG>:

</P>

<UL>
<LI>

A name may consist of alphanumeric characters from the current character set
and also <SAMP>`_'</SAMP> and <SAMP>`$'</SAMP>. The default character set is ISO-8859-1
Latin1; this may be changed by recompiling <STRONG>MySQL</STRONG>.
See section <A HREF="manual.html#Character_sets">9.1.1  The character set used for data and sorting</A>.

<LI>

A database, table, index or column name can be up to 64 characters long. An
alias name can be up to 256 characters long.

<LI>

A name may start with any character that is legal in a name.  In particular,
a name may start with a number (this differs from many other database
systems!).  However, a name cannot consist <EM>only</EM> of numbers.

<LI>

It is recommended that you do not use names like <CODE>1e</CODE>, because
an expression like <CODE>1e+1</CODE> is ambiguous. It may be interpreted as the
expression <CODE>1e + 1</CODE> or as the number <CODE>1e+1</CODE>.

<LI>

You cannot use the <SAMP>`.'</SAMP> character in names because it is used to extend the
format by which you can refer to columns (see immediately below).
</UL>

<P>
In <STRONG>MySQL</STRONG> you can refer to a column using any of the following forms:

</P>
<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><STRONG>Column reference</STRONG> </TD><TD> <STRONG>Meaning</STRONG>
</TR NOSAVE>
<TR><TD><CODE>col_name</CODE> </TD><TD> Column <CODE>col_name</CODE>
from whichever table used in the query contains a column of that name
</TR NOSAVE>
<TR><TD><CODE>tbl_name.col_name</CODE> </TD><TD> Column <CODE>col_name</CODE> from table
<CODE>tbl_name</CODE> of the current database
</TR NOSAVE>
<TR><TD><CODE>db_name.tbl_name.col_name</CODE> </TD><TD> Column <CODE>col_name</CODE> from table
<CODE>tbl_name</CODE> of the database <CODE>db_name</CODE>.  This form is available in
<STRONG>MySQL</STRONG> 3.22 or later.
</TR>
</TABLE>

<P>
You need not specify a <CODE>tbl_name</CODE> or <CODE>db_name.tbl_name</CODE> prefix for
a column reference in a statement unless the reference would be ambiguous.
For example, suppose tables <CODE>t1</CODE> and <CODE>t2</CODE> each contain a column
<CODE>c</CODE>, and you retrieve <CODE>c</CODE> in a <CODE>SELECT</CODE> statement that uses
both <CODE>t1</CODE> and <CODE>t2</CODE>.  In this case, <CODE>c</CODE> is ambiguous because it
is not unique among the tables used in the statement, so you must indicate
which table you mean by writing <CODE>t1.c</CODE> or <CODE>t2.c</CODE>.  Similarly, if
you are retrieving from a table <CODE>t</CODE> in database <CODE>db1</CODE> and from a
table <CODE>t</CODE> in database <CODE>db2</CODE>, you must refer to columns in those
tables as <CODE>db1.t.col_name</CODE> and <CODE>db2.t.col_name</CODE>.

</P>
<P>
<A NAME="IDX186"></A>
<A NAME="IDX187"></A>
The syntax <CODE>.tbl_name</CODE> means the table <CODE>tbl_name</CODE> in the current
database.  This syntax is accepted for ODBC compatibility, because some ODBC
programs prefix table names with a <SAMP>`.'</SAMP> character.

</P>


<H4><A NAME="Name_case_sensitivity" HREF="manual_toc.html#Name_case_sensitivity">7.1.4.1  Case sensitivity in names</A></H4>
<P>
<A NAME="IDX188"></A>
<A NAME="IDX189"></A>
<A NAME="IDX190"></A>
<A NAME="IDX191"></A>
<A NAME="IDX192"></A>
<A NAME="IDX193"></A>
<A NAME="IDX194"></A>
<A NAME="IDX195"></A>

</P>
<P>
In <STRONG>MySQL</STRONG>, databases and tables correspond to directories and files
within those directories.  Consequently, the case sensitivity of the
underlying operating system determines the case sensitivity of database and
table names.  This means database and table names are case sensitive in Unix
and case insensitive in Win32.

</P>
<P>
<STRONG>Note:</STRONG> Although database and table names are case insensitive for
Win32, you should not refer to a given database or table using different
cases within the same query.  The following query would not work because it
refers to a table both as <CODE>my_table</CODE> and as <CODE>MY_TABLE</CODE>:

</P>

<PRE>
SELECT * FROM my_table WHERE MY_TABLE.col=1;
</PRE>

<P>
Column names are case insensitive in all cases.

</P>
<P>
Aliases on tables are case sensitive.  The following query would not work
because it refers to the alias both as <CODE>a</CODE> and as <CODE>A</CODE>:

</P>

<PRE>
mysql&#62; SELECT col_name FROM tbl_name AS a
           WHERE a.col_name = 1 OR A.col_name = 2;
</PRE>

<P>
Aliases on columns are case insensitive.

</P>


<H2><A NAME="Column_types" HREF="manual_toc.html#Column_types">7.2  Column types</A></H2>

<P>
<STRONG>MySQL</STRONG> supports a number of column types, which may be grouped into
three categories: numeric types, date and time types, and string (character)
types.  This section first gives an overview of the types available and
summarizes the storage requirements for each column type, then provides a
more detailed description of the properties of the types in each category.
The overview is intentionally brief.  The more detailed descriptions should
be consulted for additional information about particular column types, such
as the allowable formats in which you can specify values.

</P>
<P>
The column types supported by <STRONG>MySQL</STRONG> are listed below.
The following code letters are used in the descriptions:

</P>
<DL COMPACT>

<DT><CODE>M</CODE>
<DD>
Indicates the maximum display size.  The maximum legal display size is 255.

<DT><CODE>D</CODE>
<DD>
Applies to floating-point types and indicates the number of digits
following the decimal point.
</DL>

<P>
Square brackets (<SAMP>`['</SAMP> and <SAMP>`]'</SAMP>) indicate parts of type specifiers
that are optional.

</P>
<P>
<A NAME="IDX196"></A>

</P>

<P>
Note that if you specify <CODE>ZEROFILL</CODE> for a column, <STRONG>MySQL</STRONG> will
automatically add the <CODE>UNSIGNED</CODE> attribute to the column.

</P>
<DL COMPACT>

<DT><CODE>TINYINT[(M)] [UNSIGNED] [ZEROFILL]</CODE>
<DD>
<A NAME="IDX197"></A>
 

A very small integer. The signed range is <CODE>-128</CODE> to <CODE>127</CODE>. The
unsigned range is <CODE>0</CODE> to <CODE>255</CODE>.

<A NAME="IDX198"></A>
<DT><CODE>SMALLINT[(M)] [UNSIGNED] [ZEROFILL]</CODE>
<DD>
A small integer. The signed range is <CODE>-32768</CODE> to <CODE>32767</CODE>. The
unsigned range is <CODE>0</CODE> to <CODE>65535</CODE>.

<A NAME="IDX199"></A>
<DT><CODE>MEDIUMINT[(M)] [UNSIGNED] [ZEROFILL]</CODE>
<DD>
A medium-size integer. The signed range is <CODE>-8388608</CODE> to
<CODE>8388607</CODE>. The unsigned range is <CODE>0</CODE> to <CODE>16777215</CODE>.

<A NAME="IDX200"></A>
<DT><CODE>INT[(M)] [UNSIGNED] [ZEROFILL]</CODE>
<DD>
A normal-size integer. The signed range is <CODE>-2147483648</CODE> to
<CODE>2147483647</CODE>.  The unsigned range is <CODE>0</CODE> to <CODE>4294967295</CODE>.

<A NAME="IDX201"></A>
<DT><CODE>INTEGER[(M)] [UNSIGNED] [ZEROFILL]</CODE>
<DD>
This is a synonym for <CODE>INT</CODE>.

<A NAME="IDX202"></A>
<DT><CODE>BIGINT[(M)] [UNSIGNED] [ZEROFILL]</CODE>
<DD>
A large integer. The signed range is <CODE>-9223372036854775808</CODE> to
<CODE>9223372036854775807</CODE>. The unsigned range is <CODE>0</CODE> to
<CODE>18446744073709551615</CODE>.  Note
that all arithmetic is done using signed <CODE>BIGINT</CODE> or <CODE>DOUBLE</CODE>
values, so you shouldn't use unsigned big integers larger than
<CODE>9223372036854775807</CODE> (63 bits) except with bit functions!
Note that <CODE>-</CODE>, <CODE>+</CODE> and <CODE>*</CODE> will use <CODE>BIGINT</CODE> arithmetic when
both arguments are <CODE>INTEGER</CODE> values!  This means that if you multiply two big integers
(or results from functions that return integers) you may get unexpected results
if the result is larger than <CODE>9223372036854775807</CODE>.

<A NAME="IDX203"></A>
<A NAME="IDX204"></A>
<DT><CODE>FLOAT(precision) [ZEROFILL]</CODE>
<DD>
A floating-point number. Cannot be unsigned.  <CODE>precision</CODE> can be
<CODE>4</CODE> or <CODE>8</CODE>. <CODE>FLOAT(4)</CODE> is a single-precision number and
<CODE>FLOAT(8)</CODE> is a double-precision number.  These types are like the
<CODE>FLOAT</CODE> and <CODE>DOUBLE</CODE> types described immediately below.
<CODE>FLOAT(4)</CODE> and <CODE>FLOAT(8)</CODE> have the same ranges as the corresponding
<CODE>FLOAT</CODE> and <CODE>DOUBLE</CODE> types, but their display size and number of
decimals is undefined.

In <STRONG>MySQL</STRONG> 3.23, this is a true floating point value.  In
earlier <STRONG>MySQL</STRONG> versions, <CODE>FLOAT(precision)</CODE> always has 2 decimals.

<A NAME="IDX205"></A>
<A NAME="IDX206"></A>
This syntax is provided for ODBC compatibility.

<A NAME="IDX207"></A>
<A NAME="IDX208"></A>
<DT><CODE>FLOAT[(M,D)] [ZEROFILL]</CODE>
<DD>
A small (single-precision) floating-point number. Cannot be unsigned.
Allowable values are <CODE>-3.402823466E+38</CODE> to
<CODE>-1.175494351E-38</CODE>, <CODE>0</CODE> and <CODE>1.175494351E-38</CODE> to
<CODE>3.402823466E+38</CODE>.

<A NAME="IDX209"></A>
<DT><CODE>DOUBLE[(M,D)] [ZEROFILL]</CODE>
<DD>
A normal-size (double-precision) floating-point number. Cannot be
unsigned. Allowable values are <CODE>-1.7976931348623157E+308</CODE> to
<CODE>-2.2250738585072014E-308</CODE>, <CODE>0</CODE> and
<CODE>2.2250738585072014E-308</CODE> to <CODE>1.7976931348623157E+308</CODE>.

<A NAME="IDX210"></A>
<A NAME="IDX211"></A>
<DT><CODE>DOUBLE PRECISION[(M,D)] [ZEROFILL]</CODE>
<DD>
<DT><CODE>REAL[(M,D)] [ZEROFILL]</CODE>
<DD>
These are synonyms for <CODE>DOUBLE</CODE>.

<A NAME="IDX212"></A>
<DT><CODE>DECIMAL(M,D) [ZEROFILL]</CODE>
<DD>
An unpacked floating-point number.  Cannot be unsigned.  Behaves like a
<CODE>CHAR</CODE> column: "unpacked" means the number is stored as a string, using
one character for each digit of the value, the decimal point, and, for
negative numbers, the <SAMP>`-'</SAMP> sign.  If <CODE>D</CODE> is 0, values will have
no decimal point or fractional part.  The maximum range of
<CODE>DECIMAL</CODE> values is the same as for <CODE>DOUBLE</CODE>, but the actual range
for a given <CODE>DECIMAL</CODE> column may be constrained by the choice of
<CODE>M</CODE> and <CODE>D</CODE>.

In <STRONG>MySQL</STRONG> 3.23 the <CODE>M</CODE> argument no longer includes the sign
or the decimal point. (This is according to ANSI SQL.)

<A NAME="IDX213"></A>
<DT><CODE>NUMERIC(M,D) [ZEROFILL]</CODE>
<DD>
This is a synonym for <CODE>DECIMAL</CODE>.

<A NAME="IDX214"></A>
<DT><CODE>DATE</CODE>
<DD>
A date.  The supported range is <CODE>'1000-01-01'</CODE> to <CODE>'9999-12-31'</CODE>.
<STRONG>MySQL</STRONG> displays <CODE>DATE</CODE> values in <CODE>'YYYY-MM-DD'</CODE> format, but
allows you to assign values to <CODE>DATE</CODE> columns using either strings or
numbers.

<A NAME="IDX215"></A>
<DT><CODE>DATETIME</CODE>
<DD>
A date and time combination.  The supported range is <CODE>'1000-01-01
00:00:00'</CODE> to <CODE>'9999-12-31 23:59:59'</CODE>.  <STRONG>MySQL</STRONG> displays
<CODE>DATETIME</CODE> values in <CODE>'YYYY-MM-DD HH:MM:SS'</CODE> format, but allows you
to assign values to <CODE>DATETIME</CODE> columns using either strings or numbers.

<A NAME="IDX216"></A>
<DT><CODE>TIMESTAMP[(M)]</CODE>
<DD>
A timestamp.  The range is <CODE>'1970-01-01 00:00:00'</CODE> to sometime in the
year <CODE>2037</CODE>.  <STRONG>MySQL</STRONG> displays <CODE>TIMESTAMP</CODE> values in
<CODE>YYYYMMDDHHMMSS</CODE>, <CODE>YYMMDDHHMMSS</CODE>, <CODE>YYYYMMDD</CODE> or <CODE>YYMMDD</CODE>
format, depending on whether <CODE>M</CODE> is <CODE>14</CODE> (or missing), <CODE>12</CODE>,
<CODE>8</CODE> or <CODE>6</CODE>, but allows you to assign values to <CODE>TIMESTAMP</CODE>
columns using either strings or numbers.  A <CODE>TIMESTAMP</CODE> column is useful
for recording the date and time of an <CODE>INSERT</CODE> or <CODE>UPDATE</CODE>
operation because it is automatically set to the date and time of the most
recent operation if you don't give it a value yourself.  You can also set it
to the current date and time by assigning it a <CODE>NULL</CODE> value.  See section <A HREF="manual.html#Date_and_time_types">7.2.6  Date and time types</A>.

<A NAME="IDX217"></A>
<DT><CODE>TIME</CODE>
<DD>
A time.  The range is <CODE>'-838:59:59'</CODE> to <CODE>'838:59:59'</CODE>.
<STRONG>MySQL</STRONG> displays <CODE>TIME</CODE> values in <CODE>'HH:MM:SS'</CODE> format, but
allows you to assign values to <CODE>TIME</CODE> columns using either strings or
numbers.

<A NAME="IDX218"></A>
<DT><CODE>YEAR</CODE>
<DD>
A year.  The allowable values are <CODE>1901</CODE> to <CODE>2155</CODE>, and <CODE>0000</CODE>.
<STRONG>MySQL</STRONG> displays <CODE>YEAR</CODE> values in <CODE>YYYY</CODE> format, but allows
you to assign values to <CODE>YEAR</CODE> columns using either strings or numbers.
(The <CODE>YEAR</CODE> type is new in <STRONG>MySQL</STRONG> 3.22.)

<A NAME="IDX219"></A>
<DT><CODE>CHAR(M) [BINARY]</CODE>
<DD>
A fixed-length string that is always right-padded with spaces to the
specified length when stored. The range of <CODE>M</CODE> is 1 to 255 characters.
Trailing spaces are removed when the value is retrieved. <CODE>CHAR</CODE> values
are sorted and compared in case-insensitive fashion unless the <CODE>BINARY</CODE>
keyword is given.

<A NAME="IDX220"></A>
<DT><CODE>VARCHAR(M) [BINARY]</CODE>
<DD>
A variable-length string.  Note:
Trailing spaces are removed when the value is stored (this differs from the
ANSI SQL specification). The range of <CODE>M</CODE> is 1 to 255 characters.
<CODE>VARCHAR</CODE> values are sorted and compared in case-insensitive fashion
unless the <CODE>BINARY</CODE> keyword is given. See section <A HREF="manual.html#Silent_column_changes">7.6.1  Silent column specification changes</A>.

<A NAME="IDX221"></A>
<A NAME="IDX222"></A>
<DT><CODE>TINYBLOB</CODE>
<DD>
<DT><CODE>TINYTEXT</CODE>
<DD>
A <CODE>BLOB</CODE> or <CODE>TEXT</CODE> column with a maximum length of 255 (2^8 - 1)
characters. See section <A HREF="manual.html#Silent_column_changes">7.6.1  Silent column specification changes</A>.

<A NAME="IDX223"></A>
<A NAME="IDX224"></A>
<DT><CODE>BLOB</CODE>
<DD>
<DT><CODE>TEXT</CODE>
<DD>
A <CODE>BLOB</CODE> or <CODE>TEXT</CODE> column with a maximum length of 65535 (2^16 - 1)
characters. See section <A HREF="manual.html#Silent_column_changes">7.6.1  Silent column specification changes</A>.

<A NAME="IDX225"></A>
<A NAME="IDX226"></A>
<DT><CODE>MEDIUMBLOB</CODE>
<DD>
<DT><CODE>MEDIUMTEXT</CODE>
<DD>
A <CODE>BLOB</CODE> or <CODE>TEXT</CODE> column with a maximum length of 16777215
(2^24 - 1) characters. See section <A HREF="manual.html#Silent_column_changes">7.6.1  Silent column specification changes</A>.

<A NAME="IDX227"></A>
<A NAME="IDX228"></A>
<DT><CODE>LONGBLOB</CODE>
<DD>
<DT><CODE>LONGTEXT</CODE>
<DD>
A <CODE>BLOB</CODE> or <CODE>TEXT</CODE> column with a maximum length of 4294967295
(2^32 - 1) characters. See section <A HREF="manual.html#Silent_column_changes">7.6.1  Silent column specification changes</A>.

<A NAME="IDX229"></A>
<DT><CODE>ENUM('value1','value2',...)</CODE>
<DD>
An enumeration.
A string object that can have only one value, chosen from the list of values
<CODE>'value1'</CODE>, <CODE>'value2'</CODE>, <CODE>...</CODE>, or <CODE>NULL</CODE>.  An <CODE>ENUM</CODE>
can have a maximum of 65535 distinct values.

<A NAME="IDX230"></A>
<DT><CODE>SET('value1','value2',...)</CODE>
<DD>
A set.  A string object that can have zero or more values, each of which must
be chosen from the list of values <CODE>'value1'</CODE>, <CODE>'value2'</CODE>,
<CODE>...</CODE> A <CODE>SET</CODE> can have a maximum of 64 members.
</DL>

<P>
<A NAME="IDX231"></A>


<H3><A NAME="Storage_requirements" HREF="manual_toc.html#Storage_requirements">7.2.1  Column type storage requirements</A></H3>

<P>
The storage requirements for each of the column types supported by
<STRONG>MySQL</STRONG> are listed below by category.

</P>

<H3>7.2.2  Numeric types</H3>

<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><STRONG>Column type</STRONG> </TD><TD> <STRONG>Storage required</STRONG>
</TR NOSAVE>
<TR><TD><CODE>TINYINT</CODE> </TD><TD> 1 byte
</TR NOSAVE>
<TR><TD><CODE>SMALLINT</CODE> </TD><TD> 2 bytes
</TR NOSAVE>
<TR><TD><CODE>MEDIUMINT</CODE> </TD><TD> 3 bytes
</TR NOSAVE>
<TR><TD><CODE>INT</CODE> </TD><TD> 4 bytes
</TR NOSAVE>
<TR><TD><CODE>INTEGER</CODE> </TD><TD> 4 bytes
</TR NOSAVE>
<TR><TD><CODE>BIGINT</CODE> </TD><TD> 8 bytes
</TR NOSAVE>
<TR><TD><CODE>FLOAT(4)</CODE> </TD><TD> 4 bytes
</TR NOSAVE>
<TR><TD><CODE>FLOAT(8)</CODE> </TD><TD> 8 bytes
</TR NOSAVE>
<TR><TD><CODE>FLOAT</CODE> </TD><TD> 4 bytes
</TR NOSAVE>
<TR><TD><CODE>DOUBLE</CODE> </TD><TD> 8 bytes
</TR NOSAVE>
<TR><TD><CODE>DOUBLE PRECISION</CODE> </TD><TD> 8 bytes
</TR NOSAVE>
<TR><TD><CODE>REAL</CODE> </TD><TD> 8 bytes
</TR NOSAVE>
<TR><TD><CODE>DECIMAL(M,D)</CODE> </TD><TD> <CODE>M</CODE> bytes (<CODE>D</CODE>+2, if <CODE>M &#60; D</CODE>)
</TR NOSAVE>
<TR><TD><CODE>NUMERIC(M,D)</CODE> </TD><TD> <CODE>M</CODE> bytes (<CODE>D</CODE>+2, if <CODE>M &#60; D</CODE>)
</TR>
</TABLE>


<H3>7.2.3  Date and time types</H3>

<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><STRONG>Column type</STRONG> </TD><TD> <STRONG>Storage required</STRONG>
</TR NOSAVE>
<TR><TD><CODE>DATETIME</CODE> </TD><TD> 8 bytes
</TR NOSAVE>
<TR><TD><CODE>DATE</CODE> </TD><TD> 3 bytes
</TR NOSAVE>
<TR><TD><CODE>TIMESTAMP</CODE> </TD><TD> 4 bytes
</TR NOSAVE>
<TR><TD><CODE>TIME</CODE> </TD><TD> 3 bytes
</TR NOSAVE>
<TR><TD><CODE>YEAR</CODE> </TD><TD> 1 byte
</TR>
</TABLE>


<H3>7.2.4  String types</H3>

<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><STRONG>Column type</STRONG> </TD><TD> <STRONG>Storage required</STRONG>
</TR NOSAVE>
<TR><TD><CODE>CHAR(M)</CODE> </TD><TD> <CODE>M</CODE> bytes, <CODE>1 &#60;= M &#60;= 255</CODE>
</TR NOSAVE>
<TR><TD><CODE>VARCHAR(M)</CODE> </TD><TD> <CODE>L</CODE>+1 bytes, where <CODE>L &#60;= M</CODE> and
<CODE>1 &#60;= M &#60;= 255</CODE>
</TR NOSAVE>
<TR><TD><CODE>TINYBLOB</CODE>, <CODE>TINYTEXT</CODE> </TD><TD> <CODE>L</CODE>+1 bytes,
where <CODE>L</CODE> &#60; 2^8
</TR NOSAVE>
<TR><TD><CODE>BLOB</CODE>, <CODE>TEXT</CODE> </TD><TD> <CODE>L</CODE>+2 bytes,
where <CODE>L</CODE> &#60; 2^16
</TR NOSAVE>
<TR><TD><CODE>MEDIUMBLOB</CODE>, <CODE>MEDIUMTEXT</CODE> </TD><TD> <CODE>L</CODE>+3 bytes,
where <CODE>L</CODE> &#60; 2^24
</TR NOSAVE>
<TR><TD><CODE>LONGBLOB</CODE>, <CODE>LONGTEXT</CODE> </TD><TD> <CODE>L</CODE>+4 bytes,
where <CODE>L</CODE> &#60; 2^32
</TR NOSAVE>
<TR><TD><CODE>ENUM('value1','value2',...)</CODE> </TD><TD> 1 or 2 bytes, depending on
the number of enumeration values (65535 values maximum)
</TR NOSAVE>
<TR><TD><CODE>SET('value1','value2',...)</CODE> </TD><TD> 1, 2, 3, 4 or 8 bytes, depending
on the number of set members (64 members maximum)
</TR>
</TABLE>

<P>
<CODE>VARCHAR</CODE> and the <CODE>BLOB</CODE> and <CODE>TEXT</CODE> types are variable-length
types, for which the storage requirements depend on the actual length of
column values (represented by <CODE>L</CODE> in the preceding table), rather than
on the type's maximum possible size.  For example, a <CODE>VARCHAR(10)</CODE>
column can hold a string with a maximum length of 10 characters.  The actual
storage required is the length of the string (<CODE>L</CODE>), plus 1 byte to
record the length of the string.  For the string <CODE>'abcd'</CODE>, <CODE>L</CODE> is 4
and the storage requirement is 5 bytes.

</P>
<P>
The <CODE>BLOB</CODE> and <CODE>TEXT</CODE> types require 1, 2, 3 or 4 bytes to record
the length of the column value, depending on the maximum possible length of
the type.

</P>
<P>
If a table includes any variable-length column types, the record format will
also be variable-length.  Note that when a table is created, <STRONG>MySQL</STRONG>
may under certain conditions change a column from a variable-length type to a
fixed-length type, or vice-versa.  See section <A HREF="manual.html#Silent_column_changes">7.6.1  Silent column specification changes</A>.

</P>
<P>
The size of an <CODE>ENUM</CODE> object is determined by the number of different
enumeration values.  1 byte is used for enumerations with up to 255 possible
values.  2 bytes are used for enumerations with up to 65535 values.

</P>
<P>
The size of a <CODE>SET</CODE> object is determined by the number of different
set members.  If the set size is <CODE>N</CODE>, the object occupies <CODE>(N+7)/8</CODE>
bytes, rounded up to 1, 2, 3, 4 or 8 bytes.  A <CODE>SET</CODE> can have a maximum
of 64 members.

</P>


<H3><A NAME="Numeric_types" HREF="manual_toc.html#Numeric_types">7.2.5  Numeric types</A></H3>

<P>
All integer types can have an optional attribute <CODE>UNSIGNED</CODE>.  Unsigned
values can be used when you want to allow only positive numbers in a column
and you need a little bigger numeric range for the column.

</P>
<P>
All numeric types can have an optional attribute <CODE>ZEROFILL</CODE>.  Values for
<CODE>ZEROFILL</CODE> columns are left-padded with zeroes up to the maximum display
length when they are displayed.  For example, for a column declared as
<CODE>INT(5) ZEROFILL</CODE>, a value of <CODE>4</CODE> is retrieved as <CODE>00004</CODE>.

</P>
<P>
When asked to store a value in a numeric column that is outside the column
type's allowable range, <STRONG>MySQL</STRONG> clips the value to the appropriate
endpoint of the range and stores the resulting value instead.

</P>
<P>
For example, the range of an <CODE>INT</CODE> column is <CODE>-2147483648</CODE> to
<CODE>2147483647</CODE>.  If you try to insert <CODE>-9999999999</CODE> into an
<CODE>INT</CODE> column, the value is clipped to the lower endpoint of the range,
and <CODE>-2147483648</CODE> is stored instead. Similarly, if you try to insert
<CODE>9999999999</CODE>, <CODE>2147483647</CODE> is stored instead.

</P>
<P>
If the <CODE>INT</CODE> column is <CODE>UNSIGNED</CODE>, the size of the column's
range is the same but its endpoints shift up to <CODE>0</CODE> and <CODE>4294967295</CODE>.
If you try to store <CODE>-9999999999</CODE> and <CODE>9999999999</CODE>,
the values stored in the column become <CODE>0</CODE> and <CODE>4294967296</CODE>.

</P>
<P>
Conversions that occur due to clipping are reported as "warnings" for
<CODE>ALTER TABLE</CODE>, <CODE>LOAD DATA INFILE</CODE>, <CODE>UPDATE</CODE> and
multi-row <CODE>INSERT</CODE> statements.

</P>
<P>
The maximum display size (<CODE>M</CODE>) and number of decimals (<CODE>D</CODE>)
are used for formatting and calculation of maximum column width.

</P>

<P>
<STRONG>MySQL</STRONG> will store any value that fits a column's storage type even if
the value exceeds the display size.  For example, an <CODE>INT(4)</CODE> column has
a display size of 4.  Suppose you insert a value which has more than 4 digits
into the column, such as <CODE>12345</CODE>.  The display size is exceeded, but the
allowable range of the <CODE>INT</CODE> type is not, so <STRONG>MySQL</STRONG> stores the
actual value, <CODE>12345</CODE>.  When retrieving the value from the column,
<STRONG>MySQL</STRONG> returns the actual value stored in the column.

</P>
<P>
The <CODE>DECIMAL</CODE> type is considered a numeric type (as is its synonym,
<CODE>NUMERIC</CODE>), but such values are stored as strings.  One character is
used for each digit of the value, the decimal point (if <CODE>D</CODE> &#62; 0) and the
<SAMP>`-'</SAMP> sign (for negative numbers).  If <CODE>D</CODE> is 0, <CODE>DECIMAL</CODE> and
<CODE>NUMERIC</CODE> values contain no decimal point or fractional part.

</P>
<P>
The maximum range of <CODE>DECIMAL</CODE> values is the same as for
<CODE>DOUBLE</CODE>, but the actual range for a given <CODE>DECIMAL</CODE> column
may be constrained by the choice of <CODE>M</CODE> and <CODE>D</CODE>.  For
example, a type specification such as <CODE>DECIMAL(4,2)</CODE> indicates a
maximum length of four characters with two digits after the decimal
point.  Due to the way the <CODE>DECIMAL</CODE> type is stored, this
specification results in an allowable range of <CODE>-.99</CODE> to
<CODE>9.99</CODE>, much less than the range of a <CODE>DOUBLE</CODE>.

</P>
<P>
To avoid some rounding problems, <STRONG>MySQL</STRONG> always rounds everything that
it stores in any floating-point column to the number of decimals indicated by
the column specification.  Suppose you have a column type of
<CODE>FLOAT(8,2)</CODE>. The number of decimals is 2, so a value such as
<CODE>2.333</CODE> is rounded to two decimals and stored as <CODE>2.33</CODE>.

</P>
<P>
<A NAME="IDX232"></A>
<A NAME="IDX233"></A>


<H3><A NAME="Date_and_time_types" HREF="manual_toc.html#Date_and_time_types">7.2.6  Date and time types</A></H3>

<P>
The date and time types are <CODE>DATETIME</CODE>, <CODE>DATE</CODE>, <CODE>TIMESTAMP</CODE>,
<CODE>TIME</CODE> and <CODE>YEAR</CODE>.  Each of these has a range of legal values, as
well as a "zero" value that is used when you specify an illegal value.

</P>
<P>
Here are some general considerations to keep in mind when working
with date and time types:

</P>

<UL>
<LI>

<STRONG>MySQL</STRONG> retrieves values for a given date or time type in a standard
format, but it attempts to interpret a variety of formats for values that
you supply (e.g., when you specify a value to be assigned to or compared to a
date or time type).  Nevertheless, only the formats described in the
following sections are supported.  It is expected that you will supply legal
values, and unpredictable results may occur if you use values in other
formats.

<LI>

Although <STRONG>MySQL</STRONG> tries to interpret values in several formats, it
always expects the year part of date values to be leftmost.  Dates must be
given in year-month-day order (e.g., <CODE>'98-09-04'</CODE>), rather than in the
month-day-year or day-month-year orders commonly used elsewhere (e.g.,
<CODE>'09-04-98'</CODE>, <CODE>'04-09-98'</CODE>).

<LI>

<STRONG>MySQL</STRONG> automatically converts a date or time type value to a number
if the value is used in a numeric context, and vice versa.

<LI>

When <STRONG>MySQL</STRONG> encounters a value for a date or time type that is out of
range or otherwise illegal for the type, it converts the value to the "zero"
value for that type.  (The exception is that out-of-range <CODE>TIME</CODE> values
are clipped to the appropriate endpoint of the <CODE>TIME</CODE> range.)  The table
below shows the format of the "zero" value for each type:

<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><STRONG>Column type</STRONG> </TD><TD> <STRONG>"Zero" value</STRONG>
</TR NOSAVE>
<TR><TD><CODE>DATETIME</CODE> </TD><TD> <CODE>'0000-00-00 00:00:00'</CODE>
</TR NOSAVE>
<TR><TD><CODE>DATE</CODE> </TD><TD> <CODE>'0000-00-00'</CODE>
</TR NOSAVE>
<TR><TD><CODE>TIMESTAMP</CODE> </TD><TD> <CODE>00000000000000</CODE> (length depends on display size)
</TR NOSAVE>
<TR><TD><CODE>TIME</CODE> </TD><TD> <CODE>'00:00:00'</CODE>
</TR NOSAVE>
<TR><TD><CODE>YEAR</CODE> </TD><TD> <CODE>0000</CODE>
</TR>
</TABLE>

<LI>

The "zero" values are special, but you can store or refer to them
explicitly using the values shown in the table.  You can also do this
using the values <CODE>'0'</CODE> or <CODE>0</CODE>, which are easier to write.

<LI>

"Zero" date or time values used through <STRONG>MyODBC</STRONG> are converted
automatically to <CODE>NULL</CODE> in <STRONG>MyODBC</STRONG> 2.50.12 and above, because
ODBC can't handle such values.
</UL>

<P>
<A NAME="IDX234"></A>


<H4><A NAME="Y2K_issues" HREF="manual_toc.html#Y2K_issues">7.2.6.1  Y2K issues and date types</A></H4>

<P>
<STRONG>MySQL</STRONG> itself is Y2K-safe (see section <A HREF="manual.html#Year_2000_compliance">1.6  Year 2000 compliance</A>),
but input values presented to <STRONG>MySQL</STRONG> may not be.  Any input
containing 2-digit year values is ambiguous, since the century is unknown.
Such values must be interpreted into 4-digit form since <STRONG>MySQL</STRONG> stores
years internally using four digits.

</P>
<P>
For <CODE>DATETIME</CODE>, <CODE>DATE</CODE>, <CODE>TIMESTAMP</CODE> and <CODE>YEAR</CODE> types,
<STRONG>MySQL</STRONG> interprets dates with ambiguous year values using the
following rules:

</P>

<UL>
<LI>

Year values in the range <CODE>00-69</CODE> are converted to <CODE>2000-2069</CODE>.

<LI>

Year values in the range <CODE>70-99</CODE> are converted to <CODE>1970-1999</CODE>.
</UL>

<P>
Remember that these rules provide only reasonable guesses as to what your
data mean.  If the heuristics used by <STRONG>MySQL</STRONG> don't produce the
correct values, you should provide unambiguous input containing 4-digit
year values.

</P>
<P>
<A NAME="IDX235"></A>
<A NAME="IDX236"></A>
<A NAME="IDX237"></A>


<H4><A NAME="DATETIME" HREF="manual_toc.html#DATETIME">7.2.6.2  The <CODE>DATETIME</CODE>, <CODE>DATE</CODE> and <CODE>TIMESTAMP</CODE> types</A></H4>

<P>
The <CODE>DATETIME</CODE>, <CODE>DATE</CODE> and <CODE>TIMESTAMP</CODE> types are related.
This section describes their characteristics, how they are similar and how
they differ.

</P>
<P>
The <CODE>DATETIME</CODE> type is used when you need values that contain both date
and time information.  <STRONG>MySQL</STRONG> retrieves and displays <CODE>DATETIME</CODE>
values in <CODE>'YYYY-MM-DD HH:MM:SS'</CODE> format.  The supported range is
<CODE>'1000-01-01 00:00:00'</CODE> to <CODE>'9999-12-31 23:59:59'</CODE>.  ("Supported"
means that although earlier values might work, there is no guarantee that
they will.)

</P>
<P>
The <CODE>DATE</CODE> type is used when you need only a date value, without a time
part.  <STRONG>MySQL</STRONG> retrieves and displays <CODE>DATE</CODE> values in
<CODE>'YYYY-MM-DD'</CODE> format.  The supported range is <CODE>'1000-01-01'</CODE> to
<CODE>'9999-12-31'</CODE>.

</P>
<P>
The <CODE>TIMESTAMP</CODE> column type provides a type that you can use to
automatically mark <CODE>INSERT</CODE> or <CODE>UPDATE</CODE> operations with the current
date and time.  If you have multiple <CODE>TIMESTAMP</CODE> columns, only the first
one is updated automatically.

</P>
<P>
Automatic updating of the first <CODE>TIMESTAMP</CODE> column occurs under any of
the following conditions:

</P>

<UL>
<LI>

The column is not specified explicitly in an <CODE>INSERT</CODE> or
<CODE>LOAD DATA INFILE</CODE> statement.
<LI>

The column is not specified explicitly in an <CODE>UPDATE</CODE> statement and some
other column changes value.  (Note that an <CODE>UPDATE</CODE> that sets a column
to the value it already has will not cause the <CODE>TIMESTAMP</CODE> column to be
updated, because if you set a column to its current value, <STRONG>MySQL</STRONG>
ignores the update for efficiency.)
<LI>

You explicitly set the <CODE>TIMESTAMP</CODE> column to <CODE>NULL</CODE>.
</UL>

<P>
<CODE>TIMESTAMP</CODE> columns other than the first may also be set to the current
date and time.  Just set the column to <CODE>NULL</CODE>, or to <CODE>NOW()</CODE>.

</P>
<P>
You can set any <CODE>TIMESTAMP</CODE> column to a value different than the current
date and time by setting it explicitly to the desired value.  This is true
even for the first <CODE>TIMESTAMP</CODE> column.  You can use this property if,
for example, you want a <CODE>TIMESTAMP</CODE> to be set to the current date and
time when you create a row, but not to be changed whenever the row is updated
later:

</P>

<UL>
<LI>

Let <STRONG>MySQL</STRONG> set the column when the row is created.
This will initialize it to the current date and time.

<LI>

When you perform subsequent updates to other columns in the row, set
the <CODE>TIMESTAMP</CODE> column explicitly to its current value.
</UL>

<P>
On the other hand, you may find it just as easy to use a <CODE>DATETIME</CODE>
column that you initialize to <CODE>NOW()</CODE> when the row is created and
leave alone for subsequent updates.

</P>
<P>
<CODE>TIMESTAMP</CODE> values may range from the beginning of 1970 to sometime in
the year 2037, with a resolution of one second.  Values are displayed as
numbers.

</P>
<P>
The format in which <STRONG>MySQL</STRONG> retrieves and displays <CODE>TIMESTAMP</CODE>
values depends on the display size, as illustrated by the table below.  The
`full' <CODE>TIMESTAMP</CODE> format is 14 digits, but <CODE>TIMESTAMP</CODE> columns may
be created with shorter display sizes:

</P>
<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><STRONG>Column type</STRONG> </TD><TD> <STRONG>Display format</STRONG>
</TR NOSAVE>
<TR><TD><CODE>TIMESTAMP(14)</CODE> </TD><TD> <CODE>YYYYMMDDHHMMSS</CODE>
</TR NOSAVE>
<TR><TD><CODE>TIMESTAMP(12)</CODE> </TD><TD> <CODE>YYMMDDHHMMSS</CODE>
</TR NOSAVE>
<TR><TD><CODE>TIMESTAMP(10)</CODE> </TD><TD> <CODE>YYMMDDHHMM</CODE>
</TR NOSAVE>
<TR><TD><CODE>TIMESTAMP(8)</CODE> </TD><TD> <CODE>YYYYMMDD</CODE>
</TR NOSAVE>
<TR><TD><CODE>TIMESTAMP(6)</CODE> </TD><TD> <CODE>YYMMDD</CODE>
</TR NOSAVE>
<TR><TD><CODE>TIMESTAMP(4)</CODE> </TD><TD> <CODE>YYMM</CODE>
</TR NOSAVE>
<TR><TD><CODE>TIMESTAMP(2)</CODE> </TD><TD> <CODE>YY</CODE>
</TR>
</TABLE>

<P>
All <CODE>TIMESTAMP</CODE> columns have the same storage size, regardless of
display size.  The most common display sizes are 6, 8, 12, and 14.  You can
specify an arbitrary display size at table creation time, but values of 0 or
greater than 14 are coerced to 14.  Odd-valued sizes in the range from 1 to
13 are coerced to the next higher even number.

</P>
<P>
You can specify <CODE>DATETIME</CODE>, <CODE>DATE</CODE> and <CODE>TIMESTAMP</CODE> values using
any of a common set of formats:

</P>

<UL>
<LI>

As a string in either <CODE>'YYYY-MM-DD HH:MM:SS'</CODE> or <CODE>'YY-MM-DD
HH:MM:SS'</CODE> format.  A "relaxed" syntax is allowed--any non-numeric
character may be used as the delimiter between date parts or time parts.
For example, <CODE>'98-12-31 11:30:45'</CODE>, <CODE>'98.12.31 11+30+45'</CODE>,
<CODE>'98/12/31 11*30*45'</CODE> and <CODE>'98@12@31 11^30^45'</CODE> are
equivalent.

<LI>

As a string in either <CODE>'YYYY-MM-DD'</CODE> or <CODE>'YY-MM-DD'</CODE> format.
A "relaxed" syntax is allowed here, too.  For example, <CODE>'98-12-31'</CODE>,
<CODE>'98.12.31'</CODE>, <CODE>'98/12/31'</CODE> and <CODE>'98@12@31'</CODE> are
equivalent.

<LI>

As a string with no delimiters in either <CODE>'YYYYMMDDHHMMSS'</CODE> or
<CODE>'YYMMDDHHMMSS'</CODE> format, provided that the string makes sense as a
date.  For example, <CODE>'19970523091528'</CODE> and <CODE>'970523091528'</CODE> are
interpreted as <CODE>'1997-05-23 09:15:28'</CODE>, but <CODE>'971122459015'</CODE> is
illegal (it has a nonsensical minute part) and becomes <CODE>'0000-00-00
00:00:00'</CODE>.

<LI>

As a string with no delimiters in either <CODE>'YYYYMMDD'</CODE> or <CODE>'YYMMDD'</CODE>
format, provided that the string makes sense as a date.  For example,
<CODE>'19970523'</CODE> and <CODE>'970523'</CODE> are interpreted as
<CODE>'1997-05-23'</CODE>, but <CODE>'971332'</CODE> is illegal (it has nonsensical month
and day parts) and becomes <CODE>'0000-00-00'</CODE>.

<LI>

As a number in either <CODE>YYYYMMDDHHMMSS</CODE> or <CODE>YYMMDDHHMMSS</CODE>
format, provided that the number makes sense as a date.  For example,
<CODE>19830905132800</CODE> and <CODE>830905132800</CODE> are interpreted as
<CODE>'1983-09-05 13:28:00'</CODE>.

<LI>

As a number in either <CODE>YYYYMMDD</CODE> or <CODE>YYMMDD</CODE>
format, provided that the number makes sense as a date.  For example,
<CODE>19830905</CODE> and <CODE>830905</CODE> are interpreted as <CODE>'1983-09-05'</CODE>.

<LI>

As the result of a function that returns a value that is acceptable
in a <CODE>DATETIME</CODE>, <CODE>DATE</CODE> or <CODE>TIMESTAMP</CODE> context, such as
<CODE>NOW()</CODE> or <CODE>CURRENT_DATE</CODE>.
</UL>

<P>
Illegal <CODE>DATETIME</CODE>, <CODE>DATE</CODE> or <CODE>TIMESTAMP</CODE> values are converted
to the "zero" value of the appropriate type (<CODE>'0000-00-00 00:00:00'</CODE>,
<CODE>'0000-00-00'</CODE> or <CODE>00000000000000</CODE>).

</P>
<P>
For values specified as strings that include date part delimiters, it is not
necessary to specify two digits for month or day values that are less than
<CODE>10</CODE>.  <CODE>'1979-6-9'</CODE> is the same as <CODE>'1979-06-09'</CODE>.  Similarly,
for values specified as strings that include time part delimiters, it is not
necessary to specify two digits for hour, month or second values that are
less than <CODE>10</CODE>.  <CODE>'1979-10-30 1:2:3'</CODE> is the same as
<CODE>'1979-10-30 01:02:03'</CODE>.

</P>
<P>
Values specified as numbers should be 6, 8, 12 or 14 digits long.  If the
number is 8 or 14 digits long, it is assumed to be in <CODE>YYYYMMDD</CODE> or
<CODE>YYYYMMDDHHMMSS</CODE> format and that the year is given by the first 4
digits.  If the number is 6 or 12 digits long, it is assumed to be in
<CODE>YYMMDD</CODE> or <CODE>YYMMDDHHMMSS</CODE> format and that the year is given by the
first 2 digits.  Numbers that are not one of these lengths are interpreted
as though padded with leading zeros to the closest length.

</P>
<P>
Values specified as non-delimited strings are interpreted using their length
as given.  If the string is 8 or 14 characters long, the year is assumed to
be given by the first 4 characters.  Otherwise the year is assumed to be
given by the first 2 characters.  The string is interpreted from left to
right to find year, month, day, hour, minute and second values, for as many
parts as are present in the string.  This means you should not use strings
that have fewer than 6 characters.  For example, if you specify <CODE>'9903'</CODE>,
thinking that will represent March, 1999, you will find that <STRONG>MySQL</STRONG>
inserts a "zero" date into your table.  This is because the year and month
values are <CODE>99</CODE> and <CODE>03</CODE>, but the day part is missing (zero), so
the value is not a legal date.

</P>
<P>
<CODE>TIMESTAMP</CODE> columns store legal values using the full precision with
which the value was specified, regardless of the display size.  This has
several implications:

</P>

<UL>
<LI>

Always specify year, month, and day, even if your column types are
<CODE>TIMESTAMP(4)</CODE> or <CODE>TIMESTAMP(2)</CODE>.  Otherwise, the value will not
be a legal date and <CODE>0</CODE> will be stored.

<LI>

If you use <CODE>ALTER TABLE</CODE> to widen a narrow <CODE>TIMESTAMP</CODE> column,
information will be displayed that previously was "hidden".

<LI>

Similarly, narrowing a <CODE>TIMESTAMP</CODE> column does not cause information to
be lost, except in the sense that less information is shown when the values
are displayed.

<LI>

Although <CODE>TIMESTAMP</CODE> values are stored to full precision, the only
function that operates directly on the underlying stored value is
<CODE>UNIX_TIMESTAMP()</CODE>.  Other functions operate on the formatted retrieved
value.  This means you cannot use functions such as <CODE>HOUR()</CODE> or
<CODE>SECOND()</CODE> unless the relevant part of the <CODE>TIMESTAMP</CODE> value is
included in the formatted value.  For example, the <CODE>HH</CODE> part of a
<CODE>TIMESTAMP</CODE> column is not displayed unless the display size is at least
10, so trying to use <CODE>HOUR()</CODE> on shorter <CODE>TIMESTAMP</CODE> values
produces a meaningless result.
</UL>

<P>
You can to some extent assign values of one date type to an object
of a different date type.  However, there may be some alteration
of the value or loss of information:

</P>

<UL>
<LI>

If you assign a <CODE>DATE</CODE> value to a <CODE>DATETIME</CODE> or <CODE>TIMESTAMP</CODE>
object, the time part of the resulting value is set to <CODE>'00:00:00'</CODE>,
because the <CODE>DATE</CODE> value contains no time information.

<LI>

If you assign a <CODE>DATETIME</CODE> or <CODE>TIMESTAMP</CODE> value to a <CODE>DATE</CODE>
object, the time part of the resulting value is deleted, because the
<CODE>DATE</CODE> type stores no time information.

<LI>

Remember that although <CODE>DATETIME</CODE>, <CODE>DATE</CODE> and <CODE>TIMESTAMP</CODE>
values all can be specified using the same set of formats, the types do not
all have the same range of values.  For example, <CODE>TIMESTAMP</CODE> values
cannot be earlier than <CODE>1970</CODE> or later than <CODE>2037</CODE>.  This means
that a date such as <CODE>'1968-01-01'</CODE>, while legal as a <CODE>DATETIME</CODE> or
<CODE>DATE</CODE> value, is not a valid <CODE>TIMESTAMP</CODE> value and will be
converted to <CODE>0</CODE> if assigned to such an object.
</UL>

<P>
Be aware of certain pitfalls when specifying date values:

</P>

<UL>
<LI>

The relaxed format allowed for values specified as strings can be deceiving.
For example, a value such as <CODE>'10:11:12'</CODE> might look like a time value
because of the <SAMP>`:'</SAMP> delimiter, but if used in a date context will be
interpreted as the year <CODE>'2010-11-12'</CODE>.  The value <CODE>'10:45:15'</CODE>
will be converted to <CODE>'0000-00-00'</CODE> because <CODE>'45'</CODE> is not a legal
month.

<LI>

Year values specified as two digits are ambiguous, since the century is
unknown.  <STRONG>MySQL</STRONG> interprets 2-digit year values using the following
rules:


<UL>
<LI>

Year values in the range <CODE>00-69</CODE> are converted to <CODE>2000-2069</CODE>.

<LI>

Year values in the range <CODE>70-99</CODE> are converted to <CODE>1970-1999</CODE>.
</UL>

</UL>

<P>
<A NAME="IDX238"></A>


<H4><A NAME="TIME" HREF="manual_toc.html#TIME">7.2.6.3  The <CODE>TIME</CODE> type</A></H4>

<P>
<STRONG>MySQL</STRONG> retrieves and displays <CODE>TIME</CODE> values in <CODE>'HH:MM:SS'</CODE>
format (or <CODE>'HHH:MM:SS'</CODE> format for large hours values).  <CODE>TIME</CODE>
values may range from <CODE>'-838:59:59'</CODE> to <CODE>'838:59:59'</CODE>.  The reason
the hours part may be so large is that the <CODE>TIME</CODE> type may be used not
only to represent a time of day (which must be less than 24 hours), but also
elapsed time or a time interval between two events (which may be much greater
than 24 hours, or even negative).

</P>
<P>
You can specify <CODE>TIME</CODE> values in a variety of formats:

</P>

<UL>
<LI>

As a string in <CODE>'HH:MM:SS'</CODE> format.
A "relaxed" syntax is allowed--any non-numeric character may be
used as the delimiter between time parts.  For example, <CODE>'10:11:12'</CODE>
and <CODE>'10.11.12'</CODE> are equivalent.

<LI>

As a string with no delimiters in <CODE>'HHMMSS'</CODE> format, provided that
it makes sense as a time.  For example, <CODE>'101112'</CODE> is understood as
<CODE>'10:11:12'</CODE>, but <CODE>'109712'</CODE> is illegal (it has a nonsensical
minute part) and becomes <CODE>'00:00:00'</CODE>.

<LI>

As a number in <CODE>HHMMSS</CODE> format, provided that it makes sense as a time.
For example, <CODE>101112</CODE> is understood as <CODE>'10:11:12'</CODE>.

<LI>

As the result of a function that returns a value that is acceptable
in a <CODE>TIME</CODE> context, such as <CODE>CURRENT_TIME</CODE>.
</UL>

<P>
For <CODE>TIME</CODE> values specified as strings that include a time part
delimiter, it is not necessary to specify two digits for hours, minutes or
seconds values that are less than <CODE>10</CODE>.  <CODE>'8:3:2'</CODE> is the same as
<CODE>'08:03:02'</CODE>.

</P>
<P>
Be careful about assigning "short" <CODE>TIME</CODE> values to a <CODE>TIME</CODE>
column.  <STRONG>MySQL</STRONG> interprets values using the assumption that the
rightmost digits represent seconds.  (<STRONG>MySQL</STRONG> interprets <CODE>TIME</CODE>
values as elapsed time, rather than as time of day.)  For example, you might
think of <CODE>'11:12'</CODE>, <CODE>'1112'</CODE> and <CODE>1112</CODE> as meaning
<CODE>'11:12:00'</CODE> (12 minutes after 11 o'clock), but <STRONG>MySQL</STRONG>
interprets them as <CODE>'00:11:12'</CODE> (11 minutes, 12 seconds).  Similarly,
<CODE>'12'</CODE> and <CODE>12</CODE> are interpreted as <CODE>'00:00:12'</CODE>.

</P>
<P>
Values that lie outside the <CODE>TIME</CODE> range
but are otherwise legal are clipped to the appropriate
endpoint of the range.  For example, <CODE>'-850:00:00'</CODE> and
<CODE>'850:00:00'</CODE> are converted to <CODE>'-838:59:59'</CODE> and
<CODE>'838:59:59'</CODE>.

</P>
<P>
Illegal <CODE>TIME</CODE> values are converted to <CODE>'00:00:00'</CODE>.  Note that
since <CODE>'00:00:00'</CODE> is itself a legal <CODE>TIME</CODE> value, there is no way
to tell, from a value of <CODE>'00:00:00'</CODE> stored in a table, whether the
original value was specified as <CODE>'00:00:00'</CODE> or whether it was illegal.

</P>
<P>
<A NAME="IDX239"></A>


<H4><A NAME="YEAR" HREF="manual_toc.html#YEAR">7.2.6.4  The <CODE>YEAR</CODE> type</A></H4>

<P>
The <CODE>YEAR</CODE> type is a 1-byte type used for representing years.

</P>
<P>
<STRONG>MySQL</STRONG> retrieves and displays <CODE>YEAR</CODE> values in <CODE>YYYY</CODE>
format.  The range is <CODE>1901</CODE> to <CODE>2155</CODE>.

</P>
<P>
You can specify <CODE>YEAR</CODE> values in a variety of formats:

</P>

<UL>
<LI>

As a four-digit string in the range <CODE>'1901'</CODE> to <CODE>'2155'</CODE>.

<LI>

As a four-digit number in the range <CODE>1901</CODE> to <CODE>2155</CODE>.

<LI>

As a two-digit string in the range <CODE>'00'</CODE> to <CODE>'99'</CODE>.  Values in the
ranges <CODE>'00'</CODE> to <CODE>'69'</CODE> and <CODE>'70'</CODE> to <CODE>'99'</CODE> are
converted to <CODE>YEAR</CODE> values in the ranges <CODE>2000</CODE> to <CODE>2069</CODE> and
<CODE>1970</CODE> to <CODE>1999</CODE>.

<LI>

As a two-digit number in the range <CODE>1</CODE> to <CODE>99</CODE>.  Values in the
ranges <CODE>1</CODE> to <CODE>69</CODE> and <CODE>70</CODE> to <CODE>99</CODE> are converted to
<CODE>YEAR</CODE> values in the ranges <CODE>2001</CODE> to <CODE>2069</CODE> and <CODE>1970</CODE>
to <CODE>1999</CODE>.  Note that the range for two-digit numbers is slightly
different than the range for two-digit strings, since you cannot specify zero
directly as a number and have it be interpreted as <CODE>2000</CODE>.  You
<EM>must</EM> specify it as a string <CODE>'0'</CODE> or <CODE>'00'</CODE> or it will be
interpreted as <CODE>0000</CODE>.

<LI>

As the result of a function that returns a value that is acceptable
in a <CODE>YEAR</CODE> context, such as <CODE>NOW()</CODE>.
</UL>

<P>
Illegal <CODE>YEAR</CODE> values are converted to <CODE>0000</CODE>.

</P>


<H3><A NAME="String_types" HREF="manual_toc.html#String_types">7.2.7  String types</A></H3>

<P>
The string types are <CODE>CHAR</CODE>, <CODE>VARCHAR</CODE>, <CODE>BLOB</CODE>, <CODE>TEXT</CODE>,
<CODE>ENUM</CODE> and <CODE>SET</CODE>.

</P>
<P>
<A NAME="IDX240"></A>
<A NAME="IDX241"></A>

</P>


<H4><A NAME="CHAR" HREF="manual_toc.html#CHAR">7.2.7.1  The <CODE>CHAR</CODE> and <CODE>VARCHAR</CODE> types</A></H4>

<P>
The <CODE>CHAR</CODE> and <CODE>VARCHAR</CODE> types are similar, but differ in the
way they are stored and retrieved.

</P>
<P>
The length of a <CODE>CHAR</CODE> column is fixed to the length that you declare
when you create the table.  The length can be any value between 1 and 255.
When <CODE>CHAR</CODE> values are stored, they are right-padded with spaces to the
specified length.  When <CODE>CHAR</CODE> values are retrieved, trailing spaces are
removed.

</P>
<P>
Values in <CODE>VARCHAR</CODE> columns are variable-length strings.  You can
declare a <CODE>VARCHAR</CODE> column to be any length between 1 and 255, just as
for <CODE>CHAR</CODE> columns.  However, in contrast to <CODE>CHAR</CODE>, <CODE>VARCHAR</CODE>
values are stored using only as many characters as are needed, plus one byte
to record the length.  Values are not padded; instead, trailing spaces are
removed when values are stored.  (This space removal differs from the ANSI
SQL specification.)

</P>
<P>
If you assign a value to a <CODE>CHAR</CODE> or <CODE>VARCHAR</CODE> column that
exceeds the column's maximum length, the value is truncated to fit.

</P>
<P>
The table below illustrates the differences between the two types of columns
by showing the result of storing various string values into <CODE>CHAR(4)</CODE>
and <CODE>VARCHAR(4)</CODE> columns:

</P>

<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><STRONG>Value</STRONG> </TD><TD> <CODE>CHAR(4)</CODE> </TD><TD> <STRONG>Storage required</STRONG> </TD><TD> <CODE>VARCHAR(4)</CODE> </TD><TD> <STRONG>Storage required</STRONG>
</TR NOSAVE>
<TR><TD><CODE>"</CODE> </TD><TD> <CODE>'    '</CODE> </TD><TD> 4 bytes </TD><TD> <CODE>"</CODE> </TD><TD> 1 byte
</TR NOSAVE>
<TR><TD><CODE>'ab'</CODE> </TD><TD> <CODE>'ab  '</CODE> </TD><TD> 4 bytes </TD><TD> <CODE>'ab'</CODE> </TD><TD> 3 bytes
</TR NOSAVE>
<TR><TD><CODE>'abcd'</CODE> </TD><TD> <CODE>'abcd'</CODE> </TD><TD> 4 bytes </TD><TD> <CODE>'abcd'</CODE> </TD><TD> 5 bytes
</TR NOSAVE>
<TR><TD><CODE>'abcdefgh'</CODE> </TD><TD> <CODE>'abcd'</CODE> </TD><TD> 4 bytes </TD><TD> <CODE>'abcd'</CODE> </TD><TD> 5 bytes
</TR>
</TABLE>

<P>
The values retrieved from the <CODE>CHAR(4)</CODE> and <CODE>VARCHAR(4)</CODE> columns
will be the same in each case, because trailing spaces are removed from
<CODE>CHAR</CODE> columns upon retrieval.

</P>
<P>
Values in <CODE>CHAR</CODE> and <CODE>VARCHAR</CODE> columns are sorted and compared in
case-insensitive fashion, unless the <CODE>BINARY</CODE> attribute was specified
when the table was created.  The <CODE>BINARY</CODE> attribute means that column
values are sorted and compared in case-sensitive fashion according to the
ASCII order of the machine where the <STRONG>MySQL</STRONG> server is running.

</P>
<P>
The <CODE>BINARY</CODE> attribute is "sticky".  This means that if a column marked
<CODE>BINARY</CODE> is used in an expression, the whole expression is compared as a
<CODE>BINARY</CODE> value.

</P>
<P>
<STRONG>MySQL</STRONG> may silently change the type of a <CODE>CHAR</CODE> or <CODE>VARCHAR</CODE>
column at table creation time.
See section <A HREF="manual.html#Silent_column_changes">7.6.1  Silent column specification changes</A>.

</P>
<P>
<A NAME="IDX242"></A>
<A NAME="IDX243"></A>


<H4><A NAME="BLOB" HREF="manual_toc.html#BLOB">7.2.7.2  The <CODE>BLOB</CODE> and <CODE>TEXT</CODE> types</A></H4>

<P>
A <CODE>BLOB</CODE> is a binary large object that can hold a variable amount of
data.  The four <CODE>BLOB</CODE> types <CODE>TINYBLOB</CODE>, <CODE>BLOB</CODE>,
<CODE>MEDIUMBLOB</CODE> and <CODE>LONGBLOB</CODE> differ only in the maximum length of
the values they can hold.
See section <A HREF="manual.html#Storage_requirements">7.2.1  Column type storage requirements</A>.

</P>
<P>
The four <CODE>TEXT</CODE> types <CODE>TINYTEXT</CODE>, <CODE>TEXT</CODE>, <CODE>MEDIUMTEXT</CODE>
and <CODE>LONGTEXT</CODE> correspond to the four <CODE>BLOB</CODE> types and have the
same maximum lengths and storage requirements.  The only difference between
<CODE>BLOB</CODE> and <CODE>TEXT</CODE> types is that sorting and comparison is performed
in case-sensitive fashion for <CODE>BLOB</CODE> values and case-insensitive fashion
for <CODE>TEXT</CODE> values.  In other words, a <CODE>TEXT</CODE> is a case-insensitive
<CODE>BLOB</CODE>.

</P>
<P>
If you assign a value to a <CODE>BLOB</CODE> or <CODE>TEXT</CODE> column that exceeds
the column type's maximum length, the value is truncated to fit.

</P>
<P>
In most respects, you can regard a <CODE>TEXT</CODE> column as a <CODE>VARCHAR</CODE>
column that can be as big as you like.  Similarly, you can regard a
<CODE>BLOB</CODE> column as a <CODE>VARCHAR BINARY</CODE> column.  The differences are:

</P>

<UL>
<LI>

<CODE>BLOB</CODE> and <CODE>TEXT</CODE> columns cannot be indexed, unlike all other
<STRONG>MySQL</STRONG> column types.  This will be fixed in <STRONG>MySQL</STRONG> 3.23.1.

<LI>

There is no trailing-space removal for <CODE>BLOB</CODE> and <CODE>TEXT</CODE> columns
when values are stored, as there is for <CODE>VARCHAR</CODE> columns.

<LI>

<A NAME="IDX244"></A>
<A NAME="IDX245"></A>
<A NAME="IDX246"></A>
<CODE>BLOB</CODE> and <CODE>TEXT</CODE> columns cannot have <CODE>DEFAULT</CODE> values.
</UL>

<P>
<STRONG>MyODBC</STRONG> defines <CODE>BLOB</CODE> values as <CODE>LONGVARBINARY</CODE> and
<CODE>TEXT</CODE> values as <CODE>LONGVARCHAR</CODE>.

</P>
<P>
Because <CODE>BLOB</CODE> and <CODE>TEXT</CODE> values may be extremely long, you
may run up against some constraints when using them:

</P>

<UL>
<LI>

If you want to use <CODE>GROUP BY</CODE> or <CODE>ORDER BY</CODE> on a <CODE>BLOB</CODE> or
<CODE>TEXT</CODE> column, you must convert the column value into a fixed-length
object. The standard way to do this is with the <CODE>SUBSTRING</CODE>
function.  For example:


<PRE>
mysql&#62; select comment from tbl_name ORDER BY substring(comment,20);
</PRE>

If you don't do this, only the first <CODE>max_sort_length</CODE> bytes of the
column are used when sorting.  The default value of <CODE>max_sort_length</CODE> is
1024; this value can be changed using the <CODE>-O</CODE> option when starting the
<CODE>mysqld</CODE> server. You can group on an expression involving <CODE>BLOB</CODE> or
<CODE>TEXT</CODE> values by specifying the column position or by using an alias:


<PRE>
mysql&#62; select id,substring(blob_col,1,100) from tbl_name
           GROUP BY 2;
mysql&#62; select id,substring(blob_col,1,100) as b from tbl_name
           GROUP BY b;
</PRE>

<LI>

The maximum size of a <CODE>BLOB</CODE> or <CODE>TEXT</CODE> object is determined by its
type, but the largest value you can actually transmit between the client and
server is determined by the amount of available memory and the size of the
communications buffers.  You can change the message buffer size, but you must
do so on both the server and client ends. See section <A HREF="manual.html#Server_parameters">10.1  Tuning server parameters</A>.
</UL>

<P>
Note that each <CODE>BLOB</CODE> or <CODE>TEXT</CODE> value is represented internally by
a separately-allocated object. This is in contrast to all other column types,
for which storage is allocated once per column when the table is opened.

</P>
<P>
<A NAME="IDX247"></A>


<H4><A NAME="ENUM" HREF="manual_toc.html#ENUM">7.2.7.3  The <CODE>ENUM</CODE> type</A></H4>

<P>
An <CODE>ENUM</CODE> is a string object whose value normally is chosen from a list
of allowed values that are enumerated explicitly in the column specification
at table creation time.

</P>
<P>
The value may also be the empty string (<CODE>""</CODE>) or <CODE>NULL</CODE> under
certain circumstances:

</P>

<UL>
<LI>

If you insert an invalid value into an <CODE>ENUM</CODE> (that is, a string not
present in the list of allowed values), the empty string is inserted
instead as a special error value.

<LI>

If an <CODE>ENUM</CODE> is declared <CODE>NULL</CODE>, <CODE>NULL</CODE> is also a legal value
for the column, and the default value is <CODE>NULL</CODE>.  If an <CODE>ENUM</CODE> is
declared <CODE>NOT NULL</CODE>, the default value is the first element of the
list of allowed values.
</UL>

<P>
Each enumeration value has an index:

</P>

<UL>
<LI>

Values from the list of allowable elements in the column specification are
numbered beginning with 1.

<LI>

The index value of the empty string error value is 0.  This means that you
can use the following <CODE>SELECT</CODE> statement to find rows into which invalid
<CODE>ENUM</CODE> values were assigned:


<PRE>
mysql&#62; SELECT * FROM tbl_name WHERE enum_col=0;
</PRE>

<LI>

The index of the <CODE>NULL</CODE> value is <CODE>NULL</CODE>.
</UL>

<P>
For example, a column specified as <CODE>ENUM("one", "two", "three")</CODE> can
have any of the values shown below.  The index of each value is also shown:

</P>
<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><STRONG>Value</STRONG> </TD><TD> <STRONG>Index</STRONG>
</TR NOSAVE>
<TR><TD><CODE>NULL</CODE> </TD><TD> <CODE>NULL</CODE>
</TR NOSAVE>
<TR><TD><CODE>""</CODE> </TD><TD> 0
</TR NOSAVE>
<TR><TD><CODE>"one"</CODE> </TD><TD> 1
</TR NOSAVE>
<TR><TD><CODE>"two"</CODE> </TD><TD> 2
</TR NOSAVE>
<TR><TD><CODE>"three"</CODE> </TD><TD> 3
</TR>
</TABLE>

<P>
An enumeration can have a maximum of 65535 elements.

</P>
<P>
Lettercase is irrelevant when you assign values to an <CODE>ENUM</CODE> column.
However, values retrieved from the column later have lettercase matching the
values that were used to specify the allowable values at table creation time.

</P>
<P>
If you retrieve an <CODE>ENUM</CODE> in a numeric context, the column value's index
is returned.  If you store a number into an <CODE>ENUM</CODE>, the number is
treated as an index, and the the value stored is the enumeration member with
that index.

</P>
<P>
<CODE>ENUM</CODE> values are sorted according to the order in which the enumeration
members were listed in the column specification.  (In other words,
<CODE>ENUM</CODE> values are sorted according to their index numbers.)  For
example, <CODE>"a"</CODE> sorts before <CODE>"b"</CODE> for <CODE>ENUM("a", "b")</CODE>, but
<CODE>"b"</CODE> sorts before <CODE>"a"</CODE> for <CODE>ENUM("b", "a")</CODE>.  The empty
string sorts before non-empty strings, and <CODE>NULL</CODE> values sort before
all other enumeration values.

</P>
<P>
If you want to get all possible values for an <CODE>ENUM</CODE> column, you should
use: <CODE>SHOW COLUMNS FROM table_name LIKE enum_column_name</CODE> and parse
the <CODE>ENUM</CODE> definition in the second column.

</P>
<P>
<A NAME="IDX248"></A>


<H4><A NAME="SET" HREF="manual_toc.html#SET">7.2.7.4  The <CODE>SET</CODE> type</A></H4>

<P>
A <CODE>SET</CODE> is a string object that can have zero or more values, each of
which must be chosen from a list of allowed values specified when the table
is created.  <CODE>SET</CODE> column values that consist of multiple set members
are specified with members separated by commas (<SAMP>`,'</SAMP>).  A consequence of
this is that <CODE>SET</CODE> member values cannot themselves contain commas.

</P>
<P>
For example, a column specified as <CODE>SET("one", "two") NOT NULL</CODE> can have
any of these values:

</P>

<PRE>
""
"one"
"two"
"one,two"
</PRE>

<P>
A <CODE>SET</CODE> can have a maximum of 64 different members.

</P>
<P>
<STRONG>MySQL</STRONG> stores <CODE>SET</CODE> values numerically, with the low-order bit
of the stored value corresponding to the first set member.  If you retrieve a
<CODE>SET</CODE> value in a numeric context, the value retrieved has bits set
corresponding to the set members that make up the column value.  If a number
is stored into a <CODE>SET</CODE> column, the bits that are set in the binary
representation of the number determine the set members in the column value.
Suppose a column is specified as <CODE>SET("a","b","c","d")</CODE>.  Then the
members have the following bit values:

</P>
<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><CODE>SET</CODE> <STRONG>member</STRONG> </TD><TD> <STRONG>Decimal value</STRONG> </TD><TD> <STRONG>Binary value</STRONG>
</TR NOSAVE>
<TR><TD><CODE>a</CODE> </TD><TD> <CODE>1</CODE> </TD><TD> <CODE>0001</CODE>
</TR NOSAVE>
<TR><TD><CODE>b</CODE> </TD><TD> <CODE>2</CODE> </TD><TD> <CODE>0010</CODE>
</TR NOSAVE>
<TR><TD><CODE>c</CODE> </TD><TD> <CODE>4</CODE> </TD><TD> <CODE>0100</CODE>
</TR NOSAVE>
<TR><TD><CODE>d</CODE> </TD><TD> <CODE>8</CODE> </TD><TD> <CODE>1000</CODE>
</TR>
</TABLE>

<P>
If you assign a value of <CODE>9</CODE> to this column, that is <CODE>1001</CODE> in
binary, so the first and fourth <CODE>SET</CODE> value members <CODE>"a"</CODE> and
<CODE>"d"</CODE> are selected and the resulting value is <CODE>"a,d"</CODE>.

</P>
<P>
For a value containing more than one <CODE>SET</CODE> element, it does not matter
what order the elements are listed in when you insert the value.  It also
doesn't not matter how many times a given element is listed in the value.
When the value is retrieved later, each element in the value will appear
once, with elements listed according to the order in which they were
specified at table creation time.  For example, if a column is specified as
<CODE>SET("a","b","c","d")</CODE>, then <CODE>"a,d"</CODE>, <CODE>"d,a"</CODE> and
<CODE>"d,a,a,d,d"</CODE> will all appear as <CODE>"a,d"</CODE> when retrieved.

</P>
<P>
<CODE>SET</CODE> values are sorted numerically.  <CODE>NULL</CODE> values sort before
non-<CODE>NULL</CODE> <CODE>SET</CODE> values.

</P>
<P>
Normally, you perform a <CODE>SELECT</CODE> on a <CODE>SET</CODE> column using
the <CODE>LIKE</CODE> operator or the <CODE>FIND_IN_SET()</CODE> function:

</P>

<PRE>
mysql&#62; SELECT * FROM tbl_name WHERE set_col LIKE '%value%';
mysql&#62; SELECT * FROM tbl_name WHERE FIND_IN_SET('value',set_col)&#62;0;
</PRE>

<P>
But the following will also work:

</P>

<PRE>
mysql&#62; SELECT * FROM tbl_name WHERE set_col = 'val1,val2';
mysql&#62; SELECT * FROM tbl_name WHERE set_col &#38; 1;
</PRE>

<P>
The first of these statements looks for an exact match.  The second looks
for values containing the first set member.

</P>
<P>
If you want to get all possible values for an <CODE>SET</CODE> column, you should
use: <CODE>SHOW COLUMNS FROM table_name LIKE set_column_name</CODE> and parse
the <CODE>SET</CODE> definition in the second column.

</P>
<P>
<A NAME="IDX249"></A>
<A NAME="IDX250"></A>


<H3><A NAME="Choosing_types" HREF="manual_toc.html#Choosing_types">7.2.8  Choosing the right type for a column</A></H3>

<P>
For the most efficient use of storage, try to use the most precise type in
all cases. For example, if an integer column will be used for values in the
range between <CODE>1</CODE> and <CODE>99999</CODE>, <CODE>MEDIUMINT UNSIGNED</CODE> is the
best type.

</P>
<P>
Accurate representation of monetary values is a common problem. In
<STRONG>MySQL</STRONG>, you should use the <CODE>DECIMAL</CODE> type. This is stored as
a string, so no loss of accuracy should occur. If accuracy is not
too important, the <CODE>DOUBLE</CODE> type may also be good enough.

</P>
<P>
For high precision, you can always convert to a fixed-point type
stored in a <CODE>BIGINT</CODE>. This allows you to do all calculations with
integers and convert results back to floating-point values only when necessary.

</P>
<P>
See section <A HREF="manual.html#Row_format">10.16  What are the different row formats? Or, when should <CODE>VARCHAR/CHAR</CODE> be used?</A>.

</P>
<P>
<A NAME="IDX251"></A>
<A NAME="IDX252"></A>


<H3><A NAME="Indexes" HREF="manual_toc.html#Indexes">7.2.9  Column indexes</A></H3>

<P>
All <STRONG>MySQL</STRONG> column types can be indexed except <CODE>BLOB</CODE>
and <CODE>TEXT</CODE> types. Use of indexes on the relevant columns is the best
way to improve the performance of <CODE>SELECT</CODE> operations.

</P>
<P>
A table may have up to 16 indexes.  The maximum index length is
256 bytes, although this may be changed when compiling <STRONG>MySQL</STRONG>.

</P>
<P>
You cannot index a column that may contain <CODE>NULL</CODE> values, so indexed
columns must be declared <CODE>NOT NULL</CODE>.

</P>
<P>
For <CODE>CHAR</CODE> and <CODE>VARCHAR</CODE> columns, you can index a prefix of a
column.  This is much faster and requires less disk space than indexing the
whole column.  The syntax to use in the <CODE>CREATE TABLE</CODE> statement to
index a column prefix looks like this:

</P>

<PRE>
KEY index_name (col_name(length))
</PRE>

<P>
The example below creates an index for the first 10 characters of the
<CODE>name</CODE> column:

</P>

<PRE>
mysql&#62; CREATE TABLE test (
           name CHAR(200) NOT NULL,
           KEY index_name (name(10)));
</PRE>



<H3><A NAME="Multiple-column_indexes" HREF="manual_toc.html#Multiple-column_indexes">7.2.10  Multiple-column indexes</A></H3>

<P>
<STRONG>MySQL</STRONG> can create indexes on multiple columns.  An index may
consist of up to 15 columns. (On <CODE>CHAR</CODE> and <CODE>VARCHAR</CODE> columns you
can also use a prefix of the column as a part of an index).

</P>
<P>
A multiple-column index can be considered a sorted array containing values
that are created by concatenating the values of the indexed columns.

</P>
<P>
<STRONG>MySQL</STRONG> uses multiple-column indexes in such a way that queries are
fast when you specify a known quantity for the first column of the index in a
<CODE>WHERE</CODE> clause, even if you don't specify values for the other columns.

</P>
<P>
Suppose a table is created using the following specification:

</P>

<PRE>
mysql&#62; CREATE TABLE test (
           id INT NOT NULL,
           last_name CHAR(30) NOT NULL,
           first_name CHAR(30) NOT NULL,
           PRIMARY KEY (id),
           INDEX name (last_name,first_name));
</PRE>

<P>
Then the index <CODE>name</CODE> is an index over <CODE>last_name</CODE> and
<CODE>first_name</CODE>.  The index will be used for queries that specify
values in a known range for <CODE>last_name</CODE>, or for both <CODE>last_name</CODE>
and <CODE>first_name</CODE>.
Therefore, the <CODE>name</CODE> index will be used in the following queries:

</P>

<PRE>
mysql&#62; SELECT * FROM test WHERE last_name="Widenius";

mysql&#62; SELECT * FROM test WHERE last_name="Widenius"
                          AND first_name="Michael";

mysql&#62; SELECT * FROM test WHERE last_name="Widenius"
                          AND (first_name="Michael" OR first_name="Monty");

mysql&#62; SELECT * FROM test WHERE last_name="Widenius"
                          AND first_name &#62;="M" AND first_name &#60; "N";
</PRE>

<P>
However, the <CODE>name</CODE> index will NOT be used in the following queries:

</P>

<PRE>
mysql&#62; SELECT * FROM test WHERE first_name="Michael";

mysql&#62; SELECT * FROM test WHERE last_name="Widenius"
                          OR first_name="Michael";
</PRE>

<P>
For more information on the manner in which <STRONG>MySQL</STRONG> uses indexes to
improve query performance, see section <A HREF="manual.html#MySQL_indexes">10.4  How <STRONG>MySQL</STRONG> uses indexes</A>.

</P>
<P>
<A NAME="IDX253"></A>


<H3><A NAME="Other-vendor_column_types" HREF="manual_toc.html#Other-vendor_column_types">7.2.11  Using column types from other database engines</A></H3>

<P>
To make it easier to use code written for SQL implementations from other
vendors, <STRONG>MySQL</STRONG> maps column types as shown in the table below.  These
mappings make it easier to move table definitions from other database engines
to <STRONG>MySQL</STRONG>:

</P>
<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><STRONG>Other vendor type</STRONG> </TD><TD> <STRONG>MySQL type</STRONG>
</TR NOSAVE>
<TR><TD><CODE>BINARY(NUM)</CODE> </TD><TD> <CODE>CHAR(NUM) BINARY</CODE>
</TR NOSAVE>
<TR><TD><CODE>CHAR VARYING(NUM)</CODE> </TD><TD> <CODE>VARCHAR(NUM)</CODE>
</TR NOSAVE>
<TR><TD><CODE>FLOAT4</CODE> </TD><TD> <CODE>FLOAT</CODE>
</TR NOSAVE>
<TR><TD><CODE>FLOAT8</CODE> </TD><TD> <CODE>DOUBLE</CODE>
</TR NOSAVE>
<TR><TD><CODE>INT1</CODE> </TD><TD> <CODE>TINYINT</CODE>
</TR NOSAVE>
<TR><TD><CODE>INT2</CODE> </TD><TD> <CODE>SMALLINT</CODE>
</TR NOSAVE>
<TR><TD><CODE>INT3</CODE> </TD><TD> <CODE>MEDIUMINT</CODE>
</TR NOSAVE>
<TR><TD><CODE>INT4</CODE> </TD><TD> <CODE>INT</CODE>
</TR NOSAVE>
<TR><TD><CODE>INT8</CODE> </TD><TD> <CODE>BIGINT</CODE>
</TR NOSAVE>
<TR><TD><CODE>LONG VARBINARY</CODE> </TD><TD> <CODE>MEDIUMBLOB</CODE>
</TR NOSAVE>
<TR><TD><CODE>LONG VARCHAR</CODE> </TD><TD> <CODE>MEDIUMTEXT</CODE>
</TR NOSAVE>
<TR><TD><CODE>MIDDLEINT</CODE> </TD><TD> <CODE>MEDIUMINT</CODE>
</TR NOSAVE>
<TR><TD><CODE>VARBINARY(NUM)</CODE> </TD><TD> <CODE>VARCHAR(NUM) BINARY</CODE>
</TR>
</TABLE>

<P>
Column type mapping occurs at table creation time.  If you create a table
with types used by other vendors and then issue a <CODE>DESCRIBE tbl_name</CODE>
statement, <STRONG>MySQL</STRONG> reports the table structure using the equivalent
<STRONG>MySQL</STRONG> types.

</P>
<P>
<A NAME="IDX254"></A>


<H2><A NAME="Functions" HREF="manual_toc.html#Functions">7.3  Functions for use in <CODE>SELECT</CODE> and <CODE>WHERE</CODE> clauses</A></H2>

<P>
A <CODE>select_expression</CODE> or <CODE>where_definition</CODE> in a SQL statement
can consist of any expression using the functions described below.

</P>
<P>
An expression that contains <CODE>NULL</CODE> always produces a <CODE>NULL</CODE> value
unless otherwise indicated in the documentation for the operators and
functions involved in the expression.

</P>
<P>
<STRONG>Note:</STRONG> There must be no whitespace between a function name and the
parenthesis following it. This helps the <STRONG>MySQL</STRONG> parser distinguish
between function calls and references to tables or columns that happen to
have the same name as a function.  Spaces around arguments are permitted,
though.

</P>
<P>
For the sake of brevity, examples display the output from the <CODE>mysql</CODE>
program in abbreviated form.  So this:

</P>

<PRE>
mysql&#62; select MOD(29,9);
1 rows in set (0.00 sec)

+-----------+
| mod(29,9) |
+-----------+
|         2 |
+-----------+
</PRE>

<P>
Is displayed like this:

</P>

<PRE>
mysql&#62; select MOD(29,9);
        -&#62; 2
</PRE>



<H3><A NAME="Grouping_functions" HREF="manual_toc.html#Grouping_functions">7.3.1  Grouping functions</A></H3>
<P>
<A NAME="IDX255"></A>
<DL COMPACT>

<DT><CODE>( ... )</CODE>
<DD>
<A NAME="IDX256"></A>
 <A NAME="IDX257"></A>
 
Parentheses. Use these to force the order of evaluation in an expression.

<PRE>
mysql&#62; select 1+2*3;
        -&#62; 7
mysql&#62; select (1+2)*3;
        -&#62; 9
</PRE>

</DL>



<H3><A NAME="Arithmetic_functions" HREF="manual_toc.html#Arithmetic_functions">7.3.2  Normal arithmetic operations</A></H3>

<P>
The usual arithmetic operators are available.  Note that in the case of
<CODE>-</CODE>, <CODE>+</CODE> and <CODE>*</CODE>, the result is calculated with <CODE>BIGINT</CODE>
(64-bit) precision if both arguments are integers!

</P>
<P>
<A NAME="IDX258"></A>
<DL COMPACT>

<DT><CODE>+</CODE>
<DD>
<A NAME="IDX259"></A>
 <A NAME="IDX260"></A>
 
Addition

<PRE>
mysql&#62; select 3+5;
        -&#62; 8
</PRE>

<A NAME="IDX261"></A>
<A NAME="IDX262"></A>
<DT><CODE>-</CODE>
<DD>
Subtraction

<PRE>
mysql&#62; select 3-5;
        -&#62; -2
</PRE>

<A NAME="IDX263"></A>
<A NAME="IDX264"></A>
<DT><CODE>*</CODE>
<DD>
Multiplication

<PRE>
mysql&#62; select 3*5;
        -&#62; 15
mysql&#62; select 18014398509481984*18014398509481984.0;
        -&#62; 324518553658426726783156020576256.0
mysql&#62; select 18014398509481984*18014398509481984;
        -&#62; 0
</PRE>

The result of the last expression is incorrect because the result of the integer
multiplication exceeds the 64-bit range of <CODE>BIGINT</CODE> calculations.

<A NAME="IDX265"></A>
<A NAME="IDX266"></A>
<DT><CODE>/</CODE>
<DD>
Division

<PRE>
mysql&#62; select 3/5;
        -&#62; 0.60
</PRE>

Division by zero produces a <CODE>NULL</CODE> result:


<PRE>
mysql&#62; select 102/(1-1);
        -&#62; NULL
</PRE>

A division will be calculated with <CODE>BIGINT</CODE> arithmetic only if performed
in a context where its result is converted to an integer!
</DL>

<P>
<A NAME="IDX267"></A>
<A NAME="IDX268"></A>
<A NAME="IDX269"></A>
<A NAME="IDX270"></A>


<H3><A NAME="Bit_functions" HREF="manual_toc.html#Bit_functions">7.3.3  Bit functions</A></H3>

<P>
<STRONG>MySQL</STRONG> uses <CODE>BIGINT</CODE> (64-bit) arithmetic for bit operations, so
these operators have a maximum range of 64 bits.

</P>
<DL COMPACT>

<DT><CODE>|</CODE>
<DD>
<A NAME="IDX271"></A>
 <A NAME="IDX272"></A>
 
Bitwise OR

<PRE>
mysql&#62; select 29 | 15;
        -&#62; 31
</PRE>

<A NAME="IDX273"></A>
<A NAME="IDX274"></A>
<DT><CODE>&#38;</CODE>
<DD>
Bitwise AND

<PRE>
mysql&#62; select 29 &#38; 15;
        -&#62; 13
</PRE>

<A NAME="IDX275"></A>
<DT><CODE>&#60;&#60;</CODE>
<DD>
Shifts a longlong (<CODE>BIGINT</CODE>) number to the left.

<PRE>
mysql&#62; select 1 &#60;&#60; 2
        -&#62; 4
</PRE>

<A NAME="IDX276"></A>
<DT><CODE>&#62;&#62;</CODE>
<DD>
Shifts a longlong (<CODE>BIGINT</CODE>) number to the right.

<PRE>
mysql&#62; select 4 &#62;&#62; 2
        -&#62; 1
</PRE>

<A NAME="IDX277"></A>
<DT><CODE>BIT_COUNT(N)</CODE>
<DD>
Returns the number of bits that are set in the argument <CODE>N</CODE>.

<PRE>
mysql&#62; select BIT_COUNT(29);
        -&#62; 4
</PRE>

</DL>

<P>
<A NAME="IDX278"></A>
<A NAME="IDX279"></A>


<H3><A NAME="Logical_functions" HREF="manual_toc.html#Logical_functions">7.3.4  Logical operations</A></H3>

<P>
All logical functions return <CODE>1</CODE> (TRUE) or <CODE>0</CODE> (FALSE).

</P>
<DL COMPACT>

<DT><CODE>NOT</CODE>
<DD>
<A NAME="IDX280"></A>
 <A NAME="IDX281"></A>
 
<DT><CODE>!</CODE>
<DD>
Logical NOT. Returns <CODE>1</CODE> if the argument is <CODE>0</CODE>, otherwise returns
<CODE>0</CODE>.
Exception: <CODE>NOT NULL</CODE> returns <CODE>NULL</CODE>.

<PRE>
mysql&#62; select NOT 1;
        -&#62; 0
mysql&#62; select NOT NULL;
        -&#62; NULL
mysql&#62; select ! (1+1);
        -&#62; 0
mysql&#62; select ! 1+1;
        -&#62; 1
</PRE>

The last example returns <CODE>1</CODE> because the expression evaluates
the same way as <CODE>(!1)+1</CODE>.

<A NAME="IDX282"></A>
<A NAME="IDX283"></A>
<DT><CODE>OR</CODE>
<DD>
<DT><CODE>||</CODE>
<DD>
Logical OR. Returns <CODE>1</CODE> if either argument is not <CODE>0</CODE> and not
<CODE>NULL</CODE>.

<PRE>
mysql&#62; select 1 || 0;
        -&#62; 1
mysql&#62; select 0 || 0;
        -&#62; 0
mysql&#62; select 1 || NULL;
        -&#62; 1

</PRE>

<A NAME="IDX284"></A>
<A NAME="IDX285"></A>
<DT><CODE>AND</CODE>
<DD>
<DT><CODE>&#38;&</CODE>
<DD>
Logical AND. Returns <CODE>0</CODE> if either argument is <CODE>0</CODE> or <CODE>NULL</CODE>,
otherwise returns <CODE>1</CODE>.

<PRE>
mysql&#62; select 1 &#38;& NULL;
        -&#62; 0
mysql&#62; select 1 &#38;& 0;
        -&#62; 0
</PRE>

</DL>

<P>
<A NAME="IDX286"></A>
<A NAME="IDX287"></A>
<A NAME="IDX288"></A>


<H3><A NAME="Comparison_functions" HREF="manual_toc.html#Comparison_functions">7.3.5  Comparison operators</A></H3>

<P>
Comparison operations result in a value of <CODE>1</CODE> (TRUE), <CODE>0</CODE> (FALSE)
or <CODE>NULL</CODE>. These functions work for both numbers and strings.  Strings
are automatically converted to numbers and numbers to strings as needed (as
in Perl).

</P>
<P>
<STRONG>MySQL</STRONG> performs comparisons using the following
rules:

</P>

<UL>
<LI>

If one or both arguments are <CODE>NULL</CODE>, the result of the comparison
is <CODE>NULL</CODE>.

<LI>

If both arguments in a comparison operation are strings, they are compared as
strings.

<LI>

If both arguments are integers, they are compared as integers.

<LI>

<A NAME="IDX289"></A>
<A NAME="IDX290"></A>
If one of the arguments is a <CODE>TIMESTAMP</CODE> or <CODE>DATETIME</CODE> column and
the other argument is a constant, the constant is converted
to a timestamp before the comparison is performed. This is done to be more
ODBC-friendly.

<LI>

In all other cases, the arguments are compared as floating-point (real) numbers.
</UL>

<P>
By default, string comparisons are done in case-independent fashion using the
current character set (ISO-8859-1 Latin1 by default, which also works
excellently for English).

</P>
<P>
The examples below illustrate conversion of strings to numbers for comparison
operations:

</P>

<PRE>
mysql&#62; SELECT 1 &#62; '6x';
         -&#62; 0
mysql&#62; SELECT 7 &#62; '6x';
         -&#62; 1
mysql&#62; SELECT 0 &#62; 'x6';
         -&#62; 0
mysql&#62; SELECT 0 = 'x6';
         -&#62; 1
</PRE>

<DL COMPACT>

<DT><CODE>=</CODE>
<DD>
<A NAME="IDX291"></A>
 <A NAME="IDX292"></A>
 
Equal

<PRE>
mysql&#62; select 1 = 0;
        -&#62; 0
mysql&#62; select '0' = 0;
        -&#62; 1
mysql&#62; select '0.0' = 0;
        -&#62; 1
mysql&#62; select '0.01' = 0;
        -&#62; 0
mysql&#62; select '.01' = 0.01;
        -&#62; 1
</PRE>

<A NAME="IDX293"></A>
<A NAME="IDX294"></A>
<A NAME="IDX295"></A>
<A NAME="IDX296"></A>
<DT><CODE>&#60;&#62;</CODE>
<DD>
<DT><CODE>!=</CODE>
<DD>
Not equal

<PRE>
mysql&#62; select '.01' &#60;&#62; '0.01';
        -&#62; 1
mysql&#62; select .01 &#60;&#62; '0.01';
        -&#62; 0
mysql&#62; select 'zapp' &#60;&#62; 'zappp';
        -&#62; 1
</PRE>

<A NAME="IDX297"></A>
<A NAME="IDX298"></A>
<DT><CODE>&#60;=</CODE>
<DD>
Less than or equal

<PRE>
mysql&#62; select 0.1 &#60;= 2;
        -&#62; 1
</PRE>

<A NAME="IDX299"></A>
<A NAME="IDX300"></A>
<DT><CODE>&#60;</CODE>
<DD>
Less than

<PRE>
mysql&#62; select 2 &#60;= 2;
        -&#62; 1
</PRE>

<A NAME="IDX301"></A>
<A NAME="IDX302"></A>
<DT><CODE>&#62;=</CODE>
<DD>
Greater than or equal

<PRE>
mysql&#62; select 2 &#62;= 2;
        -&#62; 1
</PRE>

<A NAME="IDX303"></A>
<A NAME="IDX304"></A>
<DT><CODE>&#62;</CODE>
<DD>
Greater than

<PRE>
mysql&#62; select 2 &#62; 2;
        -&#62; 0
</PRE>

<A NAME="IDX305"></A>
<DT><CODE>&#60;=&#62;</CODE>
<DD>
Null safe equal

<PRE>
mysql&#62; select 1 &#60;=&#62; 1, NULL &#60;=&#62; NULL, 1 &#60;=&#62; NULL;
        -&#62; 1 1 0
</PRE>

<A NAME="IDX306"></A>
<DT><CODE>ISNULL(expr)</CODE>
<DD>
If <CODE>expr</CODE> is <CODE>NULL</CODE>, <CODE>ISNULL()</CODE> returns <CODE>1</CODE>, otherwise
it returns <CODE>0</CODE>.

<PRE>
mysql&#62; select ISNULL(1+1);
        -&#62; 0
mysql&#62; select ISNULL(1/0);
        -&#62; 1
</PRE>

Note that a comparison of <CODE>NULL</CODE> values using <CODE>=</CODE> will always be
false!

<A NAME="IDX307"></A>
<DT><CODE>expr BETWEEN min AND max</CODE>
<DD>
If <CODE>expr</CODE> is greater than or equal to <CODE>min</CODE> and <CODE>expr</CODE> is less
than or equal to <CODE>max</CODE>, <CODE>BETWEEN</CODE> returns <CODE>1</CODE>, otherwise it
returns <CODE>0</CODE>.  This is equivalent to the expression <CODE>(min &#60;= expr
AND expr &#60;= max)</CODE> if all the arguments are of the same type.  The first
argument (<CODE>expr</CODE>) determines how the comparison is performed.  If
<CODE>expr</CODE> is a string expression, a case-insensitive string comparison is
done.  If <CODE>expr</CODE> is a binary string, a case-sensitive string comparison
is done.  If <CODE>expr</CODE> is an integer expression, an integer comparison is
done.  Otherwise, a floating-point (real) comparison is done.


<PRE>
mysql&#62; select 1 BETWEEN 2 AND 3;
        -&#62; 0
mysql&#62; select 'b' BETWEEN 'a' AND 'c';
        -&#62; 1
mysql&#62; select 2 BETWEEN 2 AND '3';
        -&#62; 1
mysql&#62; select 2 BETWEEN 2 AND 'x-3';
        -&#62; 0
</PRE>

<A NAME="IDX308"></A>
<DT><CODE>expr IN (value,...)</CODE>
<DD>
Returns <CODE>1</CODE> if <CODE>expr</CODE> is any of the values in the <CODE>IN</CODE> list,
else returns <CODE>0</CODE>.  If all values are constants, then all values are
evaluated according to the type of <CODE>expr</CODE> and sorted. The search for the
item is then done using a binary search. This means <CODE>IN</CODE> is very quick
if the <CODE>IN</CODE> value list consists entirely of constants.  If <CODE>expr</CODE>
is a case-sensitive string expression, the string comparison is performed in
case-sensitive fashion.


<PRE>
mysql&#62; select 2 IN (0,3,5,'wefwf');
        -&#62; 0
mysql&#62; select 'wefwf' IN (0,3,5,'wefwf');
        -&#62; 1
</PRE>

<A NAME="IDX309"></A>
<DT><CODE>expr NOT IN (value,...)</CODE>
<DD>
Same as <CODE>NOT (expr IN (value,...))</CODE>.

<A NAME="IDX310"></A>
<DT><CODE>INTERVAL(N,N1,N2,N3,...)</CODE>
<DD>
Returns <CODE>0</CODE> if <CODE>N</CODE> &#60; <CODE>N1</CODE>, <CODE>1</CODE> if <CODE>N</CODE> &#60; <CODE>N2</CODE>
and so on. All arguments are treated as numbers.  It is required that
<CODE>N1</CODE> &#60; <CODE>N2</CODE> &#60; <CODE>N3</CODE> &#60; <CODE>...</CODE> &#60; <CODE>Nn</CODE> for this function
to work correctly. This is because a binary search is used (very fast).


<PRE>
mysql&#62; select INTERVAL(23, 1, 15, 17, 30, 44, 200);
        -&#62; 3
mysql&#62; select INTERVAL(10, 1, 10, 100, 1000);
        -&#62; 2
mysql&#62; select INTERVAL(22, 23, 30, 44, 200);
        -&#62; 0
</PRE>

</DL>

<P>
<A NAME="IDX311"></A>
<A NAME="IDX312"></A>


<H3><A NAME="String_comparison_functions" HREF="manual_toc.html#String_comparison_functions">7.3.6  String comparison functions</A></H3>

<P>
<A NAME="IDX313"></A>
<A NAME="IDX314"></A>
Normally, if any expression in a string comparison is case sensitive, the
comparison is performed in case-sensitive fashion.

</P>
<DL COMPACT>

<DT><CODE>expr1 LIKE expr2 [ESCAPE 'escape-char']</CODE>
<DD>
<A NAME="IDX315"></A>
 
SQL simple regular expression comparison. Returns <CODE>1</CODE> (TRUE) or <CODE>0</CODE>
(FALSE).  With <CODE>LIKE</CODE> you can use the following two wildcard characters:

<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><CODE>%</CODE> </TD><TD> Matches any number of characters, even zero characters
</TR NOSAVE>
<TR><TD><CODE>_</CODE> </TD><TD> Matches exactly one character
</TR>
</TABLE>


<PRE>
mysql&#62; select 'David!' LIKE 'David_';
        -&#62; 1
mysql&#62; select 'David!' LIKE '%D%v%';
        -&#62; 1
</PRE>

To test for literal instances of a wildcard character, precede the character
with the escape character.  If you don't specify the <CODE>ESCAPE</CODE> character,
<SAMP>`\'</SAMP> is assumed:

<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><CODE>\%</CODE> </TD><TD> Matches one <CODE>%</CODE> character
</TR NOSAVE>
<TR><TD><CODE>\_</CODE> </TD><TD> Matches one <CODE>_</CODE> character
</TR>
</TABLE>


<PRE>
mysql&#62; select 'David!' LIKE 'David\_';
        -&#62; 0
mysql&#62; select 'David_' LIKE 'David\_';
        -&#62; 1
</PRE>

To specify a different escape character, use the <CODE>ESCAPE</CODE> clause:


<PRE>
mysql&#62; select 'David_' LIKE 'David|_' ESCAPE '|';
        -&#62; 1
</PRE>

<CODE>LIKE</CODE> is allowed on numeric expressions! (This is a <STRONG>MySQL</STRONG>
extension to the ANSI SQL <CODE>LIKE</CODE>.)


<PRE>
mysql&#62; select 10 LIKE '1%';
        -&#62; 1
</PRE>

Note: Because <STRONG>MySQL</STRONG> uses the C escape syntax in strings (e.g.,
<SAMP>`\n'</SAMP>), you must double any <SAMP>`\'</SAMP> that you use in your <CODE>LIKE</CODE>
strings.  For example, to search for <SAMP>`\n'</SAMP>, specify it as <SAMP>`\\n'</SAMP>.  To
search for <SAMP>`\'</SAMP>, specify it as <SAMP>`\\\\'</SAMP> (the backslashes are stripped
once by the parser, and another time when the pattern match is done, leaving
a single backslash to be matched).

<A NAME="IDX316"></A>
<DT><CODE>expr1 NOT LIKE expr2 [ESCAPE 'escape-char']</CODE>
<DD>
Same as <CODE>NOT (expr1 LIKE expr2 [ESCAPE 'escape-char'])</CODE>.

<A NAME="IDX317"></A>
<A NAME="IDX318"></A>
<A NAME="IDX319"></A>
<A NAME="IDX320"></A>
<DT><CODE>expr REGEXP pat</CODE>
<DD>
<DT><CODE>expr RLIKE pat</CODE>
<DD>
Performs a pattern match of a string expression <CODE>expr</CODE> against a pattern
<CODE>pat</CODE>.  The pattern can be an extended regular expression.
See section <A HREF="manual.html#Regexp">H  Description of <STRONG>MySQL</STRONG> regular expression syntax</A>.  Returns <CODE>1</CODE> if <CODE>expr</CODE> matches <CODE>pat</CODE>, otherwise
returns <CODE>0</CODE>.  <CODE>RLIKE</CODE> is a synonym for <CODE>REGEXP</CODE>, provided for
<CODE>mSQL</CODE> compatibility. Note: Because <STRONG>MySQL</STRONG> uses the C escape
syntax in strings (e.g., <SAMP>`\n'</SAMP>), you must double any <SAMP>`\'</SAMP> that you
use in your <CODE>REGEXP</CODE> strings.


<PRE>
mysql&#62; select 'Monty!' REGEXP 'm%y%%';
        -&#62; 0
mysql&#62; select 'Monty!' REGEXP '.*';
        -&#62; 1
mysql&#62; select 'new*\n*line' REGEXP 'new\\*.\\*line';
        -&#62; 1
</PRE>

<DT><CODE></CODE>
<DD>
<CODE>REGEXP</CODE> and <CODE>RLIKE</CODE> use the current character set (ISO-8859-1
Latin1 by default) when deciding the type of a character.

<A NAME="IDX321"></A>
<DT><CODE>expr NOT REGEXP expr</CODE>
<DD>
Same as <CODE>NOT (expr REGEXP expr)</CODE>.

<A NAME="IDX322"></A>
<DT><CODE>STRCMP(expr1,expr2)</CODE>
<DD>
<CODE>STRCMP()</CODE>
returns <CODE>0</CODE> if the strings are the same, <CODE>-1</CODE> if the first
argument is smaller than the second according to the current sort order,
and <CODE>1</CODE> otherwise.


<PRE>
mysql&#62; select STRCMP('text', 'text2');
        -&#62; -1
mysql&#62; select STRCMP('text2', 'text');
        -&#62; 1
mysql&#62; select STRCMP('text', 'text');
        -&#62; 0
</PRE>

</DL>

<P>
<A NAME="IDX323"></A>


<H3><A NAME="Casts" HREF="manual_toc.html#Casts">7.3.7  Cast operators</A></H3>

<DL COMPACT>

<DT><CODE><CODE>BINARY</CODE></CODE>
<DD>
<A NAME="IDX324"></A>
 
The <CODE>BINARY</CODE> operator casts the string following it to a binary string.  This is
an easy way to force a column comparison to be case independent even if
the column isn't defined as <CODE>BINARY</CODE> or <CODE>BLOB</CODE>.

<PRE>
mysql&#62; select "a" = "A";
        -&#62; 1
mysql&#62; select BINARY "a" = "A";
        -&#62; 0
</PRE>

<CODE>BINARY</CODE> was introduced in <STRONG>MySQL</STRONG> 3.23.0
</DL>

<P>
<A NAME="IDX325"></A>
<A NAME="IDX326"></A>


<H3><A NAME="Control_flow_functions" HREF="manual_toc.html#Control_flow_functions">7.3.8  Control flow functions</A></H3>

<DL COMPACT>

<DT><CODE>IFNULL(expr1,expr2)</CODE>
<DD>
<A NAME="IDX327"></A>
 
If <CODE>expr1</CODE> is not <CODE>NULL</CODE>, <CODE>IFNULL()</CODE> returns <CODE>expr1</CODE>,
else it returns <CODE>expr2</CODE>.  <CODE>IFNULL()</CODE> returns a numeric or string
value, depending on the context in which it is used.

<PRE>
mysql&#62; select IFNULL(1,0);
        -&#62; 1
mysql&#62; select IFNULL(0,10);
        -&#62; 0
mysql&#62; select IFNULL(1/0,10);
        -&#62; 10
mysql&#62; select IFNULL(1/0,'yes');
        -&#62; 'yes'
</PRE>

<A NAME="IDX328"></A>
<DT><CODE>IF(expr1,expr2,expr3)</CODE>
<DD>
If <CODE>expr1</CODE> is TRUE (<CODE>expr1 &#60;&#62; 0</CODE> and <CODE>expr1 &#60;&#62; NULL</CODE>) then
<CODE>IF()</CODE> returns <CODE>expr2</CODE>, else it returns <CODE>expr3</CODE>.
<CODE>IFNULL()</CODE> returns a numeric or string value, depending on the context
in which it is used.


<PRE>
mysql&#62; select IF(1&#62;2,2,3);
        -&#62; 3
mysql&#62; select IF(1&#60;2,'yes','no');
        -&#62; 'yes'
mysql&#62; select IF(strcmp('test','test1'),'yes','no');
        -&#62; 'no'
</PRE>

<CODE>expr1</CODE> is evaluated as an integer value, which means that if you are
testing floating-point or string values, you should do so using a comparison
operation.


<PRE>
mysql&#62; select IF(0.1,1,0);
        -&#62; 0
mysql&#62; select IF(0.1&#60;&#62;0,1,0);
        -&#62; 1
</PRE>

In the first case above, <CODE>IF(0.1)</CODE> returns <CODE>0</CODE> because <CODE>0.1</CODE>
is converted to an integer value, resulting in a test of <CODE>IF(0)</CODE>.  This
may not be what you expect.  In the second case, the comparison tests the
original floating-point value to see whether it is non-zero.  The result
of the comparison is used as an integer.
</DL>

<P>
<A NAME="IDX329"></A>
<A NAME="IDX330"></A>


<H3><A NAME="Mathematical_functions" HREF="manual_toc.html#Mathematical_functions">7.3.9  Mathematical functions</A></H3>
<P>
All mathematical functions return <CODE>NULL</CODE> in case of an error.

</P>
<DL COMPACT>

<DT><CODE>-</CODE>
<DD>
<A NAME="IDX331"></A>
 <A NAME="IDX332"></A>
 <A NAME="IDX333"></A>
 
Unary minus. Changes the sign of the argument.

<PRE>
mysql&#62; select - 2;
        -&#62; -2
</PRE>

Note that if this operator is used with a <CODE>BIGINT</CODE>, the return value is a
<CODE>BIGINT</CODE>!  This means that you should avoid using <CODE>-</CODE> on integers that
may have the value of <CODE>-2^63</CODE>!

<A NAME="IDX334"></A>
<DT><CODE>ABS(X)</CODE>
<DD>
Returns the absolute value of <CODE>X</CODE>.

<PRE>
mysql&#62; select ABS(2);
        -&#62; 2
mysql&#62; select ABS(-32);
        -&#62; 32
</PRE>

This function is safe to use with <CODE>BIGINT</CODE> values.

<A NAME="IDX335"></A>
<DT><CODE>SIGN(X)</CODE>
<DD>
Returns the sign of the argument as <CODE>-1</CODE>, <CODE>0</CODE> or <CODE>1</CODE>, depending
on whether <CODE>X</CODE> is negative, zero, or positive.

<PRE>
mysql&#62; select SIGN(-32);
        -&#62; -1
mysql&#62; select SIGN(0);
        -&#62; 0
mysql&#62; select SIGN(234);
        -&#62; 1
</PRE>

<A NAME="IDX336"></A>
<A NAME="IDX337"></A>
<A NAME="IDX338"></A>
<DT><CODE>MOD(N,M)</CODE>
<DD>
<DT><CODE>%</CODE>
<DD>
Modulo (like the <CODE>%</CODE> operator in C).
Returns the remainder of <CODE>N</CODE> divided by <CODE>M</CODE>.

<PRE>
mysql&#62; select MOD(234, 10);
        -&#62; 4
mysql&#62; select 253 % 7;
        -&#62; 1
mysql&#62; select MOD(29,9);
        -&#62; 2
</PRE>

This function is safe to use with <CODE>BIGINT</CODE> values.

<A NAME="IDX339"></A>
<DT><CODE>FLOOR(X)</CODE>
<DD>
Returns the largest integer value not greater than <CODE>X</CODE>.

<PRE>
mysql&#62; select FLOOR(1.23);
        -&#62; 1
mysql&#62; select FLOOR(-1.23);
        -&#62; -2
</PRE>

Note that the return value is converted to a <CODE>BIGINT</CODE>!

<A NAME="IDX340"></A>
<DT><CODE>CEILING(X)</CODE>
<DD>
Returns the smallest integer value not less than <CODE>X</CODE>.

<PRE>
mysql&#62; select CEILING(1.23);
        -&#62; 2
mysql&#62; select CEILING(-1.23);
        -&#62; -1
</PRE>

Note that the return value is converted to a <CODE>BIGINT</CODE>!

<A NAME="IDX341"></A>
<DT><CODE>ROUND(X)</CODE>
<DD>
Returns the argument <CODE>X</CODE>, rounded to an integer.

<PRE>
mysql&#62; select ROUND(-1.23);
        -&#62; -1
mysql&#62; select ROUND(-1.58);
        -&#62; -2
mysql&#62; select ROUND(1.58);
        -&#62; 2
</PRE>

Note that the return value is converted to a <CODE>BIGINT</CODE>!

<A NAME="IDX342"></A>
<DT><CODE>ROUND(X,D)</CODE>
<DD>
Returns the argument <CODE>X</CODE>, rounded to a number with <CODE>D</CODE> decimals.
If <CODE>D</CODE> is <CODE>0</CODE>, the result will have no decimal point or fractional
part.


<PRE>
mysql&#62; select ROUND(1.298, 1);
        -&#62; 1.3
mysql&#62; select ROUND(1.298, 0);
        -&#62; 1
</PRE>

Note that the return value is converted to a <CODE>BIGINT</CODE>!

<A NAME="IDX343"></A>
<DT><CODE>EXP(X)</CODE>
<DD>
Returns the value of <CODE>e</CODE> (the base of natural logarithms) raised to
the power of <CODE>X</CODE>.

<PRE>
mysql&#62; select EXP(2);
        -&#62; 7.389056
mysql&#62; select EXP(-2);
        -&#62; 0.135335
</PRE>

<A NAME="IDX344"></A>
<DT><CODE>LOG(X)</CODE>
<DD>
Returns the natural logarithm of <CODE>X</CODE>.

<PRE>
mysql&#62; select LOG(2);
        -&#62; 0.693147
mysql&#62; select LOG(-2);
        -&#62; NULL
</PRE>

If you want the log of a number <CODE>X</CODE> to some arbitary base <CODE>B</CODE>, use
the formula <CODE>LOG(X)/LOG(B)</CODE>.

<A NAME="IDX345"></A>
<DT><CODE>LOG10(X)</CODE>
<DD>
Returns the base-10 logarithm of <CODE>X</CODE>.

<PRE>
mysql&#62; select LOG10(2);
        -&#62; 0.301030
mysql&#62; select LOG10(100);
        -&#62; 2.000000
mysql&#62; select LOG10(-100);
        -&#62; NULL
</PRE>

<A NAME="IDX346"></A>
<A NAME="IDX347"></A>
<DT><CODE>POW(X,Y)</CODE>
<DD>
<DT><CODE>POWER(X,Y)</CODE>
<DD>
Returns the value of <CODE>X</CODE> raised to the power of <CODE>Y</CODE>.

<PRE>
mysql&#62; select POW(2,2);
        -&#62; 4.000000
mysql&#62; select POW(2,-2);
        -&#62; 0.250000
</PRE>

<A NAME="IDX348"></A>
<DT><CODE>SQRT(X)</CODE>
<DD>
Returns the non-negative square root of <CODE>X</CODE>.

<PRE>
mysql&#62; select SQRT(4);
        -&#62; 2.000000
mysql&#62; select SQRT(20);
        -&#62; 4.472136
</PRE>

<A NAME="IDX349"></A>
<DT><CODE>PI()</CODE>
<DD>
Returns the value of PI.

<PRE>
mysql&#62; select PI();
        -&#62; 3.141593
</PRE>

<A NAME="IDX350"></A>
<DT><CODE>COS(X)</CODE>
<DD>
Returns the cosine of <CODE>X</CODE>, where <CODE>X</CODE> is given in radians.

<PRE>
mysql&#62; select COS(PI());
        -&#62; -1.000000
</PRE>

<A NAME="IDX351"></A>
<DT><CODE>SIN(X)</CODE>
<DD>
Returns the sine of <CODE>X</CODE>, where <CODE>X</CODE> is given in radians.

<PRE>
mysql&#62; select SIN(PI());
        -&#62; 0.000000
</PRE>

<A NAME="IDX352"></A>
<DT><CODE>TAN(X)</CODE>
<DD>
Returns the tangent of <CODE>X</CODE>, where <CODE>X</CODE> is given in radians.

<PRE>
mysql&#62; select TAN(PI()+1);
        -&#62; 1.557408
</PRE>

<A NAME="IDX353"></A>
<DT><CODE>ACOS(X)</CODE>
<DD>
Returns the arc cosine of <CODE>X</CODE>, that is, the value whose cosine is
<CODE>X</CODE>. Returns <CODE>NULL</CODE> if <CODE>X</CODE> is not in the range <CODE>-1</CODE> to
<CODE>1</CODE>.

<PRE>
mysql&#62; select ACOS(1);
        -&#62; 0.000000
mysql&#62; select ACOS(1.0001);
        -&#62; NULL
mysql&#62; select ACOS(0);
        -&#62; 1.570796
</PRE>

<A NAME="IDX354"></A>
<DT><CODE>ASIN(X)</CODE>
<DD>
Returns the arc sine of <CODE>X</CODE>, that is, the value whose sine is
<CODE>X</CODE>. Returns <CODE>NULL</CODE> if <CODE>X</CODE> is not in the range <CODE>-1</CODE> to
<CODE>1</CODE>.

<PRE>
mysql&#62; select ASIN(0.2);
        -&#62; 0.201358
mysql&#62; select ASIN('foo');
        -&#62; 0.000000
</PRE>

<A NAME="IDX355"></A>
<DT><CODE>ATAN(X)</CODE>
<DD>
Returns the arc tangent of <CODE>X</CODE>, that is, the value whose tangent is
<CODE>X</CODE>.

<PRE>
mysql&#62; select ATAN(2);
        -&#62; 1.107149
mysql&#62; select ATAN(-2);
        -&#62; -1.107149
</PRE>

<A NAME="IDX356"></A>
<DT><CODE>ATAN2(X,Y)</CODE>
<DD>
Returns the arc tangent of the two variables <CODE>X</CODE> and <CODE>Y</CODE>. It is
similar to calculating the arc tangent of <CODE>Y / X</CODE>, except that the
signs of both arguments are used to determine the quadrant of the
result.

<PRE>
mysql&#62; select ATAN(-2,2);
        -&#62; -0.785398
mysql&#62; select ATAN(PI(),0);
        -&#62; 1.570796
</PRE>

<A NAME="IDX357"></A>
<DT><CODE>COT(X)</CODE>
<DD>
Returns the cotangent of <CODE>X</CODE>.

<PRE>
mysql&#62; select COT(12);
        -&#62; -1.57267341
mysql&#62; select COT(0);
        -&#62; NULL
</PRE>

<A NAME="IDX358"></A>
<DT><CODE>RAND()</CODE>
<DD>
<DT><CODE>RAND(N)</CODE>
<DD>
Returns a random floating-point value in the range <CODE>0</CODE> to <CODE>1.0</CODE>.
If an integer argument <CODE>N</CODE> is specified, it is used as the seed value.

<PRE>
mysql&#62; select RAND();
        -&#62; 0.5925
mysql&#62; select RAND(20);
        -&#62; 0.1811
mysql&#62; select RAND(20);
        -&#62; 0.1811
mysql&#62; select RAND();
        -&#62; 0.2079
mysql&#62; select RAND();
        -&#62; 0.7888
</PRE>

You can't use a column with <CODE>RAND()</CODE> values in an <CODE>ORDER BY</CODE>
clause, because <CODE>ORDER BY</CODE> would evaluate the column multiple times.

<A NAME="IDX359"></A>
<DT><CODE>LEAST(X,Y,...)</CODE>
<DD>
With two or more arguments, returns the smallest (minimum-valued) argument.
The arguments are compared using the following rules:


<UL>
<LI>

If the return value is used in an <CODE>INTEGER</CODE> context, or all arguments
are integer-valued, they are compared as integers.

<LI>

If the return value is used in a <CODE>REAL</CODE> context, or all arguments are
real-valued, they are compared as reals.

<LI>

If any argument is a case-sensitive string, the arguments are compared
as case-sensitive strings.

<LI>

In other cases, the arguments are compared as case-insensitive strings.
</UL>


<PRE>
mysql&#62; select LEAST(2,0);
        -&#62; 0
mysql&#62; select LEAST(34.0,3.0,5.0,767.0);
        -&#62; 3.0
mysql&#62; select LEAST("B","A","C");
        -&#62; "A"
</PRE>

In <STRONG>MySQL</STRONG> versions prior to 3.22.5, you can use <CODE>MIN()</CODE> instead
of <CODE>LEAST</CODE>.

<A NAME="IDX360"></A>
<DT><CODE>GREATEST(X,Y,...)</CODE>
<DD>
Returns the largest (maximum-valued) argument.
The arguments are compared using the same rules as for <CODE>LEAST</CODE>.

<PRE>
mysql&#62; select GREATEST(2,0);
        -&#62; 2
mysql&#62; select GREATEST(34.0,3.0,5.0,767.0);
        -&#62; 767.0
mysql&#62; select GREATEST("B","A","C");
        -&#62; "C"
</PRE>

In <STRONG>MySQL</STRONG> versions prior to 3.22.5, you can use <CODE>MAX()</CODE> instead
of <CODE>GREATEST</CODE>.

<A NAME="IDX361"></A>
<DT><CODE>DEGREES(X)</CODE>
<DD>
Returns the argument <CODE>X</CODE>, converted from radians to degrees.

<PRE>
mysql&#62; select DEGREES(PI());
        -&#62; 180.000000
</PRE>

<A NAME="IDX362"></A>
<DT><CODE>RADIANS(X)</CODE>
<DD>
Returns the argument <CODE>X</CODE>, converted from degrees to radians.

<PRE>
mysql&#62; select RADIANS(90);
        -&#62; 1.570796
</PRE>

<A NAME="IDX363"></A>
<DT><CODE>TRUNCATE(X,D)</CODE>
<DD>
Returns the number <CODE>X</CODE>, truncated to <CODE>D</CODE> decimals.

<PRE>
mysql&#62; select TRUNCATE(1.223,1);
        -&#62; 1.2
mysql&#62; select TRUNCATE(1.999,1);
        -&#62; 1.9
mysql&#62; select TRUNCATE(1.999,0);
        -&#62; 1
</PRE>

</DL>

<P>
<A NAME="IDX364"></A>
<A NAME="IDX365"></A>


<H3><A NAME="String_functions" HREF="manual_toc.html#String_functions">7.3.10  String functions</A></H3>

<P>
String-valued functions return <CODE>NULL</CODE> if the length of the result would
be greater than the <CODE>max_allowed_packet</CODE> server parameter.  See section <A HREF="manual.html#Server_parameters">10.1  Tuning server parameters</A>.

</P>
<P>
For functions that operate on string positions,
the first position is numbered 1.

</P>
<DL COMPACT>

<DT><CODE>ASCII(str)</CODE>
<DD>
<A NAME="IDX366"></A>
 
Returns the ASCII code value of the leftmost character of the string
<CODE>str</CODE>. Returns <CODE>0</CODE> if <CODE>str</CODE> is the empty string.  Returns
<CODE>NULL</CODE> if <CODE>str</CODE> is <CODE>NULL</CODE>.


<PRE>
mysql&#62; select ASCII('2');
        -&#62; 50
mysql&#62; select ASCII(2);
        -&#62; 50
mysql&#62; select ASCII('dx');
        -&#62; 100
</PRE>

<A NAME="IDX367"></A>
<DT><CODE>CONV(N,from_base,to_base)</CODE>
<DD>
Converts numbers between different number bases.  Returns a string
representation of the number <CODE>N</CODE>, converted from base <CODE>from_base</CODE>
to base <CODE>to_base</CODE>.  Returns <CODE>NULL</CODE> if any argument is <CODE>NULL</CODE>.
The argument <CODE>N</CODE> is interpreted as an integer, but may be specified as
an integer or a string.  The minimum base is <CODE>2</CODE> and the maximum base is
<CODE>36</CODE>.  If <CODE>to_base</CODE> is a negative number, <CODE>N</CODE> is regarded as a
signed number.  Otherwise, <CODE>N</CODE> is treated as unsigned.  <CODE>CONV</CODE> works
with 64-bit precision.


<PRE>
mysql&#62; select CONV("a",16,2);
        -&#62; '1010'
mysql&#62; select CONV("6E",18,8);
        -&#62; '172'
mysql&#62; select CONV(-17,10,-18);
        -&#62; '-H'
mysql&#62; select CONV(10+"10"+'10'+0xa,10,10);
        -&#62; '40'
</PRE>

<A NAME="IDX368"></A>
<DT><CODE>BIN(N)</CODE>
<DD>
Returns a string representation of the binary value of <CODE>N</CODE>, where
<CODE>N</CODE> is a longlong (<CODE>BIGINT</CODE>) number.  This is equivalent to
<CODE>CONV(N,10,2)</CODE>.  Returns <CODE>NULL</CODE> if <CODE>N</CODE> is <CODE>NULL</CODE>.


<PRE>
mysql&#62; select BIN(12);
        -&#62; '1100'
</PRE>

<A NAME="IDX369"></A>
<DT><CODE>OCT(N)</CODE>
<DD>
Returns a string representation of the octal value of <CODE>N</CODE>, where
<CODE>N</CODE> is a longlong number.  This is equivalent to <CODE>CONV(N,10,8)</CODE>.
Returns <CODE>NULL</CODE> if <CODE>N</CODE> is <CODE>NULL</CODE>.


<PRE>
mysql&#62; select OCT(12);
        -&#62; '14'
</PRE>

<A NAME="IDX370"></A>
<DT><CODE>HEX(N)</CODE>
<DD>
Returns a string representation of the hexadecimal value of <CODE>N</CODE>, where
<CODE>N</CODE> is a longlong (<CODE>BIGINT</CODE>) number.  This is equivalent to
<CODE>CONV(N,10,16)</CODE>.  Returns <CODE>NULL</CODE> if <CODE>N</CODE> is <CODE>NULL</CODE>.


<PRE>
mysql&#62; select HEX(255);
        -&#62; 'FF'
</PRE>

<A NAME="IDX371"></A>
<DT><CODE>CHAR(N,...)</CODE>
<DD>
<CODE>CHAR()</CODE> interprets the arguments as integers and returns a string
consisting of the characters given by the ASCII code values of those
integers. <CODE>NULL</CODE> values are skipped.


<PRE>
mysql&#62; select CHAR(77,121,83,81,'76');
        -&#62; 'MySQL'
mysql&#62; select CHAR(77,77.3,'77.3');
        -&#62; 'MMM'
</PRE>

<A NAME="IDX372"></A>
<DT><CODE>CONCAT(X,Y,...)</CODE>
<DD>
Returns the string that results from concatenating the arguments.  Returns
<CODE>NULL</CODE> if any argument is <CODE>NULL</CODE>.  May have more than 2 arguments.

<PRE>
mysql&#62; select CONCAT('My', 'S', 'QL');
        -&#62; 'MySQL'
mysql&#62; select CONCAT('My', NULL, 'QL');
        -&#62; NULL
</PRE>

<A NAME="IDX373"></A>
<A NAME="IDX374"></A>
<A NAME="IDX375"></A>
<A NAME="IDX376"></A>
<DT><CODE>LENGTH(str)</CODE>
<DD>
<DT><CODE>OCTET_LENGTH(str)</CODE>
<DD>
<DT><CODE>CHAR_LENGTH(str)</CODE>
<DD>
<DT><CODE>CHARACTER_LENGTH(str)</CODE>
<DD>
Returns the length of the string <CODE>str</CODE>.

<PRE>
mysql&#62; select LENGTH('text');
        -&#62; 4
mysql&#62; select OCTET_LENGTH('text');
        -&#62; 4
</PRE>

<A NAME="IDX377"></A>
<A NAME="IDX378"></A>
<DT><CODE>LOCATE(substr,str)</CODE>
<DD>
<DT><CODE>POSITION(substr IN str)</CODE>
<DD>
Returns the position of the first occurrence of substring <CODE>substr</CODE>
in string <CODE>str</CODE>. Returns <CODE>0</CODE> if <CODE>substr</CODE> is not in <CODE>str</CODE>.

<PRE>
mysql&#62; select LOCATE('bar', 'foobarbar');
        -&#62; 4
mysql&#62; select LOCATE('xbar', 'foobar');
        -&#62; 0
</PRE>

<A NAME="IDX379"></A>
<DT><CODE>LOCATE(substr,str,pos)</CODE>
<DD>
Returns the position of the first occurrence of substring <CODE>substr</CODE> in
string <CODE>str</CODE>, starting at position <CODE>pos</CODE>.
Returns <CODE>0</CODE> if <CODE>substr</CODE> is not in <CODE>str</CODE>.

<PRE>
mysql&#62; select LOCATE('bar', 'foobarbar',5);
        -&#62; 7
</PRE>

<A NAME="IDX380"></A>
<DT><CODE>INSTR(str,substr)</CODE>
<DD>
Returns the position of the first occurrence of substring <CODE>substr</CODE> in
string <CODE>str</CODE>. This is the same as the two-argument form of
<CODE>LOCATE()</CODE>, except that the arguments are swapped.


<PRE>
mysql&#62; select INSTR('foobarbar', 'bar');
        -&#62; 4
mysql&#62; select INSTR('xbar', 'foobar');
        -&#62; 0
</PRE>

<A NAME="IDX381"></A>
<DT><CODE>LPAD(str,len,padstr)</CODE>
<DD>
Returns the string <CODE>str</CODE>, left-padded with the string
<CODE>padstr</CODE> until <CODE>str</CODE> is <CODE>len</CODE> characters long.

<PRE>
mysql&#62; select LPAD('hi',4,'??');
        -&#62; '??hi'
</PRE>

<A NAME="IDX382"></A>
<DT><CODE>RPAD(str,len,padstr)</CODE>
<DD>
Returns the string <CODE>str</CODE>, right-padded with the string
<CODE>padstr</CODE> until <CODE>str</CODE> is <CODE>len</CODE> characters long.

<PRE>
mysql&#62; select RPAD('hi',5,'?');
        -&#62; 'hi???'
</PRE>

<A NAME="IDX383"></A>
<DT><CODE>LEFT(str,len)</CODE>
<DD>
Returns the leftmost <CODE>len</CODE> characters from the string <CODE>str</CODE>.

<PRE>
mysql&#62; select LEFT('foobarbar', 5);
        -&#62; 'fooba'
</PRE>

<A NAME="IDX384"></A>
<A NAME="IDX385"></A>
<DT><CODE>RIGHT(str,len)</CODE>
<DD>
<DT><CODE>SUBSTRING(str FROM len)</CODE>
<DD>
Returns the rightmost <CODE>len</CODE> characters from the string <CODE>str</CODE>.

<PRE>
mysql&#62; select RIGHT('foobarbar', 4);
        -&#62; 'rbar'
mysql&#62; select SUBSTRING('foobarbar' FROM 4);
        -&#62; 'rbar'
</PRE>

<A NAME="IDX386"></A>
<A NAME="IDX387"></A>
<DT><CODE>SUBSTRING(str,pos,len)</CODE>
<DD>
<DT><CODE>SUBSTRING(str FROM pos FOR len)</CODE>
<DD>
<DT><CODE>MID(str,pos,len)</CODE>
<DD>
Returns a substring <CODE>len</CODE> characters long from string <CODE>str</CODE>,
starting at position <CODE>pos</CODE>.
The variant form that uses <CODE>FROM</CODE> is ANSI SQL92 syntax.

<PRE>
mysql&#62; select SUBSTRING('Quadratically',5,6);
        -&#62; 'ratica'
</PRE>

<A NAME="IDX388"></A>
<DT><CODE>SUBSTRING(str,pos)</CODE>
<DD>
Returns a substring from string <CODE>str</CODE> starting at position <CODE>pos</CODE>.

<PRE>
mysql&#62; select SUBSTRING('Quadratically',5);
        -&#62; 'ratically'
</PRE>

<A NAME="IDX389"></A>
<DT><CODE>SUBSTRING_INDEX(str,delim,count)</CODE>
<DD>
Returns the substring from string <CODE>str</CODE> after <CODE>count</CODE>
occurrences of the delimiter <CODE>delim</CODE>.
If <CODE>count</CODE> is positive, everything to the left of the final delimiter
(counting from the left) is returned.
If <CODE>count</CODE> is negative, everything to the right of the final delimiter
(counting from the right) is returned.

<PRE>
mysql&#62; select SUBSTRING_INDEX('www.mysql.com', '.', 2);
        -&#62; 'www.mysql'
mysql&#62; select SUBSTRING_INDEX('www.mysql.com', '.', -2);
        -&#62; 'mysql.com'
</PRE>

<A NAME="IDX390"></A>
<DT><CODE>LTRIM(str)</CODE>
<DD>
Returns the string <CODE>str</CODE> with leading space characters removed.

<PRE>
mysql&#62; select LTRIM('  barbar');
        -&#62; 'barbar'
</PRE>

<A NAME="IDX391"></A>
<DT><CODE>RTRIM(str)</CODE>
<DD>
Returns the string <CODE>str</CODE> with trailing space characters removed.

<PRE>
mysql&#62; select RTRIM('barbar   ');
        -&#62; 'barbar'
</PRE>

<A NAME="IDX392"></A>
<DT><CODE>TRIM([[BOTH | LEADING | TRAILING] [remstr] FROM] str)</CODE>
<DD>
Returns the string <CODE>str</CODE> with all <CODE>remstr</CODE> prefixes and/or suffixes
removed. If none of the specifiers <CODE>BOTH</CODE>, <CODE>LEADING</CODE> or
<CODE>TRAILING</CODE> are given, <CODE>BOTH</CODE> is assumed. If <CODE>remstr</CODE> is not
specified, spaces are removed.

<PRE>
mysql&#62; select TRIM('  bar   ');
        -&#62; 'bar'
mysql&#62; select TRIM(LEADING 'x' FROM 'xxxbarxxx');
        -&#62; 'barxxx'
mysql&#62; select TRIM(BOTH 'x' FROM 'xxxbarxxx');
        -&#62; 'bar'
mysql&#62; select TRIM(TRAILING 'xyz' FROM 'barxxyz');
        -&#62; 'barx'
</PRE>

<A NAME="IDX393"></A>
<DT><CODE>SOUNDEX(str)</CODE>
<DD>
Returns a soundex string from <CODE>str</CODE>. Two strings that sound "about the
same" should have identical soundex strings. A "standard" soundex string
is 4 characters long, but the <CODE>SOUNDEX()</CODE> function returns an
arbitrarily long string. You can use <CODE>SUBSTRING()</CODE> on the result to get
a "standard" soundex string.  All non-alphanumeric characters are ignored
in the given string. All international alpha characters outside the A-Z range
are treated as vowels.


<PRE>
mysql&#62; select SOUNDEX('Hello');
        -&#62; 'H400'
mysql&#62; select SOUNDEX('Quadratically');
        -&#62; 'Q36324'
</PRE>

<A NAME="IDX394"></A>
<DT><CODE>SPACE(N)</CODE>
<DD>
Returns a string consisting of <CODE>N</CODE> space characters.

<PRE>
mysql&#62; select SPACE(6);
        -&#62; '      '
</PRE>

<A NAME="IDX395"></A>
<DT><CODE>REPLACE(str,from_str,to_str)</CODE>
<DD>
Returns the string <CODE>str</CODE> with all all occurrences of the string
<CODE>from_str</CODE> replaced by the string <CODE>to_str</CODE>.


<PRE>
mysql&#62; select REPLACE('www.mysql.com', 'w', 'Ww');
        -&#62; 'WwWwww.mysql.com'
</PRE>

<A NAME="IDX396"></A>
<DT><CODE>REPEAT(str,count)</CODE>
<DD>
Returns a string consisting of the string <CODE>str</CODE> repeated <CODE>count</CODE>
times. If <CODE>count &#60;= 0</CODE>, returns an empty string. Returns <CODE>NULL</CODE> if
<CODE>str</CODE> or <CODE>count</CODE> are <CODE>NULL</CODE>.


<PRE>
mysql&#62; select REPEAT('MySQL', 3);
        -&#62; 'MySQLMySQLMySQL'
</PRE>

<A NAME="IDX397"></A>
<DT><CODE>REVERSE(str)</CODE>
<DD>
Returns the string <CODE>str</CODE> with the order of the characters reversed.

<PRE>
mysql&#62; select REVERSE('abc');
        -&#62; 'cba'
</PRE>

<A NAME="IDX398"></A>
<DT><CODE>INSERT(str,pos,len,newstr)</CODE>
<DD>
Returns the string <CODE>str</CODE>, with the substring beginning at position
<CODE>pos</CODE> and <CODE>len</CODE> characters long replaced by the string
<CODE>newstr</CODE>.


<PRE>
mysql&#62; select INSERT('Quadratic', 3, 4, 'What');
        -&#62; 'QuWhattic'
</PRE>

<A NAME="IDX399"></A>
<DT><CODE>ELT(N,str1,str2,str3,...)</CODE>
<DD>
Returns <CODE>str1</CODE> if <CODE>N</CODE> = <CODE>1</CODE>, <CODE>str2</CODE> if <CODE>N</CODE> =
<CODE>2</CODE>, and so on.  Returns <CODE>NULL</CODE> if <CODE>N</CODE> is less than <CODE>1</CODE>
or greater than the number of arguments.  <CODE>ELT()</CODE> is the complement of
<CODE>FIELD()</CODE>.


<PRE>
mysql&#62; select ELT(1, 'ej', 'Heja', 'hej', 'foo');
        -&#62; 'ej'
mysql&#62; select ELT(4, 'ej', 'Heja', 'hej', 'foo');
        -&#62; 'foo'
</PRE>

<A NAME="IDX400"></A>
<DT><CODE>FIELD(str,str1,str2,str3,...)</CODE>
<DD>
Returns the index of <CODE>str</CODE> in the <CODE>str1</CODE>, <CODE>str2</CODE>,
<CODE>str3</CODE>, <CODE>...</CODE> list.
Returns <CODE>0</CODE> if <CODE>str</CODE> is not found.
<CODE>FIELD()</CODE> is the complement of <CODE>ELT()</CODE>.


<PRE>
mysql&#62; select FIELD('ej', 'Hej', 'ej', 'Heja', 'hej', 'foo');
        -&#62; 2
mysql&#62; select FIELD('fo', 'Hej', 'ej', 'Heja', 'hej', 'foo');
        -&#62; 0
</PRE>

<A NAME="IDX401"></A>
<DT><CODE>FIND_IN_SET(str,strlist)</CODE>
<DD>
Returns a value <CODE>1</CODE> to <CODE>N</CODE> if the string <CODE>str</CODE> is in the list
<CODE>strlist</CODE> consisting of <CODE>N</CODE> substrings. A string list is a string
composed of substrings separated by <SAMP>`,'</SAMP> characters. If the first
argument is a constant string and the second is a column of type <CODE>SET</CODE>,
the <CODE>FIND_IN_SET()</CODE> function is optimized to use bit arithmetic!
Returns <CODE>0</CODE> if <CODE>str</CODE> is not in <CODE>strlist</CODE> or if <CODE>strlist</CODE>
is the empty string.  Returns <CODE>NULL</CODE> if either argument is <CODE>NULL</CODE>.
This function will not work properly if the first argument contains a
<SAMP>`,'</SAMP>.


<PRE>
mysql&#62; SELECT FIND_IN_SET('b','a,b,c,d');
        -&#62; 2
</PRE>

<A NAME="IDX402"></A>
<DT><CODE>MAKE_SET(bits,str1,str2,...)</CODE>
<DD>
Returns a set (a string containing substrings separated by <SAMP>`,'</SAMP>
characters) consisting of the strings that have the corresponding bit in
<CODE>bits</CODE> set.  <CODE>str1</CODE> corresponds to bit 0, <CODE>str2</CODE> to bit 1,
etc.  <CODE>NULL</CODE> strings in <CODE>str1</CODE>, <CODE>str2</CODE>, <CODE>...</CODE>
are not appended to the result.


<PRE>
mysql&#62; SELECT MAKE_SET(1,'a','b','c');
        -&#62; 'a'
mysql&#62; SELECT MAKE_SET(1 | 4,'hello','nice','world');
        -&#62; 'hello,world'
mysql&#62; SELECT MAKE_SET(0,'a','b','c');
        -&#62; "
</PRE>

<A NAME="IDX403"></A>
<A NAME="IDX404"></A>
<DT><CODE>LCASE(str)</CODE>
<DD>
<DT><CODE>LOWER(str)</CODE>
<DD>
Returns the string <CODE>str</CODE> with all characters changed to lowercase
according to the current character set mapping (the default is ISO-8859-1
Latin1).


<PRE>
mysql&#62; select LCASE('QUADRATICALLY');
        -&#62; 'quadratically'
</PRE>

<A NAME="IDX405"></A>
<A NAME="IDX406"></A>
<DT><CODE>UCASE(str)</CODE>
<DD>
<DT><CODE>UPPER(str)</CODE>
<DD>
Returns the string <CODE>str</CODE> with all characters changed to uppercase
according to the current character set mapping (the default is ISO-8859-1
Latin1).


<PRE>
mysql&#62; select UCASE('Hej');
        -&#62; 'HEJ'
</PRE>

<A NAME="IDX407"></A>
<DT><CODE>LOAD_FILE(file_name)</CODE>
<DD>
Reads the file and returns the file contents as a string.  The file
must be on the server and you must specify the full pathname to the
file.  The file must be readable by all and be smaller than
<CODE>max_allowed_packet</CODE>.

If the file doesn't exist or can't be read due to one of the above reasons,
the function returns <CODE>NULL</CODE>.


<PRE>
mysql&#62; UPDATE table_name SET blob_column=LOAD_FILE("/tmp/picture") WHERE id=1;
</PRE>

</DL>

<P>
There is no string function to convert a number to a char.  There is no need
for one, because <STRONG>MySQL</STRONG> automatically converts numbers to strings as
necessary, and vice versa:

</P>

<PRE>
mysql&#62; SELECT 1+"1";
        -&#62; 2
mysql&#62; SELECT CONCAT(2,' test');
        -&#62; '2 test'
</PRE>

<P>
If a string function is given a binary string as an argument, the resulting
string is also a binary string.  A number converted to a string is treated as
a binary string.  This only affects comparisons.

</P>
<P>
<A NAME="IDX408"></A>
<A NAME="IDX409"></A>


<H3><A NAME="Date_and_time_functions" HREF="manual_toc.html#Date_and_time_functions">7.3.11  Date and time functions</A></H3>

<P>
See section <A HREF="manual.html#Date_and_time_types">7.2.6  Date and time types</A> for a description of the range of values
each type has, and the valid formats in which date and time values may be
specified.

</P>
<P>
Here is an example that uses date functions.  The query below selects
all records with a <CODE>date_col</CODE> value from within the last 30 days:

</P>

<PRE>
mysql&#62; SELECT something FROM table
           WHERE TO_DAYS(NOW()) - TO_DAYS(date_col) &#60;= 30;
</PRE>

<DL COMPACT>

<DT><CODE>DAYOFWEEK(date)</CODE>
<DD>
<A NAME="IDX410"></A>
 
Returns the weekday index
for <CODE>date</CODE> (<CODE>1</CODE> = Sunday, <CODE>2</CODE> = Monday, ... <CODE>7</CODE> = Saturday).
These index values correspond to the ODBC standard.

<PRE>
mysql&#62; select DAYOFWEEK('1998-02-03');
        -&#62; 3
</PRE>

<A NAME="IDX411"></A>
<DT><CODE>WEEKDAY(date)</CODE>
<DD>
Returns the weekday index for
<CODE>date</CODE> (<CODE>0</CODE> = Monday, <CODE>1</CODE> = Tuesday, ... <CODE>6</CODE> = Sunday).

<PRE>
mysql&#62; select WEEKDAY('1997-10-04 22:23:00');
        -&#62; 5
mysql&#62; select WEEKDAY('1997-11-05');
        -&#62; 2
</PRE>

<A NAME="IDX412"></A>
<DT><CODE>DAYOFMONTH(date)</CODE>
<DD>
Returns the day of the month for <CODE>date</CODE>, in the range <CODE>1</CODE> to
<CODE>31</CODE>.

<PRE>
mysql&#62; select DAYOFMONTH('1998-02-03');
        -&#62; 3
</PRE>

<A NAME="IDX413"></A>
<DT><CODE>DAYOFYEAR(date)</CODE>
<DD>
Returns the day of the year for <CODE>date</CODE>, in the range <CODE>1</CODE> to
<CODE>366</CODE>.

<PRE>
mysql&#62; select DAYOFYEAR('1998-02-03');
        -&#62; 34
</PRE>

<A NAME="IDX414"></A>
<DT><CODE>MONTH(date)</CODE>
<DD>
Returns the month for <CODE>date</CODE>, in the range <CODE>1</CODE> to <CODE>12</CODE>.

<PRE>
mysql&#62; select MONTH('1998-02-03');
        -&#62; 2
</PRE>

<A NAME="IDX415"></A>
<DT><CODE>DAYNAME(date)</CODE>
<DD>
Returns the name of the weekday for <CODE>date</CODE>.

<PRE>
mysql&#62; select DAYNAME("1998-02-05");
        -&#62; 'Thursday'
</PRE>

<A NAME="IDX416"></A>
<DT><CODE>MONTHNAME(date)</CODE>
<DD>
Returns the name of the month for <CODE>date</CODE>.

<PRE>
mysql&#62; select MONTHNAME("1998-02-05");
        -&#62; 'February'
</PRE>

<A NAME="IDX417"></A>
<DT><CODE>QUARTER(date)</CODE>
<DD>
Returns the quarter of the year for <CODE>date</CODE>, in the range <CODE>1</CODE>
to <CODE>4</CODE>.

<PRE>
mysql&#62; select QUARTER('98-04-01');
        -&#62; 2
</PRE>

<A NAME="IDX418"></A>
<DT><CODE>WEEK(date)</CODE>
<DD>
<DT><CODE>WEEK(date,first)</CODE>
<DD>
With a single argument, returns the week for <CODE>date</CODE>, in the range
<CODE>0</CODE> to <CODE>52</CODE>, for locations where Sunday is the first day of the week.
The two-argument form of <CODE>WEEK()</CODE> allows you to specify whether the
week starts on Sunday or Monday.  The week starts on Sunday if the second
argument is <CODE>0</CODE>, on Monday if the second argument is <CODE>1</CODE>.

<PRE>
mysql&#62; select WEEK('1998-02-20');
        -&#62; 7
mysql&#62; select WEEK('1998-02-20',0);
        -&#62; 7
mysql&#62; select WEEK('1998-02-20',1);
        -&#62; 8
</PRE>

<A NAME="IDX419"></A>
<DT><CODE>YEAR(date)</CODE>
<DD>
Returns the year for <CODE>date</CODE>, in the range <CODE>1000</CODE> to <CODE>9999</CODE>.

<PRE>
mysql&#62; select YEAR('98-02-03');
        -&#62; 1998
</PRE>

<A NAME="IDX420"></A>
<DT><CODE>HOUR(time)</CODE>
<DD>
Returns the hour for <CODE>time</CODE>, in the range <CODE>0</CODE> to <CODE>23</CODE>.

<PRE>
mysql&#62; select HOUR('10:05:03');
        -&#62; 10
</PRE>

<A NAME="IDX421"></A>
<DT><CODE>MINUTE(time)</CODE>
<DD>
Returns the minute for <CODE>time</CODE>, in the range <CODE>0</CODE> to <CODE>59</CODE>.

<PRE>
mysql&#62; select MINUTE('98-02-03 10:05:03');
        -&#62; 5
</PRE>

<A NAME="IDX422"></A>
<DT><CODE>SECOND(time)</CODE>
<DD>
Returns the second for <CODE>time</CODE>, in the range <CODE>0</CODE> to <CODE>59</CODE>.

<PRE>
mysql&#62; select SECOND('10:05:03');
        -&#62; 3
</PRE>

<A NAME="IDX423"></A>
<DT><CODE>PERIOD_ADD(P,N)</CODE>
<DD>
Adds <CODE>N</CODE> months to period <CODE>P</CODE> (in the format <CODE>YYMM</CODE> or
<CODE>YYYYMM</CODE>). Returns a value in the format <CODE>YYYYMM</CODE>.

Note that the period argument <CODE>P</CODE> is <EM>not</EM> a date value.


<PRE>
mysql&#62; select PERIOD_ADD(9801,2);
        -&#62; 199803
</PRE>

<A NAME="IDX424"></A>
<DT><CODE>PERIOD_DIFF(P1,P2)</CODE>
<DD>
Returns the number of months between periods <CODE>P1</CODE> and <CODE>P2</CODE>.
<CODE>P1</CODE> and <CODE>P2</CODE> should be in the format <CODE>YYMM</CODE> or <CODE>YYYYMM</CODE>.

Note that the period arguments <CODE>P1</CODE> and <CODE>P2</CODE> are <EM>not</EM>
date values.


<PRE>
mysql&#62; select PERIOD_DIFF(9802,199703);
        -&#62; 11
</PRE>

<A NAME="IDX425"></A>
<A NAME="IDX426"></A>
<A NAME="IDX427"></A>
<A NAME="IDX428"></A>
<DT><CODE>DATE_ADD(date,INTERVAL expr type)</CODE>
<DD>
<DT><CODE>DATE_SUB(date,INTERVAL expr type)</CODE>
<DD>
<DT><CODE>ADDDATE(date,INTERVAL expr type)</CODE>
<DD>
<DT><CODE>SUBDATE(date,INTERVAL expr type)</CODE>
<DD>
These functions perform date arithmetic.  They are new for <STRONG>MySQL</STRONG>
3.22.  <CODE>ADDDATE()</CODE> and <CODE>SUBDATE()</CODE> are synonyms for
<CODE>DATE_ADD()</CODE> and <CODE>DATE_SUB()</CODE>.

<CODE>date</CODE> is a <CODE>DATETIME</CODE> or <CODE>DATE</CODE> value specifying the starting
date.  <CODE>expr</CODE> is an expression specifying the interval value to be added
or substracted from the starting date.  <CODE>expr</CODE> is a string; it may start
with a <SAMP>`-'</SAMP> for negative intervals.  <CODE>type</CODE> is a keyword indicating
how the expression should be interpreted.

The following table shows how the <CODE>type</CODE> and <CODE>expr</CODE> arguments
are related:

<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><CODE>type</CODE> <STRONG>value</STRONG> </TD><TD> <STRONG>Meaning</STRONG> </TD><TD> <STRONG>Expected</STRONG> <CODE>expr</CODE> <STRONG>format</STRONG>
</TR NOSAVE>
<TR><TD><CODE>SECOND</CODE> </TD><TD> Seconds </TD><TD> <CODE>SECONDS</CODE>
</TR NOSAVE>
<TR><TD><CODE>MINUTE</CODE> </TD><TD> Minutes </TD><TD> <CODE>MINUTES</CODE>
</TR NOSAVE>
<TR><TD><CODE>HOUR</CODE> </TD><TD> Hours </TD><TD> <CODE>HOURS</CODE>
</TR NOSAVE>
<TR><TD><CODE>DAY</CODE> </TD><TD> Days </TD><TD> <CODE>DAYS</CODE>
</TR NOSAVE>
<TR><TD><CODE>MONTH</CODE> </TD><TD> Months </TD><TD> <CODE>MONTHS</CODE>
</TR NOSAVE>
<TR><TD><CODE>YEAR</CODE> </TD><TD> Years </TD><TD> <CODE>YEARS</CODE>
</TR NOSAVE>
<TR><TD><CODE>MINUTE_SECOND</CODE> </TD><TD> Minutes and seconds </TD><TD> <CODE>"MINUTES:SECONDS"</CODE>
</TR NOSAVE>
<TR><TD><CODE>HOUR_MINUTE</CODE> </TD><TD> Hours and minutes </TD><TD> <CODE>"HOURS:MINUTES"</CODE>
</TR NOSAVE>
<TR><TD><CODE>DAY_HOUR</CODE> </TD><TD> Days and hours </TD><TD> <CODE>"DAYS HOURS"</CODE>
</TR NOSAVE>
<TR><TD><CODE>YEAR_MONTH</CODE> </TD><TD> Years and months </TD><TD> <CODE>"YEARS-MONTHS"</CODE>
</TR NOSAVE>
<TR><TD><CODE>HOUR_SECOND</CODE> </TD><TD> Hours, minutes, </TD><TD> <CODE>"HOURS:MINUTES:SECONDS"</CODE>
</TR NOSAVE>
<TR><TD><CODE>DAY_MINUTE</CODE> </TD><TD> Days, hours, minutes </TD><TD> <CODE>"DAYS HOURS:MINUTES"</CODE>
</TR NOSAVE>
<TR><TD><CODE>DAY_SECOND</CODE> </TD><TD> Days, hours, minutes, seconds </TD><TD> <CODE>"DAYS HOURS:MINUTES:SECONDS"</CODE>
</TR>
</TABLE>

<STRONG>MySQL</STRONG> allows any non-numeric delimiter in the <CODE>expr</CODE> format.
The ones shown in the table are the suggested delimiters.  If the <CODE>date</CODE>
argument is a <CODE>DATE</CODE> value and your calculations involve only
<CODE>YEAR</CODE>, <CODE>MONTH</CODE> and <CODE>DAY</CODE> parts (that is, no time parts), the
result is a <CODE>DATE</CODE> value.  Otherwise the result is a <CODE>DATETIME</CODE>
value.


<PRE>
mysql&#62; select DATE_ADD("1997-12-31 23:59:59",
                       INTERVAL 1 SECOND);
        -&#62; 1998-01-01 00:00:00
mysql&#62; select DATE_ADD("1997-12-31 23:59:59",
                       INTERVAL 1 DAY);
        -&#62; 1998-01-01 23:59:59
mysql&#62; select DATE_ADD("1997-12-31 23:59:59",
                       INTERVAL "1:1" MINUTE_SECOND);
        -&#62; 1998-01-01 00:01:00
mysql&#62; select DATE_SUB("1998-01-01 00:00:00",
                       INTERVAL "1 1:1:1" DAY_SECOND);
        -&#62; 1997-12-30 22:58:59
mysql&#62; select DATE_ADD("1998-01-01 00:00:00",
                       INTERVAL "-1 10" DAY_HOUR);
        -&#62; 1997-12-30 14:00:00
mysql&#62; select DATE_SUB("1998-01-02", INTERVAL 31 DAY);
        -&#62; 1997-12-02
</PRE>

If you specify an interval value that is too short (does not include all the
interval parts that would be expected from the <CODE>type</CODE> keyword),
<STRONG>MySQL</STRONG> assumes you have left out the leftmost parts of the interval
value.  For example, if you specify a <CODE>type</CODE> of <CODE>DAY_SECOND</CODE>, the
value of <CODE>expr</CODE> is expected to have days, hours, minutes and seconds
parts.  If you specify a value like <CODE>"1:10"</CODE>, <STRONG>MySQL</STRONG> assumes
that the days and hours parts are missing and the value represents minutes
and seconds.  In other words, <CODE>"1:10" DAY_SECOND</CODE> is interpreted in such
a way that it is equivalent to <CODE>"1:10" MINUTE_SECOND</CODE>.  This is
analogous to the way that <STRONG>MySQL</STRONG> interprets <CODE>TIME</CODE> values
as representing elapsed time rather than as time of day.

If you use incorrect dates, the result is <CODE>NULL</CODE>. If you add
<CODE>MONTH</CODE>, <CODE>YEAR_MONTH</CODE> or <CODE>YEAR</CODE> and the resulting date
has a day that is larger than the maximum day for the new month, the day is
adjusted to the maximum days in the new month.


<PRE>
mysql&#62; select DATE_ADD('1998-01-30', Interval 1 month);
        -&#62; 1998-02-28
</PRE>

Note from the preceding example that the word <CODE>INTERVAL</CODE> and the
<CODE>type</CODE> keyword are not case sensitive.

<A NAME="IDX429"></A>
<DT><CODE>TO_DAYS(date)</CODE>
<DD>
Given a date <CODE>date</CODE>, returns a daynumber (the number of days since year
0).


<PRE>
mysql&#62; select TO_DAYS(950501);
        -&#62; 728779
mysql&#62; select TO_DAYS('1997-10-07');
        -&#62; 729669
</PRE>

<CODE>TO_DAYS()</CODE> is not intended for use with values that precede the advent
of the Gregorian calendar (1582).

<A NAME="IDX430"></A>
<DT><CODE>FROM_DAYS(N)</CODE>
<DD>
Given a daynumber <CODE>N</CODE>, returns a <CODE>DATE</CODE> value.


<PRE>
mysql&#62; select FROM_DAYS(729669);
        -&#62; '1997-10-07'
</PRE>

<CODE>FROM_DAYS()</CODE> is not intended for use with values that precede the
advent of the Gregorian calendar (1582).

<A NAME="IDX431"></A>
<DT><CODE>DATE_FORMAT(date,format)</CODE>
<DD>
Formats the <CODE>date</CODE> value according to the <CODE>format</CODE> string. The
following specifiers may be used in the <CODE>format</CODE> string:
<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><CODE>%M</CODE> </TD><TD> Month name (<CODE>January</CODE>..<CODE>December</CODE>)
</TR NOSAVE>
<TR><TD><CODE>%W</CODE> </TD><TD> Weekday name (<CODE>Sunday</CODE>..<CODE>Saturday</CODE>)
</TR NOSAVE>
<TR><TD><CODE>%D</CODE> </TD><TD> Day of the month with english suffix (<CODE>1st</CODE>, <CODE>2nd</CODE>, <CODE>3rd</CODE>, etc.)
</TR NOSAVE>
<TR><TD><CODE>%Y</CODE> </TD><TD> Year, numeric, 4 digits
</TR NOSAVE>
<TR><TD><CODE>%y</CODE> </TD><TD> Year, numeric, 2 digits
</TR NOSAVE>
<TR><TD><CODE>%a</CODE> </TD><TD> Abbreviated weekday name (<CODE>Sun</CODE>..<CODE>Sat</CODE>)
</TR NOSAVE>
<TR><TD><CODE>%d</CODE> </TD><TD> Day of the month, numeric (<CODE>00</CODE>..<CODE>31</CODE>)
</TR NOSAVE>
<TR><TD><CODE>%e</CODE> </TD><TD> Day of the month, numeric (<CODE>0</CODE>..<CODE>31</CODE>)
</TR NOSAVE>
<TR><TD><CODE>%m</CODE> </TD><TD> Month, numeric (<CODE>01</CODE>..<CODE>12</CODE>)
</TR NOSAVE>
<TR><TD><CODE>%c</CODE> </TD><TD> Month, numeric (<CODE>1</CODE>..<CODE>12</CODE>)
</TR NOSAVE>
<TR><TD><CODE>%b</CODE> </TD><TD> Abbreviated month name (<CODE>Jan</CODE>..<CODE>Dec</CODE>)
</TR NOSAVE>
<TR><TD><CODE>%j</CODE> </TD><TD> Day of year (<CODE>001</CODE>..<CODE>366</CODE>)
</TR NOSAVE>
<TR><TD><CODE>%H</CODE> </TD><TD> Hour (<CODE>00</CODE>..<CODE>23</CODE>)
</TR NOSAVE>
<TR><TD><CODE>%k</CODE> </TD><TD> Hour (<CODE>0</CODE>..<CODE>23</CODE>)
</TR NOSAVE>
<TR><TD><CODE>%h</CODE> </TD><TD> Hour (<CODE>01</CODE>..<CODE>12</CODE>)
</TR NOSAVE>
<TR><TD><CODE>%I</CODE> </TD><TD> Hour (<CODE>01</CODE>..<CODE>12</CODE>)
</TR NOSAVE>
<TR><TD><CODE>%l</CODE> </TD><TD> Hour (<CODE>1</CODE>..<CODE>12</CODE>)
</TR NOSAVE>
<TR><TD><CODE>%i</CODE> </TD><TD> Minutes, numeric (<CODE>00</CODE>..<CODE>59</CODE>)
</TR NOSAVE>
<TR><TD><CODE>%r</CODE> </TD><TD> Time, 12-hour (<CODE>hh:mm:ss [AP]M</CODE>)
</TR NOSAVE>
<TR><TD><CODE>%T</CODE> </TD><TD> Time, 24-hour (<CODE>hh:mm:ss</CODE>)
</TR NOSAVE>
<TR><TD><CODE>%S</CODE> </TD><TD> Seconds (<CODE>00</CODE>..<CODE>59</CODE>)
</TR NOSAVE>
<TR><TD><CODE>%s</CODE> </TD><TD> Seconds (<CODE>00</CODE>..<CODE>59</CODE>)
</TR NOSAVE>
<TR><TD><CODE>%p</CODE> </TD><TD> <CODE>AM</CODE> or <CODE>PM</CODE>
</TR NOSAVE>
<TR><TD><CODE>%w</CODE> </TD><TD> Day of the week (<CODE>0</CODE>=Sunday..<CODE>6</CODE>=Saturday)
</TR NOSAVE>
<TR><TD><CODE>%U</CODE> </TD><TD> Week (<CODE>0</CODE>..<CODE>52</CODE>), where Sunday is the first day of the week.
</TR NOSAVE>
<TR><TD><CODE>%u</CODE> </TD><TD> Week (<CODE>0</CODE>..<CODE>52</CODE>), where Monday is the first day of the week.
</TR NOSAVE>
<TR><TD><CODE>%%</CODE> </TD><TD> Use <CODE>%%</CODE> to produce a literal <SAMP>`%'</SAMP>.
</TR>
</TABLE>

All other characters are just copied to the result without interpretation.


<PRE>
mysql&#62; select DATE_FORMAT('1997-10-04 22:23:00', '%W %M %Y');
        -&#62; 'Saturday October 1997'
mysql&#62; select DATE_FORMAT('1997-10-04 22:23:00', '%H:%i:%s');
        -&#62; '22:23:00'
mysql&#62; select DATE_FORMAT('1997-10-04 22:23:00',
                          '%D %y %a %d %m %b %j');
        -&#62; '4th 97 Sat 04 10 Oct 277'
mysql&#62; select DATE_FORMAT('1997-10-04 22:23:00',
                          '%H %k %I %r %T %S %w');
        -&#62; '22 22 10 10:23:00 PM 22:23:00 00 6'
</PRE>

As of <STRONG>MySQL</STRONG> 3.23, the <CODE>%</CODE> is required before a format specifier
characters.  In earlier versions of <STRONG>MySQL</STRONG>, <CODE>%</CODE> was optional.

<A NAME="IDX432"></A>
<DT><CODE>TIME_FORMAT(time,format)</CODE>
<DD>
This is used like the <CODE>DATE_FORMAT()</CODE> function above, but the
<CODE>format</CODE> string may contain only those format specifiers that handle
hours, minutes and seconds.  Other specifiers produce a <CODE>NULL</CODE> value or
<CODE>0</CODE>.

<A NAME="IDX433"></A>
<A NAME="IDX434"></A>
<DT><CODE>CURDATE()</CODE>
<DD>
<DT><CODE>CURRENT_DATE</CODE>
<DD>
Returns today's date as a value in <CODE>'YYYY-MM-DD'</CODE> or <CODE>YYYYMMDD</CODE>
format, depending on whether the function is used in a string or numeric
context.


<PRE>
mysql&#62; select CURDATE();
        -&#62; '1997-12-15'
mysql&#62; select CURDATE() + 0;
        -&#62; 19971215
</PRE>

<A NAME="IDX435"></A>
<A NAME="IDX436"></A>
<DT><CODE>CURTIME()</CODE>
<DD>
<DT><CODE>CURRENT_TIME</CODE>
<DD>
Returns the current time as a value in <CODE>'HH:MM:SS'</CODE> or <CODE>HHMMSS</CODE>
format, depending on whether the function is used in a string or numeric
context.


<PRE>
mysql&#62; select CURTIME();
        -&#62; '23:50:26'
mysql&#62; select CURTIME() + 0;
        -&#62; 235026
</PRE>

<A NAME="IDX437"></A>
<A NAME="IDX438"></A>
<A NAME="IDX439"></A>
<DT><CODE>NOW()</CODE>
<DD>
<DT><CODE>SYSDATE()</CODE>
<DD>
<DT><CODE>CURRENT_TIMESTAMP</CODE>
<DD>
Returns the current date and time as a value in <CODE>'YYYY-MM-DD HH:MM:SS'</CODE>
or <CODE>YYYYMMDDHHMMSS</CODE> format, depending on whether the function is used in
a string or numeric context.


<PRE>
mysql&#62; select NOW();
        -&#62; '1997-12-15 23:50:26'
mysql&#62; select NOW() + 0;
        -&#62; 19971215235026
</PRE>

<A NAME="IDX440"></A>
<DT><CODE>UNIX_TIMESTAMP()</CODE>
<DD>
<DT><CODE>UNIX_TIMESTAMP(date)</CODE>
<DD>
If called with no argument, returns a Unix timestamp (seconds since
<CODE>'1970-01-01 00:00:00'</CODE> GMT). If <CODE>UNIX_TIMESTAMP()</CODE> is called with
a <CODE>date</CODE> argument, it returns the value of the argument as seconds since
<CODE>'1970-01-01 00:00:00'</CODE> GMT.  <CODE>date</CODE> may be a <CODE>DATE</CODE> string,
a <CODE>DATETIME</CODE> string, a <CODE>TIMESTAMP</CODE>, or a number in the format
<CODE>YYMMDD</CODE> or <CODE>YYYYMMDD</CODE> in local time.


<PRE>
mysql&#62; select UNIX_TIMESTAMP();
        -&#62; 882226357
mysql&#62; select UNIX_TIMESTAMP('1997-10-04 22:23:00');
        -&#62; 875996580
</PRE>

When <CODE>UNIX_TIMESTAMP</CODE> is used on a <CODE>TIMESTAMP</CODE> column, the function
will receive the value directly, with no implicit
"string-to-unix-timestamp" conversion.

<A NAME="IDX441"></A>
<DT><CODE>FROM_UNIXTIME(unix_timestamp)</CODE>
<DD>
Returns a representation of the <CODE>unix_timestamp</CODE> argument as a value in
<CODE>'YYYY-MM-DD HH:MM:SS'</CODE> or <CODE>YYYYMMDDHHMMSS</CODE> format, depending on
whether the function is used in a string or numeric context.


<PRE>
mysql&#62; select FROM_UNIXTIME(875996580);
        -&#62; '1997-10-04 22:23:00'
mysql&#62; select FROM_UNIXTIME(875996580) + 0;
        -&#62; 19971004222300
</PRE>

<A NAME="IDX442"></A>
<DT><CODE>FROM_UNIXTIME(unix_timestamp,format)</CODE>
<DD>
Returns a string representation of the Unix timestamp, formatted according to
the <CODE>format</CODE> string. <CODE>format</CODE> may contain the same specifiers as
those listed in the entry for the <CODE>DATE_FORMAT()</CODE> function.


<PRE>
mysql&#62; select FROM_UNIXTIME(UNIX_TIMESTAMP(),
                            '%Y %D %M %h:%i:%s %x');
        -&#62; '1997 23rd December 03:43:30 x'
</PRE>

<A NAME="IDX443"></A>
<DT><CODE>SEC_TO_TIME(seconds)</CODE>
<DD>
Returns the <CODE>seconds</CODE> argument, converted to hours, minutes and seconds,
as a value in <CODE>'HH:MM:SS'</CODE> or <CODE>HHMMSS</CODE> format, depending on whether
the function is used in a string or numeric context.


<PRE>
mysql&#62; select SEC_TO_TIME(2378);
        -&#62; '00:39:38'
mysql&#62; select SEC_TO_TIME(2378) + 0;
        -&#62; 3938
</PRE>

<A NAME="IDX444"></A>
<DT><CODE>TIME_TO_SEC(time)</CODE>
<DD>
Returns the <CODE>time</CODE> argument, converted to seconds.

<PRE>
mysql&#62; select TIME_TO_SEC('22:23:00');
        -&#62; 80580
mysql&#62; select TIME_TO_SEC('00:39:38');
        -&#62; 2378
</PRE>

</DL>

<P>
<A NAME="IDX445"></A>
<A NAME="IDX446"></A>


<H3><A NAME="Miscellaneous_functions" HREF="manual_toc.html#Miscellaneous_functions">7.3.12  Miscellaneous functions</A></H3>

<DL COMPACT>

<DT><CODE>DATABASE()</CODE>
<DD>
<A NAME="IDX447"></A>
 
Returns the current database name.

<PRE>
mysql&#62; select DATABASE();
        -&#62; 'test'
</PRE>

If there is no current database, <CODE>DATABASE()</CODE> returns the empty string.

<A NAME="IDX448"></A>
<A NAME="IDX449"></A>
<A NAME="IDX450"></A>
<DT><CODE>USER()</CODE>
<DD>
<DT><CODE>SYSTEM_USER()</CODE>
<DD>
<DT><CODE>SESSION_USER()</CODE>
<DD>
Returns the current <STRONG>MySQL</STRONG> user name.

<PRE>
mysql&#62; select USER();
        -&#62; 'davida@localhost'
</PRE>

In MySQL 3.22.11 or later, this includes the client hostname as well as the
username.  You can extract just the username part like this:


<PRE>
mysql&#62; select left(USER(),instr(USER(),"@")-1);
        -&#62; 'davida'
</PRE>

<A NAME="IDX451"></A>
<DT><CODE>PASSWORD(str)</CODE>
<DD>
Calculates a password string from the plaintext password <CODE>str</CODE>. This is
the function that is used for encrypting <STRONG>MySQL</STRONG> passwords for storage
in the <CODE>Password</CODE> column of the <CODE>user</CODE> grant table.


<PRE>
mysql&#62; select PASSWORD('badpwd');
        -&#62; '7f84554057dd964b'
</PRE>

<A NAME="IDX452"></A>
<CODE>PASSWORD()</CODE> encryption is non-reversible.

<CODE>PASSWORD()</CODE> does not perform password encryption in the same way that
Unix passwords are encrypted.  You should not assume that if your Unix
password and your <STRONG>MySQL</STRONG> password are the same, <CODE>PASSWORD()</CODE>
will result in the same encrypted value as is stored in the Unix password
file.  See <CODE>ENCRYPT()</CODE>.

<A NAME="IDX453"></A>
<DT><CODE>ENCRYPT(str[,salt])</CODE>
<DD>
Encrypt <CODE>str</CODE> using the Unix <CODE>crypt()</CODE> system call. The
<CODE>salt</CODE> argument should be a string with 2 characters.


<PRE>
mysql&#62; select ENCRYPT("hello");
        -&#62; 'VxuFAJXVARROc'
</PRE>

If <CODE>crypt()</CODE> is not available on your system, <CODE>ENCRYPT()</CODE> always
returns <CODE>NULL</CODE>.

<CODE>ENCRYPT()</CODE> ignores all but the first 8 characters of <CODE>str</CODE>, at
least on some systems.  This will be determined by the behavior of the
underlying <CODE>crypt()</CODE> system call.

<A NAME="IDX454"></A>
<DT><CODE>ENCODE(str,pass_str)</CODE>
<DD>
Encrypt <CODE>str</CODE> using <CODE>pass_str</CODE> as the password.
To decrypt the result, use <CODE>DECODE()</CODE>.

The results is a binary string.  If you want to save it in a column,
use a <CODE>BLOB</CODE> column type.

<A NAME="IDX455"></A>
<DT><CODE>DECODE(crypt_str,pass_str)</CODE>
<DD>
Descrypts the encrypted string <CODE>crypt_str</CODE> using <CODE>pass_str</CODE> as the
password.  <CODE>crypt_str</CODE> should be a string returned from
<CODE>ENCODE()</CODE>.

<A NAME="IDX456"></A>
<DT><CODE>LAST_INSERT_ID([expr])</CODE>
<DD>
Returns the last automatically-generated value that was inserted into an
<CODE>AUTO_INCREMENT</CODE> column.
See section <A HREF="manual.html#mysql_insert_id">19.4.28  <CODE>mysql_insert_id()</CODE></A>.


<PRE>
mysql&#62; select LAST_INSERT_ID();
        -&#62; 195
</PRE>

The last ID that was generated is maintained in the server on a
per-connection basis.  It will not be changed by another client. It will not
even be changed if you update another <CODE>AUTO_INCREMENT</CODE> column with a
non-magic value (that is, a value that is not <CODE>NULL</CODE> and not <CODE>0</CODE>).

If <CODE>expr</CODE> is given as an argument to <CODE>LAST_INSERT_ID()</CODE> in an
<CODE>UPDATE</CODE> clause, then the value of the argument is returned as a
<CODE>LAST_INSERT_ID()</CODE> value.  This can be used to simulate sequences:

First create the table:


<PRE>
mysql&#62; create table sequence (id int not null);
mysql&#62; insert into sequence values (0);
</PRE>

Then the table can be used to generate sequence numbers like this:


<PRE>
mysql&#62; update sequence set id=LAST_INSERT_ID(id+1);
</PRE>

You can generate sequences without calling <CODE>LAST_INSERT_ID()</CODE>, but the
utility of using the function this way is that the ID value is maintained in
the server as the last automatically-generated value.  You can retrieve the
new ID as you would read any normal <CODE>AUTO_INCREMENT</CODE> value in
<STRONG>MySQL</STRONG>.  For example, <CODE>LAST_INSERT_ID()</CODE> (without an argument)
will return the new ID.  The C API function <CODE>mysql_insert_id()</CODE>
can also be used to get the value.

<A NAME="IDX457"></A>
<DT><CODE>FORMAT(X,D)</CODE>
<DD>
Formats the number <CODE>X</CODE> to a format like <CODE>'#,###,###.##'</CODE> with
<CODE>D</CODE> decimals.  If <CODE>D</CODE> is <CODE>0</CODE>, the result will have no
decimal point or fractional part.


<PRE>
mysql&#62; select FORMAT(12332.1234, 2);
        -&#62; '12,332.12'
mysql&#62; select FORMAT(12332.1,4);
        -&#62; '12,332.1000'
mysql&#62; select FORMAT(12332.2,0);
        -&#62; '12,332'
</PRE>

<A NAME="IDX458"></A>
<DT><CODE>VERSION()</CODE>
<DD>
Returns a string indicating the <STRONG>MySQL</STRONG> server version.

<PRE>
mysql&#62; select VERSION();
        -&#62; '3.22.19b-log'
</PRE>

<A NAME="IDX459"></A>
<DT><CODE>GET_LOCK(str,timeout)</CODE>
<DD>
Tries to obtain a lock with a name given by the string <CODE>str</CODE>, with a
timeout of <CODE>timeout</CODE> seconds.  Returns <CODE>1</CODE> if the lock was obtained
successfully, <CODE>0</CODE> if the attempt timed out, or <CODE>NULL</CODE> if an error
occurred (such as running out of memory or the thread was killed with
<CODE>mysqladmin kill</CODE>).  A lock is released when you execute
<CODE>RELEASE_LOCK()</CODE>, execute a new <CODE>GET_LOCK()</CODE> or the thread
terminates.  This function can be used to implement application locks or to
simulate record locks.


<PRE>
mysql&#62; select GET_LOCK("lock1",10);
        -&#62; 1
mysql&#62; select GET_LOCK("lock2",10);
        -&#62; 1
mysql&#62; select RELEASE_LOCK("lock2");
        -&#62; 1
mysql&#62; select RELEASE_LOCK("lock1");
        -&#62; NULL
</PRE>

Note that the second <CODE>RELEASE_LOCK()</CODE> call returns <CODE>NULL</CODE> because
the lock <CODE>"lock1"</CODE> was automatically released by the second
<CODE>GET_LOCK()</CODE> call.

<A NAME="IDX460"></A>
<DT><CODE>RELEASE_LOCK(str)</CODE>
<DD>
Releases the lock named by the string <CODE>str</CODE> that was obtained with
<CODE>GET_LOCK()</CODE>. Returns <CODE>1</CODE> if the lock was released, <CODE>0</CODE> if the
lock wasn't locked by this thread (in which case the lock is not released)
and <CODE>NULL</CODE> if the named lock didn't exist.  The lock will not exist if
it was never obtained by a call to <CODE>GET_LOCK()</CODE> or if it already has
been released.

<A NAME="IDX461"></A>
<DT><CODE>BENCHMARK(count,expr)</CODE>
<DD>
The <CODE>BENCHMARK()</CODE> function executes the expression <CODE>expr</CODE>
repeatedly <CODE>count</CODE> times.  It may be used to time how fast <STRONG>MySQL</STRONG>
processes the expression.  The result value is always <CODE>0</CODE>.  The intended
use is in the <CODE>mysql</CODE> client, which reports query execution times.


<PRE>
mysql&#62; select BENCHMARK(1000000,encode("hello","goodbye"));
+----------------------------------------------+
| BENCHMARK(1000000,encode("hello","goodbye")) |
+----------------------------------------------+
|                                            0 |
+----------------------------------------------+
1 row in set (4.74 sec)
</PRE>

</DL>

<P>
The time reported is elapsed time on the client end, not CPU time on the
server end.  It may be advisable to execute <CODE>BENCHMARK()</CODE> several
times, and interpret the result with regard to how heavily loaded the
server machine is.

</P>
<P>
<A NAME="IDX462"></A>
<A NAME="IDX463"></A>


<H3><A NAME="Group_by_functions" HREF="manual_toc.html#Group_by_functions">7.3.13  Functions for use with <CODE>GROUP BY</CODE> clauses</A></H3>

<P>
If you use a group function in a statement containing no <CODE>GROUP BY</CODE>
clause, it is equivalent to grouping on all rows.

</P>
<DL COMPACT>

<DT><CODE>COUNT(expr)</CODE>
<DD>
<A NAME="IDX464"></A>
 
Returns a count of the number of non-<CODE>NULL</CODE> rows retrieved by a
<CODE>SELECT</CODE> statement.


<PRE>
mysql&#62; select student.student_name,COUNT(*)
           from student,course
           where student.student_id=course.student_id
           GROUP BY student_name;

</PRE>

<CODE>COUNT(*)</CODE> is optimized to
return very quickly if the <CODE>SELECT</CODE> retrieves from one table, no
other columns are retrieved and there is no <CODE>WHERE</CODE> clause.
For example:


<PRE>
mysql&#62; select COUNT(*) from student;
</PRE>

<A NAME="IDX465"></A>
<DT><CODE>AVG(expr)</CODE>
<DD>
Returns the average value of <CODE>expr</CODE>.


<PRE>
mysql&#62; select student_name, AVG(test_score)
           from student
           GROUP BY student_name;
</PRE>

<A NAME="IDX466"></A>
<A NAME="IDX467"></A>
<DT><CODE>MIN(expr)</CODE>
<DD>
<DT><CODE>MAX(expr)</CODE>
<DD>
Returns the minimum or maximum value of <CODE>expr</CODE>.  <CODE>MIN()</CODE> and
<CODE>MAX()</CODE> may take a string argument; in such cases they return the
minimum or maximum string value.


<PRE>
mysql&#62; select student_name, MIN(test_score), MAX(test_score)
           from student
           GROUP BY student_name;
</PRE>

<A NAME="IDX468"></A>
<DT><CODE>SUM(expr)</CODE>
<DD>
Returns the sum of <CODE>expr</CODE>.

<A NAME="IDX469"></A>
<A NAME="IDX470"></A>
<A NAME="IDX471"></A>
<A NAME="IDX472"></A>
<DT><CODE>STD(expr)</CODE>
<DD>
<DT><CODE>STDDEV(expr)</CODE>
<DD>
Returns the standard deviation of <CODE>expr</CODE>. This is an extension to
ANSI SQL.
The <CODE>STDDEV()</CODE> form of this function is provided for Oracle compatability.

<A NAME="IDX473"></A>
<DT><CODE>BIT_OR(expr)</CODE>
<DD>
Returns the bitwise <CODE>OR</CODE> of all bits in <CODE>expr</CODE>. The calculation is
performed with 64-bit (<CODE>BIGINT</CODE> precision.

<A NAME="IDX474"></A>
<DT><CODE>BIT_AND(expr)</CODE>
<DD>
Returns the bitwise <CODE>AND</CODE> of all bits in <CODE>expr</CODE>. The calculation is
performed with 64-bit (<CODE>BIGINT</CODE> precision.
</DL>

<P>
<STRONG>MySQL</STRONG> has extended the use of <CODE>GROUP BY</CODE>. You can use columns or
calculations in the <CODE>SELECT</CODE> expressions which don't appear in
the <CODE>GROUP BY</CODE> part. This stands for <EM>any possible value for this
group</EM>.  You can use this to get better performance by avoiding sorting and
grouping on unnecessary items.  For example, you don't need to group on
<CODE>customer.name</CODE> in the following query:

</P>

<PRE>
mysql&#62; select order.custid,customer.name,max(payments)
       from order,customer
       where order.custid = customer.custid
       GROUP BY order.custid;
</PRE>

<P>
In ANSI SQL, you would have to add <CODE>customer.name</CODE> to the <CODE>GROUP
BY</CODE> clause.  In <STRONG>MySQL</STRONG>, the name is redundant.

</P>
<P>
Don't use this feature if the columns you omit from the <CODE>GROUP BY</CODE> part
aren't unique in the group!

</P>
<P>
In some cases, you can use <CODE>MIN()</CODE> and <CODE>MAX()</CODE> to obtain a specific
column value even if it isn't unique. The following gives the value of
<CODE>column</CODE> from the row containing the smallest value in the <CODE>sort</CODE>
column:

</P>

<PRE>
substr(MIN(concat(sort,space(6-length(sort)),column),7,length(column)))
</PRE>

<P>
<A NAME="IDX475"></A>
<A NAME="IDX476"></A>
<A NAME="IDX477"></A>
<A NAME="IDX478"></A>
<A NAME="IDX479"></A>
<A NAME="IDX480"></A>
Note that you can't yet use expressions in <CODE>GROUP BY</CODE> or
<CODE>ORDER BY</CODE> clauses.  You can work around this limitation by using
an alias for the expression:

</P>

<PRE>
mysql&#62; select id,floor(value/100) as val from tbl_name
           GROUP BY id,val ORDER BY val;
</PRE>

<P>
<A NAME="IDX481"></A>


<H2><A NAME="CREATE_DATABASE" HREF="manual_toc.html#CREATE_DATABASE">7.4  <CODE>CREATE DATABASE</CODE> syntax</A></H2>


<PRE>
CREATE DATABASE db_name
</PRE>

<P>
<CODE>CREATE DATABASE</CODE> creates a database with the given name.  Rules for
allowable database names are given in section <A HREF="manual.html#Legal_names">7.1.4  Database, table, index, column and alias names</A>.  An error occurs if
the database already exists.

</P>
<P>
Databases in <STRONG>MySQL</STRONG> are implemented as directories containing files
that correspond to tables in the database.  Since there are no tables in a
database when it is initially created, the <CODE>CREATE DATABASE</CODE> statement
only creates a directory under the <STRONG>MySQL</STRONG> data directory.

</P>
<P>
<A NAME="IDX482"></A>
You can also create databases with <CODE>mysqladmin</CODE>.
See section <A HREF="manual.html#Programs">12.1  Overview of the different <STRONG>MySQL</STRONG> programs</A>.

</P>
<P>
<A NAME="IDX483"></A>


<H2><A NAME="DROP_DATABASE" HREF="manual_toc.html#DROP_DATABASE">7.5  <CODE>DROP DATABASE</CODE> syntax</A></H2>


<PRE>
DROP DATABASE [IF EXISTS] db_name
</PRE>

<P>
<CODE>DROP DATABASE</CODE> drops all tables in the database and deletes the
database.  <STRONG>Be VERY careful with this command!</STRONG>

</P>
<P>
<CODE>DROP DATABASE</CODE> returns the number of files that were removed from the
database directory.  Normally, this is three times the number of tables,
since each table corresponds to a <TT>`.ISD'</TT> file, a <TT>`.ISM'</TT> file and a
<TT>`.frm'</TT> file.

</P>
<P>
In <STRONG>MySQL</STRONG> 3.22 or later, you can use the keywords <CODE>IF EXISTS</CODE> to
prevent an error from occurring if the database doesn't exist.

</P>
<P>
<A NAME="IDX484"></A>
You can also drop databases with <CODE>mysqladmin</CODE>.
See section <A HREF="manual.html#Programs">12.1  Overview of the different <STRONG>MySQL</STRONG> programs</A>.

</P>
<P>
<A NAME="IDX485"></A>


<H2><A NAME="CREATE_TABLE" HREF="manual_toc.html#CREATE_TABLE">7.6  <CODE>CREATE TABLE</CODE> syntax</A></H2>


<PRE>
CREATE TABLE [IF NOT EXISTS] tbl_name (create_definition,...) [table_options] [select_statement]

create_definition:
  col_name type [NOT NULL | NULL] [DEFAULT default_value] [AUTO_INCREMENT]
            [PRIMARY KEY] [reference_definition]
  or    PRIMARY KEY (index_col_name,...)
  or    KEY [index_name] KEY(index_col_name,...)
  or    INDEX [index_name] (index_col_name,...)
  or    UNIQUE [INDEX] [index_name] (index_col_name,...)
  or    [CONSTRAINT symbol] FOREIGN KEY index_name (index_col_name,...)
            [reference_definition]
  or    CHECK (expr)

type:
        TINYINT[(length)] [UNSIGNED] [ZEROFILL]
  or    SMALLINT[(length)] [UNSIGNED] [ZEROFILL]
  or    MEDIUMINT[(length)] [UNSIGNED] [ZEROFILL]
  or    INT[(length)] [UNSIGNED] [ZEROFILL]
  or    INTEGER[(length)] [UNSIGNED] [ZEROFILL]
  or    BIGINT[(length)] [UNSIGNED] [ZEROFILL]
  or    REAL[(length,decimals)] [UNSIGNED] [ZEROFILL]
  or    DOUBLE[(length,decimals)] [UNSIGNED] [ZEROFILL]
  or    FLOAT[(length,decimals)] [UNSIGNED] [ZEROFILL]
  or    DECIMAL(length,decimals) [UNSIGNED] [ZEROFILL]
  or    NUMERIC(length,decimals) [UNSIGNED] [ZEROFILL]
  or    CHAR(length) [BINARY]
  or    VARCHAR(length) [BINARY]
  or    DATE
  or    TIME
  or    TIMESTAMP
  or    DATETIME
  or    TINYBLOB
  or    BLOB
  or    MEDIUMBLOB
  or    LONGBLOB
  or    TINYTEXT
  or    TEXT
  or    MEDIUMTEXT
  or    LONGTEXT
  or    ENUM(value1,value2,value3,...)
  or    SET(value1,value2,value3,...)

index_col_name:
        col_name [(length)]

reference_definition:
        REFERENCES tbl_name [(index_col_name,...)]
                   [MATCH FULL | MATCH PARTIAL]
                   [ON DELETE reference_option]
                   [ON UPDATE reference_option]

reference_option:
        RESTRICT | CASCADE | SET NULL | NO ACTION | SET DEFAULT

table_options:
	type = [ISAM | MYISAM | HEAP]
or	auto_increment = #
or	avg_row_length = #
or	checksum = [0 | 1]
or	comment = "string"
or	max_rows = #
or	min_rows = #
or	pack_keys = [0 | 1]
or	password= "string"

select_statement:
	[ | IGNORE | REPLACE] SELECT ...  (Some legal select statement)
</PRE>

<P>
<CODE>CREATE TABLE</CODE>
creates a table with the given name in the current database.  Rules for
allowable table names are given in section <A HREF="manual.html#Legal_names">7.1.4  Database, table, index, column and alias names</A>.  An error occurs if
there is no current database or if the table already exists.

</P>
<P>
In <STRONG>MySQL</STRONG> 3.22 or later, the table name can be specified as
<CODE>db_name.tbl_name</CODE>.  This works whether or not there is a current
database.

</P>
<P>
In <STRONG>MySQL</STRONG> 3.23 or later, you can use the keywords <CODE>IF NOT EXISTS</CODE>
so that an error does not occur if the table already exits.  Note that there
is no verification that the table structures are identical.

</P>
<P>
Each table <CODE>tbl_name</CODE> is represented by three files in the database
directory:

</P>
<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><STRONG>File</STRONG> </TD><TD> <STRONG>Purpose</STRONG>
</TR NOSAVE>
<TR><TD><CODE>tbl_name.frm</CODE> </TD><TD> Table definition (form) file
</TR NOSAVE>
<TR><TD><CODE>tbl_name.ISD</CODE> </TD><TD> Data file
</TR NOSAVE>
<TR><TD><CODE>tbl_name.ISM</CODE> </TD><TD> Index file
</TR>
</TABLE>

<P>
For more information on the properties of the various column types, see
section <A HREF="manual.html#Column_types">7.2  Column types</A>.

</P>

<UL>
<LI>

If neither <CODE>NULL</CODE> nor <CODE>NOT NULL</CODE> is specified, the column
is treated as though <CODE>NULL</CODE> had been specified.

<LI>

An integer column may have the additional attribute <CODE>AUTO_INCREMENT</CODE>.
When you insert a value of <CODE>NULL</CODE> (recommended) or <CODE>0</CODE> into an
<CODE>AUTO_INCREMENT</CODE> column, the column is set to <CODE>value+1</CODE>, where
<CODE>value</CODE> is the largest value for the column currently in the table.
<CODE>AUTO_INCREMENT</CODE> sequences begin with <CODE>1</CODE>.
See section <A HREF="manual.html#mysql_insert_id">19.4.28  <CODE>mysql_insert_id()</CODE></A>.

If you delete the row containing the maximum value for an <CODE>AUTO_INCREMENT</CODE>
column, the value will be reused.  If you delete all rows in the table, the
sequence starts over.

<STRONG>Note:</STRONG> There can be only one <CODE>AUTO_INCREMENT</CODE> column per table,
and it must be indexed.

<A NAME="IDX486"></A>
<A NAME="IDX487"></A>
To make <STRONG>MySQL</STRONG> compatible with some ODBC applications, you can find
the last inserted row with the following query:


<PRE>
SELECT * FROM tbl_name WHERE auto_col IS NULL
</PRE>

<LI>

<CODE>NULL</CODE> values are handled differently for <CODE>TIMESTAMP</CODE> columns than
for other column types.  You cannot store a literal <CODE>NULL</CODE> in a
<CODE>TIMESTAMP</CODE> column; setting the column to <CODE>NULL</CODE> sets it to the
current date and time.  Because <CODE>TIMESTAMP</CODE> columns behave this way, the
<CODE>NULL</CODE> and <CODE>NOT NULL</CODE> attributes do not apply in the normal way and
are ignored if you specify them.

On the other hand, to make it easier for <STRONG>MySQL</STRONG> clients to use
<CODE>TIMESTAMP</CODE> columns, the server reports that such columns may be
assigned <CODE>NULL</CODE> values (which is true), even though <CODE>TIMESTAMP</CODE>
never actually will contain a <CODE>NULL</CODE> value.  You can see this when you
use <CODE>DESCRIBE tbl_name</CODE> to get a description of your table.

Note that setting a <CODE>TIMESTAMP</CODE> column to <CODE>0</CODE> is not the same
as setting it to <CODE>NULL</CODE>, because <CODE>0</CODE> is a valid <CODE>TIMESTAMP</CODE>
value.

<LI>

If no <CODE>DEFAULT</CODE> value is specified for a column, <STRONG>MySQL</STRONG>
automatically assigns one.

If the column may take <CODE>NULL</CODE> as a value, the default value is
<CODE>NULL</CODE>.

If the column is declared as <CODE>NOT NULL</CODE>, the default value depends on
the column type:


<UL>
<LI>

For numeric types other than those declared with the <CODE>AUTO_INCREMENT</CODE>
attribute, the default is <CODE>0</CODE>.  For an <CODE>AUTO_INCREMENT</CODE> column, the
default value is the next value in the sequence.

<LI>

For date and time types other than <CODE>TIMESTAMP</CODE>, the default is the
appropriate "zero" value for the type.  For the first <CODE>TIMESTAMP</CODE>
column in a table, the default value is the current date and time.
See section <A HREF="manual.html#Date_and_time_types">7.2.6  Date and time types</A>.

<LI>

For string types other than <CODE>ENUM</CODE>, the default is the empty string.
For <CODE>ENUM</CODE>, the default is the first enumeration value.
</UL>

<LI>

<CODE>KEY</CODE> is a synonym for <CODE>INDEX</CODE>.

<LI>

In <STRONG>MySQL</STRONG>, a <CODE>UNIQUE</CODE> key can have only distinct values. An
error occurs if you try to add a new row with a key that matches an existing
row.

<LI>

In <STRONG>MySQL</STRONG> a <CODE>PRIMARY KEY</CODE> is the same thing as a unique <CODE>KEY</CODE>
that is named <CODE>PRIMARY</CODE>   A table can have only one <CODE>PRIMARY KEY</CODE>.
If you don't have a <CODE>PRIMARY KEY</CODE> and some applications ask for the
<CODE>PRIMARY KEY</CODE> in your tables, <STRONG>MySQL</STRONG> will return the first
<CODE>UNIQUE</CODE> key as the <CODE>PRIMARY KEY</CODE>.

<LI>

A <CODE>PRIMARY KEY</CODE> can be a multiple-column index.  However, you cannot
create a multiple-column index using the <CODE>PRIMARY KEY</CODE> key attibute in a
column specification.  Doing so will mark only that single column as primary.
You must use the <CODE>PRIMARY KEY(index_col_name, ...)</CODE> syntax.

<LI>

If you don't assign a name to an index, the index will be assigned the same
name as the first <CODE>index_col_name</CODE>, with an optional suffix (<CODE>_2</CODE>,
<CODE>_3</CODE>, <CODE>...</CODE>) to make it unique.  You can see index names for a
table using <CODE>SHOW INDEX FROM tbl_name</CODE>.
See section <A HREF="manual.html#SHOW">7.20  <CODE>SHOW</CODE> syntax (Get information about tables, columns,...)</A>.

<LI>

<A NAME="IDX488"></A>
<A NAME="IDX489"></A>
Columns that are indexed cannot have <CODE>NULL</CODE> values.  You must declare
such columns <CODE>NOT NULL</CODE> or an error results.

<LI>

<A NAME="IDX490"></A>
<A NAME="IDX491"></A>
<A NAME="IDX492"></A>
<A NAME="IDX493"></A>
<CODE>BLOB</CODE> and <CODE>TEXT</CODE> columns cannot be indexed.

<LI>

With <CODE>col_name(length)</CODE> syntax, you can specify an index which
uses only a part of a <CODE>CHAR</CODE> or <CODE>VARCHAR</CODE> column. This can
make the index file much smaller.
See section <A HREF="manual.html#Indexes">7.2.9  Column indexes</A>.

<LI>

When you use <CODE>ORDER BY</CODE> or <CODE>GROUP BY</CODE> with a <CODE>TEXT</CODE> or
<CODE>BLOB</CODE> column, only the first <CODE>max_sort_length</CODE> bytes are used.
See section <A HREF="manual.html#BLOB">7.2.7.2  The <CODE>BLOB</CODE> and <CODE>TEXT</CODE> types</A>.

<LI>

The <CODE>FOREIGN KEY</CODE>, <CODE>CHECK</CODE> and <CODE>REFERENCES</CODE> clauses don't
actually do anything.  The syntax for them is provided only for compatibility,
to make it easier to port code from other SQL servers and to run applications
that create tables with references.
See section <A HREF="manual.html#Missing_functions">5.3  Functionality missing from <STRONG>MySQL</STRONG></A>.

<LI>

Each <CODE>NULL</CODE> column takes one bit extra, rounded up to the nearest byte.

<LI>

The maximum record length in bytes can be calculated as follows:


<PRE>
row length = 1
             + (sum of column lengths)
             + (number of NULL columns + 7)/8
             + (number of variable-length columns)
</PRE>

<LI>

The <CODE>table_options</CODE> and <CODE>SELECT</CODE> options is only implemented in
<STRONG>MySQL</STRONG> 3.23 and above..

The different table types are:

<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD>ISAM </TD><TD> The original table handler
</TR NOSAVE>
<TR><TD>MyISAM </TD><TD> The new binary portable table handler
</TR NOSAVE>
<TR><TD>HEAP </TD><TD> The data for this table is only stored in memory
</TR>
</TABLE>
See section <A HREF="manual.html#Table_types">10.17  <STRONG>MySQL</STRONG> table types.</A>

The other table options are used to optimize the behavior of the
table. In most cases, you don't have to specify any of them.
The options work for all table types, if not otherwise indicated.

<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD>auto_increment </TD><TD> The next auto_increment value you want to set for your table (MyISAM)
</TR NOSAVE>
<TR><TD>avg_row_length </TD><TD> An approximation of the average row length for your table.
</TR NOSAVE>
<TR><TD>checksum </TD><TD> Set this to 1 if you want <STRONG>MySQL</STRONG> to maintain a checksum for all rows (makes the table a little slower to update but makes it easier to find corrupted tables) (MyISAM)
</TR NOSAVE>
<TR><TD>comment $tab A 60 character comment for your table
</TR NOSAVE>
<TR><TD>max_rows </TD><TD> Max number of rows you plan to store in the table.
</TR NOSAVE>
<TR><TD>min_rows </TD><TD> Minimum number of rows you plan to store in the table.
</TR NOSAVE>
<TR><TD>pack_keys </TD><TD> Set this to 1 if you want to have smaller index. This usually makes updates slower and reads faster (MyISAM, ISAM).
</TR NOSAVE>
<TR><TD>password </TD><TD> Encrypt the <CODE>.frm</CODE> file with password.  This option doesn't do anything in the standard <STRONG>MySQL</STRONG> version.
</TR>
</TABLE>

When you use a <CODE>MyISAM</CODE> table, <STRONG>MySQL</STRONG> uses the product of
<CODE>max_rows * avg_row_length</CODE> to decide how big the resulting table
will be.  If you don't specify any of the above options, the maximum size
for a table will be 4G (or 2G if your operating systems only supports 2G
tables).

<LI>

If you specify a <CODE>SELECT</CODE> after the <CODE>CREATE STATEMENT</CODE>,
<STRONG>MySQL</STRONG> will create new fields for all elements in the
<CODE>SELECT</CODE>.  For example:


<PRE>
mysql&#62; CREATE TABLE test (a int not null auto_increment, primary key (a), key(b))
TYPE=HEAP SELECT b,c from test2;
</PRE>

This will create a <CODE>HEAP</CODE> table with 3 columns.  Note that the table will
automatically be deleted if any errors occur while copying data
into the table.
</UL>



<H3><A NAME="Silent_column_changes" HREF="manual_toc.html#Silent_column_changes">7.6.1  Silent column specification changes</A></H3>

<P>
In some cases, <STRONG>MySQL</STRONG> silently changes a column specification from
that given in a <CODE>CREATE TABLE</CODE> statement.  (This may also occur with
<CODE>ALTER TABLE</CODE>.)

</P>

<UL>
<LI>

<CODE>VARCHAR</CODE> columns with a length less than four are changed to
<CODE>CHAR</CODE>.

<LI>

If any column in a table has a variable length, the entire row is
variable-length as a result.  Therefore, if a table contains any
variable-length columns (<CODE>VARCHAR</CODE>, <CODE>TEXT</CODE> or <CODE>BLOB</CODE>), all
<CODE>CHAR</CODE> columns longer than three characters are changed to
<CODE>VARCHAR</CODE> columnss.  This doesn't affect how you use the columns in any
way; in <STRONG>MySQL</STRONG>, <CODE>VARCHAR</CODE> is just a different way to store
characters.  <STRONG>MySQL</STRONG> performs this conversion because it saves space
and makes table operations faster.
See section <A HREF="manual.html#Row_format">10.16  What are the different row formats? Or, when should <CODE>VARCHAR/CHAR</CODE> be used?</A>.

<LI>

<CODE>TIMESTAMP</CODE> display sizes must be even and in the range from 2 to 14.
If you specify a display size of 0 or greater than 14, the size is coerced
to 14.  Odd-valued sizes in the range from 1 to 13 are coerced
to the next higher even number.

<LI>

You cannot store a literal <CODE>NULL</CODE> in a <CODE>TIMESTAMP</CODE> column; setting
it to <CODE>NULL</CODE> sets it to the current date and time.  Because
<CODE>TIMESTAMP</CODE> columns behave this way, the <CODE>NULL</CODE> and <CODE>NOT NULL</CODE>
attributes do not apply in the normal way and are ignored if you specify
them.  <CODE>DESCRIBE tbl_name</CODE> always reports that a <CODE>TIMESTAMP</CODE>
column may be assigned <CODE>NULL</CODE> values.

<LI>

<STRONG>MySQL</STRONG> maps certain column types used by other SQL database vendors
to <STRONG>MySQL</STRONG> types.  See section <A HREF="manual.html#Other-vendor_column_types">7.2.11  Using column types from other database engines</A>.
</UL>

<P>
If you want to see whether or not <STRONG>MySQL</STRONG> used a column type other
than the one you specified, issue a <CODE>DESCRIBE tbl_name</CODE> statement after
creating or altering your table.

</P>
<P>
<A NAME="IDX494"></A>
Certain other column type changes may occur if you compress a table using
<CODE>pack_isam</CODE>.
See section <A HREF="manual.html#Row_format">10.16  What are the different row formats? Or, when should <CODE>VARCHAR/CHAR</CODE> be used?</A>.

</P>
<P>
<A NAME="IDX495"></A>


<H2><A NAME="ALTER_TABLE" HREF="manual_toc.html#ALTER_TABLE">7.7  <CODE>ALTER TABLE</CODE> syntax</A></H2>


<PRE>
ALTER [IGNORE] TABLE tbl_name alter_spec [, alter_spec ...]

alter_specification:
        ADD [COLUMN] create_definition [FIRST | AFTER column_name ]
  or    ADD INDEX [index_name] (index_col_name,...)
  or    ADD PRIMARY KEY (index_col_name,...)
  or    ADD UNIQUE [index_name] (index_col_name,...)
  or    ALTER [COLUMN] col_name {SET DEFAULT literal | DROP DEFAULT}
  or    CHANGE [COLUMN] old_col_name create_definition
  or    MODIFY [COLUMN] create_definition
  or    DROP [COLUMN] col_name
  or    DROP PRIMARY KEY
  or    DROP INDEX key_name
  or    RENAME [AS] new_tbl_name
  or    table_option
</PRE>

<P>
<CODE>ALTER TABLE</CODE> allows you to change the structure of an existing table.
For example, you can add or delete columns, create or destroy indexes, change
the type of existing columns, or rename columns or the table itself.  You can
also change the comment for the table and type of the table.
See section <A HREF="manual.html#CREATE_TABLE">7.6  <CODE>CREATE TABLE</CODE> syntax</A>.

</P>

<P>
If you use <CODE>ALTER TABLE</CODE> to change a column specification but
<CODE>DESCRIBE tbl_name</CODE> indicates that your column was not changed, it is
possible that <STRONG>MySQL</STRONG> ignored your modification for one of the reasons
described in section <A HREF="manual.html#Silent_column_changes">7.6.1  Silent column specification changes</A>.  For example, if you try to change
a <CODE>VARCHAR</CODE> column to <CODE>CHAR</CODE>, <STRONG>MySQL</STRONG> will still use
<CODE>VARCHAR</CODE> if the table contains other variable-length columns.

</P>
<P>
<CODE>ALTER TABLE</CODE> works by making a temporary copy of the original table.
The alteration is performed on the copy, then the original table is
deleted and the new one is renamed. This is done in such a way that
all updates are automatically redirected to the new table without
any failed updates. While <CODE>ALTER TABLE</CODE> is executing, the original
table is readable by other clients. Updates and writes to the table
are stalled until the new table is ready.

</P>

<UL>
<LI>

To use <CODE>ALTER TABLE</CODE>, you need <STRONG>select</STRONG>, <STRONG>insert</STRONG>,
<STRONG>delete</STRONG>, <STRONG>update</STRONG>, <STRONG>create</STRONG> and <STRONG>drop</STRONG>
privileges on the table.

<LI>

<CODE>IGNORE</CODE> is a <STRONG>MySQL</STRONG> extension to ANSI SQL92.
It controls how <CODE>ALTER TABLE</CODE> works if there are duplicates on
unique keys in the new table.
If <CODE>IGNORE</CODE> isn't specified, the copy is aborted and rolled back.
If <CODE>IGNORE</CODE> is specified, then for rows with duplicates on a unique
key, only the first row is used; the others are deleted.

<LI>

You can issue multiple <CODE>ADD</CODE>, <CODE>ALTER</CODE>, <CODE>DROP</CODE> and
<CODE>CHANGE</CODE> clauses in a single <CODE>ALTER TABLE</CODE> statement. This is a
<STRONG>MySQL</STRONG> extension to ANSI SQL92, which allows only one of each clause
per <CODE>ALTER TABLE</CODE> statement.

<LI>

<CODE>CHANGE col_name</CODE>, <CODE>DROP col_name</CODE> and <CODE>DROP
INDEX</CODE> are <STRONG>MySQL</STRONG> extensions to ANSI SQL92.

<LI>

<CODE>MODIFY</CODE> is an Oracle extension to <CODE>ALTER TABLE</CODE>.

<LI>

The optional word <CODE>COLUMN</CODE> is a pure noise word and can be omitted.

<LI>

If you use <CODE>ALTER TABLE tbl_name RENAME AS new_name</CODE> without any other
options, <STRONG>MySQL</STRONG> simply renames the files that correspond to the table
<CODE>tbl_name</CODE>.  There is no need to create the temporary table.

<LI>

<CODE>create_definition</CODE> clauses use the same syntax for <CODE>ADD</CODE> and
<CODE>CHANGE</CODE> as for <CODE>CREATE TABLE</CODE>.  Note that this syntax includes
the column name, not just the column type.
See section <A HREF="manual.html#CREATE_TABLE">7.6  <CODE>CREATE TABLE</CODE> syntax</A>.

<LI>

You can rename a column using a <CODE>CHANGE old_col_name create_definition</CODE>
clause.  To do so, specify the old and new column names and the type that
the column currently has.  For example, to rename an <CODE>INTEGER</CODE> column
from <CODE>a</CODE> to <CODE>b</CODE>, you can do this:


<PRE>
mysql&#62; ALTER TABLE t1 CHANGE a b INTEGER;
</PRE>

If you want to change a column's type but not the name, <CODE>CHANGE</CODE>
syntax still requires two column names even if they are the same.  For
example:


<PRE>
mysql&#62; ALTER TABLE t1 CHANGE b b BIGINT NOT NULL;
</PRE>

However, as of <STRONG>MySQL</STRONG> 3.22.16a, you can also use <CODE>MODIFY</CODE> to
change a column's type without renaming it:


<PRE>
mysql&#62; ALTER TABLE t1 MODIFY b BIGINT NOT NULL;
</PRE>

<LI>

If you use <CODE>CHANGE</CODE> or <CODE>MODIFY</CODE> to shorten a column for which
an index exists on part of the column (for instance, if you have an index
on the first 10 characters of a <CODE>VARCHAR</CODE> column), you cannot make
the column shorter than the number of characters that are indexed.

<LI>

When you change a column type using <CODE>CHANGE</CODE> or <CODE>MODIFY</CODE>,
<STRONG>MySQL</STRONG> tries to convert data to the new type as well as possible.

<LI>

In <STRONG>MySQL</STRONG> 3.22 or later, you can use <CODE>FIRST</CODE> or <CODE>ADD ...
AFTER col_name</CODE> to add a column at a specific position within a table row.
The default is to add the column last.

<LI>

<CODE>ALTER COLUMN</CODE> specifies a new default value for a column
or removes the old default value.
If the old default is removed and the column can be <CODE>NULL</CODE>, the new
default is <CODE>NULL</CODE>. If the column cannot be <CODE>NULL</CODE>, <STRONG>MySQL</STRONG>
assigns a default value.
Default value assignment is described in
section <A HREF="manual.html#CREATE_TABLE">7.6  <CODE>CREATE TABLE</CODE> syntax</A>.

<LI>

<CODE>DROP INDEX</CODE> removes an index. This is a <STRONG>MySQL</STRONG> extension to
ANSI SQL92.

<LI>

If columns are dropped from a table, the columns are also removed from any
index of which they are a part.  If all columns that make up an index are
dropped, the index is dropped as well.

<LI>

<CODE>DROP PRIMARY KEY</CODE> drops the primary index. If no such
index exists, it drops the first <CODE>UNIQUE</CODE> index in the table.
(<STRONG>MySQL</STRONG> marks the first <CODE>UNIQUE</CODE> key as the <CODE>PRIMARY KEY</CODE>
if no <CODE>PRIMARY KEY</CODE> was specified explicitly.)

<LI>

<A NAME="IDX496"></A>
With the C API function <CODE>mysql_info()</CODE>, you can find out how many
records were copied, and (when <CODE>IGNORE</CODE> is used) how many records were
deleted due to duplication of unique key values.

<LI>

<A NAME="IDX497"></A>
<A NAME="IDX498"></A>
The <CODE>FOREIGN KEY</CODE>, <CODE>CHECK</CODE> and <CODE>REFERENCES</CODE> clauses don't
actually do anything.  The syntax for them is provided only for compatibility,
to make it easier to port code from other SQL servers and to run applications
that create tables with references.
See section <A HREF="manual.html#Missing_functions">5.3  Functionality missing from <STRONG>MySQL</STRONG></A>.
</UL>

<P>
Here is an example that shows some of the uses of <CODE>ALTER TABLE</CODE>.  We
begin with a table <CODE>t1</CODE> that is created as shown below:

</P>

<PRE>
mysql&#62; CREATE TABLE t1 (a INTEGER,b CHAR(10));
</PRE>

<P>
To rename the table from <CODE>t1</CODE> to <CODE>t2</CODE>:

</P>

<PRE>
mysql&#62; ALTER TABLE t1 RENAME t2;
</PRE>

<P>
To change column <CODE>a</CODE> from <CODE>INTEGER</CODE> to <CODE>TINYINT NOT NULL</CODE>
(leaving the name the same), and to change column <CODE>b</CODE> from
<CODE>CHAR(10)</CODE> to <CODE>CHAR(20)</CODE> as well as renaming it from <CODE>b</CODE> to
<CODE>c</CODE>:

</P>

<PRE>
mysql&#62; ALTER TABLE t2 MODIFY a TINYINT NOT NULL, CHANGE b c CHAR(20);
</PRE>

<P>
To add a new <CODE>TIMESTAMP</CODE> column named <CODE>d</CODE>:

</P>

<PRE>
mysql&#62; ALTER TABLE t2 ADD d TIMESTAMP;
</PRE>

<P>
To add an index on column <CODE>d</CODE>, and make column <CODE>a</CODE> the primary key:

</P>

<PRE>
mysql&#62; ALTER TABLE t2 ADD INDEX (d), ADD PRIMARY KEY (a);
</PRE>

<P>
To remove column <CODE>c</CODE>:

</P>

<PRE>
mysql&#62; ALTER TABLE t2 DROP COLUMN c;
</PRE>

<P>
To add a new <CODE>AUTO_INCREMENT</CODE> integer column named <CODE>c</CODE>:

</P>

<PRE>
mysql&#62; ALTER TABLE t2 ADD c INT UNSIGNED NOT NULL AUTO_INCREMENT,
           ADD INDEX (c);
</PRE>

<P>
Note that we indexed <CODE>c</CODE>, because <CODE>AUTO_INCREMENT</CODE> columns must be
indexed, and also that we declare <CODE>c</CODE> as <CODE>NOT NULL</CODE>, because
indexed columns cannot be <CODE>NULL</CODE>.

</P>
<P>
<A NAME="IDX499"></A>


<H2><A NAME="OPTIMIZE_TABLE" HREF="manual_toc.html#OPTIMIZE_TABLE">7.8  <CODE>OPTIMIZE TABLE</CODE> syntax</A></H2>


<PRE>
OPTIMIZE TABLE tbl_name
</PRE>

<P>
<CODE>OPTIMZE TABLE</CODE> should be used if you have deleted a large part of a
table or if you have made many changes to a table with variable-length rows
(tables that have <CODE>VARCHAR</CODE>, <CODE>BLOB</CODE> or <CODE>TEXT</CODE> columns).
Deleted records are maintained in a linked list and subsequent <CODE>INSERT</CODE>
operations reuse old record positions. You can use <CODE>OPTIMIZE TABLE</CODE> to
reclaim the unused space.

</P>
<P>
<CODE>OPTIMIZE TABLE</CODE> works by making a temporary copy of the original
table.  The old table is copied to the new table (without the unused rows),
then the original table is deleted and the new one is renamed. This is done
in such a way that all updates are automatically redirected to the new table
without any failed updates. While <CODE>OPTIMIZE TABLE</CODE> is executing, the
original table is readable by other clients. Updates and writes to the table
are stalled until the new table is ready.

</P>
<P>
<A NAME="IDX500"></A>


<H2><A NAME="DROP_TABLE" HREF="manual_toc.html#DROP_TABLE">7.9  <CODE>DROP TABLE</CODE> syntax</A></H2>


<PRE>
DROP TABLE [IF EXISTS] tbl_name [, tbl_name,...]
</PRE>

<P>
<CODE>DROP TABLE</CODE> removes one or more tables. All table data and the table
definition are <EM>removed</EM>, so <STRONG>be careful</STRONG> with this command!

</P>
<P>
In <STRONG>MySQL</STRONG> 3.22 or later, you can use the keywords <CODE>IF EXISTS</CODE> to
prevent an error from occurring for tables that don't exist.

</P>
<P>
<A NAME="IDX501"></A>


<H2><A NAME="DELETE" HREF="manual_toc.html#DELETE">7.10  <CODE>DELETE</CODE> syntax</A></H2>


<PRE>
DELETE [LOW_PRIORITY] FROM tbl_name
    [WHERE where_definition] [LIMIT rows]
</PRE>

<P>
<CODE>DELETE</CODE> deletes rows from <CODE>tbl_name</CODE> that satisfy the condition
given by <CODE>where_definition</CODE>, and returns the number of records deleted.

</P>
<P>
If you issue a <CODE>DELETE</CODE> with no <CODE>WHERE</CODE> clause, all rows are
deleted.  <STRONG>MySQL</STRONG> does this by recreating the table as an empty table,
which is much faster than deleting each row.  In this case, <CODE>DELETE</CODE>
returns zero as the number of affected records. (<STRONG>MySQL</STRONG> can't return
the number of rows that were actually deleted, since the recreate is done
without opening the data files. As long as the table definition file
<TT>`tbl_name.frm'</TT> is valid, the table can be recreated this way, even if
the data or index files have become corrupted.).

</P>
<P>
If you really want to know how many records are deleted when you are deleting
all rows, and are willing to suffer a speed penalty, you can use a
<CODE>DELETE</CODE> statement of this form:

</P>

<PRE>
mysql&#62; DELETE FROM tbl_name WHERE 1&#62;0;
</PRE>

<P>
Note that this is MUCH slower than <CODE>DELETE FROM tbl_name</CODE> with no
<CODE>WHERE</CODE> clause, because it deletes rows one at a time.

</P>
<P>
If you specify the keyword <CODE>LOW_PRIORITY</CODE>, execution of the
<CODE>DELETE</CODE> is delayed until no other clients are reading from the table.

</P>
<P>
Deleted records are maintained in a linked list and subsequent <CODE>INSERT</CODE>
operations reuse old record positions. To reclaim unused space and reduce
file sizes, use the <CODE>OPTIMIZE TABLE</CODE> statement or the <CODE>isamchk</CODE>
utility to reorganize tables.  <CODE>OPTIMIZE TABLE</CODE> is easier, but
<CODE>isamchk</CODE> is faster.
See section <A HREF="manual.html#OPTIMIZE_TABLE">7.8  <CODE>OPTIMIZE TABLE</CODE> syntax</A>, and
section <A HREF="manual.html#Optimization">13.4.3  Table optimization</A>.

</P>
<P>
The <STRONG>MySQL</STRONG>-specific <CODE>LIMIT rows</CODE> option to <CODE>DELETE</CODE> tells
the server the maximum number of rows to be deleted before control is
returned to the client.  This can be used to ensure that a specific
<CODE>DELETE</CODE> command doesn't take too much time.  You can simply repeat
the <CODE>DELETE</CODE> command until the number of affected rows is less than
the <CODE>LIMIT</CODE> value.

</P>
<P>
<A NAME="IDX502"></A>


<H2><A NAME="SELECT" HREF="manual_toc.html#SELECT">7.11  <CODE>SELECT</CODE> syntax</A></H2>


<PRE>
SELECT [STRAIGHT_JOIN] [SQL_SMALL_RESULT] [DISTINCT | DISTINCTROW | ALL]
    select_expression,...
    [INTO OUTFILE 'file_name' export_options]
    [FROM table_references
        [WHERE where_definition]
        [GROUP BY col_name,...]
        [HAVING where_definition]
        [ORDER BY {unsigned_integer | col_name} [ASC | DESC] ,...]
        [LIMIT [offset,] rows]
        [PROCEDURE procedure_name] ]
</PRE>

<P>
<CODE>SELECT</CODE> is used to retrieve rows selected from one or more tables.
<CODE>select_expression</CODE> indicates the columns you want to retrieve.
<CODE>SELECT</CODE> may also be used to retrieve rows computed without reference to
any table.  For example:

</P>

<PRE>
mysql&#62; SELECT 1 + 1;
         -&#62; 2
</PRE>

<P>
All keywords used must be given in exactly the order shown above. For example,
a <CODE>HAVING</CODE> clause must come after any <CODE>GROUP BY</CODE> clause and before
any <CODE>ORDER BY</CODE> clause.

</P>

<UL>

<LI>

<A NAME="IDX503"></A>
<A NAME="IDX504"></A>
A <CODE>SELECT</CODE> expression may be given an alias using <CODE>AS</CODE>. The alias
is used as the expression's column name and can be used with
<CODE>ORDER BY</CODE> or <CODE>HAVING</CODE> clauses.  For example:


<PRE>
mysql&#62; select concat(last_name,', ',first_name) AS full_name
    from mytable ORDER BY full_name;
</PRE>

<LI>

The <CODE>FROM table_references</CODE> clause indicates the tables from which to
retrieve rows.  If you name more than one table, you are performing a
join.  For information on join syntax, see section <A HREF="manual.html#JOIN">7.12  <CODE>JOIN</CODE> syntax</A>.

<LI>

You can refer to a column as <CODE>col_name</CODE>, <CODE>tbl_name.col_name</CODE> or
<CODE>db_name.tbl_name.col_name</CODE>.  You need not specify a <CODE>tbl_name</CODE> or
<CODE>db_name.tbl_name</CODE> prefix for a column reference in a <CODE>SELECT</CODE>
statement unless the reference would be ambiguous.  See section <A HREF="manual.html#Legal_names">7.1.4  Database, table, index, column and alias names</A>,
for examples of ambiguity that require the more explicit column reference
forms.

<LI>

<A NAME="IDX505"></A>
<A NAME="IDX506"></A>
A table reference may be aliased using <CODE>tbl_name [AS] alias_name</CODE>.


<PRE>
mysql&#62; select t1.name, t2.salary from employee AS t1, info AS t2
           where t1.name = t2.name;
mysql&#62; select t1.name, t2.salary from employee t1, info t2
           where t1.name = t2.name;
</PRE>

<LI>

Columns selected for output may be referred to in <CODE>ORDER BY</CODE> and
<CODE>GROUP BY</CODE> clauses using column names, column aliases or column
positions.  Column positions begin with 1.


<PRE>
mysql&#62; select college, region, seed from tournament
           ORDER BY region, seed;
mysql&#62; select college, region AS r, seed AS s from tournament
           ORDER BY r, s;
mysql&#62; select college, region, seed from tournament
           ORDER BY 2, 3;
</PRE>

To sort in reverse order, add the <CODE>DESC</CODE> (descending) keyword to the
name of the column in the <CODE>ORDER BY</CODE> clause that you are sorting by.
The default is ascending order; this may be specified explicitly using
the <CODE>ASC</CODE> keyword.

<LI>

The <CODE>HAVING</CODE> clause can refer to any column or alias named in the
<CODE>select_expression</CODE>. It is applied last, just before items are sent to
the client, with no optimization. Don't use <CODE>HAVING</CODE> for items that
should be in the <CODE>WHERE</CODE> clause.  For example, do not write this:


<PRE>
mysql&#62; select col_name from tbl_name HAVING col_name &#62; 0;
</PRE>

Write this instead:


<PRE>
mysql&#62; select col_name from tbl_name WHERE col_name &#62; 0;
</PRE>

In <STRONG>MySQL</STRONG> 3.22.5 or later, you can also write queries like this:


<PRE>
mysql&#62; select user,max(salary) from users
           group by user HAVING max(salary)&#62;10;
</PRE>

In older <STRONG>MySQL</STRONG> versions, you can write this instead:


<PRE>
mysql&#62; select user,max(salary) AS sum from users
           group by user HAVING sum&#62;10;
</PRE>

<LI>

<CODE>STRAIGHT_JOIN</CODE> forces the optimizer to join the tables in the order in
which they are listed in the <CODE>FROM</CODE> clause. You can use this to speed up
a query if the optimizer joins the tables in non-optimal order.
See section <A HREF="manual.html#EXPLAIN">7.21  <CODE>EXPLAIN</CODE> syntax (Get information about a <CODE>SELECT</CODE>)</A>.

<LI>

<CODE>SQL_SMALL_RESULT</CODE> can be used with <CODE>GROUP BY</CODE> or <CODE>DISTINCT</CODE>
to tell the optimizer that the result set will be small.  In this case,
<STRONG>MySQL</STRONG> will use fast temporary tables to store the resulting table
instead of using sorting.  <CODE>SQL_SMALL_RESULT</CODE> is a <STRONG>MySQL</STRONG>
extension to ANSI SQL92.

<LI>

The <CODE>LIMIT</CODE> clause can be used to constrain the number of rows returned
by the <CODE>SELECT</CODE> statement.  <CODE>LIMIT</CODE> takes one or two numeric
arguments.

If two arguments are given, the first specifies the offset of the first row to
return, the second specifies the maximum number of rows to return.
The offset of the initial row is 0 (not 1).


<PRE>
mysql&#62; select * from table LIMIT 5,10;  # Retrieve rows 6-15
</PRE>

If one argument is given, it indicates the maximum number of rows to return.


<PRE>
mysql&#62; select * from table LIMIT 5;     # Retrieve first 5 rows
</PRE>

In other words, <CODE>LIMIT n</CODE> is equivalent to <CODE>LIMIT 0,n</CODE>.

<LI>

<A NAME="IDX507"></A>
The <CODE>SELECT ... INTO OUTFILE 'file_name'</CODE> form of <CODE>SELECT</CODE> writes
the selected rows to a file. The file is created on the server host, and
cannot already exist (among other things, this prevents database tables and
files such as <TT>`/etc/passwd'</TT> from being destroyed).  You must have the
<STRONG>file</STRONG> privilege on the server host to use this form of <CODE>SELECT</CODE>.

<CODE>SELECT ...  INTO OUTFILE</CODE> is the complement of <CODE>LOAD DATA
INFILE</CODE>; the syntax for the <CODE>export_options</CODE> part of the statement
consists of the same <CODE>FIELDS</CODE> and <CODE>LINES</CODE> clauses that are used
with the <CODE>LOAD DATA INFILE</CODE> statement.
See section <A HREF="manual.html#LOAD_DATA">7.15  <CODE>LOAD DATA INFILE</CODE> syntax</A>.

In the resulting text file, only the following characters are escaped by
the <CODE>ESCAPED BY</CODE> character:


<UL>
<LI>The <CODE>ESCAPED BY</CODE> character

<LI>The first character in <CODE>FIELDS TERMINATED BY</CODE>

<LI>The first character in <CODE>LINES TERMINATED BY</CODE>

</UL>

Additionally, <CODE>ASCII 0</CODE> is converted to <CODE>ESCAPED BY</CODE> followed by 0
(<CODE>ASCII 48</CODE>).

The reason for the above is that you MUST escape any <CODE>FIELDS
TERMINATED BY</CODE>, <CODE>ESCAPED BY</CODE> or <CODE>LINES TERMINATED BY</CODE>
characters to reliably be able to read the file
back. <CODE>ASCII 0</CODE> is escaped to make it easier to view with some
pagers.

As the resulting file doesn't have to conform to the SQL syntax, nothing
else need be escaped.
</UL>

<P>
<A NAME="IDX508"></A>
<A NAME="IDX509"></A>
<A NAME="IDX510"></A>
<A NAME="IDX511"></A>
<A NAME="IDX512"></A>
<A NAME="IDX513"></A>
<A NAME="IDX514"></A>


<H2><A NAME="JOIN" HREF="manual_toc.html#JOIN">7.12  <CODE>JOIN</CODE> syntax</A></H2>

<P>
<STRONG>MySQL</STRONG> supports the following <CODE>JOIN</CODE> syntaxes for use in
<CODE>SELECT</CODE> statements:

</P>

<PRE>
table_reference, table_reference
table_reference [CROSS] JOIN table_reference
table_reference STRAIGHT_JOIN table_reference
table_reference LEFT [OUTER] JOIN table_reference ON conditional_expr
table_reference LEFT [OUTER] JOIN table_reference USING (column_list)
table_reference NATURAL LEFT [OUTER] JOIN table_reference
{ oj table_reference LEFT OUTER JOIN table_reference ON conditional_expr }
</PRE>

<P>
<A NAME="IDX515"></A>
<A NAME="IDX516"></A>
The last <CODE>LEFT OUTER JOIN</CODE> syntax shown above exists only for
compatibility with ODBC.

</P>

<UL>
<LI>

A table reference may be aliased using <CODE>tbl_name AS alias_name</CODE> or
<CODE>tbl_name alias_name</CODE>.


<PRE>
mysql&#62; select t1.name, t2.salary from employee AS t1, info AS t2
           where t1.name = t2.name;
</PRE>

<LI>

<CODE>JOIN</CODE> and <CODE>,</CODE> (comma) are semantically equivalent.  Both do a full
join between the tables used.  Normally, you specify how the tables should be
linked in the <CODE>WHERE</CODE> condition.

<LI>

The <CODE>ON</CODE> conditional is any conditional of the form that may be used in
a <CODE>WHERE</CODE> clause.

<LI>

If there is no matching record for the right table in a <CODE>LEFT JOIN</CODE>, a
row with all columns set to <CODE>NULL</CODE> is used for the right table.  You can
use this fact to find records in a table that have no counterpart in another
table:


<PRE>
mysql&#62; select table1.* from table1
           LEFT JOIN table2 ON table1.id=table2.id
           where table2.id is NULL;
</PRE>

This example finds all rows in <CODE>table1</CODE> with an <CODE>id</CODE> value that is
not present in <CODE>table2</CODE> (i.e., all rows in <CODE>table1</CODE> with no
corresponding row in <CODE>table2</CODE>).  This assumes that <CODE>table2.id</CODE> is
declared <CODE>NOT NULL</CODE>, of course.

<LI>

The <CODE>USING</CODE> <CODE>column_list</CODE> clause names a list of columns that must
exist in both tables.  A <CODE>USING</CODE> clause such as:


<PRE>
A LEFT JOIN B USING (C1,C2,C3,...)
</PRE>

is defined to be semantically identical to an <CODE>ON</CODE> expression like
this:


<PRE>
A.C1=B.C1 AND A.C2=B.C2 AND A.C3=B.C3,...
</PRE>

<LI>

The <CODE>NATURAL LEFT JOIN</CODE> of two tables is defined to be semantically
equivalent to a <CODE>LEFT JOIN</CODE> with a <CODE>USING</CODE> clause that names all
columns that exist in both tables.

<LI>

<CODE>STRAIGHT_JOIN</CODE> is identical to <CODE>JOIN</CODE>, except that the left table
is always read before the right table. This can be used for those (few)
cases where the join optimizer puts the tables in the wrong order.
</UL>

<P>
Some examples:

</P>

<PRE>
mysql&#62; select * from table1,table2 where table1.id=table2.id;
mysql&#62; select * from table1 LEFT JOIN table2 ON table1.id=table2.id;
mysql&#62; select * from table1 LEFT JOIN table2 USING (id);
mysql&#62; select * from table1 LEFT JOIN table2 ON table1.id=table2.id
           LEFT JOIN table3 ON table2.id=table3.id;
</PRE>

<P>
See section <A HREF="manual.html#LEFT_JOIN_optimization">10.6  How <STRONG>MySQL</STRONG> optimizes <CODE>LEFT JOIN</CODE></A>.

</P>
<P>
<A NAME="IDX517"></A>


<H2><A NAME="INSERT" HREF="manual_toc.html#INSERT">7.13  <CODE>INSERT</CODE> syntax</A></H2>


<PRE>
    INSERT [LOW_PRIORITY | DELAYED] [IGNORE]
        [INTO] tbl_name [(col_name,...)]
        VALUES (expression,...),(...),...
or  INSERT [LOW_PRIORITY | DELAYED] [IGNORE]
        [INTO] tbl_name [(col_name,...)]
        SELECT ...
or  INSERT [LOW_PRIORITY | DELAYED] [IGNORE]
        [INTO] tbl_name
        SET col_name=expression, col_name=expression, ...
</PRE>

<P>
<CODE>INSERT</CODE> inserts new rows into an existing table.  The <CODE>INSERT ...
VALUES</CODE> form of the statement inserts rows based on explicitly-specified
values.  The <CODE>INSERT ... SELECT</CODE> form inserts rows selected from another
table or tables.  The <CODE>INSERT ... VALUES</CODE> form with multiple value lists
is supported in <STRONG>MySQL</STRONG> 3.22.5 or later.  The
<CODE>col_name=expression</CODE> syntax is supported in <STRONG>MySQL</STRONG> 3.22.10 or
later.

</P>
<P>
<CODE>tbl_name</CODE> is the table into which rows should be inserted.  The column
name list or the <CODE>SET</CODE> clause indicates which columns the statement
specifies values for.

</P>

<UL>
<LI>

If you specify no column list for <CODE>INSERT ... VALUES</CODE> or <CODE>INSERT
... SELECT</CODE>, values for all columns must be provided in the
<CODE>VALUES()</CODE> list or by the <CODE>SELECT</CODE>.  If you don't know the order of
the columns in the table, use <CODE>DESCRIBE tbl_name</CODE> to find out.

<LI>

Any column not explicitly given a value is set to its default value.  For
example, if you specify a column list that doesn't name all the columns in
the table, unnamed columns are set to their default values.  Default value
assignment is described in section <A HREF="manual.html#CREATE_TABLE">7.6  <CODE>CREATE TABLE</CODE> syntax</A>.

<LI>

An <CODE>expression</CODE> may refer to any column that was set earlier in a value
list.  For example, you can say this:


<PRE>
mysql&#62; INSERT INTO tbl_name (col1,col2) VALUES(15,col1*2);
</PRE>

But not this:


<PRE>
mysql&#62; INSERT INTO tbl_name (col1,col2) VALUES(col2*2,15);
</PRE>

<LI>

If you specify the keyword <CODE>LOW_PRIORITY</CODE>, execution of the
<CODE>INSERT</CODE> is delayed until no other clients are reading from the table.

<LI>

If you specify the keyword <CODE>IGNORE</CODE> in an <CODE>INSERT</CODE> with many value
rows, any rows which duplicate an existing <CODE>PRIMARY</CODE> or <CODE>UNIQUE</CODE>
key in the table are ignored and are not inserted.  If you do not specify
<CODE>IGNORE</CODE>, the insert is aborted if there is any row that duplicates an
existing key value.  You can check with the <CODE>mysql_info()</CODE> how many rows
were inserted into the table.

<LI>

If <STRONG>MySQL</STRONG> was configured using the <CODE>DONT_USE_DEFAULT_FIELDS</CODE>
option, <CODE>INSERT</CODE> statements generate an error unless you explicitly
specify values for all columns that require a non-<CODE>NULL</CODE> value.
See section <A HREF="manual.html#configure_options">4.7.3  Typical <CODE>configure</CODE> options</A>.

<LI>

The following conditions hold for a <CODE>INSERT INTO ... SELECT</CODE> statement:


<UL>
<LI>

The query cannot contain an <CODE>ORDER BY</CODE> clause.

<LI>

The target table of the <CODE>INSERT</CODE> statement cannot appear in the
<CODE>FROM</CODE> clause of the <CODE>SELECT</CODE> part of the query, because it's
forbidden in ANSI SQL to <CODE>SELECT</CODE> from the same table into which you are
<CODE>INSERT</CODE>ing.  (The problem is that the <CODE>SELECT</CODE> possibly would
find records that were inserted earlier during the same run.  When using
sub-select clauses, the situation could easily be very confusing!)

<LI>

<CODE>AUTO_INCREMENT</CODE> columns work as usual.
</UL>

</UL>

<P>
<A NAME="IDX518"></A>
If you use <CODE>INSERT ... SELECT</CODE> or a <CODE>INSERT ... VALUES</CODE>
statement with multiple value lists, you can use the C API function
<CODE>mysql_info()</CODE> to get information about the query.  The format of the
information string is shown below:

</P>

<PRE>
Records: 100 Duplicates: 0 Warnings: 0
</PRE>

<P>
<CODE>Duplicates</CODE> indicates the number of rows that couldn't be inserted
because they would duplicate some existing unique index value.
<CODE>Warnings</CODE> indicates the number of attempts to insert column values that
were problematic in some way. Warnings can occur under any of the following
conditions:

</P>

<UL>
<LI>

Inserting <CODE>NULL</CODE> into a column that has been declared <CODE>NOT NULL</CODE>.
The column is set to its default value.

<LI>

Setting a numeric column to a value that lies outside the column's range.
The value is clipped to the appropriate endpoint of the range.

<LI>

Setting a numeric column to a value such as <CODE>'10.34 a'</CODE>.  The trailing
garbage is stripped and the remaining numeric part is inserted.  If the value
doesn't make sense as a number at all, the column is set to <CODE>0</CODE>.

<LI>

Inserting a string into a <CODE>CHAR</CODE>, <CODE>VARCHAR</CODE>, <CODE>TEXT</CODE> or
<CODE>BLOB</CODE> column that exceeds the column's maximum length.  The value is
truncated to the column's maximum length.

<LI>

Inserting a value into a date or time column that is illegal for the column
type.  The column is set to the appropriate "zero" value for the type.
</UL>

<P>
<A NAME="IDX519"></A>
<A NAME="IDX520"></A>

</P>
<P>
The <CODE>DELAYED</CODE> option
for the
<CODE>INSERT</CODE> statement is a <STRONG>MySQL</STRONG>-specific option that is very
useful if you have clients that can't wait for the <CODE>INSERT</CODE> to complete.
This is common when you use <STRONG>MySQL</STRONG> for logging and you also
periodically run <CODE>SELECT</CODE> statements that take a long time to complete.
<CODE>DELAYED</CODE> was introduced in <STRONG>MySQL</STRONG> 3.22.15.  It is a
<STRONG>MySQL</STRONG> extension to ANSI SQL92.

</P>
<P>
Another major benefit of using <CODE>INSERT DELAYED</CODE> is that inserts
from many clients are bundled together and written in one block. This is much
faster than doing many separate inserts.

</P>
<P>
Note that currently the queued rows are only stored in memory until they are
inserted into the table.  This means that if you kill <CODE>mysqld</CODE>
the hard way (<CODE>kill -9</CODE>) or if <CODE>mysqld</CODE> dies unexpectedly, any
queued rows that weren't written to disk are lost!

</P>
<P>
The following happens when you use the <CODE>DELAYED</CODE> option to <CODE>INSERT</CODE>
or <CODE>REPLACE</CODE>.  In this description, the "thread" is the thread that
received an <CODE>INSERT DELAYED</CODE> command and "handler" is the thread that
handles all <CODE>INSERT DELAYED</CODE> statements for a particular table.

</P>

<UL>
<LI>

When a thread executes a <CODE>DELAYED</CODE> statement for a table, a handler
thread is created to handle all <CODE>DELAYED</CODE> statements for the table, if
no such handler already exists.

<LI>

The thread checks whether or not the handler has acquired a <CODE>DELAYED</CODE>
lock already; if not, it tells the handler thread to do so.  The
<CODE>DELAYED</CODE> lock can be obtained even if other threads have a <CODE>READ</CODE>
or <CODE>WRITE</CODE> lock on the table.  However, the handler will wait for all
<CODE>ALTER TABLE</CODE> locks or <CODE>FLUSH TABLES</CODE> to ensure that the table
structure is up to date.

<LI>

The thread executes the <CODE>INSERT</CODE> statement but instead of writing
the row to the table it puts a copy of the final row into a queue that
is managed by the handler thread. Any syntax errors are noticed by the
thread and reported the client program.

<LI>

The client can't report the number of duplicates or the <CODE>AUTO_INCREMENT</CODE>
value for the resulting row; it can't obtain them from the server, because
the <CODE>INSERT</CODE> returns before the insert operation has been completed.  If
you use the C API, the <CODE>mysql_info()</CODE> function doesn't return anything
meaningful, for the same reason.

<LI>

The update log is updated by the handler thread when the row is inserted into
the table.  In case of multiple-row inserts, the update log is updated when
the first row is inserted.

<LI>

After every <CODE>delayed_insert_limit</CODE> rows are written, the handler checks
whether or not any <CODE>SELECT</CODE> statements are still pending.  If so, it
allows these to execute before continuing.

<LI>

When the handler has no more rows in its queue, the table is unlocked.  If no
new <CODE>INSERT DELAYED</CODE> commands are received within
<CODE>delayed_insert_timeout</CODE> seconds, the handler terminates.

<LI>

If more than <CODE>delayed_queue_size</CODE> rows are pending already in a specific
handler queue, the thread waits until there is room in the queue.  This is
useful to ensure that the <CODE>mysqld</CODE> server doesn't use all memory for the
delayed memory queue.

<LI>

The handler thread will show up in the <STRONG>MySQL</STRONG> process list
with <CODE>delayed_insert</CODE> in the <CODE>Command</CODE> column.  It will
be killed if you execute a <CODE>FLUSH TABLES</CODE> command or kill it with
<CODE>KILL thread_id</CODE>. However, it will first store all queued rows into the
table before exiting. During this time it will not accept any new
<CODE>INSERT</CODE> commands from another thread. If you execute an <CODE>INSERT
DELAYED</CODE> command after this, a new handler thread will be created.

<LI>

Note that the above means that <CODE>INSERT DELAYED</CODE> commands have higher
priority than normal <CODE>INSERT</CODE> commands if there is an <CODE>INSERT
DELAYED</CODE> handler already running!  Other update commands will have to wait
until the <CODE>INSERT DELAY</CODE> queue is empty, someone kills the handler
thread (with <CODE>KILL thread_id</CODE>) or someone executes <CODE>FLUSH TABLES</CODE>.

<LI>

The following status variables provide information about <CODE>INSERT
DELAYED</CODE> commands:

<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><CODE>Delayed_insert_threads</CODE> </TD><TD> Number of handler threads
</TR NOSAVE>
<TR><TD><CODE>Delayed_writes</CODE> </TD><TD> Number of rows written with <CODE>INSERT DELAYED</CODE>
</TR NOSAVE>
<TR><TD><CODE>Not_flushed_delayed_rows</CODE> </TD><TD> Number of rows waiting to be written
</TR>
</TABLE>

You can view these variables by issuing a <CODE>SHOW STATUS</CODE> statement or
by executing a <CODE>mysqladmin extended-status</CODE> command.
</UL>

<P>
<A NAME="IDX521"></A>


<H2><A NAME="REPLACE" HREF="manual_toc.html#REPLACE">7.14  <CODE>REPLACE</CODE> syntax</A></H2>


<PRE>
    REPLACE [LOW_PRIORITY | DELAYED]
        [INTO] tbl_name [(col_name,...)]
        VALUES (expression,...)
or  REPLACE [LOW_PRIORITY | DELAYED]
        [INTO] tbl_name [(col_name,...)]
        SELECT ...
or  REPLACE [LOW_PRIORITY | DELAYED]
        [INTO] tbl_name
        SET col_name=expression, col_name=expression,...
</PRE>

<P>
<CODE>REPLACE</CODE> works exactly like <CODE>INSERT</CODE>, except that if an old
record in the table has the same value as a new record on a unique index,
the old record is deleted before the new record is inserted.
See section <A HREF="manual.html#INSERT">7.13  <CODE>INSERT</CODE> syntax</A>.

</P>
<P>
<A NAME="IDX522"></A>


<H2><A NAME="LOAD_DATA" HREF="manual_toc.html#LOAD_DATA">7.15  <CODE>LOAD DATA INFILE</CODE> syntax</A></H2>


<PRE>
LOAD DATA [LOCAL] INFILE 'file_name.txt' [REPLACE | IGNORE]
    INTO TABLE tbl_name
    [FIELDS
        [TERMINATED BY '\t']
        [OPTIONALLY] ENCLOSED BY "]
        [ESCAPED BY '\\' ]]
    [LINES TERMINATED BY '\n']
    [IGNORE number LINES]
    [(col_name,...)]
</PRE>

<P>
The <CODE>LOAD DATA INFILE</CODE> statement reads rows from a text file into a
table at a very high speed.  If the <CODE>LOCAL</CODE> keyword is specified, the
file is read from the client host.  If <CODE>LOCAL</CODE> is not specified, the
file must be located on the server.  (<CODE>LOCAL</CODE> is available in
<STRONG>MySQL</STRONG> 3.22.6 or later.)

</P>
<P>
For security reasons, when reading text files located on the server, the
files must either reside in the database directory or be readable by all.
Also, to use <CODE>LOAD DATA INFILE</CODE> on server files, you must have the
<STRONG>file</STRONG> privilege on the server host.
See section <A HREF="manual.html#Privileges">6.6  How the privilege system works</A>.

</P>
<P>
Using <CODE>LOCAL</CODE> will be a bit slower than letting the server access the
files directly, since the contents of the file must travel from the client
host to the server host.  On the other hand, you do not need the
<STRONG>file</STRONG> privilege to load local files.

</P>
<P>
<A NAME="IDX523"></A>
You can also load data files by using the <CODE>mysqlimport</CODE> utility; it
operates by sending a <CODE>LOAD DATA INFILE</CODE> command to the server.  The
<CODE>--local</CODE> option causes <CODE>mysqlimport</CODE> to read data files from the
client host.  You can specify the <CODE>--compress</CODE> option to get better
performance over slow networks if the client and server support the
compressed protocol.

</P>
<P>
When locating files on the server host, the server uses the following rules:

</P>

<UL>
<LI>

If an absolute pathname is given, the server uses the pathname as is.

<LI>

If a relative pathname with one or more leading components is given,
the server searches for the file relative to the server's data directory.

<LI>

If a filename with no leading components is given, the server looks for
the file in the database directory of the current database.
</UL>

<P>
Note that these rules mean a file given as <TT>`./myfile.txt'</TT> is read from
the server's data directory, whereas a file given as <TT>`myfile.txt'</TT> is
read from the database directory of the current database.  Note also that
for statements such as those below, the file is read from the database
directory for <CODE>db1</CODE>, not <CODE>db2</CODE>:

</P>

<PRE>
mysql&#62; USE db1;
mysql&#62; LOAD DATA INFILE "./data.txt" INTO TABLE db2.my_table; 
</PRE>

<P>
The <CODE>REPLACE</CODE> and <CODE>IGNORE</CODE> keywords control handling of input
records that duplicate existing records on unique key values.  If you specify
<CODE>REPLACE</CODE>, new rows replace existing rows that have the same unique key
value. If you specify <CODE>IGNORE</CODE>, input rows that duplicate an existing
row on a unique key value are skipped.  If you don't specify either option, an
error occurs when a duplicate key value is found, and the rest of the text
file is ignored.

</P>
<P>
If you load data from a local file using the <CODE>LOCAL</CODE> keyword, the server
has no way to stop transmission of the file in the middle of the operation,
so the default bahavior is the same as if <CODE>IGNORE</CODE> is specified.

</P>
<P>
<CODE>LOAD DATA INFILE</CODE> is the complement of <CODE>SELECT ... INTO OUTFILE</CODE>.
See section <A HREF="manual.html#SELECT">7.11  <CODE>SELECT</CODE> syntax</A>.
To write data from a database to a file, use <CODE>SELECT ... INTO OUTFILE</CODE>.
To read the file back into the database, use <CODE>LOAD DATA INFILE</CODE>.
The syntax of the <CODE>FIELDS</CODE> and <CODE>LINES</CODE> clauses is the same for
both commands.  Both clauses are optional, but <CODE>FIELDS</CODE>
must precede <CODE>LINES</CODE> if both are specified.

</P>
<P>
If you specify a <CODE>FIELDS</CODE> clause,
each of its subclauses (<CODE>TERMINATED BY</CODE>, <CODE>[OPTIONALLY] ENCLOSED
BY</CODE> and <CODE>ESCAPED BY</CODE>) is also optional, except that you must
specify at least one of them.

</P>
<P>
If you don't specify a <CODE>FIELDS</CODE> clause, the defaults are the
same as if you had written this:

</P>

<PRE>
FIELDS TERMINATED BY '\t' ENCLOSED BY " ESCAPED BY '\\'
</PRE>

<P>
If you don't specify a <CODE>LINES</CODE> clause, the default
is the same as if you had written this:

</P>

<PRE>
LINES TERMINATED BY '\n'
</PRE>

<P>
In other words, the defaults cause <CODE>LOAD DATA INFILE</CODE> to act as follows
when reading input:

</P>

<UL>
<LI>

Look for line boundaries at newlines

<LI>

Break lines into fields at tabs

<LI>

Do not expect fields to be enclosed within any quoting characters

<LI>

Interpret occurrences of tab, newline or <SAMP>`\'</SAMP> preceded by
<SAMP>`\'</SAMP> as literal characters that are part of field values
</UL>

<P>
Conversely, the defaults cause <CODE>SELECT ... INTO OUTFILE</CODE> to act as
follows when writing output:

</P>

<UL>
<LI>

Write tabs between fields

<LI>

Do not enclose fields within any quoting characters

<LI>

Use <SAMP>`\'</SAMP> to escape instances of tab, newline or <SAMP>`\'</SAMP> that occur
within field values

<LI>

Write newlines at the ends of lines
</UL>

<P>
Note that to write <CODE>FIELDS ESCAPED BY '\\'</CODE>, you must specify two
backslashes for the value to be read as a single backslash.

</P>
<P>
The <CODE>IGNORE number LINES</CODE> option can be used to ignore a header of
column names at the start of the file:

</P>

<PRE>
mysql&#62; LOAD DATA INFILE "/tmp/file_name" into table test IGNORE 1 LINES;
</PRE>

<P>
When you use <CODE>SELECT ... INTO OUTFILE</CODE> in tandem with <CODE>LOAD
DATA INFILE</CODE> to write data from a database into a file and then read
the file back into the database later, the field and line handling
options for both commands must match.  Otherwise, <CODE>LOAD DATA
INFILE</CODE> will not interpret the contents of the file properly.  Suppose
you use <CODE>SELECT ... INTO OUTFILE</CODE> to write a file with
fields delimited by commas:

</P>

<PRE>
mysql&#62; SELECT * FROM table1 INTO OUTFILE 'data.txt'
           FIELDS TERMINATED BY ','
           FROM ...
</PRE>

<P>
To read the comma-delimited file back in, the correct statement would be:

</P>

<PRE>
mysql&#62; LOAD DATA INFILE 'data.txt' INTO TABLE table2
           FIELDS TERMINATED BY ',';
</PRE>

<P>
If instead you tried to read in the file with the statement shown below, it
wouldn't work because it instructs <CODE>LOAD DATA INFILE</CODE> to look for
tabs between fields:

</P>

<PRE>
mysql&#62; LOAD DATA INFILE 'data.txt' INTO TABLE table2
           FIELDS TERMINATED BY '\t';
</PRE>

<P>
The likely result is that each input line would be interpreted as
a single field.

</P>
<P>
<CODE>LOAD DATA INFILE</CODE> can be used to read files obtained from
external sources, too. For example, a file in dBASE format will have
fields separated by commas and enclosed in double quotes.  If lines in
the file are terminated by newlines, the command shown below
illustrates the field and line handling options you would use to load
the file:

</P>

<PRE>
mysql&#62; LOAD DATA INFILE 'data.txt' INTO TABLE tbl_name
           FIELDS TERMINATED BY ',' ENCLOSED BY '"'
           LINES TERMINATED BY '\n';
</PRE>

<P>
Any of the field or line handling options may specify an empty string
(<CODE>"</CODE>).  If not empty, the <CODE>FIELDS [OPTIONALLY] ENCLOSED BY</CODE>
and <CODE>FIELDS ESCAPED BY</CODE> values must be a single character.  The
<CODE>FIELDS TERMINATED BY</CODE> and <CODE>LINES TERMINATED BY</CODE> values may
be more than one character.  For example, to write lines that are
terminated by carriage return-linefeed pairs, or to read a file
containing such lines, specify a <CODE>LINES TERMINATED BY '\r\n'</CODE>
clause.

</P>
<P>
<CODE>FIELDS [OPTIONALLY] ENCLOSED BY</CODE> controls quoting of fields.  For
output (<CODE>SELECT ... INTO OUTFILE</CODE>), if you omit the word
<CODE>OPTIONALLY</CODE>, all fields are enclosed by the <CODE>ENCLOSED BY</CODE>
character.  An example of such output (using a comma as the field
delimiter) is shown below:

</P>

<PRE>
"1","a string","100.20"
"2","a string containing a , comma","102.20"
"3","a string containing a \" quote","102.20"
"4","a string containing a \", quote and comma","102.20"
</PRE>

<P>
If you specify <CODE>OPTIONALLY</CODE>, the <CODE>ENCLOSED BY</CODE> character is
used only to enclose <CODE>CHAR</CODE> and <CODE>VARCHAR</CODE> fields:

</P>

<PRE>
1,"a string",100.20
2,"a string containing a , comma",102.20
3,"a string containing a \" quote",102.20
4,"a string containing a \", quote and comma",102.20
</PRE>

<P>
Note that occurrences of the <CODE>ENCLOSED BY</CODE> character within a
field value are escaped by prefixing them with the <CODE>ESCAPED BY</CODE>
character.  Also note that if you specify an empty <CODE>ESCAPED BY</CODE>
value, it is possible to generate output that cannot be read properly by
<CODE>LOAD DATA INFILE</CODE>. For example, the output just shown above would
appear as shown below if the escape character is empty.  Observe that the
second field in the fourth line contains a comma following the quote, which
(erroneously) appears to terminate the field:

</P>

<PRE>
1,"a string",100.20
2,"a string containing a , comma",102.20
3,"a string containing a " quote",102.20
4,"a string containing a ", quote and comma",102.20
</PRE>

<P>
For input, the <CODE>ENCLOSED BY</CODE> character, if present, is stripped from the
ends of field values.  (This is true whether or not <CODE>OPTIONALLY</CODE> is
specified; <CODE>OPTIONALLY</CODE> has no effect on input interpretation.)
Occurrences of the <CODE>ENCLOSED BY</CODE> character preceded by the
<CODE>ESCAPED BY</CODE> character are interpreted as part of the current field
value.  In addition, duplicated <CODE>ENCLOSED BY</CODE> characters occurring
within fields are interpreted as single <CODE>ENCLOSED BY</CODE> characters if the
field itself starts with that character.  For example, if <CODE>ENCLOSED BY
'"'</CODE> is specified, quotes are handled as shown below:

</P>

<PRE>
"The ""BIG"" boss"  -&#62; The "BIG" boss
The "BIG" boss      -&#62; The "BIG" boss
The ""BIG"" boss    -&#62; The ""BIG"" boss
</PRE>

<P>
<CODE>FIELDS ESCAPED BY</CODE> controls how to write or read special characters.
If the <CODE>FIELDS ESCAPED BY</CODE> character is not empty, it is used to prefix
the following characters on output:

<UL>
<LI>

The <CODE>FIELDS ESCAPED BY</CODE> character
<LI>

The <CODE>FIELDS [OPTIONALLY] ENCLOSED BY</CODE> character
<LI>

The first character of the <CODE>FIELDS TERMINATED BY</CODE> and
<CODE>LINES TERMINATED BY</CODE> values
<LI>

ASCII <CODE>0</CODE> (what is actually written following the escape character is
ASCII <CODE>'0'</CODE>, not a zero-valued byte)
</UL>

<P>
If the <CODE>FIELDS ESCAPED BY</CODE> character is empty, no characters are escaped.
It is probably not a good idea to specify an empty escape character,
particularly if field values in your data contain any of the characters in
the list just given.

</P>
<P>
For input, if the <CODE>FIELDS ESCAPED BY</CODE> character is not empty, occurrences
of that character are stripped and the following character is taken literally
as part of a field value.  The exceptions are an escaped <SAMP>`0'</SAMP> or
<SAMP>`N'</SAMP> (e.g., <CODE>\0</CODE> or <CODE>\N</CODE> if the escape character is
<SAMP>`\'</SAMP>).  These sequences are interpreted as ASCII <CODE>0</CODE> (a zero-valued
byte) and <CODE>NULL</CODE>.  See below for the rules on <CODE>NULL</CODE> handling.

</P>
<P>
For more information about <SAMP>`\'</SAMP>-escape syntax,
see section <A HREF="manual.html#Literals">7.1  Literals: how to write strings and numbers</A>.

</P>
<P>
In certain cases, field and line handling options interact:

</P>

<UL>
<LI>

If <CODE>LINES TERMINATED BY</CODE> is an empty string and <CODE>FIELDS
TERMINATED BY</CODE> is non-empty, lines are also terminated with
<CODE>FIELDS TERMINATED BY</CODE>.
<LI>

If the <CODE>FIELDS TERMINATED BY</CODE> and <CODE>FIELDS ENCLOSED BY</CODE> values are
both empty (<CODE>"</CODE>), a fixed-row (non-delimited) format is used.  With
fixed-row format, no delimiters are used between fields. Instead, column
values are written and read using the "display" widths of the columns.  For
example, if a column is declared as <CODE>INT(7)</CODE>, values for the column are
written using 7-character fields.  On input, values for the column are
obtained by reading 7 characters.  Fixed-row format also affects handling of
<CODE>NULL</CODE> values; see below.
</UL>

<P>
Handling of <CODE>NULL</CODE> values varies, depending on the <CODE>FIELDS</CODE> and
<CODE>LINES</CODE> options you use:

</P>

<UL>
<LI>

For the default <CODE>FIELDS</CODE> and <CODE>LINES</CODE> values,
<CODE>NULL</CODE> is written as <CODE>\N</CODE> for output and <CODE>\N</CODE> is read
as <CODE>NULL</CODE> for input (assuming the <CODE>ESCAPED BY</CODE> character
is <SAMP>`\'</SAMP>).

<LI>

If <CODE>FIELDS ENCLOSED BY</CODE> is not empty, a field containing the literal
word <CODE>NULL</CODE> as its value is read as a <CODE>NULL</CODE> value (this differs
from the word <CODE>NULL</CODE> enclosed within <CODE>FIELDS ENCLOSED BY</CODE>
characters, which is read as the string <CODE>'NULL'</CODE>).

<LI>

If <CODE>FIELDS ESCAPED BY</CODE> is empty, <CODE>NULL</CODE> is written as the word
<CODE>NULL</CODE>.

<LI>

With fixed-row format (which happens when <CODE>FIELDS TERMINATED BY</CODE> and
<CODE>FIELDS ENCLOSED BY</CODE> are both empty), <CODE>NULL</CODE> is written as an empty
string.  Note that this causes both <CODE>NULL</CODE> values and empty strings in
the table to be indistinguishable when written to the file since they are
both written as empty strings.  If you need to be able to tell the two apart
when reading the file back in, you should not use fixed-row format.
</UL>

<P>
Some cases are not supported by <CODE>LOAD DATA INFILE</CODE>:

<UL>

<LI>

Fixed-size rows (<CODE>FIELDS TERMINATED BY</CODE> and <CODE>FIELDS ENCLOSED
BY</CODE> both empty) and <CODE>BLOB</CODE> or <CODE>TEXT</CODE> columns.

<LI>

If you specify one separator that is the same as or a prefix of another,
<CODE>LOAD DATA INFILE</CODE> won't be able to interpret the input properly.
For example, the following <CODE>FIELDS</CODE> clause would cause problems:


<PRE>
FIELDS TERMINATED BY '"' ENCLOSED BY '"'
</PRE>

<LI>

If <CODE>FIELDS ESCAPED BY</CODE> is empty, a field value that contains an occurrence
of <CODE>FIELDS ENCLOSED BY</CODE> or <CODE>LINES TERMINATED BY</CODE>
followed by the <CODE>FIELDS TERMINATED BY</CODE> value will cause <CODE>LOAD
DATA INFILE</CODE> to stop reading a field or line too early.
This happens because <CODE>LOAD DATA INFILE</CODE> cannot properly determine
where the field or line value ends.
</UL>

<P>
The following example loads all columns of the <CODE>persondata</CODE> table:

</P>

<PRE>
mysql&#62; LOAD DATA INFILE 'persondata.txt' INTO TABLE persondata;
</PRE>

<P>
No field list is specified, so <CODE>LOAD DATA INFILE</CODE> expects input rows
to contain a field for each table column.  The default <CODE>FIELDS</CODE> and
<CODE>LINES</CODE> values are used.

</P>
<P>
If you wish to load only some of a table's columns, specify a field list:

</P>

<PRE>
mysql&#62; LOAD DATA INFILE 'persondata.txt'
           INTO TABLE persondata (col1,col2,...);
</PRE>

<P>
You must also specify a field list if the order of the fields in the input
file differs from the order of the columns in the table.  Otherwise,
<STRONG>MySQL</STRONG> cannot tell how to match up input fields with table columns.

</P>
<P>
If a row has too few fields, the columns for which no input field is present
are set to default values.  Default value assignment is described in
section <A HREF="manual.html#CREATE_TABLE">7.6  <CODE>CREATE TABLE</CODE> syntax</A>.

</P>
<P>
An empty field value is interpreted differently than if the field value
is missing:

</P>

<UL>
<LI>

For string types, the column is set to the empty string.

<LI>

For numeric types, the column is set to <CODE>0</CODE>.

<LI>

For date and time types, the column is set to the appropriate "zero"
value for the type.
See section <A HREF="manual.html#Date_and_time_types">7.2.6  Date and time types</A>.
</UL>

<P>
<CODE>TIMESTAMP</CODE> columns are only set to the current date and time if there
is a <CODE>NULL</CODE> value for the column, or (for the first <CODE>TIMESTAMP</CODE>
column only) if the <CODE>TIMESTAMP</CODE> column is left out from the field list
when a field list is specified.

</P>
<P>
If an input row has too many fields, the extra fields are ignored and
the number of warnings is incremented.

</P>
<P>
<CODE>LOAD DATA INFILE</CODE> regards all input as strings, so you can't use
numeric values for <CODE>ENUM</CODE> or <CODE>SET</CODE> columns the way you can with
<CODE>INSERT</CODE> statements.  All <CODE>ENUM</CODE> and <CODE>SET</CODE> values must be
specified as strings!

</P>
<P>
<A NAME="IDX524"></A>
If you are using the C API, you can get information about the query by
calling the API function <CODE>mysql_info()</CODE> when the <CODE>LOAD DATA INFILE</CODE>
query finishes.  The format of the information string is shown below:

</P>

<PRE>
Records: 1  Deleted: 0  Skipped: 0  Warnings: 0
</PRE>

<P>
Warnings occur under the same circumstances as when values are inserted
via the <CODE>INSERT</CODE> statement (see section <A HREF="manual.html#INSERT">7.13  <CODE>INSERT</CODE> syntax</A>), except
that <CODE>LOAD DATA INFILE</CODE> also generates warnings when there are too few
or too many fields in the input row.  The warnings are not stored anywhere;
the number of warnings can only be used as an indication if everything went
well.  If you get warnings and want to know exactly why you got them, one way
to do this is to use <CODE>SELECT ... INTO OUTFILE</CODE> into another file and
compare this to your original input file.

</P>
<P>
For more information about the efficiency of <CODE>INSERT</CODE> versus
<CODE>LOAD DATA INFILE</CODE> and speeding up <CODE>LOAD DATA INFILE</CODE>,
see section <A HREF="manual.html#Table_efficiency">10.11  How to arrange a table to be as fast/small as possible</A>.

</P>
<P>
<A NAME="IDX525"></A>


<H2><A NAME="UPDATE" HREF="manual_toc.html#UPDATE">7.16  <CODE>UPDATE</CODE> syntax</A></H2>


<PRE>
UPDATE [LOW_PRIORITY] tbl_name SET col_name1=expr1,col_name2=expr2,...
    [WHERE where_definition]
</PRE>

<P>
<CODE>UPDATE</CODE> updates columns in existing table rows with new values.  The
<CODE>SET</CODE> clause indicates which columns to modify and the values they
should be given.  The <CODE>WHERE</CODE> clause, if given, specifies which rows
should be updated.  Otherwise all rows are updated.

</P>
<P>
If you specify the keyword <CODE>LOW_PRIORITY</CODE>, execution of the
<CODE>UPDATE</CODE> is delayed until no other clients are reading from the table.

</P>
<P>
If you access a column from <CODE>tbl_name</CODE> in an expression, <CODE>UPDATE</CODE> uses
the current value of the column.  For example, the following statement sets
the <CODE>age</CODE> column to one more than its current value:

</P>

<PRE>
mysql&#62; UPDATE persondata SET age=age+1;
</PRE>

<P>
<CODE>UPDATE</CODE> assignments are evaluated from left to right.  For example, the
following statement doubles the <CODE>age</CODE> column, then increments it:

</P>

<PRE>
mysql&#62; UPDATE persondata SET age=age*2, age=age+1;
</PRE>

<P>
If you set a column to the value it currently has, <STRONG>MySQL</STRONG> notices
this and doesn't update it.

</P>
<P>
<A NAME="IDX526"></A>
<CODE>UPDATE</CODE> returns the number of rows that were actually changed.
In <STRONG>MySQL</STRONG> 3.22 or later, the C API function <CODE>mysql_info()</CODE>
returns the number of rows that were matched and updated and the number of
warnings that occurred during the <CODE>UPDATE</CODE>.

</P>
<P>
<A NAME="IDX527"></A>


<H2><A NAME="USE" HREF="manual_toc.html#USE">7.17  <CODE>USE</CODE> syntax</A></H2>


<PRE>
USE db_name
</PRE>

<P>
The <CODE>USE db_name</CODE> statement tells <STRONG>MySQL</STRONG> to use the <CODE>db_name</CODE>
database as the default database for subsequent queries.  The database remains
current until the end of the session, or until another <CODE>USE</CODE> statement
is issued:

</P>

<PRE>
mysql&#62; USE db1;
mysql&#62; SELECT count(*) FROM mytable;      # selects from db1.mytable
mysql&#62; USE db2;
mysql&#62; SELECT count(*) FROM mytable;      # selects from db2.mytable
</PRE>

<P>
Making a particular database current by means of the <CODE>USE</CODE> statement
does not preclude you from accessing tables in other databases.  The example
below accesses the <CODE>author</CODE> table from the <CODE>db1</CODE> database and the
<CODE>editor</CODE> table from the <CODE>db2</CODE> database:

</P>

<PRE>
mysql&#62; USE db1;
mysql&#62; SELECT author_name,editor_name FROM author,db2.editor
           WHERE author.editor_id = db2.editor.editor_id;
</PRE>

<P>
<A NAME="IDX528"></A>
<A NAME="IDX529"></A>
The <CODE>USE</CODE> statement is provided for Sybase compatibility.

</P>
<P>
<A NAME="IDX530"></A>
<A NAME="IDX531"></A>


<H2><A NAME="FLUSH" HREF="manual_toc.html#FLUSH">7.18  <CODE>FLUSH</CODE> syntax (clearing caches)</A></H2>


<PRE>
FLUSH flush_option [,flush_option]
</PRE>

<P>
You should use the <CODE>FLUSH</CODE> command if you want to clear some of the
internal caches <STRONG>MySQL</STRONG> uses.  To execute <CODE>FLUSH</CODE>, you must have
the <STRONG>reload</STRONG> privilege.

</P>
<P>
<CODE>flush_option</CODE> can be any of the following:

</P>
<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><CODE>HOSTS</CODE> </TD><TD> Empties the host cache tables.  You should flush the
host tables if some of your hosts change IP number or if you get the
error message <CODE>Host ... is blocked</CODE>.  When more than
<CODE>max_connect_errors</CODE> errors occur in a row for a given host while
connection to the <STRONG>MySQL</STRONG> server, <STRONG>MySQL</STRONG> assumes
something is wrong and blocks the host from further connection requests.
Flushing the host tables allows the host to attempt to connect
again. See section <A HREF="manual.html#Blocked_host">17.2.3  <CODE>Host '...' is blocked</CODE> error</A>.) You can start <CODE>mysqld</CODE> with
<CODE>-O max_connection_errors=999999999</CODE> to avoid this error message.

</TR NOSAVE>
<TR><TD><CODE>LOGS</CODE> </TD><TD> Closes and reopens the standard and update log
files.  If you have specified the update log file without an extension, the
extension number of the new update log file will be incremented by one
relative to the previous file.

</TR NOSAVE>
<TR><TD><CODE>PRIVILEGES</CODE> </TD><TD> Reloads the privileges from the grant tables in
the <CODE>mysql</CODE> database.

</TR NOSAVE>
<TR><TD><CODE>TABLES</CODE> </TD><TD> Closes all open tables.

</TR NOSAVE>
<TR><TD><CODE>STATUS</CODE> </TD><TD> Resets most status variables to zero.
</TR>
</TABLE>

<P>
You can also access each of the commands shown above with the <CODE>mysqladmin</CODE>
utility, using the <CODE>flush-hosts</CODE>, <CODE>flush-logs</CODE>, <CODE>reload</CODE>
or <CODE>flush-tables</CODE> commands.

</P>
<P>
<A NAME="IDX532"></A>
<A NAME="IDX533"></A>


<H2><A NAME="KILL" HREF="manual_toc.html#KILL">7.19  <CODE>KILL</CODE> syntax</A></H2>


<PRE>
KILL thread_id
</PRE>

<P>
Each connection to <CODE>mysqld</CODE> runs in a separate thread.  You can see
which threads are running with the <CODE>SHOW PROCESSLIST</CODE> command, and kill
a thread with the <CODE>KILL thread_id</CODE> command.

</P>
<P>
If you have the <STRONG>process</STRONG> privilege, you can see and kill all threads.
Otherwise, you can see and kill only your own threads.

</P>
<P>
You can also use the <CODE>mysqladmin processlist</CODE> and <CODE>mysqladmin kill</CODE>
commands to examine and kill threads.

</P>
<P>
<A NAME="IDX534"></A>
<A NAME="IDX535"></A>
<A NAME="IDX536"></A>
<A NAME="IDX537"></A>
<A NAME="IDX538"></A>
<A NAME="IDX539"></A>
<A NAME="IDX540"></A>
<A NAME="IDX541"></A>
<A NAME="IDX542"></A>
<A NAME="IDX543"></A>


<H2><A NAME="SHOW" HREF="manual_toc.html#SHOW">7.20  <CODE>SHOW</CODE> syntax (Get information about tables, columns,...)</A></H2>


<PRE>
   SHOW DATABASES [LIKE wild]
or SHOW TABLES [FROM db_name] [LIKE wild]
or SHOW COLUMNS FROM tbl_name [FROM db_name] [LIKE wild]
or SHOW INDEX FROM tbl_name [FROM db_name]
or SHOW STATUS
or SHOW VARIABLES [LIKE wild]
or SHOW PROCESSLIST
or SHOW TABLE STATUS [FROM db_name] [LIKE wild]
</PRE>

<P>
<CODE>SHOW</CODE> provides information about databases, tables, columns or the
server. If the <CODE>LIKE wild</CODE> part is used, the <CODE>wild</CODE> string can be a
string that uses the SQL <SAMP>`%'</SAMP> and <SAMP>`_'</SAMP> wildcard characters.

</P>
<P>
You can use <CODE>db_name.tbl_name</CODE> as an alternative to the <CODE>tbl_name
FROM db_name</CODE> syntax.  These two statements are equivalent:

</P>

<PRE>
mysql&#62; SHOW INDEX FROM mytable FROM mydb;
mysql&#62; SHOW INDEX FROM mydb.mytable;
</PRE>

<P>
<CODE>SHOW DATABASES</CODE> lists the databases on the <STRONG>MySQL</STRONG> server
host.  You can also get this list using the <CODE>mysqlshow</CODE> command.

</P>
<P>
<CODE>SHOW TABLES</CODE> lists the tables in a given database.  You can also
get this list using the <CODE>mysqlshow db_name</CODE> command.

</P>
<P>
<STRONG>Note:</STRONG> If a user doesn't have any privileges for a table, the table
will not show up in the output from <CODE>SHOW TABLES</CODE> or <CODE>mysqlshow
db_name</CODE>.

</P>
<P>
<CODE>SHOW COLUMNS</CODE> lists the columns in a given table.
If the column types are different than you expect them to be based on a
<CODE>CREATE TABLE</CODE> statement, note that MySQL sometimes changes column
types.
See section <A HREF="manual.html#Silent_column_changes">7.6.1  Silent column specification changes</A>.

</P>
<P>
The <CODE>DESCRIBE</CODE> statement provides information similar to
<CODE>SHOW COLUMNS</CODE>.
See section <A HREF="manual.html#DESCRIBE">7.22  <CODE>DESCRIBE</CODE> syntax (Get information about columns)</A>.

</P>
<P>
<CODE>SHOW TABLE STATUS</CODE> (new in 3.23) works likes <CODE>SHOW STATUS</CODE>, but
provides a lot of information about each table. You can also
get this list using the <CODE>mysqlshow --status db_name</CODE> command.
The following columns are returned:

</P>
<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD>Name </TD><TD> Name of the table
</TR NOSAVE>
<TR><TD>Type </TD><TD> Type of table (NISAM, MyISAM or HEAP)
</TR NOSAVE>
<TR><TD>Rows </TD><TD> Number of rows
</TR NOSAVE>
<TR><TD>Avg_row_length </TD><TD> Average row length
</TR NOSAVE>
<TR><TD>Data_length </TD><TD> Length of the data file
</TR NOSAVE>
<TR><TD>Max_data_length </TD><TD> Max length of the data file
</TR NOSAVE>
<TR><TD>Index_length </TD><TD> Length of the index file
</TR NOSAVE>
<TR><TD>Data_free </TD><TD> Number of allocated but not used bytes
</TR NOSAVE>
<TR><TD>Auto_increment </TD><TD> Next autoincrement value
</TR NOSAVE>
<TR><TD>Create_time </TD><TD> When the table was created
</TR NOSAVE>
<TR><TD>Update_time </TD><TD> When the data file was last updated
</TR NOSAVE>
<TR><TD>Check_time </TD><TD> When one last run a check on the table
</TR NOSAVE>
<TR><TD>Create_min_rows </TD><TD> The "min_rows" option used when creating the table
</TR NOSAVE>
<TR><TD>Create_max_rows </TD><TD> The "max_rows" option used when creating the table
</TR NOSAVE>
<TR><TD>Create_avg_row_length </TD><TD> The "avg_row_length" option used when creating the table
</TR NOSAVE>
<TR><TD>Comment </TD><TD> The comment used when creating the table (or some information why MySQL couldn't access the table information).
</TR>
</TABLE>

<P>
<CODE>SHOW FIELDS</CODE> is a synonym for <CODE>SHOW COLUMNS</CODE> and
<CODE>SHOW KEYS</CODE> is a synonym for <CODE>SHOW INDEX</CODE>.  You can also
list a table's columns or indexes with <CODE>mysqlshow db_name tbl_name</CODE>
or <CODE>mysqlshow -k db_name tbl_name</CODE>.

</P>
<P>
<CODE>SHOW INDEX</CODE> returns the index information in a format that closely
resembles the <CODE>SQLStatistics</CODE> call in ODBC. The following columns
are returned:

</P>
<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD>Table </TD><TD> Name of the table
</TR NOSAVE>
<TR><TD>Non_unique </TD><TD> 0 if the index can't contain duplicates.
</TR NOSAVE>
<TR><TD>Key_name </TD><TD> Name of the index
</TR NOSAVE>
<TR><TD>Seq_in_index </TD><TD> Column sequence number in index, starting with 1.
</TR NOSAVE>
<TR><TD>Column_name </TD><TD> Column name.
</TR NOSAVE>
<TR><TD>Collation </TD><TD> How the column is sorted in the index.  In <STRONG>MySQL</STRONG>, this can have values <CODE>A</CODE> (Ascending) or <CODE>NULL</CODE> (Not sorted).
</TR NOSAVE>
<TR><TD>Cardinality </TD><TD> Number of unique values in the index.  This is updated by running <CODE>isamchk -a</CODE>.
</TR NOSAVE>
<TR><TD>Sub_part </TD><TD> Number of indexed characters if the column is only partly indexed. <CODE>NULL</CODE> if the entire key is indexed.
</TR>
</TABLE>

<P>
<A NAME="IDX544"></A>
<CODE>SHOW STATUS</CODE> provides server status information
(like <CODE>mysqladmin extended-status</CODE>). The output resembles that shown
below, though the format and numbers may differ somewhat:

</P>

<PRE>
+--------------------------+--------+
| Variable_name            | Value  |
+--------------------------+--------+
| Aborted_clients          | 0      |
| Aborted_connects         | 0      |
| Created_tmp_tables       | 0      |
| Delayed_insert_threads   | 0      |
| Delayed_writes           | 0      |
| Delayed_errors           | 0      |
| Flush_commands           | 2      |
| Handler_delete           | 2      |
| Handler_read_first       | 0      |
| Handler_read_key         | 1      |
| Handler_read_next        | 0      |
| Handler_read_rnd         | 35     |
| Handler_update           | 0      |
| Handler_write            | 2      |
| Key_blocks_used          | 0      |
| Key_read_requests        | 0      |
| Key_reads                | 0      |
| Key_write_requests       | 0      |
| Key_writes               | 0      |
| Max_used_connections     | 1      |
| Not_flushed_key_blocks   | 0      |
| Not_flushed_delayed_rows | 0      |
| Open_tables              | 1      |
| Open_files               | 2      |
| Open_streams             | 0      |
| Opened_tables            | 11     |
| Questions                | 14     |
| Running_threads          | 1      |
| Slow_queries             | 0      |
| Uptime                   | 149111 |
+--------------------------+--------+
</PRE>

<P>
The status variables listed above have the following meaning:

</P>
<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><CODE>Aborted_clients</CODE> </TD><TD> Number of connections that has been aborted because the client has died without closing the connection properly.
</TR NOSAVE>
<TR><TD><CODE>Aborted_connects</CODE> </TD><TD> Number of tries to connect to the MySQL server that has failed.
</TR NOSAVE>
<TR><TD><CODE>Created_tmp_tables</CODE> </TD><TD> Number of implicit temporary tables that has been created while executing statements.
</TR NOSAVE>
<TR><TD><CODE>Delayed_insert_threads</CODE> </TD><TD> Number of delayed insert handler threads in use.
</TR NOSAVE>
<TR><TD><CODE>Delayed_writes</CODE> </TD><TD> Number of rows written with <CODE>INSERT DELAYED</CODE>.
</TR NOSAVE>
<TR><TD><CODE>Delayed_errors</CODE> </TD><TD> Number of rows written with <CODE>INSERT DELAYED</CODE> for which some error occurred (probably <CODE>duplicate key</CODE>).
</TR NOSAVE>
<TR><TD><CODE>Flush_commands</CODE> </TD><TD> Number of executed <CODE>FLUSH</CODE> commands.
</TR NOSAVE>
<TR><TD><CODE>Handler_delete</CODE> </TD><TD> Number of requests to delete a row from a table.
</TR NOSAVE>
<TR><TD><CODE>Handler_read_first</CODE> </TD><TD> Number of request to read first the row in a table.
</TR NOSAVE>
<TR><TD><CODE>Handler_read_key</CODE> </TD><TD> Number of request to read a row based on a key.
</TR NOSAVE>
<TR><TD><CODE>Handler_read_next</CODE> </TD><TD> Number of request to read next row in key order.
</TR NOSAVE>
<TR><TD><CODE>Handler_read_rnd</CODE> </TD><TD> Number of request to read a row based on a fixed position.
</TR NOSAVE>
<TR><TD><CODE>Handler_update</CODE> </TD><TD> Number of requests to update a row in a table.
</TR NOSAVE>
<TR><TD><CODE>Handler_write</CODE> </TD><TD> Number of requests to insert a row in a table.
</TR NOSAVE>
<TR><TD><CODE>Key_blocks_used</CODE> </TD><TD> The number of used blocks in the key cache.
</TR NOSAVE>
<TR><TD><CODE>Key_read_requests</CODE> </TD><TD> The number of request to read a key block from the cache.
</TR NOSAVE>
<TR><TD><CODE>Key_reads</CODE> </TD><TD> The number of physical reads of a key block from disk.
</TR NOSAVE>
<TR><TD><CODE>Key_write_requests</CODE> </TD><TD> The number of request to write a key block to the cache.
</TR NOSAVE>
<TR><TD><CODE>Key_writes</CODE> </TD><TD> The number of physical writes of a key block to disk.
</TR NOSAVE>
<TR><TD><CODE>Max_used_connections</CODE> </TD><TD> The maximum number of connections that has been in use simultaneously.
</TR NOSAVE>
<TR><TD><CODE>Not_flushed_key_blocks</CODE> </TD><TD> Keys blocks in the key cache that has changed but hasn't yet been flushed to disk.
</TR NOSAVE>
<TR><TD><CODE>Not_flushed_delayed_rows</CODE> </TD><TD> Number of rows waiting to be written in <CODE>INSERT DELAY</CODE> queues.
</TR NOSAVE>
<TR><TD><CODE>Open_tables</CODE> </TD><TD> Number of tables that are open.
</TR NOSAVE>
<TR><TD><CODE>Open_files</CODE> </TD><TD> Number of files that are open.
</TR NOSAVE>
<TR><TD><CODE>Open_streams</CODE> </TD><TD> Number of streams that are open (used mainly for logging)
</TR NOSAVE>
<TR><TD><CODE>Opened_tables</CODE> </TD><TD> Number of tables that has been opened.
</TR NOSAVE>
<TR><TD><CODE>Questions</CODE> </TD><TD> Number of questions asked from to the server.
</TR NOSAVE>
<TR><TD><CODE>Running_threads</CODE> </TD><TD> Number of currently open connections.
</TR NOSAVE>
<TR><TD><CODE>Slow_queries</CODE> </TD><TD> Number of queries that has taken more than <CODE>long_query_time</CODE>
</TR NOSAVE>
<TR><TD><CODE>Uptime</CODE> </TD><TD> How many seconds the server has been up.
</TR>
</TABLE>

<P>
Some comments about the above:

</P>

<UL>
<LI>

If <CODE>Opened_tables</CODE> is big, then your <CODE>table_cache</CODE>
variable is probably too small.
<LI>

If <CODE>key_reads</CODE> is big, then your <CODE>key_cache</CODE> is probably too
small.  The cache hit rate can be calculated with
<CODE>key_reads</CODE>/<CODE>key_read_requests</CODE>.
<LI>

If <CODE>Handler_read_rnd</CODE> is big, then you have a probably a lot of queries
that requires MySQL to scan whole tables or you have joins that doesn't use
keys properly.
</UL>

<P>
<CODE>SHOW VARIABLES</CODE> shows the values of the some of <STRONG>MySQL</STRONG> system
variables.  You can also get this information using the <CODE>mysqladmin
variables</CODE> command.  If the default values are unsuitable, you can set most
of these variables using command-line options when <CODE>mysqld</CODE> starts up.
The output resembles that shown below, though the format and numbers may
differ somewhat:

</P>

<PRE>
+------------------------+--------------------------+
| Variable_name          | Value                    |
+------------------------+--------------------------+
| back_log               | 5                        |
| connect_timeout        | 5                        |
| basedir                | /my/monty/               |
| datadir                | /my/monty/data/          |
| delayed_insert_limit   | 100                      |
| delayed_insert_timeout | 300                      |
| delayed_queue_size     | 1000                     |
| join_buffer_size       | 131072                   |
| flush_time             | 0                        |
| key_buffer_size        | 1048540                  |
| language               | /my/monty/share/english/ |
| log                    | OFF                      |
| log_update             | OFF                      |
| long_query_time        | 10                       |
| low_priority_updates   | OFF                      |
| max_allowed_packet     | 1048576                  |
| max_connections        | 100                      |
| max_connect_errors     | 10                       |
| max_delayed_threads    | 20                       |
| max_heap_table_size    | 16777216                 |
| max_join_size          | 4294967295               |
| max_sort_length        | 1024                     |
| max_tmp_tables         | 32                       |
| net_buffer_length      | 16384                    |
| port                   | 3306                     |
| protocol-version       | 10                       |
| record_buffer          | 131072                   |
| skip_locking           | ON                       |
| socket                 | /tmp/mysql.sock          |
| sort_buffer            | 2097116                  |
| table_cache            | 64                       |
| thread_stack           | 131072                   |
| tmp_table_size         | 1048576                  |
| tmpdir                 | /machine/tmp/            |
| version                | 3.23.0-alpha-debug       |
| wait_timeout           | 28800                    |
+------------------------+--------------------------+
</PRE>

<P>
See section <A HREF="manual.html#Server_parameters">10.1  Tuning server parameters</A>.

</P>
<P>
<A NAME="IDX545"></A>
<A NAME="IDX546"></A>
<CODE>SHOW PROCESSLIST</CODE> shows you which threads are running.  You can also
get this information using the <CODE>mysqladmin processlist</CODE> command.  If you
have the <STRONG>process</STRONG> privilege, you can see all threads.  Otherwise, you
can see only your own threads.
See section <A HREF="manual.html#KILL">7.19  <CODE>KILL</CODE> syntax</A>.

</P>
<P>
<A NAME="IDX547"></A>
<A NAME="IDX548"></A>


<H2><A NAME="EXPLAIN" HREF="manual_toc.html#EXPLAIN">7.21  <CODE>EXPLAIN</CODE> syntax (Get information about a <CODE>SELECT</CODE>)</A></H2>


<PRE>
EXPLAIN SELECT select_options
</PRE>

<P>
When you precede a <CODE>SELECT</CODE> statement with the keyword <CODE>EXPLAIN</CODE>,
<STRONG>MySQL</STRONG> explains how it would process the <CODE>SELECT</CODE>, providing
information about how tables are joined and in which order.

</P>
<P>
With the help of <CODE>EXPLAIN</CODE>, you can see when you must add indexes
to tables to get a faster <CODE>SELECT</CODE> that uses indexes to find the
records. You can also see if the optimizer joins the tables in an optimal
order. To force the optimizer to use a specific join order for a
<CODE>SELECT</CODE> statement, add a <CODE>STRAIGHT_JOIN</CODE> clause.

</P>
<P>
For non-simple joins, <CODE>EXPLAIN</CODE> returns a row of information for each
table used in the <CODE>SELECT</CODE> statement. The tables are listed in the order
they would be read.  <STRONG>MySQL</STRONG> resolves all joins using a single-sweep
multi-join method. This means that <STRONG>MySQL</STRONG> reads a row from the first
table, then finds a matching row in the second table, then in the third table
and so on. When all tables are processed, it outputs the selected columns and
backtracks through the table list until a table is found for which there are
more matching rows. The next row is read from this table and the process
continues with the next table.

</P>
<P>
Output from <CODE>EXPLAIN</CODE> includes the following columns:

</P>
<DL COMPACT>

<DT><CODE>table</CODE>
<DD>
The table to which the row of output refers.

<DT><CODE>type</CODE>
<DD>
The join type.  Information about the various types is given below.

<DT><CODE>possible_keys</CODE>
<DD>
The <CODE>possible_keys</CODE> column indicates which indexes <STRONG>MySQL</STRONG> could
use to find the rows in the table.  If this column is empty, there are no
relevant indexes.  In this case, you may be able to improve the performance
of your query by examining the <CODE>WHERE</CODE> clause to see if it refers to
some column or columns that would be suitable for indexing.  If so, create an
appropriate index and check the query with <CODE>EXPLAIN</CODE> again.

<A NAME="IDX549"></A>
To see what indexes a table has, use <CODE>SHOW INDEX FROM tbl_name</CODE>.

<DT><CODE>key</CODE>
<DD>
The <CODE>key</CODE> column indicates the key that <STRONG>MySQL</STRONG> actually
decided to use.  The key is <CODE>NULL</CODE> if no index was chosen.

<DT><CODE>key_len</CODE>
<DD>
The <CODE>key_len</CODE> column indicates the length of the key that
<STRONG>MySQL</STRONG> decided to use.  The length is <CODE>NULL</CODE> if the <CODE>key</CODE>
is <CODE>NULL</CODE>.

<DT><CODE>ref</CODE>
<DD>
The <CODE>ref</CODE> column shows which columns or constants are used with the
<CODE>key</CODE> to select rows from the table.

<DT><CODE>rows</CODE>
<DD>
The <CODE>rows</CODE> column indicates the number of rows <STRONG>MySQL</STRONG> must
examine to execute the query.

<DT><CODE>Extra</CODE>
<DD>
If the <CODE>Extra</CODE> column includes the text <CODE>Only index</CODE>, this means
that information is retrieved from the table using only information in the
index tree.  Normally, this is much faster than scanning the entire table.

If the <CODE>Extra</CODE> column includes the text <CODE>where used</CODE>, it means that
a <CODE>WHERE</CODE> clause will be used to restrict which rows will be matched
against the next table or sent to the client.
</DL>

<P>
The different join types are listed below, ordered from best to worst type:

</P>
<P>
<A NAME="IDX550"></A>
<A NAME="IDX551"></A>
<DL COMPACT>

<DT><CODE>system</CODE>
<DD>
The table has only one row (= system table). This is a special case of
the <CODE>const</CODE> join type.

<A NAME="IDX552"></A>
<A NAME="IDX553"></A>
<DT><CODE>const</CODE>
<DD>
The table has at most one matching row, which will be read at the start of
the query. Since there is only one row, values from the column in this row
can be regarded as constants by the rest of the optimizer.  <CODE>const</CODE>
tables are very fast as they are read only once!

<DT><CODE>eq_ref</CODE>
<DD>
One row will be read from this table for each combination of rows from
the previous tables.  This the best possible join type, other than the
<CODE>const</CODE> types.  It is used when all parts of an index are used by
the join and the index is <CODE>UNIQUE</CODE> or a <CODE>PRIMARY KEY</CODE>.

<DT><CODE>ref</CODE>
<DD>
All rows with matching index values will be read from this table for each
combination of rows from the previous tables.  <CODE>ref</CODE> is used if the join
uses only a leftmost prefix of the key, or if the key is not <CODE>UNIQUE</CODE>
or a <CODE>PRIMARY KEY</CODE> (in other words, if the join cannot select a single
row based on the key value).  If the key that is used matches only a few rows,
this join type is good.

<DT><CODE>range</CODE>
<DD>
Only rows that are in a given range will be retrieved, using an index to
select the rows.  The <CODE>ref</CODE> column indicates which index is used.

<DT><CODE>index</CODE>
<DD>
This is the same as <CODE>ALL</CODE>, except that only the index tree is
scanned.  This is usually faster than <CODE>ALL</CODE>, as the index file is usually
smaller than the data file.

<DT><CODE>ALL</CODE>
<DD>
A full table scan will be done for each combination of rows from the
previous tables.  This is normally not good if the table is the first
table not marked <CODE>const</CODE>, and usually <STRONG>very</STRONG> bad in all other
cases. You normally can avoid <CODE>ALL</CODE> by adding more indexes, so that
the row can be retrieved based on constant values or column values from
earlier tables.
</DL>

<P>
You can get a good indication of how good a join is by multiplying all values
in the <CODE>rows</CODE> column of the <CODE>EXPLAIN</CODE> output. This should tell you
roughly how many rows <STRONG>MySQL</STRONG> must examine to execute the query. This
number is also used when you restrict queries with the <CODE>max_join_size</CODE>
variable.
See section <A HREF="manual.html#Server_parameters">10.1  Tuning server parameters</A>.

</P>
<P>
The following example shows how a <CODE>JOIN</CODE> can be optimized progressively
using the information provided by <CODE>EXPLAIN</CODE>.

</P>
<P>
Suppose you have the <CODE>SELECT</CODE> statement shown below, that you examine
using <CODE>EXPLAIN</CODE>:

</P>

<PRE>
EXPLAIN SELECT tt.TicketNumber, tt.TimeIn,
            tt.ProjectReference, tt.EstimatedShipDate,
            tt.ActualShipDate, tt.ClientID,
            tt.ServiceCodes, tt.RepetitiveID,
            tt.CurrentProcess, tt.CurrentDPPerson,
            tt.RecordVolume, tt.DPPrinted, et.COUNTRY,
            et_1.COUNTRY, do.CUSTNAME
        FROM tt, et, et AS et_1, do
        WHERE tt.SubmitTime IS NULL
            AND tt.ActualPC = et.EMPLOYID
            AND tt.AssignedPC = et_1.EMPLOYID
            AND tt.ClientID = do.CUSTNMBR;
</PRE>

<P>
For this example, assume that:

</P>

<UL>
<LI>

The columns being compared have been declared as follows:

<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><STRONG>Table</STRONG> </TD><TD> <STRONG>Column</STRONG> </TD><TD> <STRONG>Column type</STRONG>
</TR NOSAVE>
<TR><TD><CODE>tt</CODE> </TD><TD> <CODE>ActualPC</CODE> </TD><TD> <CODE>CHAR(10)</CODE>
</TR NOSAVE>
<TR><TD><CODE>tt</CODE> </TD><TD> <CODE>AssignedPC</CODE> </TD><TD> <CODE>CHAR(10)</CODE>
</TR NOSAVE>
<TR><TD><CODE>tt</CODE> </TD><TD> <CODE>ClientID</CODE> </TD><TD> <CODE>CHAR(10)</CODE>
</TR NOSAVE>
<TR><TD><CODE>et</CODE> </TD><TD> <CODE>EMPLOYID</CODE> </TD><TD> <CODE>CHAR(15)</CODE>
</TR NOSAVE>
<TR><TD><CODE>do</CODE> </TD><TD> <CODE>CUSTNMBR</CODE> </TD><TD> <CODE>CHAR(15)</CODE>
</TR>
</TABLE>

<LI>

The tables have the indexes shown below:

<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><STRONG>Table</STRONG> </TD><TD> <STRONG>Index</STRONG>
</TR NOSAVE>
<TR><TD><CODE>tt</CODE> </TD><TD> <CODE>ActualPC</CODE>
</TR NOSAVE>
<TR><TD><CODE>tt</CODE> </TD><TD> <CODE>AssignedPC</CODE>
</TR NOSAVE>
<TR><TD><CODE>tt</CODE> </TD><TD> <CODE>ClientID</CODE>
</TR NOSAVE>
<TR><TD><CODE>et</CODE> </TD><TD> <CODE>EMPLOYID</CODE> (primary key)
</TR NOSAVE>
<TR><TD><CODE>do</CODE> </TD><TD> <CODE>CUSTNMBR</CODE> (primary key)
</TR>
</TABLE>

<LI>

The <CODE>tt.ActualPC</CODE> values aren't evenly distributed.
</UL>

<P>
Initially, before any optimizations have been performed, the <CODE>EXPLAIN</CODE>
statement produces the following information:

</P>

<PRE>
table type possible_keys                key  key_len ref  rows  Extra
et    ALL  PRIMARY                      NULL NULL    NULL 74
do    ALL  PRIMARY                      NULL NULL    NULL 2135
et_1  ALL  PRIMARY                      NULL NULL    NULL 74
tt    ALL  AssignedPC,ClientID,ActualPC NULL NULL    NULL 3872
      range checked for each record (key map: 35)
</PRE>

<P>
Since <CODE>type</CODE> is <CODE>ALL</CODE> for each table, this output indicates that
<STRONG>MySQL</STRONG> is doing a full join for all tables!  This will take quite a
long time, as the product of the number of rows in each table must be
examined!  For the case at hand, this is <CODE>74 * 2135 * 74 * 3872 =
45,268,558,720</CODE> rows.  If the tables were bigger, you can only imagine how
long it would take...

</P>
<P>
One problem here is that <STRONG>MySQL</STRONG> can't (yet) use indexes on columns
efficiently if they are declared differently.  In this context,
<CODE>VARCHAR</CODE> and <CODE>CHAR</CODE> are the same unless they are declared as
different lengths. Since <CODE>tt.ActualPC</CODE> is declared as <CODE>CHAR(10)</CODE>
and <CODE>et.EMPLOYID</CODE> is declared as <CODE>CHAR(15)</CODE>, there is a length
mismatch.

</P>
<P>
To fix this disparity between column lengths, use <CODE>ALTER TABLE</CODE> to
lengthen <CODE>ActualPC</CODE> from 10 characters to 15 characters:

</P>

<PRE>
mysql&#62; ALTER TABLE tt MODIFY ActualPC VARCHAR(15);
</PRE>

<P>
Now <CODE>tt.ActualPC</CODE> and <CODE>et.EMPLOYID</CODE> are both <CODE>VARCHAR(15)</CODE>.
Executing the <CODE>EXPLAIN</CODE> statement again produces this result:

</P>

<PRE>
table type   possible_keys   key     key_len ref         rows    Extra
tt    ALL    AssignedPC,ClientID,ActualPC NULL NULL NULL 3872    where used
do    ALL    PRIMARY         NULL    NULL    NULL        2135
      range checked for each record (key map: 1)
et_1  ALL    PRIMARY         NULL    NULL    NULL        74
      range checked for each record (key map: 1)
et    eq_ref PRIMARY         PRIMARY 15      tt.ActualPC 1
</PRE>

<P>
This is not perfect, but is much better (the product of the <CODE>rows</CODE>
values is now less by a factor of 74). This version is executed in a couple
of seconds.

</P>
<P>
A second alteration can be made to eliminate the column length mismatches
for the <CODE>tt.AssignedPC = et_1.EMPLOYID</CODE> and <CODE>tt.ClientID =
do.CUSTNMBR</CODE> comparisons:

</P>

<PRE>
mysql&#62; ALTER TABLE tt MODIFY AssignedPC VARCHAR(15),
                      MODIFY ClientID   VARCHAR(15);
</PRE>

<P>
Now <CODE>EXPLAIN</CODE> produces the output shown below:

</P>

<PRE>
table type   possible_keys   key     key_len ref            rows     Extra
et    ALL    PRIMARY         NULL    NULL    NULL           74
tt    ref    AssignedPC,ClientID,ActualPC ActualPC 15 et.EMPLOYID 52 where used
et_1  eq_ref PRIMARY         PRIMARY 15      tt.AssignedPC  1
do    eq_ref PRIMARY         PRIMARY 15      tt.ClientID    1
</PRE>

<P>
This is "almost" as good as it can get.

</P>
<P>
The remaining problem is that, by default, <STRONG>MySQL</STRONG> assumes that values
in the <CODE>tt.ActualPC</CODE> column are evenly distributed, and that isn't the
case for the <CODE>tt</CODE> table.  Fortunately, it is easy to tell <STRONG>MySQL</STRONG>
about this:

</P>

<PRE>
shell&#62; isamchk --analyze PATH_TO_MYSQL_DATABASE/tt
shell&#62; mysqladmin refresh
</PRE>

<P>
Now the join is "perfect", and <CODE>EXPLAIN</CODE> produces this result:

</P>

<PRE>
table type   possible_keys   key     key_len ref            rows    Extra
tt    ALL    AssignedPC,ClientID,ActualPC NULL NULL NULL    3872    where used
et    eq_ref PRIMARY         PRIMARY 15      tt.ActualPC    1
et_1  eq_ref PRIMARY         PRIMARY 15      tt.AssignedPC  1
do    eq_ref PRIMARY         PRIMARY 15      tt.ClientID    1
</PRE>

<P>
Note that the <CODE>rows</CODE> column in the output from <CODE>EXPLAIN</CODE> is an
"educated guess" from the <STRONG>MySQL</STRONG> join optimizer;  To optimize a
query, you should check if the numbers are even close to the truth.  If not,
you may get better performance by using <CODE>STRAIGHT_JOIN</CODE> in your
<CODE>SELECT</CODE> statement and trying to list the tables in a different order in
the <CODE>FROM</CODE> clause.

</P>
<P>
<A NAME="IDX554"></A>
<A NAME="IDX555"></A>


<H2><A NAME="DESCRIBE" HREF="manual_toc.html#DESCRIBE">7.22  <CODE>DESCRIBE</CODE> syntax (Get information about columns)</A></H2>


<PRE>
{DESCRIBE | DESC} tbl_name {col_name | wild}
</PRE>

<P>
<CODE>DESCRIBE</CODE> provides information about a table's columns.  <CODE>col_name</CODE>
may be a column name or a string containing the SQL <SAMP>`%'</SAMP> and <SAMP>`_'</SAMP>
wildcard characters.

</P>
<P>
If the column types are different than you expect them to be based on a
<CODE>CREATE TABLE</CODE> statement, note that MySQL sometimes changes column
types.
See section <A HREF="manual.html#Silent_column_changes">7.6.1  Silent column specification changes</A>.

</P>
<P>
<A NAME="IDX556"></A>
<A NAME="IDX557"></A>
This statement is provided for Oracle compatibility.

</P>
<P>
The <CODE>SHOW</CODE> statement provides similar information.
See section <A HREF="manual.html#SHOW">7.20  <CODE>SHOW</CODE> syntax (Get information about tables, columns,...)</A>.

</P>
<P>
<A NAME="IDX558"></A>
<A NAME="IDX559"></A>


<H2><A NAME="LOCK_TABLES" HREF="manual_toc.html#LOCK_TABLES">7.23  <CODE>LOCK TABLES/UNLOCK TABLES</CODE> syntax</A></H2>


<PRE>
LOCK TABLES tbl_name [AS alias] {READ | [LOW_PRIORITY] WRITE}
            [, tbl_name {READ | [LOW_PRIORITY] WRITE} ...]
...
UNLOCK TABLES
</PRE>

<P>
<CODE>LOCK TABLES</CODE> locks tables for the current thread.  <CODE>UNLOCK TABLES</CODE>
releases any locks held by the current thread.  All tables that are locked by
the current thread are automatically unlocked when the thread issues another
<CODE>LOCK TABLES</CODE>, or when the connection to the server is closed.

</P>
<P>
If a thread obtains a <CODE>READ</CODE> lock on a table, that thread (and all other
threads) can only read from the table. If a thread obtains a <CODE>WRITE</CODE>
lock on a table, then only the thread holding the lock can <CODE>READ</CODE> from
or <CODE>WRITE</CODE> to the table.  Other threads are blocked.

</P>
<P>
Each thread waits (without timing out) until it obtains all the locks it has
requested.

</P>
<P>
<CODE>WRITE</CODE> locks normally have higher priority than <CODE>READ</CODE> locks, to
ensure that updates are processed as soon as possible. This means that if one
thread obtains a <CODE>READ</CODE> lock and then another thread requests a
<CODE>WRITE</CODE> lock, subsequent <CODE>READ</CODE> lock requests will wait until the
<CODE>WRITE</CODE> thread has gotten the lock and released it.  You can use
<CODE>LOW_PRIORITY WRITE</CODE> locks to allow other threads to obtain <CODE>READ</CODE>
locks while the thread is waiting for the <CODE>WRITE</CODE> lock. You should only
use <CODE>LOW_PRIORITY WRITE</CODE> locks if you are sure that there will
eventually be a time when no threads will have a <CODE>READ</CODE> lock.

</P>
<P>
When you use <CODE>LOCK TABLES</CODE>, you must lock all tables that you are
going to use!  If you are using a table multiple times in a query (with
aliases), you must get a lock for each alias! This policy ensures that
table locking is deadlock free.

</P>
<P>
Note that you should <STRONG>NOT</STRONG> lock any tables that you are using with
<CODE>INSERT DELAYED</CODE>.  This is because that in this case the <CODE>INSERT</CODE>
is done by a separate thread. 

</P>
<P>
Normally, you don't have to lock tables, as all single <CODE>UPDATE</CODE> statements
are atomic; no other thread can interfere with any other currently executing
SQL statement. There are a few cases when you would like to lock tables
anyway:

</P>

<UL>
<LI>

If you are going to run many operations on a bunch of tables, it's much
faster to lock the tables you are going to use.  The downside is, of course,
that no other thread can update a <CODE>READ</CODE>-locked table and no other
thread can read a <CODE>WRITE</CODE>-locked table.
<LI>

<STRONG>MySQL</STRONG> doesn't support a transaction environment, so you must use
<CODE>LOCK TABLES</CODE> if you want to ensure that no other thread comes between a
<CODE>SELECT</CODE> and an <CODE>UPDATE</CODE>. The example shown below
requires <CODE>LOCK TABLES</CODE> in order to execute safely:


<PRE>
mysql&#62; LOCK TABLES trans READ, customer WRITE;
mysql&#62; select sum(value) from trans where customer_id= some_id;
mysql&#62; update customer set total_value=sum_from_previous_statement
           where customer_id=some_id;
mysql&#62; UNLOCK TABLES;
</PRE>

Without <CODE>LOCK TABLES</CODE>, there is a chance that another thread might
insert a new row in the <CODE>trans</CODE> table between execution of the
<CODE>SELECT</CODE> and <CODE>UPDATE</CODE> statements.
</UL>

<P>
By using incremental updates (<CODE>UPDATE customer SET
value=value+new_value</CODE>) or the <CODE>LAST_INSERT_ID()</CODE> function, you can
avoid using <CODE>LOCK TABLES</CODE> in many cases.

</P>
<P>
You can also solve some cases by using the user-level lock functions
<CODE>GET_LOCK()</CODE> and <CODE>RELEASE_LOCK()</CODE>.  These locks are saved in a hash
table in the server and implemented with <CODE>pthread_mutex_lock()</CODE> and
<CODE>pthread_mutex_unlock()</CODE> for high speed.
See section <A HREF="manual.html#Miscellaneous_functions">7.3.12  Miscellaneous functions</A>.

</P>
<P>
See section <A HREF="manual.html#Internal_locking">10.10  How <STRONG>MySQL</STRONG> locks tables</A>, for more information on locking policy.

</P>
<P>
<A NAME="IDX560"></A>


<H2><A NAME="SET_OPTION" HREF="manual_toc.html#SET_OPTION">7.24  <CODE>SET OPTION</CODE> syntax</A></H2>


<PRE>
SET [OPTION] SQL_VALUE_OPTION= value, ...
</PRE>

<P>
<CODE>SET OPTION</CODE> sets various options that affect the operation of the
server or your client.  Any option you set remains in effect until the
current session ends, or until you set the option to a different value.

</P>
<DL COMPACT>

<DT><CODE>CHARACTER SET character_set_name | DEFAULT</CODE>
<DD>
This maps all strings from and to the client with the given mapping.
Currently the only option for <CODE>character_set_name</CODE> is
<CODE>cp1251_koi8</CODE>, but you can easily add new mappings by editing the
<TT>`sql/convert.cc'</TT> file in the <STRONG>MySQL</STRONG> source distribution.  The
default mapping can be restored by using a <CODE>character_set_name</CODE> value of
<CODE>DEFAULT</CODE>.

Note that the syntax for setting the <CODE>CHARACTER SET</CODE> option differs
from the syntax for setting the other options.

<DT><CODE>PASSWORD = PASSWORD('some password')</CODE>
<DD>
<A NAME="IDX561"></A>
Set the password for the current user. Any non-anonymous user can change his
own password!

<DT><CODE>PASSWORD FOR user = PASSWORD('some password')</CODE>
<DD>
<A NAME="IDX562"></A>
Set the password for a specific user on the current server host. Only a user
with access to the <CODE>mysql</CODE> database can do this.  The user should be
given in <CODE>user@hostname</CODE> format, where <CODE>user</CODE> and <CODE>hostname</CODE>
are exactly as they are listed in the <CODE>User</CODE> and <CODE>Host</CODE> columns of
the <CODE>mysql.user</CODE> table entry.  For example, if you had an entry with
<CODE>User</CODE> and <CODE>Host</CODE> fields of <CODE>'bob'</CODE> and <CODE>'%.loc.gov'</CODE>,
you would write:


<PRE>
mysql&#62; SET PASSWORD FOR bob@"%.loc.gov" = PASSWORD("newpass");
</PRE>

<DT><CODE>SQL_BIG_TABLES = 0 | 1</CODE>
<DD>
<A NAME="IDX563"></A>
If set to <CODE>1</CODE>, all temporary tables are stored on disk rather than in
memory.  This will be a little slower, but you will not get the error
<CODE>The table tbl_name is full</CODE> for big <CODE>SELECT</CODE> operations that
require a large temporary table.  The default value for a new connection is
<CODE>0</CODE> (i.e., use in-memory temporary tables).

<DT><CODE>SQL_BIG_SELECTS = 0 | 1</CODE>
<DD>
If set to <CODE>1</CODE>, <STRONG>MySQL</STRONG> will abort if a <CODE>SELECT</CODE> is attempted
that probably will take a very long time. This is useful when an inadvisable
<CODE>WHERE</CODE> statement has been issued. A big query is defined as a
<CODE>SELECT</CODE> that probably will have to examine more than
<CODE>max_join_size</CODE> rows.  The default value for a new connection is
<CODE>0</CODE> (which will allow all <CODE>SELECT</CODE> statements).

<DT><CODE>SQL_LOW_PRIORITY_UPDATES = 0 | 1</CODE>
<DD>
If set to <CODE>1</CODE>, all <CODE>INSERT</CODE>, <CODE>UPDATE</CODE> and <CODE>DELETE</CODE>
statements wait until there is no pending <CODE>SELECT</CODE> on the affected
table.

<DT><CODE>SQL_SELECT_LIMIT = value | DEFAULT</CODE>
<DD>
The maximum number of records to return from <CODE>SELECT</CODE> statements.  If
a <CODE>SELECT</CODE> has a <CODE>LIMIT</CODE> clause, the <CODE>LIMIT</CODE> takes precedence
over the value of <CODE>SQL_SELECT_LIMIT</CODE>.  The default value for a new
connection is "unlimited".  If you have changed the limit, the default value
can be restored by using a <CODE>SQL_SELECT_LIMIT</CODE> value of <CODE>DEFAULT</CODE>.

<DT><CODE>SQL_LOG_OFF = 0 | 1</CODE>
<DD>
If set to <CODE>1</CODE>, no logging will be done to the standard log for this
client, if the client has the <STRONG>process</STRONG> privilege.  This does not
affect the update log!

<DT><CODE>SQL_LOG_UPDATE = 0 | 1</CODE>
<DD>
If set to <CODE>0</CODE>, no logging will be done to the update log for the client,
if the client has the <STRONG>process</STRONG> privilege.  This does not affect the
standard log!

<DT><CODE>TIMESTAMP = timestamp_value | DEFAULT</CODE>
<DD>
Set the time for this client.  This is used to get the original timestamp if
you use the update log to restore rows.

<DT><CODE>LAST_INSERT_ID = #</CODE>
<DD>
Set the value to be returned from <CODE>LAST_INSERT_ID()</CODE>. This is stored in
the update log when you use <CODE>LAST_INSERT_ID()</CODE> in a command that updates
a table.

<DT><CODE>INSERT_ID = #</CODE>
<DD>
Set the value to be used by the following <CODE>INSERT</CODE> command when inserting
an <CODE>AUTO_INCREMENT</CODE> value.  This is mainly used with the update log.
</DL>

<P>
<A NAME="IDX564"></A>
<A NAME="IDX565"></A>


<H2><A NAME="GRANT" HREF="manual_toc.html#GRANT">7.25  <CODE>GRANT</CODE> and <CODE>REVOKE</CODE> syntax</A></H2>


<PRE>
GRANT priv_type [(column_list)] [, priv_type [(column_list)] ...]
    ON {tbl_name | * | *.* | db_name.*}
    TO user_name [IDENTIFIED BY 'password']
        [, user_name [IDENTIFIED BY 'password'] ...]
    [WITH GRANT OPTION]

REVOKE priv_type [(column_list)] [, priv_type [(column_list)] ...]
    ON {tbl_name | * | *.* | db_name.*}
    FROM user_name [, user_name ...]
</PRE>

<P>
<CODE>GRANT</CODE> is implemented in <STRONG>MySQL</STRONG> 3.22.11 or later. For
earlier <STRONG>MySQL</STRONG> versions, the <CODE>GRANT</CODE> statement does nothing.

</P>
<P>
The <CODE>GRANT</CODE> and <CODE>REVOKE</CODE> commands allow system administrators to
grant and revoke rights to <STRONG>MySQL</STRONG> users at four privilege levels:

</P>
<DL COMPACT>

<DT><STRONG>Global level</STRONG>
<DD>
Global privileges apply to all databases on a given server. These privileges
are stored in the <CODE>mysql.user</CODE> table.

<DT><STRONG>Database level</STRONG>
<DD>
Database privileges apply to all tables in a given database. These privileges
are stored in the <CODE>mysql.db</CODE> and <CODE>mysql.host</CODE> tables.

<DT><STRONG>Table level</STRONG>
<DD>
Table privileges apply to all columns in a given table. These privileges are
stored in the <CODE>mysql.tables_priv</CODE> table.

<DT><STRONG>Column level</STRONG>
<DD>
Column privileges apply to single columns in a given table. These privileges are
stored in the <CODE>mysql.columns_priv</CODE> table.
</DL>

<P>
For examples of how <CODE>GRANT</CODE> works, see section <A HREF="manual.html#Adding_users">6.11  Adding new user privileges to <STRONG>MySQL</STRONG></A>.

</P>
<P>
For the <CODE>GRANT</CODE> and <CODE>REVOKE</CODE> statements, <CODE>priv_type</CODE> may be
specified as any of the following:

</P>

<PRE>
ALL PRIVILEGES      FILE                RELOAD
ALTER               INDEX               SELECT
CREATE              INSERT              SHUTDOWN
DELETE              PROCESS             UPDATE
DROP                REFERENCES          USAGE
</PRE>

<P>
<CODE>ALL</CODE> is a synonym for <CODE>ALL PRIVILEGES</CODE>.  <CODE>REFERENCES</CODE> is not
yet implemented.  <CODE>USAGE</CODE> is currently a synonym for "no privileges".
It can be used when you want to create a user that has no privileges.

</P>
<P>
To revoke the <STRONG>grant</STRONG> privilege from a user, use a <CODE>priv_type</CODE>
value of <CODE>GRANT OPTION</CODE>:

</P>

<PRE>
REVOKE GRANT OPTION ON ... FROM ...;
</PRE>

<P>
The only <CODE>priv_type</CODE> values you can specify for a table are <CODE>SELECT</CODE>,
<CODE>INSERT</CODE>, <CODE>UPDATE</CODE>, <CODE>DELETE</CODE>, <CODE>CREATE</CODE>, <CODE>DROP</CODE>,
<CODE>GRANT</CODE>, <CODE>INDEX</CODE> and <CODE>ALTER</CODE>.

</P>
<P>
The only <CODE>priv_type</CODE> values you can specify for a column (that is, when
you use a <CODE>column_list</CODE> clause) are <CODE>SELECT</CODE>, <CODE>INSERT</CODE> and
<CODE>UPDATE</CODE>.

</P>
<P>
You can set global privileges by using <CODE>ON *.*</CODE> syntax.  You can set
database privileges by using <CODE>ON db_name.*</CODE> syntax. If you specify
<CODE>ON *</CODE> and you have a current database, you will set the privileges for
that database.  (<STRONG>Warning:</STRONG> If you specify <CODE>ON *</CODE> and you
<EM>don't</EM> have a current database, you will affect the global privileges!)

</P>
<P>
In order to accommodate granting rights to users from arbitrary hosts,
<STRONG>MySQL</STRONG> supports specifying the <CODE>user_name</CODE> value in the form
<CODE>user@host</CODE>.  If you want to specify a <CODE>user</CODE> string
containing special characters (such as <SAMP>`-'</SAMP>), or a <CODE>host</CODE> string
containing special characters or wildcard characters (such as <SAMP>`%'</SAMP>), you
can quote the user or host name (e.g., <CODE>'test-user'@'test-hostname'</CODE>).

</P>
<P>
You can specify wildcards in the hostname.  For example,
<CODE>user@"%.loc.gov"</CODE> applies to <CODE>user</CODE> for any host in the
<CODE>loc.gov</CODE> domain, and <CODE>user@"144.155.166.%"</CODE> applies to <CODE>user</CODE>
for any host in the <CODE>144.155.166</CODE> class C subnet.

</P>
<P>
The simple form <CODE>user</CODE> is a synonym for <CODE>user@"%"</CODE>.
<STRONG>Note:</STRONG> If you allow anonymous users to connect to the <STRONG>MySQL</STRONG>
server (which is the default), you should also add all local users as
<CODE>user@localhost</CODE> because otherwise the anonymous user entry for the
local host in the <CODE>mysql.user</CODE> table will be used when the user tries to
log into the <STRONG>MySQL</STRONG> server from the local machine!  Anonymous users
are defined by inserting entries with <CODE>User="</CODE> into the
<CODE>mysql.user</CODE> table. You can verify if this applies to you by executing
this query:

</P>

<PRE>
mysql&#62; SELECT Host,User FROM mysql.user WHERE User=";
</PRE>

<P>
For the moment, <CODE>GRANT</CODE> only supports host, table, database and
column names up to 60 characters long. A user name can be up to 16
characters.

</P>
<P>
The privileges for a table or column are formed from the
logical OR of the privileges at each of the four privilege
levels.  For example, if the <CODE>mysql.user</CODE> table specifies that a
user has a global <STRONG>select</STRONG> privilege, this can't be denied by an
entry at the database, table or column level.

</P>
<P>
The privileges for a column can be calculated as follows:

</P>

<PRE>
global privileges
OR (database privileges AND host privileges)
OR table privileges
OR column privileges
</PRE>

<P>
In most cases, you grant rights to a user at only one of the privilege
levels, so life isn't normally as complicated as above. :) The details of the
privilege-checking procedure are presented in
section <A HREF="manual.html#Privilege_system">6  The <STRONG>MySQL</STRONG> access privilege system</A>.

</P>
<P>
If you grant privileges for a user/hostname combination that does not exist
in the <CODE>mysql.user</CODE> table, an entry is added and remains there until
deleted with a <CODE>DELETE</CODE> command.  In other words, <CODE>GRANT</CODE> may
create <CODE>user</CODE> table entries, but <CODE>REVOKE</CODE> will not remove them;
you must do that explicitly using <CODE>DELETE</CODE>.

</P>
<P>
<A NAME="IDX566"></A>
In <STRONG>MySQL</STRONG> 3.22.12 or later,
if a new user is created or if you have global grant privileges, the user's
password will be set to the password specified by the <CODE>IDENTIFIED BY</CODE>
clause, if one is given.  If the user already had a password, it is replaced
by the new one.

</P>
<P>
<STRONG>Warning:</STRONG> If you create a new user but do not specify an
<CODE>IDENTIFIED BY</CODE> clause, the user has no password.  This is insecure.

</P>
<P>
Passwords can also be set with the <CODE>SET PASSWORD</CODE> command.
See section <A HREF="manual.html#SET_OPTION">7.24  <CODE>SET OPTION</CODE> syntax</A>.

</P>
<P>
If you grant privileges for a database, an entry in the <CODE>mysql.db</CODE>
table is created if needed. When all privileges for the database have been
removed with <CODE>REVOKE</CODE>, this entry is deleted.

</P>
<P>
If a user doesn't have any privileges on a table, the table is not displayed
when the user requests a list of tables (e.g., with a <CODE>SHOW TABLES</CODE>
statement).

</P>
<P>
The <CODE>WITH GRANT OPTION</CODE> clause gives the user the ability to give
to other users any privileges the user has at the specified privilege level.
You should be careful to whom you give the <STRONG>grant</STRONG> privilege, as two
users with different privileges may be able to join privileges!

</P>
<P>
You cannot grant another user a privilege you don't have yourself;
the <STRONG>grant</STRONG> privilege allows you to give away only those privileges
you possess.

</P>
<P>
Be aware that when you grant a user the <STRONG>grant</STRONG> privilege at a
particular privilege level, any privileges the user already possesses (or
is given in the future!) at that level are also grantable by that user.
Suppose you grant a user the <STRONG>insert</STRONG> privilege on a database.  If
you then grant the <STRONG>select</STRONG> privilege on the database and specify
<CODE>WITH GRANT OPTION</CODE>, the user can give away not only the <STRONG>select</STRONG>
privilege, but also <STRONG>insert</STRONG>.  If you then grant the <STRONG>update</STRONG>
privilege to the user on the database, the user can give away the
<STRONG>insert</STRONG>, <STRONG>select</STRONG> and <STRONG>update</STRONG>.

</P>
<P>
You should not grant <STRONG>alter</STRONG> privileges to a normal user.  If you
do that, the user can try to subvert the privilege system by renaming
tables!

</P>
<P>
Note that if you are using table or column privileges for even one user, the
server examines table and column privileges for all users and this will slow
down <STRONG>MySQL</STRONG> a bit.

</P>
<P>
When <CODE>mysqld</CODE> starts, all privileges are read into memory.
Database, table and column privileges take effect at once and
user-level privileges take effect the next time the user connects.
Modifications to the grant tables that you perform using <CODE>GRANT</CODE> or
<CODE>REVOKE</CODE> are noticed by the server immediately.
If you modify the grant tables manually (using <CODE>INSERT</CODE>, <CODE>UPDATE</CODE>,
etc.), you should execute a <CODE>FLUSH PRIVILEGES</CODE> statement or run
<CODE>mysqladmin flush-privileges</CODE> to tell the server to reload the grant
tables.
See section <A HREF="manual.html#Privilege_changes">6.9  When privilege changes take effect</A>.

</P>
<P>
<A NAME="IDX567"></A>
The biggest differences between the ANSI SQL and <STRONG>MySQL</STRONG> versions of
<CODE>GRANT</CODE> are:

</P>

<UL>
<LI>

ANSI SQL doesn't have global or database-level privileges and ANSI SQL
doesn't support all privilege types that <STRONG>MySQL</STRONG> supports.

<LI>

When you drop a table in ANSI SQL, all privileges for the table are revoked.
If you revoke a privilege in ANSI SQL, all privileges that were granted based
on this privilege are also revoked. In <STRONG>MySQL</STRONG>, privileges can be
dropped only with explicit <CODE>REVOKE</CODE> commands or by manipulating the
<STRONG>MySQL</STRONG> grant tables.
</UL>

<P>
<A NAME="IDX568"></A>
<A NAME="IDX569"></A>
<A NAME="IDX570"></A>
<A NAME="IDX571"></A>


<H2><A NAME="CREATE_INDEX" HREF="manual_toc.html#CREATE_INDEX">7.26  <CODE>CREATE INDEX</CODE> syntax</A></H2>


<PRE>
CREATE [UNIQUE] INDEX index_name ON tbl_name (col_name[(length]),... )
</PRE>

<P>
The <CODE>CREATE INDEX</CODE> statement doesn't do anything in <STRONG>MySQL</STRONG> prior
to version 3.22.  In 3.22 or later, <CODE>CREATE INDEX</CODE> is mapped to an
<CODE>ALTER TABLE</CODE> statement to create indexes.
See section <A HREF="manual.html#ALTER_TABLE">7.7  <CODE>ALTER TABLE</CODE> syntax</A>.

</P>
<P>
Normally, you create all indexes on a table at the time the table itself
is created with <CODE>CREATE TABLE</CODE>.
See section <A HREF="manual.html#CREATE_TABLE">7.6  <CODE>CREATE TABLE</CODE> syntax</A>.
<CODE>CREATE INDEX</CODE> allows you to add indexes to existing tables.

</P>
<P>
A column list of the form <CODE>(col1,col2,...)</CODE> creates a multiple-column
index.  Index values are formed by concatenating the values of the given
columns.

</P>
<P>
For <CODE>CHAR</CODE> and <CODE>VARCHAR</CODE> columns, indexes can be created that
use only part of a column, using <CODE>col_name(length)</CODE> syntax.  The
statement shown below creates an index using the first 10 characters
of the <CODE>name</CODE> column:

</P>

<PRE>
mysql&#62; CREATE INDEX part_of_name ON customer (name(10));
</PRE>

<P>
Since most names usually differ in the first 10 characters, this index should
not be much slower than an index created from the entire <CODE>name</CODE> column.
Also, using partial columns for indexes can make the index file much smaller,
which could save a lot of disk space and might also speed up <CODE>INSERT</CODE>
operations!

</P>
<P>
For more information about how <STRONG>MySQL</STRONG> uses indexes, see
section <A HREF="manual.html#MySQL_indexes">10.4  How <STRONG>MySQL</STRONG> uses indexes</A>.

</P>
<P>
<A NAME="IDX572"></A>


<H2><A NAME="DROP_INDEX" HREF="manual_toc.html#DROP_INDEX">7.27  <CODE>DROP INDEX</CODE> syntax</A></H2>


<PRE>
DROP INDEX index_name
</PRE>

<P>
<CODE>DROP INDEX</CODE> doesn't do anything in <STRONG>MySQL</STRONG> prior to version
3.22.  In 3.22 or later, <CODE>DROP INDEX</CODE> is mapped to an <CODE>ALTER TABLE</CODE>
statement to drop the index.
See section <A HREF="manual.html#ALTER_TABLE">7.7  <CODE>ALTER TABLE</CODE> syntax</A>.

</P>
<P>
<A NAME="IDX573"></A>


<H2><A NAME="Comments" HREF="manual_toc.html#Comments">7.28  Comment syntax</A></H2>

<P>
The <STRONG>MySQL</STRONG> server supports the <CODE># to end of line</CODE> and <CODE>/*
in-line or multiple-line */</CODE> comment styles:

</P>

<PRE>
mysql&#62; select 1+1;     # This comment continues to the end of line
mysql&#62; select 1 /* this is an in-line comment */ + 1;
mysql&#62; select 1+
/*
this is a
multiple-line comment
*/
1;
</PRE>

<P>
Although the server understands the comment syntax just described,
there are some limitations on the way that the <CODE>mysql</CODE> client
parses <CODE>/* ... */</CODE> comments:

</P>

<UL>
<LI>

Single-quote and double-quote characters are taken to indicate the beginning
of a quoted string, even within a comment.  If the quote is not matched by a
second quote within the comment, the parser doesn't realize the comment has
ended.  If you are running <CODE>mysql</CODE> interactively, you can tell that it
has gotten confused like this because the prompt changes from <CODE>mysql&#62;</CODE>
to <CODE>'&#62;</CODE> or <CODE>"&#62;</CODE>.

<LI>

A semicolon is taken to indicate the end of the current SQL statement
and anything following it to indicate the beginning of the next statement.
</UL>

<P>
These limitations apply both when you run <CODE>mysql</CODE> interactively
and when you put commands in a file and tell <CODE>mysql</CODE> to read its
input from that file with <CODE>mysql &#60; some-file</CODE>.

</P>
<P>
<STRONG>MySQL</STRONG> doesn't support the <SAMP>`--'</SAMP> ANSI SQL comment style.
See section <A HREF="manual.html#Missing_comments">5.3.7  <SAMP>`--'</SAMP> as the start of a comment</A>.

</P>
<P>
<A NAME="IDX574"></A>
<A NAME="IDX575"></A>
<A NAME="IDX576"></A>
<A NAME="IDX577"></A>
<A NAME="IDX578"></A>


<H2><A NAME="CREATE_FUNCTION" HREF="manual_toc.html#CREATE_FUNCTION">7.29  <CODE>CREATE FUNCTION/DROP FUNCTION</CODE> syntax</A></H2>


<PRE>
CREATE FUNCTION function_name RETURNS {STRING|REAL|INTEGER}
       SONAME shared_library_name

DROP FUNCTION function_name
</PRE>

<P>
A user-definable function (UDF) is a way to extend <STRONG>MySQL</STRONG> with a new
function that works like native (built in) <STRONG>MySQL</STRONG> functions such as
<CODE>ABS()</CODE> and <CODE>CONCAT()</CODE>.

</P>
<P>
<CODE>CREATE FUNCTION</CODE> saves the function's name, type and shared library
name in the <CODE>mysql.func</CODE> system table.  You must have the
<STRONG>insert</STRONG> and <STRONG>delete</STRONG> privileges for the <CODE>mysql</CODE> database
to create and drop functions.

</P>
<P>
All active functions are reloaded each time the server starts, unless
you start <CODE>mysqld</CODE> with the <CODE>--skip-grant-tables</CODE> option.  In
this case, UDF initialization is skipped and UDFs are unavailable.
(An active function is one that has been loaded with <CODE>CREATE FUNCTION</CODE>
and not removed with <CODE>DROP FUNCTION</CODE>.)

</P>
<P>
For instructions on writing user-definable functions, see section <A HREF="manual.html#Adding_functions">14  Adding new functions to <STRONG>MySQL</STRONG></A>.  For the UDF mechanism to work, functions must be written in C or
C++ and your operating system must support dynamic loading.

</P>
<P>
<A NAME="IDX579"></A>
<A NAME="IDX580"></A>
<A NAME="IDX581"></A>


<H2><A NAME="Reserved_words" HREF="manual_toc.html#Reserved_words">7.30  Is <STRONG>MySQL</STRONG> picky about reserved words?</A></H2>

<P>
A common problem stems from trying to create a table with column names that
use the names of datatypes or functions built into <STRONG>MySQL</STRONG>, such as
<CODE>TIMESTAMP</CODE> or <CODE>GROUP</CODE>.  You're allowed to do it (for example,
<CODE>ABS</CODE> is an allowed column name), but whitespace is not allowed between
a function name and the <SAMP>`('</SAMP> when using functions whose names are also
column names.

</P>
<P>
The following words are explicitly reserved in <STRONG>MySQL</STRONG>. Most of
them are forbidden by ANSI SQL92 as column and/or table names
(for example, <CODE>group</CODE>).
A few are reserved because <STRONG>MySQL</STRONG> needs them and is
(currently) using a <CODE>yacc</CODE> parser:

</P>
<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><CODE>action</CODE> </TD><TD> <CODE>add</CODE> </TD><TD> <CODE>all</CODE> </TD><TD> <CODE>alter</CODE>
</TR NOSAVE>
<TR><TD><CODE>after</CODE> </TD><TD> <CODE>and</CODE> </TD><TD> <CODE>as</CODE> </TD><TD> <CODE>asc</CODE>
</TR NOSAVE>
<TR><TD><CODE>auto_increment</CODE> </TD><TD> <CODE>between</CODE> </TD><TD> <CODE>bigint</CODE> </TD><TD> <CODE>bit</CODE>
</TR NOSAVE>
<TR><TD><CODE>binary</CODE> </TD><TD> <CODE>blob</CODE> </TD><TD> <CODE>bool</CODE> </TD><TD> <CODE>both</CODE>
</TR NOSAVE>
<TR><TD><CODE>by</CODE> </TD><TD> <CODE>cascade</CODE> </TD><TD> <CODE>char</CODE> </TD><TD> <CODE>character</CODE>
</TR NOSAVE>
<TR><TD><CODE>change</CODE> </TD><TD> <CODE>check</CODE> </TD><TD> <CODE>column</CODE> </TD><TD> <CODE>columns</CODE>
</TR NOSAVE>
<TR><TD><CODE>constraint</CODE> </TD><TD> <CODE>create</CODE> </TD><TD> <CODE>cross</CODE> </TD><TD> <CODE>current_date</CODE>
</TR NOSAVE>
<TR><TD><CODE>current_time</CODE> </TD><TD> <CODE>current_timestamp</CODE> </TD><TD> <CODE>data</CODE> </TD><TD> <CODE>database</CODE>
</TR NOSAVE>
<TR><TD><CODE>databases</CODE> </TD><TD> <CODE>date</CODE> </TD><TD> <CODE>datetime</CODE> </TD><TD> <CODE>day</CODE>
</TR NOSAVE>
<TR><TD><CODE>day_hour</CODE> </TD><TD> <CODE>day_minute</CODE> </TD><TD> <CODE>day_second</CODE> </TD><TD> <CODE>dayofmonth</CODE>
</TR NOSAVE>
<TR><TD><CODE>dayofweek</CODE> </TD><TD> <CODE>dayofyear</CODE> </TD><TD> <CODE>dec</CODE> </TD><TD> <CODE>decimal</CODE>
</TR NOSAVE>
<TR><TD><CODE>default</CODE> </TD><TD> <CODE>delete</CODE> </TD><TD> <CODE>desc</CODE> </TD><TD> <CODE>describe</CODE>
</TR NOSAVE>
<TR><TD><CODE>distinct</CODE> </TD><TD> <CODE>distinctrow</CODE> </TD><TD> <CODE>double</CODE> </TD><TD> <CODE>drop</CODE>
</TR NOSAVE>
<TR><TD><CODE>escaped</CODE> </TD><TD> <CODE>enclosed</CODE> </TD><TD> <CODE>enum</CODE> </TD><TD> <CODE>explain</CODE>
</TR NOSAVE>
<TR><TD><CODE>exists</CODE> </TD><TD> <CODE>fields</CODE> </TD><TD> <CODE>first</CODE> </TD><TD> <CODE>float</CODE>
</TR NOSAVE>
<TR><TD><CODE>float4</CODE> </TD><TD> <CODE>float8</CODE> </TD><TD> <CODE>foreign</CODE> </TD><TD> <CODE>from</CODE>
</TR NOSAVE>
<TR><TD><CODE>for</CODE> </TD><TD> <CODE>full</CODE> </TD><TD> <CODE>function</CODE> </TD><TD> <CODE>grant</CODE>
</TR NOSAVE>
<TR><TD><CODE>group</CODE> </TD><TD> <CODE>having</CODE> </TD><TD> <CODE>hour</CODE> </TD><TD> <CODE>hour_minute</CODE>
</TR NOSAVE>
<TR><TD><CODE>hour_second</CODE> </TD><TD> <CODE>ignore</CODE> </TD><TD> <CODE>in</CODE> </TD><TD> <CODE>index</CODE>
</TR NOSAVE>
<TR><TD><CODE>infile</CODE> </TD><TD> <CODE>insert</CODE> </TD><TD> <CODE>int</CODE> </TD><TD> <CODE>integer</CODE>
</TR NOSAVE>
<TR><TD><CODE>interval</CODE> </TD><TD> <CODE>int1</CODE> </TD><TD> <CODE>int2</CODE> </TD><TD> <CODE>int3</CODE>
</TR NOSAVE>
<TR><TD><CODE>int4</CODE> </TD><TD> <CODE>int8</CODE> </TD><TD> <CODE>into</CODE> </TD><TD> <CODE>if</CODE>
</TR NOSAVE>
<TR><TD><CODE>is</CODE> </TD><TD> <CODE>join</CODE> </TD><TD> <CODE>key</CODE> </TD><TD> <CODE>keys</CODE>
</TR NOSAVE>
<TR><TD><CODE>last_insert_id</CODE> </TD><TD> <CODE>leading</CODE> </TD><TD> <CODE>left</CODE> </TD><TD> <CODE>like</CODE>
</TR NOSAVE>
<TR><TD><CODE>lines</CODE> </TD><TD> <CODE>limit</CODE> </TD><TD> <CODE>load</CODE> </TD><TD> <CODE>lock</CODE>
</TR NOSAVE>
<TR><TD><CODE>long</CODE> </TD><TD> <CODE>longblob</CODE> </TD><TD> <CODE>longtext</CODE> </TD><TD> <CODE>low_priority</CODE>
</TR NOSAVE>
<TR><TD><CODE>match</CODE> </TD><TD> <CODE>mediumblob</CODE> </TD><TD> <CODE>mediumtext</CODE> </TD><TD> <CODE>mediumint</CODE>
</TR NOSAVE>
<TR><TD><CODE>middleint</CODE> </TD><TD> <CODE>minute</CODE> </TD><TD> <CODE>minute_second</CODE> </TD><TD> <CODE>month</CODE>
</TR NOSAVE>
<TR><TD><CODE>monthname</CODE> </TD><TD> <CODE>natural</CODE> </TD><TD> <CODE>numeric</CODE> </TD><TD> <CODE>no</CODE>
</TR NOSAVE>
<TR><TD><CODE>not</CODE> </TD><TD> <CODE>null</CODE> </TD><TD> <CODE>on</CODE> </TD><TD> <CODE>option</CODE>
</TR NOSAVE>
<TR><TD><CODE>optionally</CODE> </TD><TD> <CODE>or</CODE> </TD><TD> <CODE>order</CODE> </TD><TD> <CODE>outer</CODE>
</TR NOSAVE>
<TR><TD><CODE>outfile</CODE> </TD><TD> <CODE>partial</CODE> </TD><TD> <CODE>password</CODE> </TD><TD> <CODE>precision</CODE>
</TR NOSAVE>
<TR><TD><CODE>primary</CODE> </TD><TD> <CODE>procedure</CODE> </TD><TD> <CODE>processlist</CODE> </TD><TD> <CODE>privileges</CODE>
</TR NOSAVE>
<TR><TD><CODE>quarter</CODE> </TD><TD> <CODE>read</CODE> </TD><TD> <CODE>real</CODE> </TD><TD> <CODE>references</CODE>
</TR NOSAVE>
<TR><TD><CODE>rename</CODE> </TD><TD> <CODE>regexp</CODE> </TD><TD> <CODE>reverse</CODE> </TD><TD> <CODE>repeat</CODE>
</TR NOSAVE>
<TR><TD><CODE>replace</CODE> </TD><TD> <CODE>restrict</CODE> </TD><TD> <CODE>returns</CODE> </TD><TD> <CODE>rlike</CODE>
</TR NOSAVE>
<TR><TD><CODE>second</CODE> </TD><TD> <CODE>select</CODE> </TD><TD> <CODE>set</CODE> </TD><TD> <CODE>show</CODE>
</TR NOSAVE>
<TR><TD><CODE>smallint</CODE> </TD><TD> <CODE>soname</CODE> </TD><TD> <CODE>sql_big_tables</CODE> </TD><TD> <CODE>sql_big_selects</CODE>
</TR NOSAVE>
<TR><TD><CODE>sql_select_limit</CODE> </TD><TD> <CODE>sql_low_priority_updates</CODE> </TD><TD> <CODE>sql_log_off</CODE> </TD><TD> <CODE>sql_log_update</CODE>
</TR NOSAVE>
<TR><TD><CODE>straight_join</CODE> </TD><TD> <CODE>starting</CODE> </TD><TD> <CODE>status</CODE> </TD><TD> <CODE>string</CODE>
</TR NOSAVE>
<TR><TD><CODE>table</CODE> </TD><TD> <CODE>tables</CODE> </TD><TD> <CODE>terminated</CODE> </TD><TD> <CODE>text</CODE>
</TR NOSAVE>
<TR><TD><CODE>time</CODE> </TD><TD> <CODE>timestamp</CODE> </TD><TD> <CODE>tinyblob</CODE> </TD><TD> <CODE>tinytext</CODE>
</TR NOSAVE>
<TR><TD><CODE>tinyint</CODE> </TD><TD> <CODE>trailing</CODE> </TD><TD> <CODE>to</CODE> </TD><TD> <CODE>use</CODE>
</TR NOSAVE>
<TR><TD><CODE>using</CODE> </TD><TD> <CODE>unique</CODE> </TD><TD> <CODE>unlock</CODE> </TD><TD> <CODE>unsigned</CODE>
</TR NOSAVE>
<TR><TD><CODE>update</CODE> </TD><TD> <CODE>usage</CODE> </TD><TD> <CODE>values</CODE> </TD><TD> <CODE>varchar</CODE>
</TR NOSAVE>
<TR><TD><CODE>variables</CODE> </TD><TD> <CODE>varying</CODE> </TD><TD> <CODE>varbinary</CODE> </TD><TD> <CODE>with</CODE>
</TR NOSAVE>
<TR><TD><CODE>write</CODE> </TD><TD> <CODE>where</CODE> </TD><TD> <CODE>year</CODE> </TD><TD> <CODE>year_month</CODE>
</TR NOSAVE>
<TR><TD><CODE>zerofill</CODE>
</TR>
</TABLE>

<P>
The following symbols (from the table above) are disallowed by ANSI SQL
but allowed by <STRONG>MySQL</STRONG> as column/table names. This is because some
of these names are very natural names and a lot of people have already
used them.

</P>

<UL>
<LI><CODE>ACTION</CODE>

<LI><CODE>BIT</CODE>

<LI><CODE>DATE</CODE>

<LI><CODE>ENUM</CODE>

<LI><CODE>NO</CODE>

<LI><CODE>TEXT</CODE>

<LI><CODE>TIME</CODE>

<LI><CODE>TIMESTAMP</CODE>

</UL>



<H1><A NAME="Tutorial" HREF="manual_toc.html#Tutorial">8  <STRONG>MySQL</STRONG> Tutorial</A></H1>

<P>
This chapter provides a tutorial introduction to <STRONG>MySQL</STRONG> by showing
how to use the <CODE>mysql</CODE> client program to create and use a simple
database.  <CODE>mysql</CODE> (sometimes referred to as the "terminal monitor" or
just "monitor") is an interactive program that allows you to connect to a
<STRONG>MySQL</STRONG> server, run queries and view the results.  <CODE>mysql</CODE> may
also be used in batch mode: you place your queries in a file beforehand, then
tell <CODE>mysql</CODE> to execute the contents of the file.  Both ways of using
<CODE>mysql</CODE> are covered here.

</P>
<P>
To see a list of options provided by <CODE>mysql</CODE>, invoke it with
the <CODE>--help</CODE> option:

</P>

<PRE>
shell&#62; mysql --help
</PRE>

<P>
This chapter assumes that <CODE>mysql</CODE> is installed on your machine, and that
a <STRONG>MySQL</STRONG> server is available to which you can connect.  If this is
not true, contact your <STRONG>MySQL</STRONG> administrator.  (If <EM>you</EM> are the
administrator, you will need to consult other sections of this manual.)

</P>
<P>
The chapter describes the entire process of setting up and using a
database.  If you are interested only in accessing an already-existing
database, you may want to skip over the sections that describe how to
create the database and the tables it contains.

</P>
<P>
Since this chapter is tutorial in nature, many details are necessarily left
out.  Consult the relevant sections of the manual for more
information on the topics covered here.

</P>


<H2><A NAME="Connecting-disconnecting" HREF="manual_toc.html#Connecting-disconnecting">8.1  Connecting to and disconnecting from the server</A></H2>

<P>
To connect to the server, you'll usually need to provide a <STRONG>MySQL</STRONG>
user name when you invoke <CODE>mysql</CODE> and, most likely, a password.  If the
server runs on a machine other than the one where you log in, you'll also
need to specify a hostname.  Contact your administrator to find out what
connection parameters you should use to connect (i.e., what host, user name
and password to use).  Once you know the proper parameters, you should be
able to connect like this:

</P>

<PRE>
shell&#62; mysql -h host -u user -p
Enter password: ********
</PRE>

<P>
The <CODE>********</CODE> represents your password; enter it when <CODE>mysql</CODE>
displays the <CODE>Enter password:</CODE> prompt.

</P>
<P>
If that works, you should see some introductory information followed by a
<CODE>mysql&#62;</CODE> prompt:

</P>


<PRE>
shell&#62; mysql -h host -u user -p
Enter password: ********
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 459 to server version: 3.22.20a-log

Type 'help' for help.

mysql&#62; 
</PRE>

<P>
The prompt tells you that <CODE>mysql</CODE> is ready for you to enter commands.

</P>
<P>
Some <STRONG>MySQL</STRONG> installations allow users to connect as the "anonymous"
(unnamed) user to the server running on the local host.  If this is the case
on your machine, you should be able to connect to that server by invoking
<CODE>mysql</CODE> without any options:

</P>

<PRE>
shell&#62; mysql
</PRE>

<P>
After you have connected successfully, you can disconnect any time by typing
<CODE>QUIT</CODE> at the <CODE>mysql&#62;</CODE> prompt:

</P>

<PRE>
mysql&#62; QUIT
Bye
</PRE>

<P>
You can also disconnect by typing control-D.

</P>
<P>
Most examples in the following sections assume you are connected to the
server.  They indicate this by the <CODE>mysql&#62;</CODE> prompt.

</P>


<H2><A NAME="Entering_queries" HREF="manual_toc.html#Entering_queries">8.2  Entering queries</A></H2>

<P>
Make sure you are connected to the server, as discussed in the previous
section.  Doing so will not in itself select any database to work with, but
that's okay.  At this point, it's more important to find out a little about
how to issue queries than to jump right in creating tables, loading data
into them and retrieving data from them.  This section describes the basic
principles of entering commands, using several queries you can try out to
familiarize yourself with how <CODE>mysql</CODE> works.

</P>
<P>
Here's a simple command that asks the server to tell you its version number
and the current date.  Type it in as shown below following the <CODE>mysql&#62;</CODE>
prompt and hit the RETURN key:

</P>

<PRE>
mysql&#62; SELECT VERSION(), CURRENT_DATE;
+--------------+--------------+
| version()    | CURRENT_DATE |
+--------------+--------------+
| 3.22.20a-log | 1999-03-19   |
+--------------+--------------+
1 row in set (0.01 sec)
mysql&#62;
</PRE>

<P>
This query illustrates several things about <CODE>mysql</CODE>:

</P>

<UL>
<LI>

A command normally consists of a SQL statement followed by a semicolon.
(There are some exceptions where a semicolon is not needed.  <CODE>QUIT</CODE>,
mentioned earlier, is one of them.  We'll get to others later.)

<LI>

When you issue a command, <CODE>mysql</CODE> sends it to the server for execution
and displays the results, then prints another <CODE>mysql&#62;</CODE> to indicate
that it is ready for another command.

<LI>

<CODE>mysql</CODE> displays query output as a table (rows and columns).  The first
row contains labels for the columns.  The rows following are the query
results.  Normally, column labels are the names of the columns you fetch from
database tables.  If you're retrieving the value of an expression rather than
a table column (as in the example just shown), <CODE>mysql</CODE> labels the column
using the expression itself.

<LI>

<CODE>mysql</CODE> shows how many rows were returned, and how long the query took
to execute, which gives you a rough idea of server performance.  These values
are imprecise because they represent wall clock time (not CPU or machine
time), and because they are affected by factors such as server load and
network latency.  (For brevity, the "rows in set" line is not shown in
the remaining examples in this chapter.)
</UL>

<P>
Keywords may be entered in any lettercase.  The following queries are
equivalent:

</P>

<PRE>
mysql&#62; SELECT VERSION(), CURRENT_DATE;
mysql&#62; select version(), current_date;
mysql&#62; SeLeCt vErSiOn(), current_DATE;
</PRE>

<P>
Here's another query.  It demonstrates that you can use <CODE>mysql</CODE> as a
simple calculator:

</P>

<PRE>
mysql&#62; SELECT SIN(PI()/4), (4+1)*5;
+-------------+---------+
| SIN(PI()/4) | (4+1)*5 |
+-------------+---------+
|    0.707107 |      25 |
+-------------+---------+
</PRE>

<P>
The commands shown thus far have been relatively short, single-line
statements.  You can even enter multiple statements on a single line.
Just end each one with a semicolon:

</P>

<PRE>
mysql&#62; SELECT VERSION(); SELECT NOW();
+--------------+
| version()    |
+--------------+
| 3.22.20a-log |
+--------------+

+---------------------+
| NOW()               |
+---------------------+
| 1999-03-19 00:15:33 |
+---------------------+
</PRE>

<P>
A command need not be given all on a single line, so lengthy commands that
require several lines are not a problem.  <CODE>mysql</CODE> determines where your
statement ends by looking for the terminating semicolon, not by looking for
the end of the input line.  (In other words, <CODE>mysql</CODE>
accepts free-format input:  it collects input lines but does not execute them
until it sees the semicolon.)

</P>
<P>
Here's a simple multiple-line statement:

</P>

<PRE>
mysql&#62; SELECT
    -&#62; USER()
    -&#62; ,
    -&#62; CURRENT_DATE;
+--------------------+--------------+
| USER()             | CURRENT_DATE |
+--------------------+--------------+
| joesmith@localhost | 1999-03-18   |
+--------------------+--------------+
</PRE>

<P>
In this example, notice how the prompt changes from <CODE>mysql&#62;</CODE> to
<CODE>-&#62;</CODE> after you enter the first line of a multiple-line query.  This is
how <CODE>mysql</CODE> indicates that it hasn't seen a complete statement and is
waiting for the rest.  The prompt is your friend, because it provides
valuable feedback.  If you use that feedback, you will always be aware of
what <CODE>mysql</CODE> is waiting for.

</P>
<P>
If you decide you don't want to execute a command that you are in the
process of entering, cancel it by typing <CODE>\c</CODE>:

</P>

<PRE>
mysql&#62; SELECT
    -&#62; USER()
    -&#62; \c
mysql&#62;
</PRE>

<P>
Here, too, notice the prompt.  It switches back to <CODE>mysql&#62;</CODE> after you
type <CODE>\c</CODE>, providing feedback to indicate that <CODE>mysql</CODE> is ready
for a new command.

</P>
<P>
The following table shows each of the prompts you may see and summarizes what
they mean about the state that <CODE>mysql</CODE> is in:

</P>
<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><STRONG>Prompt</STRONG> </TD><TD> <STRONG>Meaning</STRONG>
</TR NOSAVE>
<TR><TD><CODE>mysql&#62;</CODE> </TD><TD> Ready for new command
</TR NOSAVE>
<TR><TD><CODE>    -&#62;</CODE> </TD><TD> Waiting for next line of multiple-line command
</TR NOSAVE>
<TR><TD><CODE>    '&#62;</CODE> </TD><TD> Waiting for next line, collecting a string that begins
with a single quote (<SAMP>`''</SAMP>)
</TR NOSAVE>
<TR><TD><CODE>    "&#62;</CODE> </TD><TD> Waiting for next line, collecting a string that begins
with a double quote (<SAMP>`"'</SAMP>)
</TR>
</TABLE>

<P>
Multiple-line statements commonly occur "by accident" when you intend to
issue a command on a single line, but forget the terminating semicolon.  In
this case, <CODE>mysql</CODE> waits for more input:

</P>

<PRE>
mysql&#62; SELECT USER()
    -&#62;
</PRE>

<P>
If this happens to you (you think you've entered a statement but the only
response is a <CODE>-&#62;</CODE> prompt), most likely <CODE>mysql</CODE> is waiting for the
semicolon.  If you don't notice what the prompt is telling you, you might sit
there for a while before realizing what you need to do.  Enter a semicolon to
complete the statement, and <CODE>mysql</CODE> will execute it:

</P>

<PRE>
mysql&#62; SELECT USER()
    -&#62; ;
+--------------------+
| USER()             |
+--------------------+
| joesmith@localhost |
+--------------------+
</PRE>

<P>
The <CODE>'&#62;</CODE> and <CODE>"&#62;</CODE> prompts occur during string collection.
In <STRONG>MySQL</STRONG>, you can write strings surrounded by either <SAMP>`''</SAMP>
or <SAMP>`"'</SAMP> characters (for example, <CODE>'hello'</CODE> or <CODE>"goodbye"</CODE>),
and <CODE>mysql</CODE> lets you enter strings that span multiple lines.  When you
see a <CODE>'&#62;</CODE> or <CODE>"&#62;</CODE> prompt, it means that you've entered a line
containing a string that begins with a <SAMP>`''</SAMP> or <SAMP>`"'</SAMP> quote character,
but have not yet entered the matching quote that terminates the string.
That's fine if you really are entering a multiple-line string, but how likely
is that?  Not very.  More often, the <CODE>'&#62;</CODE> and <CODE>"&#62;</CODE> prompts indicate
that you've inadvertantly left out a quote character.  For example:

</P>

<PRE>
mysql&#62; SELECT * FROM my_table WHERE name = "Smith AND age &#60; 30;
    "&#62;
</PRE>

<P>
If you enter this <CODE>SELECT</CODE> statement, then hit RETURN and wait for the
result, nothing will happen.  Instead of wondering, "why does this
query take so long?," notice the clue provided by the <CODE>"&#62;</CODE> prompt.  It
tells you that <CODE>mysql</CODE> expects to see the rest of an unterminated
string.  (Do you see the error in the statement?  The string <CODE>"Smith</CODE> is
missing the second quote.)

</P>
<P>
At this point, what do you do?  The simplest thing is to cancel the command.
However, you cannot just type <CODE>\c</CODE> in this case, because <CODE>mysql</CODE>
interprets it as part of the string that it is collecting!  Instead, enter
the closing quote character (so <CODE>mysql</CODE> knows you've finished the
string), then type <CODE>\c</CODE>:

</P>

<PRE>
mysql&#62; SELECT * FROM my_table WHERE name = "Smith AND age &#60; 30;
    "&#62; "\c
mysql&#62;
</PRE>

<P>
The prompt changes back to <CODE>mysql&#62;</CODE>, indicating that <CODE>mysql</CODE>
is ready for a new command.

</P>
<P>
It's important to know what the <CODE>'&#62;</CODE> and <CODE>"&#62;</CODE> prompts signify,
because if you mistakenly enter an unterminated string, any further lines you
type will appear to be ignored by <CODE>mysql</CODE> -- including a line
containing <CODE>QUIT</CODE>!  This can be quite confusing, especially if you
don't know that you need to supply the terminating quote before you can
cancel the current command.

</P>


<H2><A NAME="Database_use" HREF="manual_toc.html#Database_use">8.3  Creating and using a database</A></H2>

<P>
Now that you know how to enter commands, it's time to access a database.

</P>
<P>
Suppose you have several pets in your home (your "menagerie") and you'd
like to keep track of various types of information about them.  You can do so
by creating tables to hold your data and loading them with the desired
information.  Then you can answer different sorts of questions about your
animals by retrieving data from the tables.  This section shows how to do
all that:

</P>

<UL>
<LI>

How to create a database
<LI>

How to create a table
<LI>

How to load data into the table
<LI>

How to retrieve data from the table in various ways
<LI>

How to use multiple tables
</UL>

<P>
The menagerie database will be simple (deliberately), but it is not difficult
to think of real-world situations in which a similar type of database might
be used.  For example, a database like this could be used by a farmer to keep
track of livestock, or by a veterinarian to keep track of patient records.

</P>
<P>
Use the <CODE>SHOW</CODE> statement to find out what databases currently exist
on the server:

</P>

<PRE>
mysql&#62; SHOW DATABASES;
+----------+
| Database |
+----------+
| mysql    |
| test     |
| tmp      |
+----------+
</PRE>

<P>
The list of databases is probably different on your machine, but the
<CODE>mysql</CODE> and <CODE>test</CODE> databases are likely to be among them.  The
<CODE>mysql</CODE> database is required because it describes user access
privileges.  The <CODE>test</CODE> database is often provided as a workspace for
users to try things out.

</P>
<P>
If the <CODE>test</CODE> database exists, try to access it:

</P>

<PRE>
mysql&#62; USE test
Database changed
</PRE>

<P>
Note that <CODE>USE</CODE>, like <CODE>QUIT</CODE>, does not require a semicolon.  (You
can terminate such statements with a semicolon if you like; it does no harm.)
The <CODE>USE</CODE> statement is special in another way, too:  it must be given on
a single line.

</P>
<P>
You can use the <CODE>test</CODE> database (if you have access to it) for the
examples that follow, but anything you create in that database can be
removed by anyone else with access to it.  For this reason, you should
probably ask your <STRONG>MySQL</STRONG> administrator for permission to use a
database of your own.  Suppose you want to call yours <CODE>menagerie</CODE>.  The
administrator needs to execute a command like this:

</P>

<PRE>
mysql&#62; GRANT ALL ON menagerie.* TO your_mysql_name;
</PRE>

<P>
where <CODE>your_mysql_name</CODE> is the <STRONG>MySQL</STRONG> user name assigned to
you.

</P>


<H3><A NAME="Creating_database" HREF="manual_toc.html#Creating_database">8.3.1  Creating and selecting a database</A></H3>

<P>
If the administrator creates your database for you when setting up your
permissions, you can begin using it.  Otherwise, you need to create it
yourself:

</P>

<PRE>
mysql&#62; CREATE DATABASE menagerie;
</PRE>

<P>
Under Unix, database names are case sensitive (unlike SQL keywords), so you
must always refer to your database as <CODE>menagerie</CODE>, not as
<CODE>Menagerie</CODE>, <CODE>MENAGERIE</CODE> or some other variant.  This is also true
for table names.  (Under Windows, this restriction does not apply, although
you must refer to databases and tables using the same lettercase throughout a
given query.)

</P>
<P>
Creating a database does not select it for use, you must do that explicitly.
To make <CODE>menagerie</CODE> the current database, use this command:

</P>

<PRE>
mysql&#62; USE menagerie
Database changed
</PRE>

<P>
Your database needs to be created only once, but you must select it for use
each time you begin a <CODE>mysql</CODE> session.  You can do this by issuing a
<CODE>USE</CODE> statement as shown above.  Alternatively, you can select the
database on the command line when you invoke <CODE>mysql</CODE>.  Just specify its
name after any connection parameters that you might need to provide.  For
example:

</P>

<PRE>
shell&#62; mysql -h host -u user -p menagerie
Enter password: ********
</PRE>

<P>
Note that <CODE>menagerie</CODE> is not your password on the command just shown.
If you want to supply your password on the command line after the <CODE>-p</CODE>
option, you must do so with no intervening space (e.g., as
<CODE>-pmypassword</CODE>, not as <CODE>-p mypassword</CODE>).  However, putting your
password on the command line is not recommended, because doing so exposes it
to snooping by other users logged in on your machine.

</P>


<H3><A NAME="Creating_tables" HREF="manual_toc.html#Creating_tables">8.3.2  Creating a table</A></H3>

<P>
Creating the database is the easy part, but at this point it's empty, as
<CODE>SHOW TABLES</CODE> will tell you:

</P>

<PRE>
mysql&#62; SHOW TABLES;
Empty set (0.00 sec)
</PRE>

<P>
The harder part is deciding what the structure of your database should be:
what tables you will need, and what columns will be in each of them.

</P>
<P>
You'll want a table that contains a record for each of your pets.  This can
be called the <CODE>pet</CODE> table, and it should contain, as a bare minimum,
each animal's name.  Since the name by itself is not very interesting, the
table should contain other information.  For example, if more than one person
in your family keeps pets, you might want to list each animal's owner.  You
might also want to record some basic descriptive information such as species
and sex.

</P>
<P>
How about age?  That might be of interest, but it's not a good thing to store
in a database.  Age changes as time passes, which means you'd have to update
your records often.  Instead, it's better to store a fixed value such as
date of birth.  Then, whenever you need age, you can calculate it as the
difference between the current date and the birth date.  <STRONG>MySQL</STRONG>
provides functions for doing date arithmetic, so this is not difficult.
Storing birth date rather than age has other advantages, too:

</P>

<UL>
<LI>

You can use the database for tasks such as generating reminders for upcoming
pet birthdays.  (If you think this type of query is somewhat silly, note that
it is the same question you might ask in the context of a business database
to identify clients to whom you'll soon need to send out birthday greetings,
for that computer-assisted personal touch.)

<LI>

You can calculate age in relation to dates other than the current date.  For
example, if you store death date in the database, you can easily calculate
how old a pet was when it died.
</UL>

<P>
You can probably think of other types of information that would be useful in
the <CODE>pet</CODE> table, but the ones identified so far are sufficient for now:
name, owner, species, sex, birth and death.

</P>
<P>
Use a <CODE>CREATE TABLE</CODE> statement to specify the layout of your table:

</P>

<PRE>
mysql&#62; CREATE TABLE pet (name VARCHAR(20), owner VARCHAR(20),
    -&#62; species VARCHAR(20), sex CHAR(1), birth DATE, death DATE);
</PRE>

<P>
<CODE>VARCHAR</CODE> is a good choice for the <CODE>name</CODE>, <CODE>owner</CODE> and
<CODE>species</CODE> columns since the column values will vary in length.  The
lengths of those columns need not all be the same, and need not be
<CODE>20</CODE>.  You can pick any length from <CODE>1</CODE> to <CODE>255</CODE>, whatever
seems most reasonable to you.  (If you make a poor choice and it turns
out later that you need a longer field, <STRONG>MySQL</STRONG> provides an
<CODE>ALTER TABLE</CODE> statement.)

</P>
<P>
Animal sex can be represented in a variety of ways, for example, <CODE>"m"</CODE>
and <CODE>"f"</CODE>, or perhaps <CODE>"male"</CODE> and <CODE>"female"</CODE>.  It's simplest
to use the single characters <CODE>"m"</CODE> and <CODE>"f"</CODE>.

</P>
<P>
The use of the <CODE>DATE</CODE> data type for the <CODE>birth</CODE> and <CODE>death</CODE>
columns is a fairly obvious choice.

</P>
<P>
Now that you have created a table, <CODE>SHOW TABLES</CODE> should produce some
output:

</P>

<PRE>
mysql&#62; SHOW TABLES;
+---------------------+
| Tables in menagerie |
+---------------------+
| pet                 |
+---------------------+
</PRE>

<P>
To verify that your table was created the way you expected, use
a <CODE>DESCRIBE</CODE> statement:

</P>

<PRE>
mysql&#62; DESCRIBE pet;
+---------+-------------+------+-----+---------+-------+
| Field   | Type        | Null | Key | Default | Extra |
+---------+-------------+------+-----+---------+-------+
| name    | varchar(20) | YES  |     | NULL    |       |
| owner   | varchar(20) | YES  |     | NULL    |       |
| species | varchar(20) | YES  |     | NULL    |       |
| sex     | char(1)     | YES  |     | NULL    |       |
| birth   | date        | YES  |     | NULL    |       |
| death   | date        | YES  |     | NULL    |       |
+---------+-------------+------+-----+---------+-------+
</PRE>

<P>
You can use <CODE>DESCRIBE</CODE> any time, for example, if you forget the names of
the columns in your table or what types they are.

</P>


<H3><A NAME="Loading_tables" HREF="manual_toc.html#Loading_tables">8.3.3  Loading data into a table</A></H3>

<P>
After creating your table, you need to populate it.  The <CODE>LOAD DATA</CODE> and
<CODE>INSERT</CODE> statements are useful for this.

</P>
<P>
Suppose your pet records can be described as shown below.
(Observe that <STRONG>MySQL</STRONG> expects dates in <CODE>YYYY-MM-DD</CODE> format;
this may be different than what you are used to.)

</P>
<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><STRONG>name</STRONG> </TD><TD> <STRONG>owner</STRONG> </TD><TD> <STRONG>species</STRONG> </TD><TD> <STRONG>sex</STRONG> </TD><TD> <STRONG>birth</STRONG> </TD><TD> <STRONG>death</STRONG>
</TR NOSAVE>
<TR><TD>Fluffy </TD><TD> Harold </TD><TD> cat </TD><TD> f </TD><TD> 1993-02-04 </TD><TD>
</TR NOSAVE>
<TR><TD>Claws </TD><TD> Gwen </TD><TD> cat </TD><TD> m </TD><TD> 1994-03-17 </TD><TD>
</TR NOSAVE>
<TR><TD>Buffy </TD><TD> Harold </TD><TD> dog </TD><TD> f </TD><TD> 1989-05-13 </TD><TD>
</TR NOSAVE>
<TR><TD>Fang </TD><TD> Benny </TD><TD> dog </TD><TD> m </TD><TD> 1990-08-27 </TD><TD>
</TR NOSAVE>
<TR><TD>Bowser </TD><TD> Diane </TD><TD> dog </TD><TD> m </TD><TD> 1998-08-31 </TD><TD> 1995-07-29
</TR NOSAVE>
<TR><TD>Chirpy </TD><TD> Gwen </TD><TD> bird </TD><TD> f </TD><TD> 1998-09-11 </TD><TD>
</TR NOSAVE>
<TR><TD>Whistler </TD><TD> Gwen </TD><TD> bird </TD><TD> </TD><TD> 1997-12-09 </TD><TD>
</TR NOSAVE>
<TR><TD>Slim </TD><TD> Benny </TD><TD> snake </TD><TD> m </TD><TD> 1996-04-29 </TD><TD>
</TR>
</TABLE>

<P>
Since you are beginning with an empty table, an easy way to populate it is to
create a text file containing a row for each of your animals, then load the
contents of the file into the table with a single statement.

</P>
<P>
You could create a text file <TT>`pet.txt'</TT> containing one record per line,
with values separated by tabs, and given in the order in which the columns
were listed in the <CODE>CREATE TABLE</CODE> statement.  For missing values (such
as unknown sexes, or death dates for animals that are still living), you can
use <CODE>NULL</CODE> values.  To represent these in your text file, use
<CODE>\N</CODE>.  For example, the record for Whistler the bird would look like
this (where the whitespace between values is a single tab character):

</P>
<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><CODE>Whistler</CODE> </TD><TD> <CODE>Gwen</CODE> </TD><TD> <CODE>bird</CODE> </TD><TD> <CODE>\N</CODE> </TD><TD> <CODE>1997-12-09</CODE> </TD><TD> <CODE>\N</CODE>
</TR>
</TABLE>

<P>
To load the text file <TT>`pet.txt'</TT> into the <CODE>pet</CODE> table, use this
command:

</P>

<PRE>
mysql&#62; LOAD DATA LOCAL INFILE "pet.txt" INTO TABLE pet;
</PRE>

<P>
You can specify the column value separator and end of line marker explicitly
in the <CODE>LOAD DATA</CODE> statement if you wish, but the defaults are tab and
linefeed.  These are sufficient for the statement to read the file
<TT>`pet.txt'</TT> properly.

</P>
<P>
When you want to add new records one at a time, the <CODE>INSERT</CODE> statement
is useful.  In its simplest form, you supply values for each column, in the
order in which the columns were listed in the <CODE>CREATE TABLE</CODE> statement.
Suppose Diane gets a new hamster named Puffball.  You could add a new record
using an <CODE>INSERT</CODE> statement like this:

</P>

<PRE>
mysql&#62; INSERT INTO pet
    -&#62; VALUES ('Puffball','Diane','hamster','f','1999-03-30',NULL);
</PRE>

<P>
Note that string and date values are specified as quoted strings here.  Also,
with <CODE>INSERT</CODE>, you can insert <CODE>NULL</CODE> directly to represent a
missing value.  You do not use <CODE>\N</CODE> like you do with <CODE>LOAD DATA</CODE>.

</P>
<P>
From this example, you should be able to see that there would be a lot more
typing involved to load
your records initially using several <CODE>INSERT</CODE> statements rather
than a single <CODE>LOAD DATA</CODE> statement.

</P>


<H3><A NAME="Retrieving_data" HREF="manual_toc.html#Retrieving_data">8.3.4  Retrieving information from a table</A></H3>

<P>
The <CODE>SELECT</CODE> statement is used to pull information from a table.
The general form of the statement is:

</P>

<PRE>
SELECT what_to_select
FROM which_table
WHERE conditions_to_satisfy
</PRE>

<P>
<CODE>what_to_select</CODE> indicates what you want to see.  This can be a list of
columns, or <CODE>*</CODE> to to indicate "all columns." <CODE>which_table</CODE>
indicates the table from which you want to retrieve data.  The <CODE>WHERE</CODE>
clause is optional.  If it's present, <CODE>conditions_to_satisfy</CODE> specifies
conditions that rows must satisfy to qualify for retrieval.

</P>


<H4><A NAME="Selecting_all" HREF="manual_toc.html#Selecting_all">8.3.4.1  Selecting all data</A></H4>

<P>
The simplest form of <CODE>SELECT</CODE> retrieves everything from a table:

</P>

<PRE>
mysql&#62; SELECT * FROM pet;
+----------+--------+---------+------+------------+------------+
| name     | owner  | species | sex  | birth      | death      |
+----------+--------+---------+------+------------+------------+
| Fluffy   | Harold | cat     | f    | 1993-02-04 | NULL       |
| Claws    | Gwen   | cat     | m    | 1994-03-17 | NULL       |
| Buffy    | Harold | dog     | f    | 1989-05-13 | NULL       |
| Fang     | Benny  | dog     | m    | 1990-08-27 | NULL       |
| Bowser   | Diane  | dog     | m    | 1998-08-31 | 1995-07-29 |
| Chirpy   | Gwen   | bird    | f    | 1998-09-11 | NULL       |
| Whistler | Gwen   | bird    | NULL | 1997-12-09 | NULL       |
| Slim     | Benny  | snake   | m    | 1996-04-29 | NULL       |
| Puffball | Diane  | hamster | f    | 1999-03-30 | NULL       |
+----------+--------+---------+------+------------+------------+
</PRE>

<P>
This form of <CODE>SELECT</CODE> is useful if you want to review your entire table,
for instance, after you've just loaded it with your initial dataset.  As it
happens, the output just shown reveals an error in your data file:  Bowser
appears to have been born after he died!  Consulting your original pedigree
papers, you find that the correct birth year is 1989, not 1998.

</P>
<P>
There are are least a couple of ways to fix this:

</P>

<UL>
<LI>

Edit the file <TT>`pet.txt'</TT> to correct the error, then empty the table
and reload it using <CODE>DELETE</CODE> and <CODE>LOAD DATA</CODE>:


<PRE>
mysql&#62; DELETE FROM pet;
mysql&#62; LOAD DATA LOCAL INFILE "pet.txt" INTO TABLE pet;
</PRE>

However, if you do this, you must also re-enter the record for Puffball.

<LI>

Fix only the erroneous record with an <CODE>UPDATE</CODE> statement:


<PRE>
mysql&#62; UPDATE pet SET birth = "1989-08-31" WHERE name = "Bowser";
</PRE>

</UL>

<P>
As shown above, it is easy to retrieve an entire table.  But typically you
don't want to do that, particularly when the table becomes large.  Instead,
you're usually more interested in answering a particular question, in which
case you specify some constraints on the information you want.  Let's look at
some selection queries in terms of questions about your pets that they
answer.

</P>


<H4><A NAME="Selecting_rows" HREF="manual_toc.html#Selecting_rows">8.3.4.2  Selecting particular rows</A></H4>

<P>
You can select only particular rows from your table.  For example, if you want
to verify the change that you made to Bowser's birth date, select Bowser's
record like this:

</P>

<PRE>
mysql&#62; SELECT * FROM pet WHERE name = "Bowser";
+--------+-------+---------+------+------------+------------+
| name   | owner | species | sex  | birth      | death      |
+--------+-------+---------+------+------------+------------+
| Bowser | Diane | dog     | m    | 1989-08-31 | 1995-07-29 |
+--------+-------+---------+------+------------+------------+
</PRE>

<P>
The output confirms that the year is correctly recorded now as 1989, not 1998.

</P>
<P>
String comparisons are normally case-insensitive, so you can specify the
name as <CODE>"bowser"</CODE>, <CODE>"BOWSER"</CODE>, etc.  The query result will be
the same.

</P>
<P>
You can specify conditions on any column, not just <CODE>name</CODE>.  For example,
if you want to know which animals were born after 1998, test the <CODE>birth</CODE>
column:

</P>

<PRE>
mysql&#62; SELECT * FROM pet WHERE birth &#62;= "1998-1-1";
+----------+-------+---------+------+------------+-------+
| name     | owner | species | sex  | birth      | death |
+----------+-------+---------+------+------------+-------+
| Chirpy   | Gwen  | bird    | f    | 1998-09-11 | NULL  |
| Puffball | Diane | hamster | f    | 1999-03-30 | NULL  |
+----------+-------+---------+------+------------+-------+
</PRE>

<P>
You can combine conditions, for example, to locate female dogs:

</P>

<PRE>
mysql&#62; SELECT * FROM pet WHERE species = "dog" AND sex = "f";
+-------+--------+---------+------+------------+-------+
| name  | owner  | species | sex  | birth      | death |
+-------+--------+---------+------+------------+-------+
| Buffy | Harold | dog     | f    | 1989-05-13 | NULL  |
+-------+--------+---------+------+------------+-------+
</PRE>

<P>
The preceding query uses the <CODE>AND</CODE> logical operator.  There is also an
<CODE>OR</CODE> operator:

</P>

<PRE>
mysql&#62; SELECT * FROM pet WHERE species = "snake" OR species = "bird";
+----------+-------+---------+------+------------+-------+
| name     | owner | species | sex  | birth      | death |
+----------+-------+---------+------+------------+-------+
| Chirpy   | Gwen  | bird    | f    | 1998-09-11 | NULL  |
| Whistler | Gwen  | bird    | NULL | 1997-12-09 | NULL  |
| Slim     | Benny | snake   | m    | 1996-04-29 | NULL  |
+----------+-------+---------+------+------------+-------+
</PRE>

<P>
<CODE>AND</CODE> and <CODE>OR</CODE> may be intermixed.  If you do that, it's a good idea
to use parentheses to indicate how conditions should be grouped:

</P>

<PRE>
mysql&#62; SELECT * FROM pet WHERE (species = "cat" AND sex = "m")
    -&#62; OR (species = "dog" AND sex = "f");
+-------+--------+---------+------+------------+-------+
| name  | owner  | species | sex  | birth      | death |
+-------+--------+---------+------+------------+-------+
| Claws | Gwen   | cat     | m    | 1994-03-17 | NULL  |
| Buffy | Harold | dog     | f    | 1989-05-13 | NULL  |
+-------+--------+---------+------+------------+-------+
</PRE>



<H4><A NAME="Selecting_columns" HREF="manual_toc.html#Selecting_columns">8.3.4.3  Selecting particular columns</A></H4>

<P>
If you don't want to see entire rows from your table, just name the columns
in which you're interested, separated by commas.  For example, if you want to
know when your animals were born, select the <CODE>name</CODE> and <CODE>birth</CODE>
columns:

</P>

<PRE>
mysql&#62; SELECT name, birth FROM pet;
+----------+------------+
| name     | birth      |
+----------+------------+
| Fluffy   | 1993-02-04 |
| Claws    | 1994-03-17 |
| Buffy    | 1989-05-13 |
| Fang     | 1990-08-27 |
| Bowser   | 1989-08-31 |
| Chirpy   | 1998-09-11 |
| Whistler | 1997-12-09 |
| Slim     | 1996-04-29 |
| Puffball | 1999-03-30 |
+----------+------------+
</PRE>

<P>
To find out who owns pets, use this query:

</P>

<PRE>
mysql&#62; SELECT owner FROM pet;
+--------+
| owner  |
+--------+
| Harold |
| Gwen   |
| Harold |
| Benny  |
| Diane  |
| Gwen   |
| Gwen   |
| Benny  |
| Diane  |
+--------+
</PRE>

<P>
However, notice that the query simply retrieves the <CODE>owner</CODE> field from
each record, and some of them appear more than once.  To minimize the output,
retrieve each unique output record just once by adding the keyword
<CODE>DISTINCT</CODE>:

</P>

<PRE>
mysql&#62; SELECT DISTINCT owner FROM pet;
+--------+
| owner  |
+--------+
| Benny  |
| Diane  |
| Gwen   |
| Harold |
+--------+
</PRE>

<P>
You can use a <CODE>WHERE</CODE> clause to combine row selection with column
selection.  For example, to get birth dates for dogs and cats only,
use this query:

</P>

<PRE>
mysql&#62; SELECT name, species, birth FROM pet
    -&#62; WHERE species = "dog" OR species = "cat";
+--------+---------+------------+
| name   | species | birth      |
+--------+---------+------------+
| Fluffy | cat     | 1993-02-04 |
| Claws  | cat     | 1994-03-17 |
| Buffy  | dog     | 1989-05-13 |
| Fang   | dog     | 1990-08-27 |
| Bowser | dog     | 1989-08-31 |
+--------+---------+------------+
</PRE>



<H4><A NAME="Sorting_rows" HREF="manual_toc.html#Sorting_rows">8.3.4.4  Sorting rows</A></H4>

<P>
You may have noticed in the preceding examples that the result rows are
displayed in no particular order.  However, it's often easier to examine
query output when the rows are sorted in some meaningful way.  To sort a
result, use an <CODE>ORDER BY</CODE> clause.

</P>
<P>
Here are animal birthdays, sorted by date:

</P>

<PRE>
mysql&#62; SELECT name, birth FROM pet ORDER BY birth;
+----------+------------+
| name     | birth      |
+----------+------------+
| Buffy    | 1989-05-13 |
| Bowser   | 1989-08-31 |
| Fang     | 1990-08-27 |
| Fluffy   | 1993-02-04 |
| Claws    | 1994-03-17 |
| Slim     | 1996-04-29 |
| Whistler | 1997-12-09 |
| Chirpy   | 1998-09-11 |
| Puffball | 1999-03-30 |
+----------+------------+
</PRE>

<P>
To sort in reverse order, add the <CODE>DESC</CODE> (descending) keyword to the
name of the column you are sorting by:

</P>

<PRE>
mysql&#62; SELECT name, birth FROM pet ORDER BY birth DESC;
+----------+------------+
| name     | birth      |
+----------+------------+
| Puffball | 1999-03-30 |
| Chirpy   | 1998-09-11 |
| Whistler | 1997-12-09 |
| Slim     | 1996-04-29 |
| Claws    | 1994-03-17 |
| Fluffy   | 1993-02-04 |
| Fang     | 1990-08-27 |
| Bowser   | 1989-08-31 |
| Buffy    | 1989-05-13 |
+----------+------------+
</PRE>

<P>
You can sort on multiple columns.  For example, to sort by type of
animal, then by birth date within animal type with youngest animals first,
use the following query:

</P>

<PRE>
mysql&#62; SELECT name, species, birth FROM pet ORDER BY species, birth DESC;
+----------+---------+------------+
| name     | species | birth      |
+----------+---------+------------+
| Chirpy   | bird    | 1998-09-11 |
| Whistler | bird    | 1997-12-09 |
| Claws    | cat     | 1994-03-17 |
| Fluffy   | cat     | 1993-02-04 |
| Fang     | dog     | 1990-08-27 |
| Bowser   | dog     | 1989-08-31 |
| Buffy    | dog     | 1989-05-13 |
| Puffball | hamster | 1999-03-30 |
| Slim     | snake   | 1996-04-29 |
+----------+---------+------------+
</PRE>

<P>
Note that the <CODE>DESC</CODE> keyword applies only to the column name immediately
preceding it (<CODE>birth</CODE>); <CODE>species</CODE> values are still sorted in
ascending order.

</P>


<H4><A NAME="Date_calculations" HREF="manual_toc.html#Date_calculations">8.3.4.5  Date calculations</A></H4>

<P>
<STRONG>MySQL</STRONG> provides several functions that you can use to perform
calculations on dates, for example, to calculate ages or extract
parts of dates.

</P>
<P>
To determine how many years old each of your pets is, compute age as the
difference between the birth date and the current date.  Do this by
converting the two dates to days, take the difference, and divide by 365 (the
number of days in a year):

</P>

<PRE>
mysql&#62; SELECT name, (TO_DAYS(NOW())-TO_DAYS(birth))/365 FROM pet;
+----------+-------------------------------------+
| name     | (TO_DAYS(NOW())-TO_DAYS(birth))/365 |
+----------+-------------------------------------+
| Fluffy   |                                6.15 |
| Claws    |                                5.04 |
| Buffy    |                                9.88 |
| Fang     |                                8.59 |
| Bowser   |                                9.58 |
| Chirpy   |                                0.55 |
| Whistler |                                1.30 |
| Slim     |                                2.92 |
| Puffball |                                0.00 |
+----------+-------------------------------------+
</PRE>

<P>
Although the query works, there are some things about it that could be
improved.  First, the result could be scanned more easily if the rows were
presented in some order.  Second, the heading for the age column isn't very
meaningful.

</P>
<P>
The first problem can be handled by adding an <CODE>ORDER BY name</CODE> clause to
sort the output by name.  To deal with the column heading, provide a name for
the column so that a different label appears in the output (this is called a
column alias):

</P>

<PRE>
mysql&#62; SELECT name, (TO_DAYS(NOW())-TO_DAYS(birth))/365 AS age
    -&#62; FROM pet ORDER BY name;
+----------+------+
| name     | age  |
+----------+------+
| Bowser   | 9.58 |
| Buffy    | 9.88 |
| Chirpy   | 0.55 |
| Claws    | 5.04 |
| Fang     | 8.59 |
| Fluffy   | 6.15 |
| Puffball | 0.00 |
| Slim     | 2.92 |
| Whistler | 1.30 |
+----------+------+
</PRE>

<P>
To sort the output by <CODE>age</CODE> rather than <CODE>name</CODE>, just use a
different <CODE>ORDER BY</CODE> clause:

</P>

<PRE>
mysql&#62;  SELECT name, (TO_DAYS(NOW())-TO_DAYS(birth))/365 AS age
    -&#62;  FROM pet ORDER BY age;
+----------+------+
| name     | age  |
+----------+------+
| Puffball | 0.00 |
| Chirpy   | 0.55 |
| Whistler | 1.30 |
| Slim     | 2.92 |
| Claws    | 5.04 |
| Fluffy   | 6.15 |
| Fang     | 8.59 |
| Bowser   | 9.58 |
| Buffy    | 9.88 |
+----------+------+
</PRE>

<P>
A similar query can be used to determine age at death for animals that have
died.  You determine which animals these are by checking whether or not the
<CODE>death</CODE> value is <CODE>NULL</CODE>.  Then, for those with non-<CODE>NULL</CODE>
values, compute the difference between the <CODE>death</CODE> and <CODE>birth</CODE>
values:

</P>

<PRE>
mysql&#62;  SELECT name, birth, death, (TO_DAYS(death)-TO_DAYS(birth))/365 AS age
    -&#62;  FROM pet WHERE death IS NOT NULL ORDER BY age;
+--------+------------+------------+------+
| name   | birth      | death      | age  |
+--------+------------+------------+------+
| Bowser | 1989-08-31 | 1995-07-29 | 5.91 |
+--------+------------+------------+------+
</PRE>

<P>
The query uses <CODE>death IS NOT NULL</CODE> rather than <CODE>death != NULL</CODE>
because <CODE>NULL</CODE> is a special value.  This is explained later.
See section <A HREF="manual.html#Working_with_NULL">8.3.4.6  Working with <CODE>NULL</CODE> values</A>.

</P>
<P>
What if you want to know which animals have birthdays next month?  For this
type of calculation, year and day are irrelevant, you simply want to extract
the month part of the <CODE>birth</CODE> column.  <STRONG>MySQL</STRONG> provides several
date-part extraction functions, such as <CODE>YEAR()</CODE>, <CODE>MONTH()</CODE> and
<CODE>DAY()</CODE>.  <CODE>MONTH()</CODE> is the appropriate function here.  To see how
it works, run a simple query that displays the value of both <CODE>birth</CODE> and
<CODE>MONTH(birth)</CODE>:

</P>

<PRE>
mysql&#62; SELECT name, birth, MONTH(birth) FROM pet;
+----------+------------+--------------+
| name     | birth      | MONTH(birth) |
+----------+------------+--------------+
| Fluffy   | 1993-02-04 |            2 |
| Claws    | 1994-03-17 |            3 |
| Buffy    | 1989-05-13 |            5 |
| Fang     | 1990-08-27 |            8 |
| Bowser   | 1989-08-31 |            8 |
| Chirpy   | 1998-09-11 |            9 |
| Whistler | 1997-12-09 |           12 |
| Slim     | 1996-04-29 |            4 |
| Puffball | 1999-03-30 |            3 |
+----------+------------+--------------+
</PRE>

<P>
Finding animals with birthdays in the upcoming month is easy, too.  Suppose
the current month is April.  Then the month value is <CODE>4</CODE> and you look
for animals born in May (month 5) like this:

</P>

<PRE>
mysql&#62; SELECT name, birth FROM pet WHERE MONTH(birth) = 5;
+-------+------------+
| name  | birth      |
+-------+------------+
| Buffy | 1989-05-13 |
+-------+------------+
</PRE>

<P>
There is a small complication if the current month is December, of course.
You don't just add one to the month number (<CODE>12</CODE>) and look for animals
born in month 13, because there is no such month.  Instead, you look for
animals born in January (month 1).

</P>
<P>
You can even write the query so that it works no matter what the current
month is.  That way you don't have to use a particular month number
in the query.  <CODE>DATE_ADD()</CODE> allows you to add a time interval to a
given date.  If you add a month to the value of <CODE>NOW()</CODE>, then extract
the month part with <CODE>MONTH()</CODE>, the result produces the month in which to
look for birthdays:

</P>

<PRE>
mysql&#62; SELECT name, birth FROM pet
    -&#62; WHERE MONTH(birth) = MONTH(DATE_ADD(NOW(), INTERVAL 1 MONTH));
</PRE>

<P>
A different way to accomplish the same task is to add <CODE>1</CODE> to get the
next month after the current one (after using the modulo function (<CODE>MOD</CODE>)
to "wrap around" the month value to <CODE>0</CODE> if it is currently
<CODE>12</CODE>):

</P>

<PRE>
mysql&#62; SELECT name, birth FROM pet
    -&#62; WHERE MONTH(birth) = MOD(MONTH(NOW()),12) + 1;
</PRE>



<H4><A NAME="Working_with_NULL" HREF="manual_toc.html#Working_with_NULL">8.3.4.6  Working with <CODE>NULL</CODE> values</A></H4>

<P>
The <CODE>NULL</CODE> value can be surprising until you get used to it.
Conceptually, <CODE>NULL</CODE> means "missing value" or "unknown value" and it
is treated somewhat differently than other values.  To test for <CODE>NULL</CODE>,
you cannot use the arithmetic comparison operators such as <CODE>=</CODE>, <CODE>&#60;</CODE>
or <CODE>!=</CODE>.  To demonstrate this for yourself, try the following query:

</P>

<PRE>
mysql&#62; SELECT 1 = NULL, 1 != NULL, 1 &#60; NULL, 1 &#62; NULL;
+----------+-----------+----------+----------+
| 1 = NULL | 1 != NULL | 1 &#60; NULL | 1 &#62; NULL |
+----------+-----------+----------+----------+
|     NULL |      NULL |     NULL |     NULL |
+----------+-----------+----------+----------+
</PRE>

<P>
Clearly you get no meaningful results from these comparisons.  Use
the <CODE>IS NULL</CODE> and <CODE>IS NOT NULL</CODE> operators instead:

</P>

<PRE>
mysql&#62; SELECT 1 IS NULL, 1 IS NOT NULL;
+-----------+---------------+
| 1 IS NULL | 1 IS NOT NULL |
+-----------+---------------+
|         0 |             1 |
+-----------+---------------+
</PRE>

<P>
In <STRONG>MySQL</STRONG>, 0 means false and 1 means true.

</P>
<P>
This special treatment of <CODE>NULL</CODE> is why, in the previous section, it
was necessary to determine which animals are no longer alive using
<CODE>death IS NOT NULL</CODE> instead of <CODE>death != NULL</CODE>.

</P>


<H4><A NAME="Pattern_matching" HREF="manual_toc.html#Pattern_matching">8.3.4.7  Pattern matching</A></H4>

<P>
<STRONG>MySQL</STRONG> provides standard SQL pattern matching as well as a form of
pattern matching based on extended regular expressions similar to those used
by Unix utilities such as <CODE>vi</CODE>, <CODE>grep</CODE> and <CODE>sed</CODE>.

</P>
<P>
SQL pattern matching allows you to use <SAMP>`_'</SAMP> to match any single
character, and <SAMP>`%'</SAMP> to match an arbitrary number of characters (including
zero characters).  SQL patterns are case insensitive.  Some examples are
shown below.  Note that you do not use <CODE>=</CODE> or <CODE>!=</CODE> when you use SQL
patterns; use the <CODE>LIKE</CODE> or <CODE>NOT LIKE</CODE> comparison operators
instead.

</P>
<P>
To find names beginning with <SAMP>`b'</SAMP>:

</P>

<PRE>
mysql&#62; SELECT * FROM pet WHERE name LIKE "b%";
+--------+--------+---------+------+------------+------------+
| name   | owner  | species | sex  | birth      | death      |
+--------+--------+---------+------+------------+------------+
| Buffy  | Harold | dog     | f    | 1989-05-13 | NULL       |
| Bowser | Diane  | dog     | m    | 1989-08-31 | 1995-07-29 |
+--------+--------+---------+------+------------+------------+
</PRE>

<P>
To find names ending with <SAMP>`fy'</SAMP>:

</P>

<PRE>
mysql&#62; SELECT * FROM pet WHERE name LIKE "%fy";
+--------+--------+---------+------+------------+-------+
| name   | owner  | species | sex  | birth      | death |
+--------+--------+---------+------+------------+-------+
| Fluffy | Harold | cat     | f    | 1993-02-04 | NULL  |
| Buffy  | Harold | dog     | f    | 1989-05-13 | NULL  |
+--------+--------+---------+------+------------+-------+
</PRE>

<P>
To find names containing a <SAMP>`w'</SAMP>:

</P>

<PRE>
mysql&#62; SELECT * FROM pet WHERE name LIKE "%w%";
+----------+-------+---------+------+------------+------------+
| name     | owner | species | sex  | birth      | death      |
+----------+-------+---------+------+------------+------------+
| Claws    | Gwen  | cat     | m    | 1994-03-17 | NULL       |
| Bowser   | Diane | dog     | m    | 1989-08-31 | 1995-07-29 |
| Whistler | Gwen  | bird    | NULL | 1997-12-09 | NULL       |
+----------+-------+---------+------+------------+------------+
</PRE>

<P>
To find names containing exactly five characters, use the <SAMP>`_'</SAMP> pattern
character:

</P>

<PRE>
mysql&#62; SELECT * FROM pet WHERE name LIKE "_____";
+-------+--------+---------+------+------------+-------+
| name  | owner  | species | sex  | birth      | death |
+-------+--------+---------+------+------------+-------+
| Claws | Gwen   | cat     | m    | 1994-03-17 | NULL  |
| Buffy | Harold | dog     | f    | 1989-05-13 | NULL  |
+-------+--------+---------+------+------------+-------+
</PRE>

<P>
The other type of pattern matching provided by <STRONG>MySQL</STRONG> uses extended
regular expressions.  When you test for a match for this type of pattern, use
the <CODE>REGEXP</CODE> and <CODE>NOT REGEXP</CODE> operators (or <CODE>RLIKE</CODE> and
<CODE>NOT RLIKE</CODE>, which are synonyms).

</P>
<P>
Some characteristics of extended regular expressions are:

</P>

<UL>
<LI>

<SAMP>`.'</SAMP> matches any single character.

<LI>

A character class <SAMP>`[...]'</SAMP> matches any character within the brackets.
For example, <SAMP>`[abc]'</SAMP> matches <SAMP>`a'</SAMP>, <SAMP>`b'</SAMP> or <SAMP>`c'</SAMP>.  To name a
range of characters, use a dash.  <SAMP>`[a-z]'</SAMP> matches any lowercase letter,
whereas <SAMP>`[0-9]'</SAMP> matches any digit.

<LI>

<SAMP>`*'</SAMP> matches zero or more instances of the thing preceding it.  For
example, <SAMP>`x*'</SAMP> matches any number of <SAMP>`x'</SAMP> characters,
<SAMP>`[0-9]*'</SAMP> matches any number of digits, and <SAMP>`.*'</SAMP> matches any
number of anything.

<LI>

Regular expressions are case sensitive, but you can use a character class to
match both lettercases if you wish.  For example, <SAMP>`[aA]'</SAMP> matches
lowercase or uppercase <SAMP>`a'</SAMP> and <SAMP>`[a-zA-Z]'</SAMP> matches any letter in
either case.

<LI>

The pattern matches if it occurs anywhere in the value being tested
(SQL patterns match only if they match the entire value).

<LI>

To anchor a pattern so that it must match the beginning or end of the value
being tested, use <SAMP>`^'</SAMP> at the beginning or <SAMP>`$'</SAMP> at the end of the
pattern.
</UL>

<P>
To demonstrate how extended regular expressions work, the <CODE>LIKE</CODE> queries
shown above are rewritten below to use <CODE>REGEXP</CODE>:

</P>
<P>
To find names beginning with <SAMP>`b'</SAMP>, use <SAMP>`^'</SAMP> to match the beginning of
the name and <SAMP>`[bB]'</SAMP> to match either lowercase or uppercase <SAMP>`b'</SAMP>:

</P>

<PRE>
mysql&#62; SELECT * FROM pet WHERE name REGEXP "^[bB]";
+--------+--------+---------+------+------------+------------+
| name   | owner  | species | sex  | birth      | death      |
+--------+--------+---------+------+------------+------------+
| Buffy  | Harold | dog     | f    | 1989-05-13 | NULL       |
| Bowser | Diane  | dog     | m    | 1989-08-31 | 1995-07-29 |
+--------+--------+---------+------+------------+------------+
</PRE>

<P>
To find names ending with <SAMP>`fy'</SAMP>, use <SAMP>`$'</SAMP> to match the end of the
name:

</P>

<PRE>
mysql&#62; SELECT * FROM pet WHERE name REGEXP "fy$";
+--------+--------+---------+------+------------+-------+
| name   | owner  | species | sex  | birth      | death |
+--------+--------+---------+------+------------+-------+
| Fluffy | Harold | cat     | f    | 1993-02-04 | NULL  |
| Buffy  | Harold | dog     | f    | 1989-05-13 | NULL  |
+--------+--------+---------+------+------------+-------+
</PRE>

<P>
To find names containing a <SAMP>`w'</SAMP>, use
<SAMP>`[wW]'</SAMP> to match either lowercase or uppercase <SAMP>`w'</SAMP>:

</P>

<PRE>
mysql&#62; SELECT * FROM pet WHERE name REGEXP "[wW]";
+----------+-------+---------+------+------------+------------+
| name     | owner | species | sex  | birth      | death      |
+----------+-------+---------+------+------------+------------+
| Claws    | Gwen  | cat     | m    | 1994-03-17 | NULL       |
| Bowser   | Diane | dog     | m    | 1989-08-31 | 1995-07-29 |
| Whistler | Gwen  | bird    | NULL | 1997-12-09 | NULL       |
+----------+-------+---------+------+------------+------------+
</PRE>

<P>
Since a regular expression pattern matches if it occurs anywhere in the
value, it is not necessary in the previous query to put a wildcard on either
side of the pattern to get it to match the entire value like it would be if
you used an SQL pattern.

</P>
<P>
To find names containing exactly five characters, use <SAMP>`^'</SAMP> and <SAMP>`$'</SAMP>
to match the beginning and end of the name, and five instances of <SAMP>`.'</SAMP>
in between:

</P>

<PRE>
mysql&#62; SELECT * FROM pet WHERE name REGEXP "^.....$";
+-------+--------+---------+------+------------+-------+
| name  | owner  | species | sex  | birth      | death |
+-------+--------+---------+------+------------+-------+
| Claws | Gwen   | cat     | m    | 1994-03-17 | NULL  |
| Buffy | Harold | dog     | f    | 1989-05-13 | NULL  |
+-------+--------+---------+------+------------+-------+
</PRE>

<P>
You could also write the previous query using the <SAMP>`{n}'</SAMP>
"repeat-<CODE>n</CODE>-times" operator:

</P>

<PRE>
mysql&#62; SELECT * FROM pet WHERE name REGEXP "^.{5}$";
+-------+--------+---------+------+------------+-------+
| name  | owner  | species | sex  | birth      | death |
+-------+--------+---------+------+------------+-------+
| Claws | Gwen   | cat     | m    | 1994-03-17 | NULL  |
| Buffy | Harold | dog     | f    | 1989-05-13 | NULL  |
+-------+--------+---------+------+------------+-------+
</PRE>



<H4><A NAME="Counting_rows" HREF="manual_toc.html#Counting_rows">8.3.4.8  Counting rows</A></H4>

<P>
Databases are often used to answer the question, "how often does a certain
type of data occur in a table?"  For example, you might want to know how
many pets you have, or how many pets each owner has, or you might want to
perform various kinds of censuses on your animals.

</P>
<P>
Counting the total number of animals you have is the same question as "how
many rows are in the <CODE>pet</CODE> table?," since there is one record per pet.
The <CODE>COUNT()</CODE> function counts the number of non-<CODE>NULL</CODE> results, so
the query to count your animals looks like this:

</P>

<PRE>
mysql&#62; SELECT COUNT(*) FROM pet;
+----------+
| COUNT(*) |
+----------+
|        9 |
+----------+
</PRE>

<P>
Earlier, you retrieved the names of the people who owned pets.  You can
use <CODE>COUNT()</CODE> if you want to find out how many pets each owner has:

</P>

<PRE>
mysql&#62; SELECT owner, COUNT(*) FROM pet GROUP BY owner;
+--------+----------+
| owner  | COUNT(*) |
+--------+----------+
| Benny  |        2 |
| Diane  |        2 |
| Gwen   |        3 |
| Harold |        2 |
+--------+----------+
</PRE>

<P>
Note the use of <CODE>GROUP BY</CODE> to group together all records for each
<CODE>owner</CODE>.  Without it, all you get is an error message:

</P>

<PRE>
mysql&#62; SELECT owner, COUNT(owner) FROM pet;
ERROR 1140 at line 1: Mixing of GROUP columns (MIN(),MAX(),COUNT()...)
with no GROUP columns is illegal if there is no GROUP BY clause
</PRE>

<P>
<CODE>COUNT()</CODE> and <CODE>GROUP BY</CODE> are useful for characterizing your
data in various ways.  The following examples show different ways to
perform animal census operations.

</P>
<P>
Number of animals per species:

</P>

<PRE>
mysql&#62; SELECT species, COUNT(*) FROM pet GROUP BY species;
+---------+----------+
| species | COUNT(*) |
+---------+----------+
| bird    |        2 |
| cat     |        2 |
| dog     |        3 |
| hamster |        1 |
| snake   |        1 |
+---------+----------+
</PRE>

<P>
Number of animals per sex:

</P>

<PRE>
mysql&#62; SELECT sex, COUNT(*) FROM pet GROUP BY sex;
+------+----------+
| sex  | COUNT(*) |
+------+----------+
| NULL |        1 |
| f    |        4 |
| m    |        4 |
+------+----------+
</PRE>

<P>
(In this output, <CODE>NULL</CODE> indicates "sex unknown.")

</P>
<P>
Number of animals per combination of species and sex:

</P>

<PRE>
mysql&#62; SELECT species, sex, COUNT(*) FROM pet GROUP BY species, sex;
+---------+------+----------+
| species | sex  | COUNT(*) |
+---------+------+----------+
| bird    | NULL |        1 |
| bird    | f    |        1 |
| cat     | f    |        1 |
| cat     | m    |        1 |
| dog     | f    |        1 |
| dog     | m    |        2 |
| hamster | f    |        1 |
| snake   | m    |        1 |
+---------+------+----------+
</PRE>

<P>
You need not retrieve an entire table when you use <CODE>COUNT()</CODE>.  For
example, the previous query, when performed just on dogs and cats, looks like
this:

</P>

<PRE>
mysql&#62; SELECT species, sex, COUNT(*) FROM pet
    -&#62; WHERE species = "dog" OR species = "cat"
    -&#62; GROUP BY species, sex;
+---------+------+----------+
| species | sex  | COUNT(*) |
+---------+------+----------+
| cat     | f    |        1 |
| cat     | m    |        1 |
| dog     | f    |        1 |
| dog     | m    |        2 |
+---------+------+----------+
</PRE>

<P>
Or, if you wanted the number of animals per sex only for known-sex animals:

</P>

<PRE>
mysql&#62; SELECT species, sex, COUNT(*) FROM pet
    -&#62; WHERE sex IS NOT NULL
    -&#62; GROUP BY species, sex;
+---------+------+----------+
| species | sex  | COUNT(*) |
+---------+------+----------+
| bird    | f    |        1 |
| cat     | f    |        1 |
| cat     | m    |        1 |
| dog     | f    |        1 |
| dog     | m    |        2 |
| hamster | f    |        1 |
| snake   | m    |        1 |
+---------+------+----------+
</PRE>



<H3><A NAME="Multiple_tables" HREF="manual_toc.html#Multiple_tables">8.3.5  Using more than one table</A></H3>

<P>
The <CODE>pet</CODE> table keeps track of which pets you have.  If you want to
record other information about them, such as events in their lives like
visits to the vet or when litters are born, you need another table.  What
should this table look like?

</P>

<UL>
<LI>

It needs to contain the pet name so you know which animal each event pertains
to.

<LI>

It needs a date so you know when the event occurred.

<LI>

It needs a field to describe the event.

<LI>

If you want to be able to categorize events, it would be useful to have an
event type field.
</UL>

<P>
Given these considerations, the <CODE>CREATE TABLE</CODE> statement for the
<CODE>event</CODE> table might look like this:

</P>

<PRE>
mysql&#62; CREATE TABLE event (name VARCHAR(20), date DATE,
    -&#62; type VARCHAR(15), remark VARCHAR(255));
</PRE>

<P>
As with the <CODE>pet</CODE> table, it's easiest to load the initial records
by creating a tab-delimited text file containing the information:

</P>
<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD>Fluffy </TD><TD> 1995-05-15 </TD><TD> litter </TD><TD> 4 kittens, 3 female, 1 male
</TR NOSAVE>
<TR><TD>Buffy </TD><TD> 1993-06-23 </TD><TD> litter </TD><TD> 5 puppies, 2 female, 3 male
</TR NOSAVE>
<TR><TD>Buffy </TD><TD> 1994-06-19 </TD><TD> litter </TD><TD> 3 puppies, 3 female
</TR NOSAVE>
<TR><TD>Chirpy </TD><TD> 1999-03-21 </TD><TD> vet </TD><TD> needed beak straightened
</TR NOSAVE>
<TR><TD>Slim </TD><TD> 1997-08-03 </TD><TD> vet </TD><TD> broken rib
</TR NOSAVE>
<TR><TD>Bowser </TD><TD> 1991-10-12 </TD><TD> kennel
</TR NOSAVE>
<TR><TD>Fang </TD><TD> 1991-10-12 </TD><TD> kennel
</TR NOSAVE>
<TR><TD>Fang </TD><TD> 1998-08-28 </TD><TD> birthday </TD><TD> Gave him a new chew toy
</TR NOSAVE>
<TR><TD>Claws </TD><TD> 1998-03-17 </TD><TD> birthday </TD><TD> Gave him a new flea collar
</TR NOSAVE>
<TR><TD>Whistler </TD><TD> 1998-12-09 </TD><TD> birthday </TD><TD> First birthday
</TR>
</TABLE>

<P>
Load the records like this:

</P>

<PRE>
mysql&#62; LOAD DATA LOCAL INFILE "event.txt" INTO TABLE event;
</PRE>

<P>
Based on what you've learned from the queries you've run on the <CODE>pet</CODE>
table, you should be able to perform retrievals on the records in the
<CODE>event</CODE> table; the principles are the same.  But when is the
<CODE>event</CODE> table by itself insufficient to answer questions you might ask?

</P>
<P>
Suppose you want to find out the ages of each pet when they had their
litters.  The <CODE>event</CODE> table indicates when this occurred, but to
calculate age of the mother, you need her birth date.  Since that is
stored in the <CODE>pet</CODE> table, you need both tables for the query:

</P>

<PRE>
mysql&#62; SELECT pet.name, (TO_DAYS(date) - TO_DAYS(birth))/365 AS age, remark
    -&#62; FROM pet, event
    -&#62; WHERE pet.name = event.name AND type = "litter";
+--------+------+-----------------------------+
| name   | age  | remark                      |
+--------+------+-----------------------------+
| Fluffy | 2.27 | 4 kittens, 3 female, 1 male |
| Buffy  | 4.12 | 5 puppies, 2 female, 3 male |
| Buffy  | 5.10 | 3 puppies, 3 female         |
+--------+------+-----------------------------+
</PRE>

<P>
There are several things to note about this query:

</P>

<UL>
<LI>

The <CODE>FROM</CODE> clause lists two tables since the query needs to pull
information from both of them.

<LI>

When combining information from multiple tables, you need to specify how
records in one table can be matched to records in the other.  This is easy
since they both have a <CODE>name</CODE> column.  The query uses <CODE>WHERE</CODE>
clause to match up records in the two tables based on the <CODE>name</CODE>
values.

<LI>

Since the <CODE>name</CODE> column occurs in both tables, you must be specific
about which table you mean when referring to the column.  This is done
by prepending the table name to the column name.
</UL>

<P>
You need not have two different tables to perform a join.  Sometimes it is
useful to join a table to itself, if you want to compare records in a table
to other records in that same table.  For example, to find breeding pairs
among your pets, you can join the <CODE>pet</CODE> table with itself to pair up
males and females of like species:

</P>

<PRE>
mysql&#62; SELECT p1.name, p1.sex, p2.name, p2.sex, p1.species
    -&#62; FROM pet AS p1, pet AS p2
    -&#62; WHERE p1.species = p2.species AND p1.sex = "f" AND p2.sex = "m";
+--------+------+--------+------+---------+
| name   | sex  | name   | sex  | species |
+--------+------+--------+------+---------+
| Fluffy | f    | Claws  | m    | cat     |
| Buffy  | f    | Fang   | m    | dog     |
| Buffy  | f    | Bowser | m    | dog     |
+--------+------+--------+------+---------+
</PRE>

<P>
In this query, we specify aliases for the table name in order to be able
to refer to the columns and keep straight which instance of the table
each column reference is associated with.

</P>


<H2><A NAME="Getting_information" HREF="manual_toc.html#Getting_information">8.4  Getting information about databases and tables</A></H2>

<P>
What if you forget the name of a database or table, or what the structure of
a given table is (e.g., what its columns are called)?  <STRONG>MySQL</STRONG>
addresses this problem through several statements that provide information
about the databases and tables it supports.

</P>
<P>
You have already seen <CODE>SHOW DATABASES</CODE>, which lists the databases
managed by the server.  To find out which database is currently selected,
use the <CODE>DATABASE()</CODE> function:

</P>

<PRE>
mysql&#62; SELECT DATABASE();
+------------+
| DATABASE() |
+------------+
| menagerie  |
+------------+
</PRE>

<P>
If you haven't selected any database yet, the result is blank.

</P>
<P>
To find out what tables the current database contains (for example, when
you're not sure about the name of a table), use this command:

</P>

<PRE>
mysql&#62; SHOW TABLES;
+---------------------+
| Tables in menagerie |
+---------------------+
| event               |
| pet                 |
+---------------------+
</PRE>

<P>
If you want to find out about the structure of a table, the <CODE>DESCRIBE</CODE>
command is useful; it displays information about each of a table's columns:

</P>

<PRE>
mysql&#62; DESCRIBE pet;
+---------+-------------+------+-----+---------+-------+
| Field   | Type        | Null | Key | Default | Extra |
+---------+-------------+------+-----+---------+-------+
| name    | varchar(20) | YES  |     | NULL    |       |
| owner   | varchar(20) | YES  |     | NULL    |       |
| species | varchar(20) | YES  |     | NULL    |       |
| sex     | char(1)     | YES  |     | NULL    |       |
| birth   | date        | YES  |     | NULL    |       |
| death   | date        | YES  |     | NULL    |       |
+---------+-------------+------+-----+---------+-------+
</PRE>

<P>
<CODE>Field</CODE> indicates the column name, <CODE>Type</CODE> is the data type for
the column, <CODE>Null</CODE> indicates whether or not the column can contain
<CODE>NULL</CODE> values, <CODE>Key</CODE> indicates whether or not the column is
indexed and <CODE>Default</CODE> specifies the column's default value.

</P>
<P>
If you have indexes on a table,
<CODE>SHOW INDEX FROM tbl_name</CODE> produces information about them.

</P>


<H2><A NAME="Batch_mode" HREF="manual_toc.html#Batch_mode">8.5  Using <CODE>mysql</CODE> in batch mode</A></H2>

<P>
In the previous sections, you used <CODE>mysql</CODE> interactively to enter
queries and view the results.  You can also run <CODE>mysql</CODE> in batch
mode.  To do this, put the commands you want to run in a file, then
tell <CODE>mysql</CODE> to read its input from the file:

</P>

<PRE>
shell&#62; mysql &#60; batch-file
</PRE>

<P>
If you need to specify connection parameters on the command line, the
command might look like this:

</P>

<PRE>
shell&#62; mysql -h host -u user -p &#60; batch-file
Enter password: ********
</PRE>

<P>
When you use <CODE>mysql</CODE> this way, you are creating a script file, then
executing the script.

</P>
<P>
Why use a script?  Here are a few reasons:

</P>

<UL>
<LI>

If you run a query repeatedly (say, every day or every week), making it a
script allows you to avoid retyping it each time you execute it.

<LI>

You can generate new queries from existing ones that are similar by copying
and editing script files.

<LI>

Batch mode can also be useful while you're developing a query, particularly
for multiple-line commands or multiple-statement sequences of commands.  If
you make a mistake, you don't have to retype everything.  Just edit your
script to correct the error, then tell <CODE>mysql</CODE> to execute it again.

<LI>

If you have a query that produces a lot of output, you can run the output
through a pager rather than watching it scroll off the top of your screen:


<PRE>
shell&#62; mysql &#60; batch-file | more
</PRE>

<LI>

You can catch the output in a file for further processing:


<PRE>
shell&#62; mysql &#60; batch-file &#62; mysql.out
</PRE>

<LI>

You can distribute your script to other people so they can run the commands,
too.

<LI>

Some situations do not allow for interactive use, for example, when you run
a query from a <CODE>cron</CODE> job.  In this case, you must use batch mode.
</UL>

<P>
The default output format is different (more concise) when you run
<CODE>mysql</CODE> in batch mode than when you use it interactively.  For
example, the output of <CODE>SELECT DISTINCT species FROM pet</CODE> looks like
this when run interactively:

</P>

<PRE>
+---------+
| species |
+---------+
| bird    |
| cat     |
| dog     |
| hamster |
| snake   |
+---------+
</PRE>

<P>
But like this when run in batch mode:

</P>

<PRE>
species
bird
cat
dog
hamster
snake
</PRE>

<P>
If you want to get the interactive output format in batch mode, use
<CODE>mysql -t</CODE>.  To echo to the output the commands that are executed, use
<CODE>mysql -vvv</CODE>.

</P>


<H2><A NAME="Twin" HREF="manual_toc.html#Twin">8.6  Queries from twin project</A></H2>

<P>
At Analytikerna and Lentus, we have been doing the systems and field work
for a big research project. This project is a collaboration between the
Institute of Environmental Medicine at Karolinska Institutet Stockholm
and the Section on Clinical Research in Aging and Psychology at the
University of Southern California.

</P>
<P>
The project involves a screening part where all twins in Sweden older
than 65 years are interviewed by telephone. Twins who meet certain
criteria are passed on to the next stage. In this latter stage, twins who
want to participate are visited by a doctor/nurse team. Some of the
examinations include physical and neuropsychological examination,
laboratory testing, neuroimaging, psychological status assessment, and family
history collection. In addition, data are collected on medical and
environmental risk factors.

</P>
<P>
More information about Twin studies can be found at:

</P>

<PRE>
http://www.imm.ki.se/TWIN/TWINUKW.HTM
</PRE>

<P>
The latter part of the project is administered with a web interface
written using Perl and <STRONG>MySQL</STRONG>.

</P>
<P>
Each night all data from the interviews are moved into a <STRONG>MySQL</STRONG>
database.

</P>



<H3><A NAME="Twin_pool" HREF="manual_toc.html#Twin_pool">8.6.1  Find all non-distributed twins</A></H3>

<P>
The following query is used to determine who goes into the second part of the
project:

</P>

<PRE>
select
        concat(p1.id, p1.tvab) + 0 as tvid,
        concat(p1.christian_name, " ", p1.surname) as Name,
        p1.postal_code as Code,
        p1.city as City,
        pg.abrev as Area,
        if(td.participation = "Aborted", "A", " ") as A,
        p1.dead as dead1,
        l.event as event1,
        td.suspect as tsuspect1,
        id.suspect as isuspect1,
        td.severe as tsevere1,
        id.severe as isevere1,
        p2.dead as dead2,
        l2.event as event2,
        h2.nurse as nurse2,
        h2.doctor as doctor2,
        td2.suspect as tsuspect2,
        id2.suspect as isuspect2,
        td2.severe as tsevere2,
        id2.severe as isevere2,
        l.finish_date
from
        twin_project as tp
        /* For Twin 1 */
        left join twin_data as td on tp.id = td.id and tp.tvab = td.tvab
        left join informant_data as id on tp.id = id.id and tp.tvab = id.tvab
        left join harmony as h on tp.id = h.id and tp.tvab = h.tvab
        left join lentus as l on tp.id = l.id and tp.tvab = l.tvab
        /* For Twin 2 */
        left join twin_data as td2 on p2.id = td2.id and p2.tvab = td2.tvab
        left join informant_data as id2 on p2.id = id2.id and p2.tvab = id2.tvab
        left join harmony as h2 on p2.id = h2.id and p2.tvab = h2.tvab
        left join lentus as l2 on p2.id = l2.id and p2.tvab = l2.tvab,
        person_data as p1,
        person_data as p2,
        postal_groups as pg
where
        /* p1 gets main twin and p2 gets his/her twin. */
        /* ptvab is a field inverted from tvab */
        p1.id = tp.id and p1.tvab = tp.tvab and
        p2.id = p1.id and p2.ptvab = p1.tvab and
        /* Just the sceening survey */
        tp.survey_no = 5 and
        /* Skip if partner died before 65 but allow emigration (dead=9) */
        (p2.dead = 0 or p2.dead = 9 or
         (p2.dead = 1 and
          (p2.death_date = 0 or
           (((to_days(p2.death_date) - to_days(p2.birthday)) / 365)
            &#62;= 65))))
        and
        (
        /* Twin is suspect */
        (td.future_contact = 'Yes' and td.suspect = 2) or
        /* Twin is suspect - Informant is Blessed */
        (td.future_contact = 'Yes' and td.suspect = 1 and id.suspect = 1) or
        /* No twin - Informant is Blessed */
        (ISNULL(td.suspect) and id.suspect = 1 and id.future_contact = 'Yes') or
        /* Twin broken off - Informant is Blessed */
        (td.participation = 'Aborted'
         and id.suspect = 1 and id.future_contact = 'Yes') or
        /* Twin broken off - No inform - Have partner */
        (td.participation = 'Aborted' and ISNULL(id.suspect) and p2.dead = 0))
        and
        l.event = 'Finished'
        /* Get at area code */
        and substring(p1.postal_code, 1, 2) = pg.code
        /* Not already distributed */
        and (h.nurse is NULL or h.nurse=00 or h.doctor=00)
        /* Has not refused or been aborted */
        and not (h.status = 'Refused' or h.status = 'Aborted'
        or h.status = 'Died' or h.status = 'Other')
order by
        tvid;
</PRE>

<P>
Some explanations:
<DL COMPACT>

<DT><CODE>concat(p1.id, p1.tvab) + 0 as tvid</CODE>
<DD>
We want to sort on the concatenated <CODE>id</CODE> and <CODE>tvab</CODE> in
numerical order. Adding <CODE>0</CODE> to the result causes <STRONG>MySQL</STRONG> to treat the
result as a number.
<DT>column <CODE>id</CODE>
<DD>
This identifies a pair of twins. It is a key in all tables.
<DT>column <CODE>tvab</CODE>
<DD>
This identifies a twin in a pair. It has a value of <CODE>1</CODE> or <CODE>2</CODE>.
<DT>column <CODE>ptvab</CODE>
<DD>
This is an inverse of <CODE>tvab</CODE>. When <CODE>tvab</CODE> is <CODE>1</CODE> this is
<CODE>2</CODE>, and vice versa. It exists to save typing and to make it easier for
<STRONG>MySQL</STRONG> to optimize the query.
</DL>

<P>
This query demonstrates, among other things, how to do lookups on a
table from the same table with a join (<CODE>p1</CODE> and <CODE>p2</CODE>). In the example, this
is used to check whether a twin's partner died before the age of 65. If so,
the row is not returned.

</P>
<P>
All of the above exist in all tables with twin-related information. We
have a key on both <CODE>id,tvab</CODE> (all tables) and <CODE>id,ptvab</CODE>
(<CODE>person_data</CODE>) to make queries faster.

</P>
<P>
On our production machine (A 200MHz UltraSPARC), this query returns
about 150-200 rows and takes less than one second.

</P>
<P>
The current number of records in the tables used above:
<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><STRONG>Table</STRONG> </TD><TD> <STRONG>Rows</STRONG>
</TR NOSAVE>
<TR><TD><CODE>person_data</CODE> </TD><TD> 71074
</TR NOSAVE>
<TR><TD><CODE>lentus</CODE> </TD><TD> 5291
</TR NOSAVE>
<TR><TD><CODE>twin_project</CODE> </TD><TD> 5286
</TR NOSAVE>
<TR><TD><CODE>twin_data</CODE> </TD><TD> 2012
</TR NOSAVE>
<TR><TD><CODE>informant_data</CODE> </TD><TD> 663
</TR NOSAVE>
<TR><TD><CODE>harmony</CODE> </TD><TD> 381
</TR NOSAVE>
<TR><TD><CODE>postal_groups</CODE> </TD><TD> 100
</TR>
</TABLE>

</P>


<H3><A NAME="Twin_event" HREF="manual_toc.html#Twin_event">8.6.2  Show a table on twin pair status</A></H3>

<P>
Each interview ends with a status code called <CODE>event</CODE>. The query
shown below is used to display a table over all twin pairs combined by
event. This indicates in how many pairs both twins are finished, in how many
pairs one twin is finished and the other refused, and so on.

</P>

<PRE>
select
        t1.event,
        t2.event,
        count(*)
from
        lentus as t1,
        lentus as t2,
        twin_project as tp
where
        /* We are looking at one pair at a time */
        t1.id = tp.id
        and t1.tvab=tp.tvab
        and t1.id = t2.id
        /* Just the sceening survey */
        and tp.survey_no = 5
        /* This makes each pair only appear once */
        and t1.tvab='1' and t2.tvab='2'
group by
        t1.event, t2.event;

</PRE>

<P>
<A NAME="IDX582"></A>


<H1><A NAME="Server" HREF="manual_toc.html#Server">9  <STRONG>MySQL</STRONG> Server functions</A></H1>

<P>
<A NAME="IDX583"></A>
<A NAME="IDX584"></A>


<H2><A NAME="Languages" HREF="manual_toc.html#Languages">9.1  What languages are supported by <STRONG>MySQL</STRONG>?</A></H2>

<P>
<CODE>mysqld</CODE> can issue error messages in the following languages: Czech,
Dutch, English (the default), Estonia, French, German, Hungarian, Italian,
Norwegian, Norwegian-ny, Polish, Portuguese, Spanish and Swedish.

</P>
<P>
To start <CODE>mysqld</CODE> with a particular language, use either the
<CODE>--language=lang</CODE> or <CODE>-L lang</CODE> options. For example:

</P>

<PRE>
shell&#62; mysqld --language=swedish
</PRE>

<P>
or:

</P>

<PRE>
shell&#62; mysqld --language=/usr/local/share/swedish
</PRE>

<P>
Note that all language names are specified in lowercase.

</P>
<P>
The language files are located (by default) in
<TT>`<VAR>mysql_base_dir</VAR>/share/<VAR>LANGUAGE</VAR>/'</TT>.

</P>
<P>
To update the error message file, you should edit the <TT>`errmsg.txt'</TT> file
and execute the following command to generate the <TT>`errmsg.sys'</TT> file:

</P>

<PRE>
shell&#62; comp_err errmsg.txt errmsg.sys
</PRE>

<P>
If you upgrade to a newer version of <STRONG>MySQL</STRONG>, remember to repeat
your changes with the new <TT>`errmsg.txt'</TT> file.

</P>



<H3><A NAME="Character_sets" HREF="manual_toc.html#Character_sets">9.1.1  The character set used for data and sorting</A></H3>

<P>
By default, <STRONG>MySQL</STRONG> uses the ISO-8859-1 (Latin1) character
set. This is the character set used in the USA and western Europe.

</P>
<P>
The character set determines what characters are allowed in names and how
things are sorted by the <CODE>ORDER BY</CODE> and <CODE>GROUP BY</CODE> clauses of
the <CODE>SELECT</CODE> statement.

</P>
<P>
You can change the character set at compile time by using the
<CODE>--with-charset=charset</CODE> option to <CODE>configure</CODE>.
See section <A HREF="manual.html#Quick_install">4.7.1  Quick installation overview</A>.

</P>
<P>
To add another character set to <STRONG>MySQL</STRONG>, use the following procedure:

</P>


<H3><A NAME="Adding_character_set" HREF="manual_toc.html#Adding_character_set">9.1.2  Adding a new character set</A></H3>


<OL>
<LI>

Choose a name for the character set, denoted <CODE>MYSET</CODE> below.

<LI>

Create the file
<TT>`strings/ctype-MYSET.c'</TT> in the <STRONG>MySQL</STRONG> source distribution.

<LI>

Look at one of the existing <TT>`ctype-*.c'</TT> files to see what needs to be
defined. Note that the arrays in your file must have names like
<CODE>ctype_MYSET</CODE>, <CODE>to_lower_MYSET</CODE> and so on.

<CODE>to_lower[]</CODE> and <CODE>to_upper[]</CODE> are simple arrays that hold the
lowercase and uppercase characters corresponding to each member of the
character set.  For example:


<PRE>
to_lower['A'] should contain 'a'
to_upper['a'] should contain 'A'
</PRE>

<CODE>sort_order[]</CODE> is a map indicating how characters should be ordered for
comparison and sorting purposes.  For many character sets, this is the same as
<CODE>to_upper[]</CODE> (which means sorting will be case insensitive).
<STRONG>MySQL</STRONG> will sort characters based on the value of
<CODE>sort_order[character]</CODE>.

<CODE>ctype[]</CODE> is an array of bit values, with one element for one character.
(Note that <CODE>to_lower[]</CODE>, <CODE>to_upper[]</CODE> and <CODE>sort_order[]</CODE>
are indexed by character value, but <CODE>ctype[]</CODE> is indexed by character
value + 1.  This is an old legacy to be able to handle EOF.)
You can find the following bitmask definitions in <TT>`m_ctype.h'</TT>:


<PRE>
#define _U      01      /* Upper case */
#define _L      02      /* Lower case */
#define _N      04      /* Numeral (digit) */
#define _S      010     /* Spacing character */
#define _P      020     /* Punctuation */
#define _C      040     /* Control character */
#define _B      0100    /* Blank */
#define _X      0200    /* heXadecimal digit */
</PRE>

The <CODE>ctype[]</CODE> entry for each character should be the union of the
applicable bitmask values that describe the character.
For example, <CODE>'A'</CODE> is an uppercase character (<CODE>_U</CODE>) as well as a
hexidecimal digit (<CODE>_X</CODE>), so <CODE>ctype['A'+1]</CODE> should contain the value:

<PRE>
_U + _X = 01 + 0200 = 0201
</PRE>

<LI>

Add a unique number for your character set to <TT>`include/m_ctype.h.in'</TT>.

<LI>

Add the character set name to the <CODE>CHARSETS_AVAILABLE</CODE> list in
<CODE>configure.in</CODE>.

<LI>

Reconfigure, recompile and test.
</OL>

<P>
<A NAME="IDX585"></A>


<H3><A NAME="Multi-byte_characters" HREF="manual_toc.html#Multi-byte_characters">9.1.3  Multi-byte character support</A></H3>

<P>
If you are creating a multi-byte character set, you can use the
<CODE>_MB</CODE> macros.  In <TT>`include/m_ctype.h.in'</TT>, add:

</P>

<PRE>
#define MY_CHARSET_MYSET  X
#if MY_CHARSET_CURRENT == MY_CHARSET_MYSET
#define USE_MB
#define USE_MB_IDENT
#define ismbchar(p, end)  (...)
#define ismbhead(c)       (...)
#define mbcharlen(c)      (...)
#define MBMAXLEN          N
#endif
</PRE>

<P>
Where:

</P>
<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><CODE>MY_CHARSET_MYSET</CODE> </TD><TD> A unique character set value.
</TR NOSAVE>
<TR><TD><CODE>USE_MB</CODE> </TD><TD> This character set has multi-byte
characters, handled by <CODE>ismbhead()</CODE> and <CODE>mbcharlen()</CODE>
</TR NOSAVE>
<TR><TD><CODE>USE_MB_IDENT</CODE> </TD><TD> (optional) If defined, you can use table and
column names that use multi-byte characters
</TR NOSAVE>
<TR><TD><CODE>ismbchar(p, e)</CODE> </TD><TD> return 0 if <CODE>p</CODE> is not a multi-byte
character string, or the size of the character (in bytes) if it is.  <CODE>p</CODE>
and <CODE>e</CODE> point to the beginning and end of the string.
Check from <CODE>(char*)p</CODE> to <CODE>(char*)e-1</CODE>.
</TR NOSAVE>
<TR><TD><CODE>ismbhead(c)</CODE> </TD><TD> True if <CODE>c</CODE> is the first character of
a multi-byte character string
</TR NOSAVE>
<TR><TD><CODE>mbcharlen(c)</CODE> </TD><TD> Size of a multi-byte character string if
<CODE>c</CODE> is the first character of such a string
</TR NOSAVE>
<TR><TD><CODE>MBMAXLEN</CODE> </TD><TD> Size in bytes of the largest character in
the set
</TR>
</TABLE>

<P>
<A NAME="IDX586"></A>


<H2><A NAME="Update_log" HREF="manual_toc.html#Update_log">9.2  The update log</A></H2>

<P>
When started with the <CODE>--log-update=file_name</CODE> option, <CODE>mysqld</CODE>
writes a log file containing all SQL commands that update data. The file is
written in the data directory and has a name of <CODE>file_name.#</CODE>, where
<CODE>#</CODE> is a number that is incremented each time you execute
<CODE>mysqladmin refresh</CODE> or <CODE>mysqladmin flush-logs</CODE>, the <CODE>FLUSH
LOGS</CODE> statement, or restart the
server.

</P>
<P>
If you use the <CODE>--log</CODE> or <CODE>-l</CODE> options, the filename is
<TT>`hostname.log'</TT>, and restarts and refreshes do not cause a new log file
to be generated. By default, the <CODE>mysql.server</CODE> script starts the
<STRONG>MySQL</STRONG> server with the <CODE>-l</CODE> option.  If you need better
performance when you start using <STRONG>MySQL</STRONG> in a production environment,
you can remove the <CODE>-l</CODE> option from <CODE>mysql.server</CODE>.

</P>
<P>
Update logging is smart since it logs only statements that really update
data. So an <CODE>UPDATE</CODE> or a <CODE>DELETE</CODE> with a <CODE>WHERE</CODE> that finds no
rows is not written to the log. It even skips <CODE>UPDATE</CODE> statements that
set a column to the value it already has.

</P>
<P>
If you want to update a database from update log files, you could do the
following (assuming your log files have names of the form
<TT>`file_name.#'</TT>):

</P>

<PRE>
shell&#62; ls -1 -t -r file_name.[0-9]* | xargs cat | mysql
</PRE>

<P>
<CODE>ls</CODE> is used to get all the log files in the right order.

</P>
<P>
This can be useful if you have to revert to backup files after a crash
and you want to redo the updates that occurred between the time of the backup
and the crash.

</P>
<P>
<A NAME="IDX587"></A>
<A NAME="IDX588"></A>
<A NAME="IDX589"></A>
<A NAME="IDX590"></A>
You can also use the update logs when you have a mirrored database on
another host and you want to replicate the changes that have been made
to the master database.

</P>
<P>
<A NAME="IDX591"></A>
<A NAME="IDX592"></A>


<H2><A NAME="Table_size" HREF="manual_toc.html#Table_size">9.3  How big <STRONG>MySQL</STRONG> tables can be</A></H2>

<P>
<STRONG>MySQL</STRONG> itself has a 4G limit on table size, and
operating systems have their own file size limits.  On Linux, the
current limit is 2G; on Solaris 2.5.1, the limit is 4G; on Solaris 2.6,
the limit is going to be 1000G.  Currently, table sizes are limited to
either 4G (the <STRONG>MySQL</STRONG> limit) or the operating system limit,
whichever is smaller.  To get more than 4G requires some changes to
<STRONG>MySQL</STRONG> that are on the TODO. See section <A HREF="manual.html#TODO">F  List of things we want to add to <STRONG>MySQL</STRONG> in the future (The TODO)</A>.

</P>
<P>
If your big table is going to be read-only, you could use <CODE>pack_isam</CODE>
to merge and compress many tables to one.  <CODE>pack_isam</CODE> usually
compresses a table by at least 50%, so you can have, in effect, much bigger
tables.
See section <A HREF="manual.html#pack_isam">12.5  The <STRONG>MySQL</STRONG> compressed read-only table generator</A>.

</P>
<P>
Another solution can be the included MERGE library, which allows you to
handle a collection of identical tables as one.  (Identical in this case
means that all tables are created with identical column information.)
Currently MERGE can only be used to scan a collection of tables because it
doesn't support indexes. We will add indexes to this in the near future.

</P>
<P>
<A NAME="IDX593"></A>


<H1><A NAME="Performance" HREF="manual_toc.html#Performance">10  Getting maximum performance from <STRONG>MySQL</STRONG></A></H1>

<P>
<A NAME="IDX594"></A>


<H2><A NAME="Server_parameters" HREF="manual_toc.html#Server_parameters">10.1  Tuning server parameters</A></H2>

<P>
You can get the default buffer sizes used by the <CODE>mysqld</CODE> server
with this command:

</P>

<PRE>
shell&#62; mysqld --help
</PRE>

<P>
This command produces a list of all <CODE>mysqld</CODE> options and configurable
variables. The output includes the default values and looks something
like this:

</P>

<PRE>
Possible variables for option --set-variable (-O) are:
back_log              current value: 5
connect_timeout       current value: 5
delayed_insert_timeout  current value: 300
delayed_insert_limit  current value: 100
delayed_queue_size    current value: 1000
flush_time            current value: 0
join_buffer_size      current value: 131072
key_buffer_size       current value: 1048540
long_query_time       current value: 10
max_allowed_packet    current value: 1048576
max_connections       current value: 100
max_connect_errors    current value: 10
max_delayed_threads   current value: 20
max_heap_table_size   current value: 16777216
max_join_size         current value: 4294967295
max_sort_length       current value: 1024
max_tmp_tables        current value: 32
net_buffer_length     current value: 16384
record_buffer         current value: 131072
sort_buffer           current value: 2097116
table_cache           current value: 64
tmp_table_size        current value: 1048576
thread_stack          current value: 131072
wait_timeout          current value: 28800
</PRE>

<P>
If there is a <CODE>mysqld</CODE> server currently running, you can see what
values it actually is using for the variables by executing this command:

</P>

<PRE>
shell&#62; mysqladmin variables
</PRE>

<P>
Each option is described below. Values for buffer sizes, lengths and stack
sizes are given in bytes.  You can specify values with a suffix of <SAMP>`K'</SAMP>
or <SAMP>`M'</SAMP> to indicate kilobytes or megabytes. For example, <CODE>16M</CODE>
indicates 16 megabytes.  Case of suffix letters does not matter;
<CODE>16M</CODE> and <CODE>16m</CODE> are equivalent.

</P>
<DL COMPACT>

<DT><CODE><CODE>back_log</CODE></CODE>
<DD>
The number of outstanding connection requests <STRONG>MySQL</STRONG> can have. This
comes into play when the main <STRONG>MySQL</STRONG> thread gets <STRONG>VERY</STRONG>
many connection requests in a very short time. It then takes some time
(although very little) for the main thread to check the connection and start
a new thread. The <CODE>back_log</CODE> value indicates how many requests can be
stacked during this short time before <STRONG>MySQL</STRONG> momentarily stops
answering new requests. You need to increase this only if you expect a large
number of connections in a short period of time.

In other words, this value is the size of the listen queue for incoming
TCP/IP connections.  Your operating system has its own limit on the size
of this queue.  The manual page for the Unix <CODE>listen(2)</CODE> system
call should have more details.  Check your OS documentation for the
maximum value for this variable.  Attempting to set <CODE>back_log</CODE>
higher than this maximum will be
ineffective.

<DT><CODE><CODE>connect_timeout</CODE></CODE>
<DD>
The number of seconds the <CODE>mysqld</CODE> server is waiting for a connect
packet before responding with <CODE>Bad handshake</CODE>.

<DT><CODE><CODE>delayed_insert_timeout</CODE></CODE>
<DD>
How long a <CODE>INSERT DELAYED</CODE> thread should wait for <CODE>INSERT</CODE> statements
before terminating.
<DT><CODE><CODE>delayed_insert_limit</CODE></CODE>
<DD>
After inserting <CODE>delayed_insert_limit</CODE> rows, the <CODE>INSERT DELAYED</CODE>
handler will check if there are any <CODE>SELECT</CODE> statements pending.  If so, it
allows these to execute before continuing.

<DT><CODE><CODE>delayed_queue_size</CODE></CODE>
<DD>
How big a queue (in rows) should be allocated for handling <CODE>INSERT DELAYED</CODE>.
If the queue becomes full, any client that does <CODE>INSERT DELAYED</CODE> will wait until
there is room in the queue again.

<DT><CODE><CODE>flush_time</CODE></CODE>
<DD>
If this is set, then every <CODE>flush_time</CODE> seconds all tables will be closed
(to free up resources and sync things to disk).

<DT><CODE><CODE>join_buffer</CODE></CODE>
<DD>
The size of the buffer that is used for full joins (joins that do not
use indexes).  The buffer is allocated one time for each full join
between two tables. Increase this value to get a faster full join when
adding indexes is not possible. (Normally the best way to get fast joins
is to add indexes.)

<DT><CODE><CODE>key_buffer</CODE></CODE>
<DD>
Index blocks are buffered and are shared by all threads. <CODE>key_buffer</CODE> is
the size of the buffer used for index blocks. You might want to increase this
value when doing many <CODE>DELETE</CODE> or <CODE>INSERT</CODE> operations on a table
with lots of indexes. To get even more speed, use <CODE>LOCK TABLES</CODE>.
See section <A HREF="manual.html#LOCK_TABLES">7.23  <CODE>LOCK TABLES/UNLOCK TABLES</CODE> syntax</A>.

<DT><CODE><CODE>long_query_time</CODE></CODE>
<DD>
If a query takes longer than this (in seconds), the <CODE>slow_queries</CODE> counter
will be incremented.

<DT><CODE><CODE>max_allowed_packet</CODE></CODE>
<DD>
The maximum size of one packet. The message buffer is initialized to
<CODE>net_buffer_length</CODE> bytes, but can grow up to <CODE>max_allowed_packet</CODE>
bytes when needed.  This value by default is small to catch big (possibly
wrong) packets.  You must increase this value if you are using big
<CODE>BLOB</CODE> columns. It should be as big as the biggest <CODE>BLOB</CODE> you want
to use.

<DT><CODE><CODE>max_connections</CODE></CODE>
<DD>
The number of simultaneous clients allowed. Increasing this value increases
the number of file descriptors that <CODE>mysqld</CODE> requires.  See below for
comments on file descriptor limits.

<DT><CODE><CODE>max_connect_errors</CODE></CODE>
<DD>
If there is more than this number of interrupted connections from a host
this host will be blocked for further connections.  You can unblock a host
with the command <CODE>FLUSH HOSTS</CODE>.

<DT><CODE><CODE>max_delayed_threads</CODE> Don't start more than this number of</CODE>
<DD>
threads to handle <CODE>INSERT DELAYED</CODE>.  If you try to insert data in
a new table after all <CODE>INSERT DELAYED</CODE> threads are in use, the row will
be inserted as if the <CODE>DELAYED</CODE> attribute wasn't specified.

<DT><CODE><CODE>max_join_size</CODE></CODE>
<DD>
Joins that are probably going to read more than <CODE>max_join_size</CODE>
records return an error. Set this value if your users tend to perform joins
without a <CODE>WHERE</CODE> clause that take a long time and return
millions of rows.

<DT><CODE><CODE>max_sort_length</CODE></CODE>
<DD>
The number of bytes to use when sorting <CODE>BLOB</CODE> or <CODE>TEXT</CODE>
values (only the first <CODE>max_sort_length</CODE> bytes of each value
are used; the rest are ignored).

<DT><CODE><CODE>max_tmp_tables</CODE></CODE>
<DD>
(This option doesn't yet do anything).
Maximum number of temporary tables a client can keep open at the same time.

<DT><CODE><CODE>net_buffer_length</CODE></CODE>
<DD>
The communication buffer is reset to this size between queries. This
should not normally be changed, but if you have very little memory, you
can set it to the expected size of a query.  (That is, the expected length of
SQL statements sent by clients.  If statements exceed this length, the buffer
is automatically enlarged, up to <CODE>max_allowed_packet</CODE> bytes.)

<DT><CODE><CODE>record_buffer</CODE></CODE>
<DD>
Each thread that does a sequential scan allocates a buffer of this
size for each table it scans. If you do many sequential scans, you may
want to increase this value.

<DT><CODE><CODE>sort_buffer</CODE></CODE>
<DD>
Each thread that needs to do a sort allocates a buffer of this
size. Increase this value for faster <CODE>ORDER BY</CODE> or <CODE>GROUP BY</CODE>
operations.
See section <A HREF="manual.html#Temporary_files">17.5  Where <STRONG>MySQL</STRONG> stores temporary files</A>.

<A NAME="IDX595"></A>
<A NAME="IDX596"></A>
<DT><CODE><CODE>table_cache</CODE></CODE>
<DD>
The number of open tables for all threads. Increasing this value increases
the number of file descriptors that <CODE>mysqld</CODE> requires.  <STRONG>MySQL</STRONG>
needs two file descriptors for each unique open table.  See below for
comments on file descriptor limits.  For information about how the table
cache works, see section <A HREF="manual.html#Table_cache">10.7  How <STRONG>MySQL</STRONG> opens and closes tables</A>.

<DT><CODE><CODE>tmp_table_size</CODE></CODE>
<DD>
If a temporary table exceeds this size, <STRONG>MySQL</STRONG> generates an error of
the form <CODE>The table tbl_name is full</CODE>. Increase the value of
<CODE>tmp_table_size</CODE> if you do many advanced <CODE>GROUP BY</CODE> queries.

<DT><CODE><CODE>thread_stack</CODE></CODE>
<DD>
The stack size for each thread.  Many of the limits detected by the
<CODE>crash-me</CODE> test are dependent on this value. The default is normally
large enough.
See section <A HREF="manual.html#Benchmarks">11  The <STRONG>MySQL</STRONG> benchmark suite</A>.

<DT><CODE>wait_timeout</CODE>
<DD>
The number of seconds the server waits for activity on a connection before
closing it.
</DL>

<P>
<A NAME="IDX597"></A>
<A NAME="IDX598"></A>
<CODE>table_cache</CODE>, <CODE>max_connections</CODE> and <CODE>max_tmp_tables</CODE>
affect the maximum number of files the server keeps open.  If you
increase one or both of these values, you may run up against a limit
imposed by your operating system on the per-process number of open file
descriptors.  However, you can increase the limit on many systems.
Consult your OS documentation to find out how to do this, because the
method for changing the limit varies widely from system to system.

</P>
<P>
<CODE>table_cache</CODE> is related to <CODE>max_connections</CODE>.
For example, for 200 open connections, you should have a table cache of
at least <CODE>200 * n</CODE>, where <CODE>n</CODE> is the maximum number of tables in
a join.

</P>
<P>
<STRONG>MySQL</STRONG> uses algorithms that are very scalable, so you can usually
run with very little memory or give <STRONG>MySQL</STRONG> more memory to get
better performance.

</P>
<P>
If you have much memory and many tables and want maximum
performance with a moderate number of clients, you should use something
like this:

</P>

<PRE>
shell&#62; safe_mysqld -O key_buffer=16M -O table_cache=128 \
           -O sort_buffer=4M -O record_buffer=1M &#38;
</PRE>

<P>
If you have little memory and lots of connections, use something like this:

</P>

<PRE>
shell&#62; safe_mysqld -O key_buffer=512k -O sort_buffer=100k \
           -O record_buffer=100k &#38;
</PRE>

<P>
or even:

</P>

<PRE>
shell&#62; safe_mysqld -O key_buffer=512k -O sort_buffer=16k \
           -O table_cache=32 -O record_buffer=8k -O net_buffer=1K &#38;
</PRE>

<P>
If there are very many connections, "swapping problems" may occur unless
<CODE>mysqld</CODE> has been configured to use very little memory for each
connection. <CODE>mysqld</CODE> performs better if you have enough memory for all
connections, of course.

</P>
<P>
Note that if you change an option to <CODE>mysqld</CODE>, it remains in effect only
for that instance of the server.

</P>
<P>
To see the effects of a parameter change, do something like this:

</P>

<PRE>
shell&#62; mysqld -O key_buffer=32m --help
</PRE>

<P>
Make sure that the <CODE>--help</CODE> option is last; otherwise, the effect of any
options listed after it on the command line will not be reflected in the
output.

</P>
<P>
<A NAME="IDX599"></A>


<H2><A NAME="Memory_use" HREF="manual_toc.html#Memory_use">10.2  How <STRONG>MySQL</STRONG> uses memory</A></H2>

<P>
The list below indicates some of the ways that the <CODE>mysqld</CODE> server
uses memory.  Where applicable, the name of the server variable relevant
to the memory use is given.

</P>

<UL>
<LI>

The key buffer (variable <CODE>key_buffer</CODE>) is shared by all threads;
Other buffers used by the server are allocated as needed.

<LI>

Each connection uses some thread specific space; A stack (64K, variable
<CODE>thread_stack</CODE>) a connection buffer (variable
<CODE>net_buffer_length</CODE>), and a result buffer (variable
<CODE>net_buffer_length</CODE>). The connection buffer and result buffer are
dynamicly enlarged up to <CODE>max_allowed_packet</CODE> when needed.  When a
query is running a copy of the current query string is also alloced.

<LI>

All threads share the same base memory.

<LI>

Nothing is memory-mapped yet (except compressed tables, but that's another
story). This is because the 32-bit memory space of 4GB is not large
enough for most large tables. When we get a system with a 64-bit address
space, we may add general support for memory-mapping.

<LI>

Each request doing a sequential scan over a table allocates a read buffer
(variable <CODE>record_buffer</CODE>).

<LI>

All joins are done in one pass and most joins can be done without even
using a temporary table. Most temporary tables are memory-based (HEAP)
tables.  Temporary tables with a big record length (calculated as the
sum of all column lengths) or that contain <CODE>BLOB</CODE> columns are
stored on disk.  One current problem is that if a HEAP table exceeds the
size of <CODE>tmp_table_size</CODE>, you get the error <CODE>The table
tbl_name is full</CODE>.  In the future, we will fix this by automatically
changing the in-memory (HEAP) table to a disk-based (NISAM) table as
necessary.  To work around this problem, you can increase the temporary
table size by setting the <CODE>tmp_table_size</CODE> option to <CODE>mysqld</CODE>,
or by setting the SQL option <CODE>SQL_BIG_TABLES</CODE> in the client
program.  See section <A HREF="manual.html#SET_OPTION">7.24  <CODE>SET OPTION</CODE> syntax</A>. In <STRONG>MySQL</STRONG>
3.20, the maximum size of the temporary table was
<CODE>record_buffer*16</CODE>, so if you are using this version, you have to
increase the value of <CODE>record_buffer</CODE>. You can also start
<CODE>mysqld</CODE> with the <CODE>--big-tables</CODE> option to always store
temporary tables on disk, however, this will affect the speed of all
complicated queries.

<LI>

Most requests doing a sort allocate a sort buffer and one or two temporary
files. See section <A HREF="manual.html#Temporary_files">17.5  Where <STRONG>MySQL</STRONG> stores temporary files</A>.

<LI>

Almost all parsing and calculating is done in a local memory store. No
memory overhead is needed for small items and the normal slow memory
allocation and freeing is avoided. Memory is allocated only for
unexpectedly large strings (this is done with <CODE>malloc()</CODE> and
<CODE>free()</CODE>).

<LI>

Each index file is opened once and the data file is opened once for each
concurrently-running thread. For each concurrent thread, a table structure,
column structures for each column, and a buffer of size <CODE>3 * n</CODE> is
allocated (where <CODE>n</CODE> is the maximum row length, not counting <CODE>BLOB</CODE>
columns). A <CODE>BLOB</CODE> uses 5 to 8 bytes plus the length of the <CODE>BLOB</CODE>
data.

<LI>

For each table having <CODE>BLOB</CODE> columns, a buffer is enlarged dynamically
to read in larger <CODE>BLOB</CODE> values. If you scan a table, a buffer as large
as the largest <CODE>BLOB</CODE> value is allocated.

<LI>

Table handlers for all in-use tables are saved in a cache and managed as a
FIFO. Normally the cache has 64 entries. If a table has been used by two
running threads at the same time, the cache contains two entries for the
table.
See section <A HREF="manual.html#Table_cache">10.7  How <STRONG>MySQL</STRONG> opens and closes tables</A>.

<LI>

A <CODE>mysqladmin flush-tables</CODE> command closes all tables that are not in
use and marks all in-use tables to be closed when the currently executing
thread finishes. This will effectively free most in-use memory.
</UL>

<P>
<CODE>ps</CODE> and other system status programs may report that <CODE>mysqld</CODE>
uses a lot of memory. This may be caused by thread-stacks on different
memory addresses. For example, the Solaris version of <CODE>ps</CODE> counts
the unused memory
between stacks as used memory. You can verify this by checking available
swap with <CODE>swap -s</CODE>. We have tested <CODE>mysqld</CODE> with commercial
memory-leakage detectors, so there should be no memory leaks.

</P>


<H2><A NAME="Compile_and_link_options" HREF="manual_toc.html#Compile_and_link_options">10.3  How compiling and linking affects the speed of <STRONG>MySQL</STRONG></A></H2>

<P>
Most of the following tests are done on Linux and with the
<STRONG>MySQL</STRONG> benchmarks, but they should give some indication for other
operating systems.

</P>
<P>
You get the fastest executable when you link with <CODE>-static</CODE>. Using Unix
sockets rather than TCP/IP to connect to a database also gives better
performance.

</P>
<P>
On Linux, you will get the fastest code when compiling with <CODE>pgcc</CODE> and
<CODE>-O6</CODE>.  To compile <TT>`sql_yacc.cc'</TT> with these options, you need 180M
memory because
<CODE>gcc/pgcc</CODE> needs a lot of memory to make all functions inline.
You should also set <CODE>CXX=gcc</CODE> when configuring <STRONG>MySQL</STRONG> to avoid
inclusion of the <CODE>libstdc++</CODE> library.

</P>

<UL>
<LI>

If you use <CODE>pgcc</CODE> and compile everything with <CODE>-O6</CODE>, the
<CODE>mysqld</CODE> server is 11% faster than with <CODE>gcc</CODE>.

<LI>

If you link dynamically (without <CODE>-static</CODE>), the result is 13% slower.

<LI>

If you connect using TCP/IP rather than Unix sockets, the result is 7.5%
slower.

<LI>

On a Sun SPARCstation 10, <CODE>gcc</CODE> 2.7.3 is 13% faster than Sun Pro C++ 4.2.

<LI>

On Solaris 2.5.1, MIT-pthreads is 8-12% slower than Solaris native threads.
</UL>

<P>
The <STRONG>MySQL</STRONG>-Linux distribution provided by TcX is compiled with
<CODE>pgcc</CODE> and linked statically.

</P>


<H2><A NAME="MySQL_indexes" HREF="manual_toc.html#MySQL_indexes">10.4  How <STRONG>MySQL</STRONG> uses indexes</A></H2>

<P>
All indexes (<CODE>PRIMARY</CODE>, <CODE>UNIQUE</CODE> and <CODE>INDEX()</CODE>) are stored
in B-trees. Strings are automatically prefix- and end-space compressed.
See section <A HREF="manual.html#CREATE_INDEX">7.26  <CODE>CREATE INDEX</CODE> syntax</A>.

</P>
<P>
Indexes are used to:

<UL>
<LI>

Quickly find the rows that match a <CODE>WHERE</CODE> clause.

<LI>

Retrieve rows from other tables when performing joins.

<LI>

Find the <CODE>MAX()</CODE> or <CODE>MIN()</CODE> value for a specific key.

<LI>

Sort or group a table if the sorting or grouping is done on a leftmost
prefix of a usable key (e.g., <CODE>ORDER BY key_part_1,key_part_2 </CODE>).  The
key is read in reverse order if all key parts are followed by <CODE>DESC</CODE>.

<LI>

Retrieve values without consulting the data file, in some cases.  If all used
columns for some table are numeric and form a leftmost prefix for some key,
the values may be retrieved from the index tree for greater speed.
</UL>

<P>
Suppose you issue the following <CODE>SELECT</CODE> statement:

</P>

<PRE>
mysql&#62; SELECT * FROM tbl_name WHERE col1=val1 AND col2=val2;
</PRE>

<P>
If a multiple-column index exists on <CODE>col1</CODE> and <CODE>col2</CODE>, the
appropriate rows can be fetched directly. If separate single-column
indexes exist on <CODE>col1</CODE> and <CODE>col2</CODE>, the optimizer decides
which index will find fewer rows and uses that index to fetch the rows.

</P>
<P>
<A NAME="IDX600"></A>
<A NAME="IDX601"></A>
If the table has a multiple-column index, any leftmost prefix of the
index can be used by the optimizer to find rows. For example, if you
have a three-column index on <CODE>(col1,col2,col3)</CODE>, you have indexed search
capabilities on <CODE>(col1)</CODE>, <CODE>(col1,col2)</CODE> and
<CODE>(col1,col2,col3)</CODE>.

</P>
<P>
<STRONG>MySQL</STRONG> can't use a partial index if the columns don't form a leftmost
prefix of the index.
Suppose you have the <CODE>SELECT</CODE> statements shown below:

</P>

<PRE>
mysql&#62; SELECT * FROM tbl_name WHERE col1=val1;
mysql&#62; SELECT * FROM tbl_name WHERE col2=val2;
mysql&#62; SELECT * FROM tbl_name WHERE col2=val2 AND col3=val3;
</PRE>

<P>
If an index exists on <CODE>(col1,col2,col3)</CODE>, only the first query shown
above uses the index. The second and third queries do involve indexed
columns, but <CODE>(col2)</CODE> and <CODE>(col2,col3)</CODE> are not leftmost prefixes
of <CODE>(col1,col2,col3)</CODE>.

</P>
<P>
<A NAME="IDX602"></A>
<A NAME="IDX603"></A>
<A NAME="IDX604"></A>
<A NAME="IDX605"></A>
<STRONG>MySQL</STRONG> also uses indexes for <CODE>LIKE</CODE> comparisons if the argument
to <CODE>LIKE</CODE> is a constant string that doesn't start with a wildcard
character.  For example, the following <CODE>SELECT</CODE> statements use indexes:

</P>

<PRE>
mysql&#62; select * from tbl_name where key_col LIKE "Patrick%";
mysql&#62; select * from tbl_name where key_col LIKE "Pat%_ck%";
</PRE>

<P>
In the first statement, only rows with <CODE>"Patrick" &#60;= key_col &#60;
"Patricl"</CODE> are considered.  In the second statement, only rows with
<CODE>"Pat" &#60;= key_col &#60; "Pau"</CODE> are considered.

</P>
<P>
The following <CODE>SELECT</CODE> statements will not use indexes:

<PRE>
mysql&#62; select * from tbl_name where key_col LIKE "%Patrick%";
mysql&#62; select * from tbl_name where key_col LIKE other_col;
</PRE>

<P>
In the first statement, the <CODE>LIKE</CODE> value begins with a wildcard character.
In the second statement, the <CODE>LIKE</CODE> value is not a constant.

</P>
<P>
<STRONG>MySQL</STRONG> normally uses the index that finds least number of rows. An
index is used for columns that you compare with the following operators:
<CODE>=</CODE>, <CODE>&#62;</CODE>, <CODE>&#62;=</CODE>, <CODE>&#60;</CODE>, <CODE>&#60;=</CODE>, <CODE>BETWEEN</CODE> and a
<CODE>LIKE</CODE> with a non-wildcard prefix like <CODE>'something%'</CODE>.

</P>
<P>
Any index that doesn't span all <CODE>AND</CODE> levels in the <CODE>WHERE</CODE> clause
is not used to optimize the query.

</P>
<P>
The following <CODE>WHERE</CODE> clauses use indexes:

<PRE>
... WHERE index_part1=1 AND index_part2=2
... WHERE index=1 OR A=10 AND index=2      /* index = 1 OR index = 2 */
... WHERE index_part1='hello' AND index_part_3=5
          /* optimized like "index_part1='hello'" */
</PRE>

<P>
These <CODE>WHERE</CODE> clauses do <STRONG>NOT</STRONG> use indexes:

<PRE>
... WHERE index_part2=1 AND index_part3=2  /* index_part_1 is not used */
... WHERE index=1 OR A=10                  /* No index */
... WHERE index_part1=1 OR index_part2=10  /* No index spans all rows */
</PRE>

<P>
<A NAME="IDX606"></A>


<H2><A NAME="Where_optimizations" HREF="manual_toc.html#Where_optimizations">10.5  How <STRONG>MySQL</STRONG> optimizes <CODE>WHERE</CODE> clauses</A></H2>

<P>
(This section is incomplete; <STRONG>MySQL</STRONG> does many optimizations.)

</P>
<P>
In general, when you want to make a slow <CODE>SELECT ... WHERE</CODE> faster, the
first thing to check is whether or not you can add an index. All references
between different tables should usually be done with indexes. You can use the
<CODE>EXPLAIN</CODE> command to determine which indexes are used for a
<CODE>SELECT</CODE>.
See section <A HREF="manual.html#EXPLAIN">7.21  <CODE>EXPLAIN</CODE> syntax (Get information about a <CODE>SELECT</CODE>)</A>.

</P>
<P>
Some of the optimizations performed by <STRONG>MySQL</STRONG> are listed below:

</P>

<UL>
<LI>

Removal of unnecessary parentheses:

<PRE>
   ((a AND b) AND c OR (((a AND b) AND (c AND d))))
-&#62; (a AND b AND c) OR (a AND b AND c AND d)
</PRE>

<LI>

Constant folding:

<PRE>
   (a&#60;b AND b=c) AND a=5
-&#62; b&#62;5 AND b=c AND a=5
</PRE>

<LI>

Constant condition removal (needed because of constant folding):

<PRE>
   (B&#62;=5 AND B=5) OR (B=6 AND 5=5) OR (B=7 AND 5=6)
-&#62; B=5 OR B=6
</PRE>

<LI>

Constant expressions used by indexes are evaluated only once.
<LI>

<CODE>COUNT(*)</CODE> on a single table without a <CODE>WHERE</CODE> is retrieved
directly from the table information.  This is also done for any <CODE>NOT NULL</CODE>
expression when used with only one table.
<LI>

Early detection of invalid constant expressions. <STRONG>MySQL</STRONG> quickly
detects that some <CODE>SELECT</CODE> statements are impossible and returns no rows.
<LI>

<CODE>HAVING</CODE> is merged with <CODE>WHERE</CODE> if you don't use <CODE>GROUP
BY</CODE> or group functions (<CODE>COUNT()</CODE>, <CODE>MIN()</CODE>...)
<LI>

For each sub join, a simpler <CODE>WHERE</CODE> is constructed to get a fast
<CODE>WHERE</CODE> evaluation for each sub join and also to skip records as
soon as possible.
<A NAME="IDX607"></A>
<A NAME="IDX608"></A>
<LI>

All constant tables are read first, before any other tables in the query.
A constant table is:

<UL>
<LI>

An empty table or a table with 1 row.
<LI>

A table that is used with a <CODE>WHERE</CODE> clause on a <CODE>UNIQUE</CODE> index or a
<CODE>PRIMARY KEY</CODE>, where all index parts are used with constant expressions.
</UL>

All the following tables are used as constant tables:

<PRE>
mysql&#62; SELECT * FROM t WHERE primary_key=1;
mysql&#62; SELECT * FROM t1,t2
           WHERE t1.primary_key=1 AND t2.primary_key=t1.id;
</PRE>

<LI>

The best join combination to join the tables is found by trying all
possibilities :(. If all columns in <CODE>ORDER BY</CODE> and in <CODE>GROUP BY</CODE>
come from the same table, then this table is preferred first when joining.
<LI>

If there is an <CODE>ORDER BY</CODE> clause and a different <CODE>GROUP BY</CODE> clause,
or if the <CODE>ORDER BY</CODE> or <CODE>GROUP BY</CODE>
contains columns from tables other than the first table in the join
queue, a temporary table is created.
<LI>

If you use <CODE>SQL_SMALL_RESULT</CODE>, <STRONG>MySQL</STRONG> will use an in-memory
temporary table.
<LI>

As <CODE>DISTINCT</CODE> is converted to a <CODE>GROUP BY</CODE> on all columns,
<CODE>DISTINCT</CODE> combined with <CODE>ORDER BY</CODE> will in many cases also need
a temporary table.
<LI>

Each table index is queried and the best index that spans less than 30% of
the rows is used. If no such index can be found, a quick table scan is used.
<LI>

In some cases, <STRONG>MySQL</STRONG> can read rows from the index without even
consulting the data file.  If all columns used from the index are numeric,
then only the index tree is used to resolve the query.
<LI>

Before each record is output, those that do not match the <CODE>HAVING</CODE> clause
are skipped.
</UL>

<P>
Some examples of queries that are very fast:

</P>

<PRE>
mysql&#62; SELECT COUNT(*) FROM tbl_name;
mysql&#62; SELECT MIN(key_part1),MAX(key_part1) FROM tbl_name;
mysql&#62; SELECT MAX(key_part2) FROM tbl_name
           WHERE key_part_1=constant;
mysql&#62; SELECT ... FROM tbl_name
           ORDER BY key_part1,key_part2,... LIMIT 10;
mysql&#62; SELECT ... FROM tbl_name
           ORDER BY key_part1 DESC,key_part2 DESC,... LIMIT 10;
</PRE>

<P>
The following queries are resolved using only the index tree (assuming
the indexed columns are numeric):

</P>

<PRE>
mysql&#62; SELECT key_part1,key_part2 FROM tbl_name WHERE key_part1=val;
mysql&#62; SELECT COUNT(*) FROM tbl_name
           WHERE key_part1=val1 AND key_part2=val2;
mysql&#62; SELECT key_part2 FROM tbl_name GROUP BY key_part1;
</PRE>

<P>
The following queries use indexing to retrieve the rows in sorted
order without a separate sorting pass:

</P>

<PRE>
mysql&#62; SELECT ... FROM tbl_name ORDER BY key_part1,key_part2,...
mysql&#62; SELECT ... FROM tbl_name ORDER BY key_part1 DESC,key_part2 DESC,...
</PRE>



<H2><A NAME="LEFT_JOIN_optimization" HREF="manual_toc.html#LEFT_JOIN_optimization">10.6  How <STRONG>MySQL</STRONG> optimizes <CODE>LEFT JOIN</CODE></A></H2>

<P>
<CODE>A LEFT JOIN B</CODE> is in <STRONG>MySQL</STRONG> implemented as follows

</P>

<UL>
<LI>

The table <CODE>B</CODE> is set to be dependent on table <CODE>A</CODE>.
<LI>

The table <CODE>A</CODE> is set to be dependent on all tables (except <CODE>B</CODE>)
that are used in the <CODE>LEFT JOIN</CODE> condition.
<LI>

All <CODE>LEFT JOIN</CODE> conditions are moved to the <CODE>WHERE</CODE> clause.
<LI>

All standard join optimizations are done, with the exception that a table is
always read after all tables it is dependent on.  If there is a circular
dependence then <STRONG>MySQL</STRONG> will issue an error.
<LI>

All standard <CODE>WHERE</CODE> optimzations are done.
<LI>

If there is a row in <CODE>A</CODE> that matches the <CODE>WHERE</CODE> clause, but there
wasn't any row in <CODE>B</CODE> that matched the <CODE>LEFT JOIN</CODE> condition,
then an extra <CODE>B</CODE> row is generated with all columns set to <CODE>NULL</CODE>.
</UL>

<P>
<A NAME="IDX609"></A>
<A NAME="IDX610"></A>


<H2><A NAME="Table_cache" HREF="manual_toc.html#Table_cache">10.7  How <STRONG>MySQL</STRONG> opens and closes tables</A></H2>

<P>
The cache of open tables can grow to a maximum of <CODE>table_cache</CODE> (default
64; this can be changed with with the <CODE>-O table_cache=#</CODE> option to
<CODE>mysqld</CODE>).  A table is never closed, except when the cache is full and
another thread tries to open a table or if you use <CODE>mysqladmin
refresh</CODE> or <CODE>mysqladmin flush-tables</CODE>.

</P>
<P>
When the table cache fills up, the server uses the following procedure
to locate a cache entry to use:

</P>

<UL>
<LI>

Tables that are not currently in use are released, in least-recently-used
order.

<LI>

If the cache is full and no tables can be released, but a new table needs to
be opened, the cache is temporarily extended as necessary.

<LI>

If the cache is in a temporarily-extended state and a table goes from in-use
to not-in-use state, it is closed and released from the cache.
</UL>

<P>
A table is opened for each concurrent access. This means that
if you have two threads accessing the same table or access the table
twice in the same query (with <CODE>AS</CODE>) the table needs to be opened twice.
The first open of any table takes two file descriptors; each additional
use of the table takes only one file descriptor.  The extra descriptor
for the first open is used for the index file; this descriptor is shared
among all threads.

</P>


<H3><A NAME="Creating_many_tables" HREF="manual_toc.html#Creating_many_tables">10.7.1  Drawbacks of creating large numbers of tables in a database</A></H3>

<P>
If you have many files in a directory, open, close and create operations will
be slow.  If you execute <CODE>SELECT</CODE> statements on many different tables,
there will be a little overhead when the table cache is full, because for
every table that has to be opened, another must be closed. You can reduce
this overhead by making the table cache larger.

</P>


<H2><A NAME="Open_tables" HREF="manual_toc.html#Open_tables">10.8  Why so many open tables?</A></H2>

<P>
When you run <CODE>mysqladmin status</CODE>, you'll see something like this:

</P>

<PRE>
Uptime: 426 Running threads: 1 Questions: 11082 Reloads: 1 Open tables: 12
</PRE>

<P>
This can be somewhat perplexing if you only have 6 tables.

</P>
<P>
<STRONG>MySQL</STRONG> is multithreaded, so it may have many queries on the same
table simultaneously. To minimize the problem with two threads having
different states on the same file, the table is opened independently by each
concurrent thread. This takes some memory and one extra file descriptor for
the data file. The index file descriptor is shared between all threads.

</P>


<H2><A NAME="Symbolic_links" HREF="manual_toc.html#Symbolic_links">10.9  Using symbolic links for databases and tables</A></H2>

<P>
You can move tables and databases from the database directory to other
locations and replace them with symbolic links to the new locations.
You might want to do this, for example, to move a database to a file
system with more free space.

</P>
<P>
If <STRONG>MySQL</STRONG> notices that a table is a symbolically-linked, it will
resolve the symlink and use the table it points to instead. This works on all
systems that support the <CODE>realpath()</CODE> call (at least Linux and Solaris
support <CODE>realpath()</CODE>)!  On systems that don't support <CODE>realpath()</CODE>,
you should not access the table through the real path and through the symlink
at the same time!  If you do, the table will be inconsistent after any
update.

</P>
<P>
<STRONG>MySQL</STRONG> doesn't support linking of databases by default.
Things will work fine as long as you don't make a symbolic link
between databases.  Suppose you have a database <CODE>db1</CODE> under the
<STRONG>MySQL</STRONG> data directory, and then make a symlink <CODE>db2</CODE> that
points to <CODE>db1</CODE>:

</P>

<PRE>
shell&#62; cd /path/to/datadir
shell&#62; ln -s db1 db2
</PRE>

<P>
Now, for any table <CODE>tbl_a</CODE> in <CODE>db1</CODE>, there also appears to be
a table <CODE>tbl_a</CODE> in <CODE>db2</CODE>.  If one thread updates <CODE>db1.tbl_a</CODE>
and another thread updates <CODE>db2.tbl_a</CODE>, there will be problems.

</P>
<P>
If you really need this, you must change the following code in
<TT>`mysys/mf_format.c'</TT>:

</P>

<PRE>
if (!lstat(to,&#38;stat_buff))  /* Check if it's a symbolic link */
    if (S_ISLNK(stat_buff.st_mode) &#38;& realpath(to,buff))
</PRE>

<P>
Change the code to this:

</P>

<PRE>
if (realpath(to,buff))
</PRE>



<H2><A NAME="Internal_locking" HREF="manual_toc.html#Internal_locking">10.10  How <STRONG>MySQL</STRONG> locks tables</A></H2>

<P>
All locking in <STRONG>MySQL</STRONG> is deadlock-free.  This is managed by always
requesting all needed locks at once at the beginning of a query and always
locking the tables in the same order.

</P>
<P>
The locking method <STRONG>MySQL</STRONG> uses for <CODE>WRITE</CODE> locks works as follows:

</P>

<UL>
<LI>

If there are no locks on the table, put a write lock on it.
<LI>

Otherwise, put the lock request in the write lock queue.
</UL>

<P>
The locking method <STRONG>MySQL</STRONG> uses for <CODE>READ</CODE> locks works as follows:

</P>

<UL>
<LI>

If there are no write locks on the table, put a read lock on it.
<LI>

Otherwise, put the lock request in the read lock queue.
</UL>

<P>
When a lock is released, the lock is made available to the threads
in the write lock queue, then to the threads in the read lock queue.

</P>
<P>
This means that if you have many updates on a table, <CODE>SELECT</CODE>
statements will wait until there are no more updates.

</P>
<P>
To work around this for the case where you want to do many <CODE>INSERT</CODE> and
<CODE>SELECT</CODE> operations on a table, you can insert rows in a temporary
table and update the real table with the records from the temporary table
once in a while.

</P>
<P>
This can be done with the following code:

<PRE>
mysql&#62; LOCK TABLES real_table WRITE, insert_table WRITE;
mysql&#62; insert into real_table select * from insert_table;
mysql&#62; delete from insert_table;
mysql&#62; UNLOCK TABLES;
</PRE>

<P>
You can use the <CODE>LOW_PRIORITY</CODE> or <CODE>HIGH_PRIORITY</CODE> options with
<CODE>INSERT</CODE> if you want to prioritize retrieval in some specific cases.
See section <A HREF="manual.html#INSERT">7.13  <CODE>INSERT</CODE> syntax</A>.

</P>
<P>
You could also change the locking code in <TT>`mysys/thr_lock.c'</TT> to use a
single queue.  In this case, write locks and read locks would have the same
priority, which might help some applications.

</P>


<H2><A NAME="Table_efficiency" HREF="manual_toc.html#Table_efficiency">10.11  How to arrange a table to be as fast/small as possible</A></H2>

<P>
You can get better performance on a table and minimize storage space
using the techniques listed below:

</P>

<UL>
<LI>

Declare columns to be <CODE>NOT NULL</CODE> if possible. It makes everything faster
and you save one bit per column.

<LI>

Take advantage of the fact that all columns have default values. Insert
values explicitly only when the value to be inserted differs from the default.
You don't have to insert a value into the first <CODE>TIMESTAMP</CODE> column or
into an <CODE>AUTO_INCREMENT</CODE> column in an <CODE>INSERT</CODE> statement.
See section <A HREF="manual.html#mysql_insert_id">19.4.28  <CODE>mysql_insert_id()</CODE></A>.

<LI>

Use the smaller integer types if possible to get smaller tables. For example,
<CODE>MEDIUMINT</CODE> is often better than <CODE>INT</CODE>.

<LI>

If you don't have any variable-length columns (<CODE>VARCHAR</CODE>, <CODE>TEXT</CODE> or
<CODE>BLOB</CODE> columns), a fixed-size record format is used. This is much faster
but unfortunately may waste some space.
See section <A HREF="manual.html#Row_format">10.16  What are the different row formats? Or, when should <CODE>VARCHAR/CHAR</CODE> be used?</A>.

<LI>

To help <STRONG>MySQL</STRONG> optimize queries better, run <CODE>isamchk --analyze</CODE>
on a table after it has been loaded with relevant data. This updates a
value for each index that indicates the average number of rows that have the
same value.  (For unique indexes, this is always 1, of course.)

<LI>

To sort an index and data according to an index, use
<CODE>isamchk --sort-index --sort-records=1</CODE>
(if you want to sort on index 1). If you have a unique index from which you
want to read all records in order according to that index, this is a good way
to make that faster.  Note however that this sorting isn't written optimally
and will take a long time for a large table!

<LI>

For <CODE>INSERT</CODE> statements, use multiple value lists if possible.  This
is much faster than using separate <CODE>INSERT</CODE> statements.

<LI>

When loading a table with data, use <CODE>LOAD DATA INFILE</CODE>. This is usually
20 times faster than using a lot of <CODE>INSERT</CODE> statements.
See section <A HREF="manual.html#LOAD_DATA">7.15  <CODE>LOAD DATA INFILE</CODE> syntax</A>.

You can even get more speed when loading data into a table with many indexes
using the following procedure:


<OL>
<LI>

Create the table in <CODE>mysql</CODE> or Perl with <CODE>CREATE TABLE</CODE>.

<LI>

Execute <CODE>mysqladmin flush-tables</CODE>.

<LI>

Use <CODE>isamchk --keys-used=0 -rq /path/to/db/tbl_name</CODE>. This will remove all
usage of all indexes from the table.

<LI>

Insert data into the table with <CODE>LOAD DATA INFILE</CODE>.

<LI>

If you have <CODE>pack_isam</CODE> and want to compress the table, run
<CODE>pack_isam</CODE> on it.

<LI>

Recreate the indexes with <CODE>isamchk -r -q /path/to/db/tbl_name</CODE>.

<LI>

Execute <CODE>mysqladmin flush-tables</CODE>.
</OL>

<LI>

To get some more speed for both <CODE>LOAD DATA INFILE</CODE> and
<CODE>INSERT</CODE>, enlarge the key buffer.  This can be done with the
<CODE>-O key_buffer=#</CODE> option to <CODE>mysqld</CODE> or <CODE>safe_mysqld</CODE>.  For
example, 16M should be a good value if you have much RAM. :)

<LI>

When dumping data as text files for use by other programs, use
<CODE>SELECT ... INTO OUTFILE</CODE>. See section <A HREF="manual.html#LOAD_DATA">7.15  <CODE>LOAD DATA INFILE</CODE> syntax</A>.

<LI>

When doing many successive inserts or updates, you can get more speed by
locking your tables using <CODE>LOCK TABLES</CODE>. <CODE>LOAD DATA INFILE</CODE> and
<CODE>SELECT ...INTO OUTFILE</CODE> are atomic, so you don't have to use <CODE>LOCK
TABLES</CODE> when using them.
See section <A HREF="manual.html#LOCK_TABLES">7.23  <CODE>LOCK TABLES/UNLOCK TABLES</CODE> syntax</A>.
</UL>

<P>
To check how fragmented your tables are, run <CODE>isamchk -evi</CODE> on the
<TT>`.ISM'</TT> file.
See section <A HREF="manual.html#Maintenance">13  Maintaining a <STRONG>MySQL</STRONG> installation</A>.

</P>


<H2><A NAME="Table_locking" HREF="manual_toc.html#Table_locking">10.12  Table locking issues</A></H2>

<P>
The table locking code in <STRONG>MySQL</STRONG> is deadlock free.

</P>
<P>
<STRONG>MySQL</STRONG> uses table locking (instead of row locking or column locking)
to achieve a very high lock speed.  For large tables, table locking is MUCH
better than row locking, but there are of course some pitfalls.

</P>
<P>
Table locking enables many threads to read from a table at the same
time, but if a thread wants to write to a table, it must first get
exclusive access.  During the update all others threads that want to
access this particular table will wait until the update is ready.

</P>
<P>
As updates of databases normally are considered to be more important than
<CODE>SELECT</CODE>, all statements that update a table have higher priority than
statements that retrieve information from a table. This should ensure that
updates are not 'starved' because one issues a lot of heavy queries against
a specific table.

</P>
<P>
One main problem with this is the following:

</P>

<UL>
<LI>

A client issues a <CODE>SELECT</CODE> that takes a long time to run.
<LI>

Another client then issues an <CODE>INSERT</CODE> on a used table;  This client
will wait until the <CODE>SELECT</CODE> is finished..
<LI>

Another client issues another <CODE>SELECT</CODE> statement on the same table;  As
<CODE>INSERT</CODE> has higher priority than <CODE>SELECT</CODE>, this <CODE>SELECT</CODE>
will wait for the <CODE>INSERT</CODE> to finish.  It will also wait for the first
<CODE>SELECT</CODE> to finish!
</UL>

<P>
Some possible solutions to this problem are:

</P>

<UL>
<LI>

Try to get the <CODE>SELECT</CODE> statements to run faster;  You may have to create
some summary tables to do this.

<LI>

Start <CODE>mysqld</CODE> with <CODE>--low-priority-inserts</CODE>.  This will give
all statements that update a table lower priority than a <CODE>SELECT</CODE>
statement. In this case the last <CODE>SELECT</CODE> statement in the previous
scenario would execute before the <CODE>INSERT</CODE> statement.

<LI>

You can give a specific <CODE>INSERT</CODE>,<CODE>UPDATE</CODE> or <CODE>DELETE</CODE> statement
lower priority with the <CODE>LOW_PRIORITY</CODE> attribute.

<LI>

You can specify that all updates from a specific thread should be done with
low priority by using the SQL command: <CODE>SET SQL_LOW_PRIORITY_UPDATES=1</CODE>.
See section <A HREF="manual.html#SET_OPTION">7.24  <CODE>SET OPTION</CODE> syntax</A>.

<LI>

You can specify that a specific <CODE>SELECT</CODE> is very important with the
<CODE>HIGH_PRIORITY</CODE> attribute. See section <A HREF="manual.html#SELECT">7.11  <CODE>SELECT</CODE> syntax</A>.

<LI>

If you mainly mix <CODE>INSERT</CODE> and <CODE>SELECT</CODE> statements, the
<CODE>DELAYED</CODE> attribute to <CODE>INSERT</CODE> will probably solve your problems.
See section <A HREF="manual.html#INSERT">7.13  <CODE>INSERT</CODE> syntax</A>.

<LI>

If you have problems with <CODE>SELECT</CODE> and <CODE>DELETE</CODE>, the <CODE>LIMIT</CODE>
option to <CODE>DELETE</CODE> may help. See section <A HREF="manual.html#DELETE">7.10  <CODE>DELETE</CODE> syntax</A>.
</UL>



<H2><A NAME="Insert_speed" HREF="manual_toc.html#Insert_speed">10.13  Factors affecting the speed of <CODE>INSERT</CODE> statements</A></H2>

<P>
The time to insert a record consists of:

</P>

<UL>
<LI>

Connect:                 (3)
<LI>

Sending query to server: (2)
<LI>

Parsing query:           (2)
<LI>

Inserting record:        (1 x size of record)
<LI>

Inserting indexes:       (1 x indexes)
<LI>

Close:                   (1)
</UL>

<P>
Where (number) is proportional time. This does not take into consideration
the initial overhead to open tables (which is done once for each
concurrently-running query).

</P>
<P>
The size of the table slows down the insertion of indexes by N log N
(B-trees).

</P>
<P>
You can speed up insertions by locking your table and/or using multiple value
lists with <CODE>INSERT</CODE> statements.  Using multiple value lists can be up to
5 times faster than using separate inserts.

</P>

<PRE>
mysql&#62; LOCK TABLES a WRITE;
mysql&#62; INSERT INTO a VALUES (1,23),(2,34),(4,33);
mysql&#62; INSERT INTO a VALUES (8,26),(6,29);
mysql&#62; UNLOCK TABLES;
</PRE>

<P>
The main speed difference is that the index buffer is flushed to disk only
once, after all <CODE>INSERT</CODE> statements have completed. Normally there would
be as many index buffer flushes as there are different <CODE>INSERT</CODE>
statements. Locking is not needed if you can insert all rows with a single
statement.

</P>
<P>
Locking will also lower the total time of multi-connection tests, but the
maximum wait time for some threads will go up (because they wait for
locks).  For example:

</P>

<PRE>
thread 1 does 1000 inserts
thread 2, 3, and 4 does 1 insert
thread 5 does 1000 inserts
</PRE>

<P>
If you don't use locking, 2, 3 and 4 will finish before 1 and 5. If you
use locking, 2, 3 and 4 probably will not finish before 1 or 5, but the
total time should be about 40% faster.

</P>
<P>
As <CODE>INSERT</CODE>, <CODE>UPDATE</CODE> and <CODE>DELETE</CODE> operations are very fast in
<STRONG>MySQL</STRONG>, you will obtain better overall performance by adding locks
around everything that does more than about 5 inserts or updates in a row.
If you do very many inserts in a row, you could do a <CODE>LOCK
TABLES</CODE> followed by a <CODE>UNLOCK TABLES</CODE> once in a while (about each
1000 rows) to allow other threads access to the table. This would still
result in a nice performance gain.

</P>
<P>
Of course, <CODE>LOAD DATA INFILE</CODE> is much faster still.

</P>
<P>
If you are inserting a lot of rows from different clients, you can get higher
speed by using the <CODE>INSERT DELAYED</CODE> statement. See section <A HREF="manual.html#INSERT">7.13  <CODE>INSERT</CODE> syntax</A>.

</P>


<H2><A NAME="Delete_speed" HREF="manual_toc.html#Delete_speed">10.14  Factors affecting the speed of <CODE>DELETE</CODE> statements</A></H2>

<P>
The time to delete a record is exactly proportional to the number of
indexes. To delete records more quickly, you can increase the size of the
index cache. The default index cache is 1M; to get faster deletes, it
should be increased by several factors (try 16M if you have enough
memory).

</P>


<H2><A NAME="Optimize" HREF="manual_toc.html#Optimize">10.15  How do I get <STRONG>MySQL</STRONG> to run at full speed?</A></H2>

<P>
Start by benchmarking your problem!  You can take any program from the
<STRONG>MySQL</STRONG> benchmark suite (normally found in the <TT>`sql-bench'</TT>
directory) and modify it for your needs.  By doing this, you can try
different solutions to your problem and test which is really the fastest
solution for you.

</P>

<UL>
<LI>

Start <CODE>mysqld</CODE> with the correct options. More memory gives more speed
if you have it. See section <A HREF="manual.html#Server_parameters">10.1  Tuning server parameters</A>.
<LI>

Create indexes to make your <CODE>SELECT</CODE> statements faster.
See section <A HREF="manual.html#MySQL_indexes">10.4  How <STRONG>MySQL</STRONG> uses indexes</A>.
<LI>

Optimize your column types to be as efficient as possible.  For example,
declere columns to be <CODE>NOT NULL</CODE> if possible.
See section <A HREF="manual.html#Table_efficiency">10.11  How to arrange a table to be as fast/small as possible</A>.
<LI>

<STRONG>MySQL</STRONG> has two different levels of locks: Internal locks and
external locks. The internal locks ensures that all update/retrieve
operations are atomic (run without conflicts from other clients). The external
locks allows multiple <STRONG>MySQL</STRONG> servers to run on the same data and
allows you to use <CODE>isamchk</CODE> to check tables without taking down <CODE>mysqld</CODE>.

The <CODE>--skip-locking</CODE> option disables external locking (file
locking) between SQL requests. This gives greater speed but has the
following consequences:


<UL>
<LI>

You <STRONG>MUST</STRONG> flush all tables with <CODE>mysqladmin flush-tables</CODE> before
you try to check or repair tables with <CODE>isamchk</CODE>. (<CODE>isamchk -d
tbl_name</CODE> is always allowed, since that simply displays table information.)
<LI>

You can't run two <STRONG>MySQL</STRONG> servers on the same data files, if
both are going to update the same tables.
</UL>

The <CODE>--skip-locking</CODE> option is on by default when compiling with
MIT-pthreads, because <CODE>flock()</CODE> isn't fully supported by MIT-pthreads on
all platforms.

The only case when you can't use <CODE>--skip-locking</CODE> is if you run
multiple <STRONG>MySQL</STRONG> SERVERS (not clients) on the same data (or run
<CODE>isamchk</CODE> on the table without first flushing the <CODE>mysqld</CODE> server tables
first).

You can still use <CODE>LOCK TABLES</CODE> / <CODE>UNLOCK TABLES</CODE> even if you are
using <CODE>--skip-locking</CODE>

<LI>

If updates are a problem, you can delay updates and then do many updates
in a row later. Doing many updates in a row is much quicker than doing
one at a time.
<LI>

On FreeBSD systems, if the problem is with MIT-pthreads, upgrading to FreeBSD
3.0 (or higher) should help. This makes it possible to use Unix sockets (with
FreeBSD, this is quicker than connecting using TCP/IP with MIT-pthreads) and
the threads package is much more integrated.
<LI>

<CODE>GRANT</CODE> checking on the table or column level will decrease performance.
</UL>

<P>
If your problem is with some explicit <STRONG>MySQL</STRONG> function, you can always
time this in the <STRONG>MySQL</STRONG> client:

</P>

<PRE>
mysql&#62; select benchmark(1000000,1+1);
+------------------------+
| benchmark(1000000,1+1) |
+------------------------+
|                      0 |
+------------------------+
1 row in set (0.32 sec)
</PRE>

<P>
The above shows that <STRONG>MySQL</STRONG> can execute 1,000,000 <CODE>+</CODE> expressions
in 0.32 seconds on a simple <CODE>PentiumII 400MHz</CODE>.

</P>
<P>
All <STRONG>MySQL</STRONG> functions should be very optimized, but there may be some
exceptions and the <CODE>benchmark(loop_count,expression)</CODE> is a great tool
to find if this is a problem with your query.

</P>


<H2><A NAME="Row_format" HREF="manual_toc.html#Row_format">10.16  What are the different row formats? Or, when should <CODE>VARCHAR/CHAR</CODE> be used?</A></H2>

<P>
<STRONG>MySQL</STRONG> dosen't have true SQL <CODE>VARCHAR</CODE> types.

</P>
<P>
Instead, <STRONG>MySQL</STRONG> has three different ways to store records and uses
these to emulate <CODE>VARCHAR</CODE>.

</P>
<P>
If a table doesn't have any <CODE>VARCHAR</CODE>, <CODE>BLOB</CODE> or <CODE>TEXT</CODE>
columns, a fixed row size is used. Otherwise a dynamic row size is
used.  <CODE>CHAR</CODE> and <CODE>VARCHAR</CODE> columns are treated identically from
the application's point of view; both have trailing spaces removed
when the columns are retrieved.

</P>
<P>
You can check the format used in a table with <CODE>isamchk -d</CODE> (<CODE>-d</CODE>
means "describe the table").

</P>
<P>
<STRONG>MySQL</STRONG> has three different table formats: fixed-length, dynamic
and compressed.  These are compared below.

</P>
<P>
<STRONG>Fixed-length tables</STRONG>

</P>

<UL>
<LI>

This is the default format. It's used when the table contains no <CODE>VARCHAR</CODE>,
<CODE>BLOB</CODE> or <CODE>TEXT</CODE> columns.
<LI>

All <CODE>CHAR</CODE>, <CODE>NUMERIC</CODE> and <CODE>DECIMAL</CODE> columns are space-padded
to the column width.
<LI>

Very quick.
<LI>

Easy to cache.
<LI>

Easy to reconstruct after a crash, because records are located in fixed
positions.
<LI>

Doesn't have to be reorganized (with <CODE>isamchk</CODE>) unless a huge number of
records are deleted and you want to return free disk space to the operating
system.
<LI>

Usually requires more disk space than dynamic tables.
</UL>

<P>
<STRONG>Dynamic tables</STRONG>

</P>

<UL>
<LI>

This format is used if the table contains any <CODE>VARCHAR</CODE>, <CODE>BLOB</CODE>
or <CODE>TEXT</CODE> columns.
<LI>

All string columns are dynamic (except those with a length less than 4).
<LI>

Each record is preceded by a bitmap indicating which columns are empty
(<CODE>"</CODE>) for string columns, or zero for numeric columns (this isn't the
same as columns containing <CODE>NULL</CODE> values).  If a string column has a
length of zero after removal of trailing spaces, or a numeric column has a
value of zero, it is marked in the bit map and not saved to disk.  Non-empty
strings are saved as a length byte plus the string contents.
<LI>

Usually takes much less disk space than fixed-length tables.
<LI>

Each record uses only as much space as is required. If a record becomes
larger, it is split into as many pieces as required.  This results in record
fragmentation.
<LI>

If you update a row with information that extends the row length, the row
will be fragmented.  In this case, you may have to run <CODE>isamchk -r</CODE> from
time to time to get better performance.
Use <CODE>isamchk -ei tbl_name</CODE> for some statistics.
<LI>

Not as easy to reconstruct after a crash, because a record may be fragmented
into many pieces and a link (fragment) may be missing.
<LI>

The expected row length for dynamic sized records is:


<PRE>
3
+ (number of columns + 7) / 8
+ (number of char columns)
+ packed size of numeric columns
+ length of strings
+ (number of NULL columns + 7) / 8
</PRE>

There is a penalty of 6 bytes for each link. A dynamic record is linked
whenever an update causes an enlargement of the record. Each new link will be
at least 20 bytes, so the next enlargement will probably go in the same link.
If not, there will be another link. You may check how many links there are
with <CODE>isamchk -ed</CODE>. All links may be removed with <CODE>isamchk -r</CODE>.
</UL>

<P>
<STRONG>Compressed tables</STRONG>

</P>

<UL>
<LI>

A read-only table made with the <CODE>pack_isam</CODE> utility. All customers
with extended <STRONG>MySQL</STRONG> email support are entitled to a copy of
<CODE>pack_isam</CODE> for their internal usage.
<LI>

The uncompress code exists in all <STRONG>MySQL</STRONG> distributions so that even
customers who don't have <CODE>pack_isam</CODE> can read tables that were compressed
with <CODE>pack_isam</CODE> (as long as the table was compressed on the same
platform).
<LI>

Takes very little disk space. Minimises disk usage.
<LI>

Each record is compressed separately (very little access overhead).  The
header for a record is fixed (1-3 bytes) depending on the biggest record in the
table.  Each column is compressed differently. Some of the compression types
are:

<UL>
<LI>

There is usually a different Huffman table for each column.
<LI>

Suffix space compression.
<LI>

Prefix space compression.
<LI>

Numbers with value <CODE>0</CODE> are stored using 1 bit.
<LI>

If values in an integer column have a small range, the column is stored using
the smallest possible type. For example, a <CODE>BIGINT</CODE> column (8 bytes) may
be stored as a <CODE>TINYINT</CODE> column (1 byte) if all values are in the range
<CODE>0</CODE> to <CODE>255</CODE>.
<LI>

If a column has only a small set of possible values, the column type is
converted to <CODE>ENUM</CODE>.
<LI>

A column may use a combination of the above compressions.
</UL>

<LI>

Can handle fixed or dynamic length records, but not <CODE>BLOB</CODE> or <CODE>TEXT</CODE>
columns.
<LI>

Can be uncompressed with <CODE>isamchk</CODE>.
</UL>

<P>
<STRONG>MySQL</STRONG> can support different index types, but the normal type is
NISAM.  This is a B-tree index and you can roughly calculate the size for the
index file as <CODE>(key_length+4)*0.67</CODE>, summed over all keys.  (This is for
the worst case when all keys are inserted in sorted order.)

</P>
<P>
String indexes are space compressed. If the first index part is a string, it
will also be prefix compressed.  Space compression makes the index file
smaller if the string column has a lot of trailing space or is a <CODE>VARCHAR</CODE>
column that is not always used to the full length. Prefix compression helps
if there are many strings with an identical prefix.

</P>


<H2><A NAME="Table_types" HREF="manual_toc.html#Table_types">10.17  <STRONG>MySQL</STRONG> table types.</A></H2>

<P>
Table types are introduced in <STRONG>MySQL</STRONG> 3.23!

</P>
<P>
When you create a new table, you can tell <STRONG>MySQL</STRONG> which table type it
should use for the table.  <STRONG>MySQL</STRONG> will always create a <CODE>.frm</CODE>
file to hold the table and column definitions.  Depending on the table type
the index and data will be stored in other files.

</P>
<P>
You can convert tables between different types with the <CODE>ALTER TABLE</CODE>
statement. See section <A HREF="manual.html#ALTER_TABLE">7.7  <CODE>ALTER TABLE</CODE> syntax</A>.

</P>

<UL>
<LI><CODE>ISAM</CODE>

This is the original <STRONG>MySQL</STRONG> table type.  This uses a <CODE>B-tree</CODE> index.
The index is stored in a file with the <CODE>.ISM</CODE> extension and the data is
stored in file with the <CODE>.ISD</CODE> extension.  You can check/repair
<CODE>ISAM</CODE> tables with the <CODE>isamchk</CODE> utility. See section <A HREF="manual.html#Crash_recovery">13.4  Using <CODE>isamchk</CODE> for crash recovery</A>.
<CODE>ISAM</CODE> tables are not binary portable across OS/Platforms.

<CODE>ISAM</CODE> has the following features/properties:


<UL>
<LI>Compressed and fixed length keys

<LI>Fixed and dynamic record length

<LI>16 keys with 16 key parts / key

<LI>Max key length 256 (default)

<LI>Data is stored in machine format;  Fast but is machine/OS dependent.

</UL>

<LI><CODE>MyISAM</CODE>

<CODE>MyISAM</CODE> is the default table type in <STRONG>MySQL</STRONG> 3.23. It's based
on the <CODE>ISAM</CODE> code and has a lot of useful extensions.

The index is stored in a file with the <CODE>.MYI</CODE> extension and the data is
stored in file with the <CODE>.MYD</CODE> extension.  You can check/repair
<CODE>ISAM</CODE> tables with the <CODE>myisamchk</CODE> utility.
See section <A HREF="manual.html#Crash_recovery">13.4  Using <CODE>isamchk</CODE> for crash recovery</A> 

The following is new in <CODE>MyISAM</CODE>:


<UL>
<LI>

Supports for big files (63 bit) on OSes that support big files.
<LI>

All data are stored with low byte first.  This makes the data machine
and OS independent.
<LI>

All number keys are stored with high byte first to give better compression.
<LI>

Internal handling of one <CODE>AUTO_INCREMENT</CODE> column.  <CODE>MyISAM</CODE>
will automatically update this on <CODE>INSERT/UPDATE</CODE>.  The
<CODE>AUTO_INCREMENT</CODE> value can be reset with <CODE>myisamchk</CODE>.
This will make <CODE>AUTO_INCREMENT</CODE> columns faster and old numbers
will not be reused.
<LI>

Maximum key length is now 500 by default.  In cases of keys longer than 250,
a bigger key block size than the default of 1024 bytes is used for this key.
<LI>

Maximum number of keys/table enlarged to 32 as default. This can be
enlarged to 64 without having to recompile <CODE>myisamchk</CODE>.
<LI>

There is a flag in the <CODE>MyISAM</CODE> file that indicates whether or not the
table was closed correctly.  This will soon be used for automatic repair
in the <STRONG>MySQL</STRONG> server.
<LI>

<CODE>myisamchk</CODE> will now mark tables as checked. <CODE>myisamchk
--fast</CODE> will only check those tables that don't have this mark.
<LI>

<CODE>myisamchk -a</CODE> stores statistics for key parts (and not only for
whole keys as in <CODE>NISAM</CODE>).
<LI>

Dynamic size rows will now be much less fragmented when mixing deletes
with updates and inserts.  This is done by automatically combining adjacent
deleted blocks and by extending blocks if the next block is deleted.
<LI>

<CODE>myisampack</CODE> (called <CODE>pack_isam</CODE> in <CODE>NISAM</CODE>) can pack
<CODE>BLOB</CODE> and <CODE>VARCHAR</CODE>columns.
</UL>

<CODE>MyISAM</CODE> also supports the following things, which <STRONG>MySQL</STRONG>
will be able to use in the near future.


<UL>
<LI>

<CODE>BLOB</CODE> and <CODE>TEXT</CODE> columns can be indexed.
<LI>

Support for a true <CODE>VARCHAR</CODE> type; A <CODE>VARCHAR</CODE> column starts
with a length stored in 2 bytes.
<LI>

Tables with <CODE>VARCHAR</CODE> may have fixed or dynamic record length.
<LI>

<CODE>VARCHAR</CODE> and <CODE>CHAR</CODE> may be up to 64K.
All key segments have their own language definition. This will enable
<STRONG>MySQL</STRONG> to have different language definitions per column.
<LI>

<CODE>NULL</CODE> values are allowed in indexed columns.  This takes 0-1 bytes/key.
<LI>

A hashed computed index can be used for <CODE>UNIQUE</CODE>; This will allow
you to have <CODE>UNIQUE</CODE> on any combination of columns in a table. (You
can't search on a <CODE>UNIQUE</CODE> computed index, however.)
</UL>

<LI><CODE>HEAP</CODE>

<CODE>HEAP</CODE> tables use a hashed index and are stored in memory.
This makes them very fast, but if <STRONG>MySQL</STRONG> crashes you will lose all
data stored in them.  <CODE>HEAP</CODE> is very usable as temporary tables!


<PRE>
CREATE TABLE test TYPE=HEAP SELECT ip,SUM(downloads) as down FROM log_table GROUP BY ip;
SELECT COUNT(ip),AVG(down) from test;
drop table test;
</PRE>

Here are some things you should consider when you use <CODE>HEAP</CODE> tables:


<UL>
<LI>

You should always use specify <CODE>MAX_ROWS</CODE> in the <CODE>CREATE</CODE> statement 
to ensure that you accidently do not use all memory.
<LI>

Indexes will only be used with <CODE>=</CODE> and <CODE>&#60;=&#62;</CODE> (but are VERY fast).
<LI>

<CODE>HEAP</CODE> tables uses a fixed record length format.
<LI>

<CODE>HEAP</CODE> doesn't support <CODE>BLOB/TEXT</CODE> columns.
<LI>

<CODE>HEAP</CODE> doesn't support <CODE>AUTO_INCREMENT</CODE> columns.
<LI>

<CODE>HEAP</CODE> doesn't support an index on a <CODE>NULL</CODE> column.
<LI>

You can have non-unique keys in a <CODE>HEAP</CODE> table (not that normal
with hashed tables).
<LI>

<CODE>HEAP</CODE> tables are shared between all clients (just like any other table).
<LI>

Data for <CODE>HEAP</CODE> tables are allocated in small blocks. The tables are
100% dynamic (on inserting). No overflow areas and no extra key space
is needed.  Deleted rows are put in a linked list and will be reused
when you insert new data into the table.
<LI>

To free memory, you should execute <CODE>DELETE FROM heap_table</CODE> or
<CODE>DROP TABLE heap_table</CODE>.
<LI>

To ensure that you accidentally don't do anything stupid, you can't create
<CODE>HEAP</CODE> tables bigger than <CODE>max_heap_table_size</CODE>.
</UL>

</UL>



<H1><A NAME="Benchmarks" HREF="manual_toc.html#Benchmarks">11  The <STRONG>MySQL</STRONG> benchmark suite</A></H1>

<P>
This should contain a technical description of the <STRONG>MySQL</STRONG>
benchmark suite (and <CODE>crash-me</CODE>) but that description is not
written yet. Currently, you should look at the code and results in the
<TT>`bench'</TT> directory in the distribution (and of course on the web
page at <a HREF="http://www.mysql.com/crash-me-choose.htmy">http://www.mysql.com/crash-me-choose.htmy</a>).

</P>
<P>
It is meant to be a benchmark that will tell any user what things a
given SQL implementation performs well or poorly at.

</P>

<P>
<CODE>crash-me</CODE> tries to determine what features a database supports and what
its capabilities and limitations are by actually running queries. For
example, it determines:

</P>

<UL>
<LI>

What column types are supported
<LI>

How many indexes are supported
<LI>

What functions are supported
<LI>

How big a query can be
<LI>

How big a <CODE>VARCHAR</CODE> column can be
</UL>



<H1><A NAME="Tools" HREF="manual_toc.html#Tools">12  <STRONG>MySQL</STRONG> Utilites</A></H1>

<P>
<A NAME="IDX611"></A>


<H2><A NAME="Programs" HREF="manual_toc.html#Programs">12.1  Overview of the different <STRONG>MySQL</STRONG> programs</A></H2>

<P>
All <STRONG>MySQL</STRONG> clients that communicate with the server using the
<CODE>mysqlclient</CODE> library use the following environment variables:

</P>
<P>
<A NAME="IDX612"></A>
<A NAME="IDX613"></A>
<A NAME="IDX614"></A>
<A NAME="IDX615"></A>
<A NAME="IDX616"></A>
<A NAME="IDX617"></A>
<A NAME="IDX618"></A>
<A NAME="IDX619"></A>
<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><STRONG>Name</STRONG> </TD><TD> <STRONG>Description</STRONG>
</TR NOSAVE>
<TR><TD><CODE>MYSQL_UNIX_PORT</CODE> </TD><TD> The default socket; used for connections to <CODE>localhost</CODE>
</TR NOSAVE>
<TR><TD><CODE>MYSQL_TCP_PORT</CODE> </TD><TD> The default TCP/IP port
</TR NOSAVE>
<TR><TD><CODE>MYSQL_PWD</CODE> </TD><TD> The default password
</TR NOSAVE>
<TR><TD><CODE>MYSQL_DEBUG</CODE> </TD><TD> Debug-trace options when debugging
</TR NOSAVE>
<TR><TD><CODE>TMPDIR</CODE> </TD><TD> The directory where temporary tables/files are created
</TR>
</TABLE>

</P>
<P>
Use of <CODE>MYSQL_PWD</CODE> is insecure.
See section <A HREF="manual.html#Connecting">6.3  Connecting to the <STRONG>MySQL</STRONG> server</A>.

</P>
<P>
<A NAME="IDX620"></A>
<A NAME="IDX621"></A>
<A NAME="IDX622"></A>
<A NAME="IDX623"></A>
<A NAME="IDX624"></A>
<A NAME="IDX625"></A>
<A NAME="IDX626"></A>
The <TT>`mysql'</TT> client uses the file named in the <CODE>MYSQL_HISTFILE</CODE>
environment variable to save the command line history. The default value for
the history file is <TT>`$HOME/.mysql_history'</TT>, where <CODE>$HOME</CODE> is the
value of the <CODE>HOME</CODE> environment variable.

</P>
<P>
All <STRONG>MySQL</STRONG> programs take many different options. However, every
<STRONG>MySQL</STRONG> program provides a <CODE>--help</CODE> option that you can use
to get a full description of the program's different options. For example, try
<CODE>mysql --help</CODE>.

</P>
<P>
You can override default options for all standard client programs with an
option file. section <A HREF="manual.html#Option_files">4.15.4  Option files</A>.

</P>
<P>
The list below briefly describes the <STRONG>MySQL</STRONG> programs:

</P>
<DL COMPACT>

<DT><CODE>isamchk</CODE>
<DD>
<A NAME="IDX627"></A>
 
Utility to describe, check, optimize and repair <STRONG>MySQL</STRONG> tables.
Because <CODE>isamchk</CODE> has many functions, it is described in its own
chapter.
See section <A HREF="manual.html#Maintenance">13  Maintaining a <STRONG>MySQL</STRONG> installation</A>.

<A NAME="IDX628"></A>
<DT><CODE>make_binary_release</CODE>
<DD>
Makes a binary release of a compiled <STRONG>MySQL</STRONG>. This could be sent
by FTP to <TT>`/pub/mysql/Incoming'</TT> on <CODE>ftp.tcx.se</CODE> for the
convenience of other <STRONG>MySQL</STRONG> users.

<A NAME="IDX629"></A>
<DT><CODE>msql2mysql</CODE>
<DD>
A shell script that converts <CODE>mSQL</CODE> programs to <STRONG>MySQL</STRONG>. It doesn't
handle all cases, but it gives a good start when converting.

<A NAME="IDX630"></A>
<A NAME="IDX631"></A>
<DT><CODE>mysql</CODE>
<DD>
<CODE>mysql</CODE> is a simple SQL shell (with GNU <CODE>readline</CODE> capabilities).
It supports interactive and non-interactive use. When used interactively,
query results are presented in an ASCII-table format. When used
non-interactively (e.g., as a filter), the result is presented in
tab-separated format.  (The output format can be changed using command-line
options.)  You can run scripts simply like this:


<PRE>
shell&#62; mysql database &#60; script.sql &#62; output.tab
</PRE>

If you have problems due to insufficient memory in the client, use the
<CODE>--quick</CODE> option!  This forces <CODE>mysql</CODE> to use
<CODE>mysql_use_result()</CODE> rather than <CODE>mysql_store_result()</CODE> to retrieve
the result set.

<A NAME="IDX632"></A>
<DT><CODE>mysqlaccess</CODE>
<DD>
A script that checks the access privileges for a host, user and database
combination.

<A NAME="IDX633"></A>
<DT><CODE>mysqladmin</CODE>
<DD>
Utility for performing administrative operations, such as creating or
dropping databases, reloading the grant tables, flushing tables to disk and
reopening log files.  <CODE>mysqladmin</CODE> can also be used to retrieve version,
process and status information from the server.
See section <A HREF="manual.html#mysqladmin">12.2  Administering a <STRONG>MySQL</STRONG> server</A>.

<A NAME="IDX634"></A>
<DT><CODE>mysqlbug</CODE>
<DD>
The <STRONG>MySQL</STRONG> bug report script.  This script should always be used when
filing a bug report to the <STRONG>MySQL</STRONG> list.

<A NAME="IDX635"></A>
<DT><CODE>mysqld</CODE>
<DD>
The SQL daemon. This should always be running.

<A NAME="IDX636"></A>
<DT><CODE>mysqldump</CODE>
<DD>
Dumps a <STRONG>MySQL</STRONG> database into a file as SQL statements or
as tab-separated text files. Enhanced freeware originally by Igor Romanenko.
See section <A HREF="manual.html#mysqldump">12.3  Dumping the structure and data from <STRONG>MySQL</STRONG> databases and tables</A>.

<A NAME="IDX637"></A>
<DT><CODE>mysqlimport</CODE>
<DD>
Imports text files into their respective tables using <CODE>LOAD DATA
INFILE</CODE>. See section <A HREF="manual.html#mysqlimport">12.4  Importing data from text files</A>.

<A NAME="IDX638"></A>
<DT><CODE>mysqlshow</CODE>
<DD>
Displays information about databases, tables, columns and indexes.

<A NAME="IDX639"></A>
<DT><CODE>mysql_install_db</CODE>
<DD>
Creates the <STRONG>MySQL</STRONG> grant tables with default privileges. This is
usually executed only once, when first installing <STRONG>MySQL</STRONG>
on a system.

<A NAME="IDX640"></A>
<DT><CODE>replace</CODE>
<DD>
A utility program that is used by <CODE>msql2mysql</CODE>, but that has more
general applicability as well.  <CODE>replace</CODE> changes strings in place in
files or on the standard input. Uses a finite state machine to match longer
strings first. Can be used to swap strings. For example, this command
swaps <CODE>a</CODE> and <CODE>b</CODE> in the given files:


<PRE>
shell&#62; replace a b b a -- file1 file2 ...
</PRE>

<A NAME="IDX641"></A>

<DT><CODE>safe_mysqld</CODE>
<DD>
A script that starts the <CODE>mysqld</CODE> daemon with some safety features, such
as restarting the server when an error occurs and logging runtime information
to a log file.
</DL>



<H2><A NAME="mysqladmin" HREF="manual_toc.html#mysqladmin">12.2  Administering a <STRONG>MySQL</STRONG> server</A></H2>

<P>
Utility for performing administrative operations. The syntax is:

</P>

<PRE>
shell&#62; mysqladmin [OPTIONS] command [command-option] command ...
</PRE>

<P>
You can get a list of the options your version of <CODE>mysqladmin</CODE> supports
by executing <CODE>mysqladmin --help</CODE>.

</P>
<P>
The current <CODE>mysqladmin</CODE> supports the following commands:

</P>
<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD>create databasename </TD><TD> Create a new database.
</TR NOSAVE>
<TR><TD>drop databasename </TD><TD> Delete a database and all its tables.
</TR NOSAVE>
<TR><TD>extended-status </TD><TD> Gives an extended status message from the server.
</TR NOSAVE>
<TR><TD>flush-hosts </TD><TD> Flush all cached hosts.
</TR NOSAVE>
<TR><TD>flush-logs </TD><TD> Flush all logs.
</TR NOSAVE>
<TR><TD>flush-tables </TD><TD> Flush all tables.
</TR NOSAVE>
<TR><TD>flush-privileges </TD><TD> Reload grant tables (same as reload)
</TR NOSAVE>
<TR><TD>kill id,id,... </TD><TD> Kill mysql threads.
</TR NOSAVE>
<TR><TD>password </TD><TD> new-password Change old password to new-password
</TR NOSAVE>
<TR><TD>ping </TD><TD> Check if mysqld is alive
</TR NOSAVE>
<TR><TD>processlist </TD><TD> Show list of active threads in server
</TR NOSAVE>
<TR><TD>reload </TD><TD> Reload grant tables
</TR NOSAVE>
<TR><TD>refresh </TD><TD> Flush all tables and close and open logfiles
</TR NOSAVE>
<TR><TD>shutdown </TD><TD> Take server down
</TR NOSAVE>
<TR><TD>status </TD><TD> Gives a short status message from the server
</TR NOSAVE>
<TR><TD>variables </TD><TD> Prints variables available
</TR NOSAVE>
<TR><TD>version </TD><TD> Get version info from server
</TR>
</TABLE>

<P>
All commands can be shortened to their unique prefix.  For example:

</P>

<PRE>
shell&#62; mysqladmin proc stat
+----+-------+-----------+----+-------------+------+-------+------+
| Id | User  | Host      | db | Command     | Time | State | Info |
+----+-------+-----------+----+-------------+------+-------+------+
| 6  | monty | localhost |    | Processlist | 0    |       |      |
+----+-------+-----------+----+-------------+------+-------+------+
Uptime: 10077  Threads: 1  Questions: 9  Slow queries: 0  Opens: 6  Flush tables: 1  Open tables: 2  Memory in use: 1092K  Max memory used: 1116K
</PRE>

<P>
The <CODE>mysqladmin status</CODE> command result has the following columns:

</P>
<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD>Uptime </TD><TD> Number of seconds the <STRONG>MySQL</STRONG> server have been up
</TR NOSAVE>
<TR><TD>Threads </TD><TD> Number of active threads (clients)
</TR NOSAVE>
<TR><TD>Questions </TD><TD> Number of questions from clients since <CODE>mysqld</CODE> was started
</TR NOSAVE>
<TR><TD>Slow queries </TD><TD> Queries that has taken more than <CODE>long_query_time</CODE> seconds
</TR NOSAVE>
<TR><TD>Opens </TD><TD> How many tables <CODE>mysqld</CODE> has opened.
</TR NOSAVE>
<TR><TD>Flush tables </TD><TD> Number of <CODE>flush ...</CODE>, <CODE>refresh</CODE> and <CODE>reload</CODE> commands.
</TR NOSAVE>
<TR><TD>Open tables </TD><TD> Number of tables that are open now
</TR NOSAVE>
<TR><TD>Memory in use </TD><TD> Memory allocated directly by the mysqld code (only available when <STRONG>MySQL</STRONG> is compiled with --with-debug)
</TR NOSAVE>
<TR><TD>Max memory used </TD><TD> Maximum memory allocated directly by the mysqld code (only available when <STRONG>MySQL</STRONG> is compiled with --with-debug)
</TR>
</TABLE>



<H2><A NAME="mysqldump" HREF="manual_toc.html#mysqldump">12.3  Dumping the structure and data from <STRONG>MySQL</STRONG> databases and tables</A></H2>

<P>
Utility to dump a database or a collection of database for backup or
for transferring the data to another SQL server.  The dump will contain SQL
statements to create the table and/or populate the table.

</P>

<PRE>
shell&#62; mysqldump [OPTIONS] database [tables]
</PRE>

<P>
If you don't give any tables, the whole database will be dumped.

</P>
<P>
You can get a list of the options your version of <CODE>mysqldump</CODE> supports
by executing <CODE>mysqldump --help</CODE>.

</P>
<P>
Note that if you run <CODE>mysqldump</CODE> without <CODE>--quick</CODE> or
<CODE>--opt</CODE>, <CODE>mysqldump</CODE> will load the whole result set into
memory before dumping the result.  This will probably be a problem if
you are dumping a big database.

</P>
<P>
<CODE>mysqldump</CODE> supports the following options:

</P>
<DL COMPACT>

<DT><CODE>--add-locks</CODE>
<DD>
Add <CODE>LOCK TABLES</CODE> before and <CODE>UNLOCK TABLE</CODE> after each table dump.
(To get faster inserts into <STRONG>MySQL</STRONG>).
<DT><CODE>--add-drop-table</CODE>
<DD>
Add a <CODE>drop table</CODE> before each create statement.
<DT><CODE>--allow-keywords</CODE>
<DD>
Allow creation of column names that are keywords.  This works by
prefixing each column name with the table name.
<DT><CODE>-c, --complete-insert</CODE>
<DD>
Use complete insert statements (with column names).
<DT><CODE>-C, --compress</CODE>
<DD>
Compress all information between the client and the server if both support
compression.
<DT><CODE>--delayed</CODE>
<DD>
Insert rows with the <CODE>INSERT DELAYED</CODE> command.
<DT><CODE>-e, --extended-insert</CODE>
<DD>
Use the new multiline <CODE>INSERT</CODE> syntax. (Gives more compact and
faster inserts statements)
<DT><CODE>-#, --debug[=option_string]</CODE>
<DD>
Trace usage of the program (for debugging).
<DT><CODE>--help</CODE>
<DD>
Display a help message and exit.
<DT><CODE>--fields-terminated-by=...</CODE>
<DD>
<DT><CODE>--fields-enclosed-by=...</CODE>
<DD>
<DT><CODE>--fields-optionally-enclosed-by=...</CODE>
<DD>
<DT><CODE>--fields-escaped-by=...</CODE>
<DD>
<DT><CODE>--fields-terminated-by=...</CODE>
<DD>
These options are used with the <CODE>-T</CODE> option and have the same
meaning as the corresponding clauses for <CODE>LOAD DATA INFILE</CODE>.
See section <A HREF="manual.html#LOAD_DATA">7.15  <CODE>LOAD DATA INFILE</CODE> syntax</A>.
<DT><CODE>-F, --flush-logs</CODE>
<DD>
Flush logs file in the <STRONG>MySQL</STRONG> server before starting the dump.
<DT><CODE>-f, --force,</CODE>
<DD>
Continue even if we get an SQL error during a table dump.
<DT><CODE>-h, --host=..</CODE>
<DD>
Dump data from the <STRONG>MySQL</STRONG> server on the named host. The default host
is <CODE>localhost</CODE>.
<DT><CODE>-l, --lock-tables.</CODE>
<DD>
Lock all tables for starting the dump.
<DT><CODE>-t, --no-create-info</CODE>
<DD>
Don't write table creation info (The <CODE>CREATE TABLE</CODE> statment)
<DT><CODE>-d, --no-data</CODE>
<DD>
Don't write any row information for the table.  This is very useful if you
just want to get a dump of the structure for a table!
<DT><CODE>--opt</CODE>
<DD>
Same as <CODE>--quick --add-drop-table --add-locks --extended-insert
--use-locks</CODE>.  Should give you the fastest possible dump for reading
into a <STRONG>MySQL</STRONG> server.
<DT><CODE>-pyour_pass, --password[=your_pass]</CODE>
<DD>
The password to use when connecting to the server. If you specify
no <SAMP>`=your_pass'</SAMP> part,
<CODE>mysqldump</CODE> solicits the password from the terminal.
<DT><CODE>-P port_num, --port=port_num</CODE>
<DD>
The TCP/IP port number to use for connecting to a host.  (This is used for
connections to hosts other than <CODE>localhost</CODE>, for which Unix sockets are
used.)
<DT><CODE>-q, --quick</CODE>
<DD>
Don't buffer query, dump directly to stdout;  Uses <CODE>mysql_use_result()</CODE>
to do this.
<DT><CODE>-S /path/to/socket, --socket=/path/to/socket</CODE>
<DD>
The socket file to use when connecting to <CODE>localhost</CODE> (which is the
default host).
<DT><CODE>-T, --tab=path-to-some-directory</CODE>
<DD>
Creates a <CODE>table_name.sql</CODE> file, that conntains the SQL CREATE commands,
and a <CODE>table_name.txt</CODE> file, that contains the data, for each give table.
<STRONG>NOTE</STRONG>: This only works if <CODE>mysqldump</CODE> is run on the same
machine as the <CODE>mysqld</CODE> daemon.  The format of the <CODE>.txt</CODE> file
is made according to the <CODE>--fields-xxx</CODE> and <CODE>--lines--xxx</CODE> options.
<DT><CODE>-u user_name, --user=user_name</CODE>
<DD>
The <STRONG>MySQL</STRONG> user name to use when connecting to the server. The
default value is your Unix login name.
<DT><CODE>-O var=option, --set-variable var=option</CODE>
<DD>
Set the value of a variable.  The possible variables are listed below.
<DT><CODE>-v, --verbose</CODE>
<DD>
Verbose mode.  Print out more information what the program does.
<DT><CODE>-V, --version</CODE>
<DD>
Print version information and exit.
<DT><CODE>-w, --where='where-condition'</CODE>
<DD>
Dump only selected records; Note that QUOTES are mandatory!


<PRE>
"--where=user='jimf'" "-wuserid&#62;1" "-wuserid&#60;1"
</PRE>

</DL>

<P>
The most normal use of <CODE>mysqldump</CODE> is probably for making a backup of
whole database:

</P>

<PRE>
mysqldump --opt database &#62; backup-file.sql
</PRE>

<P>
But it's also very useful to populate another <STRONG>MySQL</STRONG> server with
information from a databas:

</P>

<PRE>
mysqldump --opt database | mysql --host=remote-host -C database
</PRE>



<H2><A NAME="mysqlimport" HREF="manual_toc.html#mysqlimport">12.4  Importing data from text files</A></H2>

<P>
<CODE>mysqlimport</CODE> provides a command line interface to the <CODE>LOAD DATA
INFILE</CODE> SQL statement.  Most options to <CODE>mysqlimport</CODE> correspond
directly to the same options to <CODE>LOAD DATA INFILE</CODE>.
See section <A HREF="manual.html#LOAD_DATA">7.15  <CODE>LOAD DATA INFILE</CODE> syntax</A>.

</P>
<P>
<CODE>mysqlimport</CODE> is invoked like this:

</P>

<PRE>
shell&#62; mysqlimport [options] filename ...
</PRE>

<P>
For each text file named on the command line,
<CODE>mysqlimport</CODE> strips any extension from the filename and uses the result
to determine which table to import the file's contents into.  For example,
files named <TT>`patient.txt'</TT>, <TT>`patient.text'</TT> and <TT>`patient'</TT> would
all be imported into a table named <CODE>patient</CODE>.

</P>
<P>
<CODE>mysqlimport</CODE> supports the following options:

</P>
<DL COMPACT>

<DT><CODE>-C, --compress</CODE>
<DD>
Compress all information between the client and the server if both support
compression.

<DT><CODE>-#, --debug[=option_string]</CODE>
<DD>
Trace usage of the program (for debugging).

<DT><CODE>-d, --delete</CODE>
<DD>
Empty the table before importing the text file.

<DT><CODE>--fields-terminated-by=...</CODE>
<DD>
<DT><CODE>--fields-enclosed-by=...</CODE>
<DD>
<DT><CODE>--fields-optionally-enclosed-by=...</CODE>
<DD>
<DT><CODE>--fields-escaped-by=...</CODE>
<DD>
<DT><CODE>--fields-terminated-by=...</CODE>
<DD>
These options have the same meaning as the corresponding clauses for
<CODE>LOAD DATA INFILE</CODE>. See section <A HREF="manual.html#LOAD_DATA">7.15  <CODE>LOAD DATA INFILE</CODE> syntax</A>.

<DT><CODE>-f, --force</CODE>
<DD>
Ignore errors.  For example, if a table for a text file doesn't exist,
continue processing any remaining files.  Without <CODE>--force</CODE>,
<CODE>mysqlimport</CODE> exits if a table doesn't exist.

<DT><CODE>--help</CODE>
<DD>
Display a help message and exit.

<DT><CODE>-h host_name, --host=host_name</CODE>
<DD>
Import data to the <STRONG>MySQL</STRONG> server on the named host. The default host
is <CODE>localhost</CODE>.

<DT><CODE>-i, --ignore</CODE>
<DD>
See the description for the <CODE>--replace</CODE> option.

<DT><CODE>-l, --lock-tables</CODE>
<DD>
Lock <STRONG>ALL</STRONG> tables for writing before processing any text files. This
ensures that all tables are synchronized on the server.

<DT><CODE>-L, --local</CODE>
<DD>
Read input files from the client.  By default, text files are assumed to be on
the server if you connect to <CODE>localhost</CODE> (which is the default host).

<DT><CODE>-pyour_pass, --password[=your_pass]</CODE>
<DD>
The password to use when connecting to the server. If you specify
no <SAMP>`=your_pass'</SAMP> part,
<CODE>mysqlimport</CODE> solicits the password from the terminal.

<DT><CODE>-P port_num, --port=port_num</CODE>
<DD>
The TCP/IP port number to use for connecting to a host.  (This is used for
connections to hosts other than <CODE>localhost</CODE>, for which Unix sockets are
used.)

<DT><CODE>-r, --replace</CODE>
<DD>
The <CODE>--replace</CODE> and <CODE>--ignore</CODE> options control handling of input
records that duplicate existing records on unique key values.  If you specify
<CODE>--replace</CODE>, new rows replace existing rows that have the same unique key
value. If you specify <CODE>--ignore</CODE>, input rows that duplicate an existing
row on a unique key value are skipped.  If you don't specify either option, an
error occurs when a duplicate key value is found, and the rest of the text
file is ignored.

<DT><CODE>-s, --silent</CODE>
<DD>
Silent mode.  Write output only when errors occur.

<DT><CODE>-S /path/to/socket, --socket=/path/to/socket</CODE>
<DD>
The socket file to use when connecting to <CODE>localhost</CODE> (which is the
default host).

<DT><CODE>-u user_name, --user=user_name</CODE>
<DD>
The <STRONG>MySQL</STRONG> user name to use when connecting to the server. The
default value is your Unix login name.

<DT><CODE>-v, --verbose</CODE>
<DD>
Verbose mode.  Print out more information what the program does.

<DT><CODE>-V, --version</CODE>
<DD>
Print version information and exit.
</DL>

<P>
<A NAME="IDX642"></A>


<H2><A NAME="pack_isam" HREF="manual_toc.html#pack_isam">12.5  The <STRONG>MySQL</STRONG> compressed read-only table generator</A></H2>

<P>
<CODE>pack_isam</CODE> is an extra utility that you get when you order more than 10
licenses or extended support. Since <CODE>pack_isam</CODE> is distributed only in
binary form, <CODE>pack_isam</CODE> is available only on some platforms.

</P>
<P>
Of course, all future updates to <CODE>pack_isam</CODE> are included in the
price. <CODE>pack_isam</CODE> may at some time be included as standard when
we get some kind of turnover for <STRONG>MySQL</STRONG>.

</P>
<P>
<CODE>pack_isam</CODE> works by compressing each column in the table separately.
The information needed to decompress columns is read into memory when the
table is opened. This results in much better performance when accessing
individual records, since you only have to uncompress exactly one record, not
a much larger disk block like when using Stacker on MS-DOS.
Usually, <CODE>pack_isam</CODE> packs the data file 40%-70%.

</P>
<P>
<STRONG>MySQL</STRONG> uses memory mapping (<CODE>mmap()</CODE>) on compressed tables and
falls back to normal read/write file usage if <CODE>mmap()</CODE> doesn't work.

</P>
<P>
There are currently two limitations with <CODE>pack_isam</CODE>:

<UL>
<LI>

After packing, the table is read only.
<LI>

It can't pack <CODE>BLOB</CODE> columns, yet.
</UL>

<P>
Fixing these limitations is on our TODO list but with low priority.

</P>
<P>
<CODE>pack_isam</CODE> is invoked like this:

</P>

<PRE>
shell&#62; pack_isam [options] filename ...
</PRE>

<P>
Each filename should be the name of an index (<TT>`.ISM'</TT>) file.  If you
are not in the database directory, you should specify the pathname to the
file.  It is permissible to omit the <TT>`.ISM'</TT> extension.

</P>
<P>
<CODE>pack_isam</CODE> supports the following options:

</P>
<DL COMPACT>

<DT><CODE>-b, --backup</CODE>
<DD>
Make a backup of the table as <CODE>tbl_name.OLD</CODE>.

<DT><CODE>-#, --debug=debug_options</CODE>
<DD>
Output debug log. The <CODE>debug_options</CODE> string often is
<CODE>'d:t:o,filename'</CODE>.

<DT><CODE>-f, --force</CODE>
<DD>
Force packing of the table even if it becomes bigger or if the temporary file
exists.  (<CODE>pack_isam</CODE> creates a temporary file named <TT>`tbl_name.TMD'</TT>
while it compresses the table.  If you kill <CODE>pack_isam</CODE>, the <TT>`.TMD'</TT>
file may not be deleted.  Normally, <CODE>pack_isam</CODE> exits with an error if
it finds that <TT>`tbl_name.TMD'</TT> exists.  With <CODE>--force</CODE>,
<CODE>pack_isam</CODE> packs the table anyway.

<DT><CODE>-?, --help</CODE>
<DD>
Display a help message and exit.

<DT><CODE>-j big_tbl_name, --join=big_tbl_name</CODE>
<DD>
Join all tables named on the command line into a single table
<CODE>big_tbl_name</CODE>.  All tables that are to be combined
MUST be identical (same column names and types, same indexes, etc.)

<DT><CODE>-p #, --packlength=#</CODE>
<DD>
Specify the record length storage size, in bytes.  The value should be 1, 2
or 3.  (<CODE>pack_isam</CODE> stores all rows with length pointers of 1, 2 or 3
bytes.  In most normal cases, <CODE>pack_isam</CODE> can determine the right length
value before it begins packing the file, but it may notice during the packing
process that it could have used a shorter length. In this case,
<CODE>pack_isam</CODE> will print a note that the next time you pack the same file,
you could use a shorter record length.)

<DT><CODE>-s, --silent</CODE>
<DD>
Silent mode.  Write output only when errors occur.

<DT><CODE>-t, --test</CODE>
<DD>
Don't pack table, only test packing it.

<DT><CODE>-T dir_name, --tmp_dir=dir_name</CODE>
<DD>
Use the named directory as the location in which to write the temporary table.

<DT><CODE>-v, --verbose</CODE>
<DD>
Verbose mode.  Write info about progress and packing result.

<DT><CODE>-V, --version</CODE>
<DD>
Display version information and exit.

<DT><CODE>-w, --wait</CODE>
<DD>
Wait and retry if table is in use.
If the <CODE>mysqld</CODE> server was invoked with the <CODE>--skip-locking</CODE>
option, it is not a good idea to invoke <CODE>pack_isam</CODE> if the table might
be updated during the packing process.
</DL>

<P>
The sequence of commands shown below illustrates a typical table compression
session:

</P>

<PRE>
shell&#62; ls -l station.*
-rw-rw-r--   1 monty    my         994128 Apr 17 19:00 station.ISD
-rw-rw-r--   1 monty    my          53248 Apr 17 19:00 station.ISM
-rw-rw-r--   1 monty    my           5767 Apr 17 19:00 station.frm

shell&#62; isamchk -dvv station

ISAM file:     station
Isam-version:  2
Creation time: 1996-03-13 10:08:58
Recover time:  1997-02-02  3:06:43
Data records:              1192  Deleted blocks:              0
Datafile: Parts:           1192  Deleted data:                0
Datafile pointer (bytes):     2  Keyfile pointer (bytes):     2
Max datafile length:   54657023  Max keyfile length:   33554431
Recordlength:               834
Record format: Fixed length

table description:
Key Start Len Index   Type                       Root  Blocksize    Rec/key
1   2     4   unique  unsigned long              1024       1024          1
2   32    30  multip. text                      10240       1024          1

Field Start Length Type
1     1     1
2     2     4
3     6     4
4     10    1
5     11    20
6     31    1
7     32    30
8     62    35
9     97    35
10    132   35
11    167   4
12    171   16
13    187   35
14    222   4
15    226   16
16    242   20
17    262   20
18    282   20
19    302   30
20    332   4
21    336   4
22    340   1
23    341   8
24    349   8
25    357   8
26    365   2
27    367   2
28    369   4
29    373   4
30    377   1
31    378   2
32    380   8
33    388   4
34    392   4
35    396   4
36    400   4
37    404   1
38    405   4
39    409   4
40    413   4
41    417   4
42    421   4
43    425   4
44    429   20
45    449   30
46    479   1
47    480   1
48    481   79
49    560   79
50    639   79
51    718   79
52    797   8
53    805   1
54    806   1
55    807   20
56    827   4
57    831   4

shell&#62; pack_isam station.ISM
Compressing station.ISM: (1192 records)
- Calculating statistics

normal:     20  empty-space:      16  empty-zero:        12  empty-fill:  11
pre-space:   0  end-space:        12  table-lookups:      5  zero:         7
Original trees:  57  After join: 17
- Compressing file
87.14%

shell&#62; ls -l station.*
-rw-rw-r--   1 monty    my         127874 Apr 17 19:00 station.ISD
-rw-rw-r--   1 monty    my          55296 Apr 17 19:04 station.ISM
-rw-rw-r--   1 monty    my           5767 Apr 17 19:00 station.frm

shell&#62; isamchk -dvv station

ISAM file:     station
Isam-version:  2
Creation time: 1996-03-13 10:08:58
Recover time:  1997-04-17 19:04:26
Data records:              1192  Deleted blocks:              0
Datafile: Parts:           1192  Deleted data:                0
Datafilepointer (bytes):      3  Keyfile pointer (bytes):     1
Max datafile length:   16777215  Max keyfile length:     131071
Recordlength:               834
Record format: Compressed

table description:
Key Start Len Index   Type                       Root  Blocksize    Rec/key
1   2     4   unique  unsigned long             10240       1024          1
2   32    30  multip. text                      54272       1024          1

Field Start Length Type                         Huff tree  Bits
1     1     1      constant                             1     0
2     2     4      zerofill(1)                          2     9
3     6     4      no zeros, zerofill(1)                2     9
4     10    1                                           3     9
5     11    20     table-lookup                         4     0
6     31    1                                           3     9
7     32    30     no endspace, not_always              5     9
8     62    35     no endspace, not_always, no empty    6     9
9     97    35     no empty                             7     9
10    132   35     no endspace, not_always, no empty    6     9
11    167   4      zerofill(1)                          2     9
12    171   16     no endspace, not_always, no empty    5     9
13    187   35     no endspace, not_always, no empty    6     9
14    222   4      zerofill(1)                          2     9
15    226   16     no endspace, not_always, no empty    5     9
16    242   20     no endspace, not_always              8     9
17    262   20     no endspace, no empty                8     9
18    282   20     no endspace, no empty                5     9
19    302   30     no endspace, no empty                6     9
20    332   4      always zero                          2     9
21    336   4      always zero                          2     9
22    340   1                                           3     9
23    341   8      table-lookup                         9     0
24    349   8      table-lookup                        10     0
25    357   8      always zero                          2     9
26    365   2                                           2     9
27    367   2      no zeros, zerofill(1)                2     9
28    369   4      no zeros, zerofill(1)                2     9
29    373   4      table-lookup                        11     0
30    377   1                                           3     9
31    378   2      no zeros, zerofill(1)                2     9
32    380   8      no zeros                             2     9
33    388   4      always zero                          2     9
34    392   4      table-lookup                        12     0
35    396   4      no zeros, zerofill(1)               13     9
36    400   4      no zeros, zerofill(1)                2     9
37    404   1                                           2     9
38    405   4      no zeros                             2     9
39    409   4      always zero                          2     9
40    413   4      no zeros                             2     9
41    417   4      always zero                          2     9
42    421   4      no zeros                             2     9
43    425   4      always zero                          2     9
44    429   20     no empty                             3     9
45    449   30     no empty                             3     9
46    479   1                                          14     4
47    480   1                                          14     4
48    481   79     no endspace, no empty               15     9
49    560   79     no empty                             2     9
50    639   79     no empty                             2     9
51    718   79     no endspace                         16     9
52    797   8      no empty                             2     9
53    805   1                                          17     1
54    806   1                                           3     9
55    807   20     no empty                             3     9
56    827   4      no zeros, zerofill(2)                2     9
57    831   4      no zeros, zerofill(1)                2     9
</PRE>

<P>
The information printed by <CODE>pack_isam</CODE> is described below:

</P>
<DL COMPACT>

<DT><CODE>normal</CODE>
<DD>
The number of columns for which no extra packing is used.

<DT><CODE>empty-space</CODE>
<DD>
The number of columns containing
values that are only spaces; these will occupy 1 bit.

<DT><CODE>empty-zero</CODE>
<DD>
The number of columns containing
values that are only binary 0's; these will occupy 1 bit.

<DT><CODE>empty-fill</CODE>
<DD>
The number of integer columns that don't occupy the full byte range of their
type; these are changed to a smaller type (for example, an <CODE>INTEGER</CODE>
column may be changed to <CODE>MEDIUMINT</CODE>).

<DT><CODE>pre-space</CODE>
<DD>
The number of decimal columns that are stored with leading space. In this
case, each value will contain a count for the number of leading spaces.

<DT><CODE>end-space</CODE>
<DD>
The number of columns that have a lot of trailing space.  In this case, each
value will contain a count for the number of trailing spaces.

<DT><CODE>table-lookup</CODE>
<DD>
The column had only a small number of different values, and that were
converted to an <CODE>ENUM</CODE> before Huffman compression.

<DT><CODE>zero</CODE>
<DD>
The number of columns for which all values are zero.

<DT><CODE>Original trees</CODE>
<DD>
The initial number of Huffman trees.

<DT><CODE>After join</CODE>
<DD>
The number of distinct Huffman trees left after joining
trees to save some header space.
</DL>

<P>
After a table has been compressed, <CODE>isamchk -dvv</CODE> prints additional
information about each field:

</P>
<DL COMPACT>

<DT><CODE>Type</CODE>
<DD>
The field type may contain the following descriptors:

<DL COMPACT>

<DT><CODE>constant</CODE>
<DD>
All rows have the same value.

<DT><CODE>no endspace</CODE>
<DD>
Don't store endspace.

<DT><CODE>no endspace, not_always</CODE>
<DD>
Don't store endspace and don't do end space compression for all values.

<DT><CODE>no endspace, no empty</CODE>
<DD>
Don't store endspace. Don't store empty values.

<DT><CODE>table-lookup</CODE>
<DD>
The column was converted to an <CODE>ENUM</CODE>.

<DT><CODE>zerofill(n)</CODE>
<DD>
The most significant <CODE>n</CODE> bytes in the value are always 0 and are not
stored.

<DT><CODE>no zeros</CODE>
<DD>
Don't store zeros.

<DT><CODE>always zero</CODE>
<DD>
0 values are stored in 1 bit.
</DL>

<DT><CODE>Huff tree</CODE>
<DD>
The Huffman tree associated with the field

<DT><CODE>Bits</CODE>
<DD>
The number of bits used in the Huffman tree.
</DL>



<H1><A NAME="Maintenance" HREF="manual_toc.html#Maintenance">13  Maintaining a <STRONG>MySQL</STRONG> installation</A></H1>



<H2><A NAME="Table_maintenance" HREF="manual_toc.html#Table_maintenance">13.1  Using <CODE>isamchk</CODE> for table maintenance and crash recovery</A></H2>

<P>
To check/repair ISAM tables (<CODE>.ISM</CODE> and <CODE>.ISD</CODE>) you should use the
<CODE>isamchk</CODE> utility. To check/repair MyISAM tables (<CODE>.MYI</CODE> and <CODE>.MYD</CODE>)
you should use the <CODE>myisamchk</CODE> utility.
See section <A HREF="manual.html#Table_types">10.17  <STRONG>MySQL</STRONG> table types.</A>.

</P>
<P>
In the following text we will talk about <CODE>isamchk</CODE> but everything
also applies to <CODE>myisamchk</CODE>.

</P>
<P>
You can use the <CODE>isamchk</CODE> utility to get information about your database
tables, check and repair them or optimize them.  The following sections
describe how to invoke <CODE>isamchk</CODE> (including a description of its
options), how to set up a table maintenance schedule, and how to use
<CODE>isamchk</CODE> to perform its various functions.

</P>
<P>
If you run <CODE>mysqld</CODE> with <CODE>--skip-locking</CODE> (which is the default on
some systems, like Linux), you can't reliably use <CODE>isamchk</CODE> to
check a table when <CODE>mysqld</CODE> is using the same table.  If you
can be sure that no one is accessing the tables through <CODE>mysqld</CODE>
while you run <CODE>isamchk</CODE>, you only have to do <CODE>mysqladmin
flush-tables</CODE> before you start checking the tables.  If you can't
guarantee the above, then you must take down <CODE>mysqld</CODE> while you
check the tables.  If you run <CODE>isamchk</CODE> while <CODE>mysqld</CODE> is updating
the tables, you may get a warning that a table is corrupt even if it
isn't.

</P>
<P>
If you are not using <CODE>--skip-locking</CODE>, you can use <CODE>isamchk</CODE>
to check tables at any time.  While you do this, all clients that try
to update the table will wait until <CODE>isamchk</CODE> is ready before
continuing.

</P>
<P>
If you use <CODE>isamchk</CODE> to repair or optimize tables, you
<STRONG>MUST</STRONG> always ensure that the <CODE>mysqld</CODE> server is not using
the table (this also applies if you are using <CODE>--skip-locking</CODE>).
If you don't take down <CODE>mysqld</CODE> you should at least do a
<CODE>mysqladmin flush-tables</CODE> before you run <CODE>isamchk</CODE>.

</P>
<P>
You can in most cases also use the command <CODE>OPTIMIZE TABLES</CODE> to
optimize and repair tables, but this is not as fast or reliable (in case
of real fatal errors) as <CODE>isamchk</CODE>.  On the other hand,
<CODE>OPTIMIZE TABLE</CODE> is easier to use and you don't have to worry about
flushing tables.
See section <A HREF="manual.html#OPTIMIZE_TABLE">7.8  <CODE>OPTIMIZE TABLE</CODE> syntax</A>.

</P>



<H3><A NAME="isamchk_syntax" HREF="manual_toc.html#isamchk_syntax">13.1.1  <CODE>isamchk</CODE> invocation syntax</A></H3>

<P>
<CODE>isamchk</CODE> is invoked like this:

</P>

<PRE>
shell&#62; isamchk [options] tbl_name
</PRE>

<P>
The <CODE>options</CODE> specify what you want <CODE>isamchk</CODE> to do.  They are
described below.  (You can also get a list of options by invoking
<CODE>isamchk --help</CODE>.)  With no options, <CODE>isamchk</CODE> simply checks your
table.  To get more information or to tell <CODE>isamchk</CODE> to take corrective
action, specify options as described below and in the following sections.

</P>
<P>
<CODE>tbl_name</CODE> is the database table you want to check.  If you run
<CODE>isamchk</CODE> somewhere other than in the database directory, you must
specify the path to the file, since <CODE>isamchk</CODE> has no idea where your
database is located.  Actually, <CODE>isamchk</CODE> doesn't care whether or not
the files you are working on are located in a database directory; you can
copy the files that correspond to a database table into another location and
perform recovery operations on them there.

</P>
<P>
You can name several tables on the <CODE>isamchk</CODE> command line if you
wish.  You can also specify a name as an index file
name (with the <TT>`.ISM'</TT> suffix), which allows you to specify all
tables in a directory by using the pattern <TT>`*.ISM'</TT>.
For example, if you are in a database directory, you can check all the
tables in the directory like this:

</P>

<PRE>
shell&#62; isamchk *.ISM
</PRE>

<P>
If you are not in the database directory, you can check all the tables there
by specifying the path to the directory:

</P>

<PRE>
shell&#62; isamchk /path/to/database_dir/*.ISM
</PRE>

<P>
You can even check all tables in all databases by specifying a wildcard
with the path to the <STRONG>MySQL</STRONG> data directory:

</P>

<PRE>
shell&#62; isamchk /path/to/datadir/*/*.ISM
</PRE>

<P>
<CODE>isamchk</CODE> supports the following options:

</P>
<DL COMPACT>

<DT><CODE>-a, --analyze</CODE>
<DD>
Analyze the distribution of keys. This improves join performance by
enabling the join optimizer to better choose in which order it should
join the tables and which keys it should how use.

<DT><CODE>-#, --debug=debug_options</CODE>
<DD>
Output debug log. The <CODE>debug_options</CODE> string often is
<CODE>'d:t:o,filename'</CODE>.

<DT><CODE>-d, --description</CODE>
<DD>
Prints some information about the table.

<DT><CODE>-e, --extend-check</CODE>
<DD>
Check the table VERY thoroughly.  This is necessary only in extreme cases.
Normally, <CODE>isamchk</CODE> should find all errors even without this option.

<DT><CODE>-f, --force</CODE>
<DD>
Overwrite old temporary files.
If you use <CODE>-f</CODE> when checking tables (running <CODE>isamchk</CODE>
without <CODE>-r</CODE>), <CODE>isamchk</CODE> will automatically restart with <CODE>-r</CODE>
on any table for which an error occurs during checking.

<DT><CODE>--help</CODE>
<DD>
Display a help message and exit.

<DT><CODE>-i, --information</CODE>
<DD>
Print informational statistics about the table that is checked.

<DT><CODE>-k #, --keys-used=#</CODE>
<DD>
Used with <CODE>-r</CODE>. Tell the NISAM table handler to update only the first
<CODE>#</CODE> indexes.  Higher-numbered indexes are deactivated.  This can be used
to get faster inserts!  Deactivated indexes can be reactivated by using
<CODE>isamchk -r</CODE>.

<DT><CODE>-l, --no-symlinks</CODE>
<DD>
Do not follow symbolic links when repairing. Normally
<CODE>isamchk</CODE> repairs the table a symlink points at.

<DT><CODE>-q, --quick</CODE>
<DD>
Used with <CODE>-r</CODE> to get a faster repair. Normally, the original data file
isn't touched; you can specify a second <CODE>-q</CODE> to force
the original data file to be used.

<DT><CODE>-r, --recover</CODE>
<DD>
Recovery mode.
Can fix almost anything except unique keys that aren't unique.

<DT><CODE>-o, --safe-recover</CODE>
<DD>
Recovery mode.
Uses an old recovery method; this is slower than <CODE>-r</CODE>, but can
handle a couple of cases that <CODE>-r</CODE> cannot handle.

<DT><CODE>-O var=option, --set-variable var=option</CODE>
<DD>
Set the value of a variable.  The possible variables are listed below.

<DT><CODE>-s, --silent</CODE>
<DD>
Silent mode.  Write output only when errors occur.
You can use <CODE>-s</CODE> twice (<CODE>-ss</CODE>) to make <CODE>isamchk</CODE>
very silent.

<DT><CODE>-S, --sort-index</CODE>
<DD>
Sort the index tree blocks in high-low order.
This will optimize seeks and will make table scanning by key faster.

<DT><CODE>-R index_num, --sort-records=index_num</CODE>
<DD>
Sorts records according to an index.  This makes your data much more localized
and may speed up ranged <CODE>SELECT</CODE> and <CODE>ORDER BY</CODE> operations on
this index. (It may be VERY slow to do a sort the first time!)
To find out a table's index numbers, use <CODE>SHOW INDEX</CODE>, which shows a
table's indexes in the same order that <CODE>isamchk</CODE> sees them.  Indexes are
numbered beginning with 1.

<DT><CODE>-u, --unpack</CODE>
<DD>
Unpack a table that was packed with <CODE>pack_isam</CODE>.

<DT><CODE>-v, --verbose</CODE>
<DD>
Verbose mode.  Print more information. This can be used with <CODE>-d</CODE> and
<CODE>-e</CODE>. Use <CODE>-v</CODE> multiple times (<CODE>-vv</CODE>, <CODE>-vvv</CODE>) for more
verbosity!

<DT><CODE>-V, --version</CODE>
<DD>
Print the <CODE>isamchk</CODE> version and exit.

<DT><CODE>-w, --wait</CODE>
<DD>
Wait if the table is locked.
</DL>

<P>
Possible variables for the <CODE>--set-variable</CODE> (<CODE>-O</CODE>) option are:

</P>

<PRE>
key_buffer_size       current value: 16776192
read_buffer_size      current value: 262136
write_buffer_size     current value: 262136
sort_buffer_size      current value: 2097144
sort_key_blocks       current value: 16
decode_bits           current value: 9
</PRE>



<H3><A NAME="isamchk_memory" HREF="manual_toc.html#isamchk_memory">13.1.2  <CODE>isamchk</CODE> memory usage</A></H3>

<P>
Memory allocation is important when you run <CODE>isamchk</CODE>.  <CODE>isamchk</CODE>
uses no more memory than you specify with the <CODE>-O</CODE> options.  If you are
going to use <CODE>isamchk</CODE> on very large files, you should first decide how
much memory you want it to use.  The default is to use only about 3M to fix
things.  By using larger values, you can get <CODE>isamchk</CODE> to operate
faster.  For example, if you have more than 32M RAM, you could use options
such as these (in addition to any other options you might specify):

</P>

<PRE>
shell&#62; isamchk -O sort=16M -O key=16M -O read=1M -O write=1M ...
</PRE>

<P>
Using <CODE>-O sort=16M</CODE> should
probably be enough for most cases.

</P>
<P>
Be aware that <CODE>isamchk</CODE> uses temporary files in <CODE>TMPDIR</CODE>. If
<CODE>TMPDIR</CODE> points to a memory file system, you may easily get out of
memory errors. If this happens, set <CODE>TMPDIR</CODE> to point at some directory
with more space and restart <CODE>isamchk</CODE>

</P>


<H2><A NAME="Maintenance_regime" HREF="manual_toc.html#Maintenance_regime">13.2  Setting up a table maintenance regime</A></H2>

<P>
It is a good idea to perform table checks on a regular basis rather than
waiting for problems to occur.  For maintenance purposes, you can use
<CODE>isamchk -s</CODE> to check tables.  The <CODE>-s</CODE> option causes
<CODE>isamchk</CODE> to run in silent mode, printing messages only when errors
occur.

</P>
<P>
<A NAME="IDX643"></A>
It's a good idea to check tables when the server starts up.
For example, whenever the machine has done a reboot in the middle of an
update, you usually need to check all the tables that could have been
affected. (This is an "expected crashed table".) You could add a test to
<CODE>safe_mysqld</CODE> that runs <CODE>isamchk</CODE> to check all tables that have
been modified during the last 24 hours if there is an old <TT>`.pid'</TT>
(process ID) file left after a reboot.  (The <TT>`.pid'</TT> file is created by
<CODE>mysqld</CODE> when it starts up and removed when it terminates normally.  The
presence of a <TT>`.pid'</TT> file at system startup time indicates that
<CODE>mysqld</CODE> terminated abnormally.)

</P>
<P>
An even better test would be to check any table whose last-modified time
is more recent than that of the <TT>`.pid'</TT> file.

</P>
<P>
You should also check your tables regularly during normal system operation.
At TcX, we run a <CODE>cron</CODE> job to check all our important tables once a week,
using a line like this in a <TT>`crontab'</TT> file:

</P>

<PRE>
35 0 * * 0 /path/to/isamchk -s /path/to/datadir/*/*.ISM
</PRE>

<P>
This prints out information about crashed tables so we can examine and repair
them when needed.

</P>
<P>
As we haven't had any unexpectedly crashed tables (tables that become
corrupted for reasons other than hardware trouble)
for a couple of years now (this is really true), once a week is
more than enough for us.

</P>
<P>
We recommend that to start with, you execute <CODE>isamchk -s</CODE> each
night on all tables that have been updated during the last 24 hours,
until you come to trust <STRONG>MySQL</STRONG> as much as we do.

</P>


<H2><A NAME="Table-info" HREF="manual_toc.html#Table-info">13.3  Getting information about a table</A></H2>

<P>
To get a description of a table or statistics about it, use the commands shown
below. We explain some of the information in more detail later.

</P>
<DL COMPACT>

<DT><CODE>isamchk -d tbl_name</CODE>
<DD>
Runs <CODE>isamchk</CODE> in "describe mode" to produce a description of your
table. If you start the <STRONG>MySQL</STRONG> server using the <CODE>--skip-locking</CODE>
option, <CODE>isamchk</CODE> may report an error for a table that is updated while
it runs.  However, since <CODE>isamchk</CODE> doesn't change the table in describe
mode, there isn't any risk of destroying data.

<DT><CODE>isamchk -d -v tbl_name</CODE>
<DD>
To produce more information about what <CODE>isamchk</CODE> is doing, add <CODE>-v</CODE>
to tell it to run in verbose mode.

<DT><CODE>isamchk -eis tbl_name</CODE>
<DD>
Shows only the most important information from a table. It is slow since it
must read the whole table.

<DT><CODE>isamchk -eiv tbl_name</CODE>
<DD>
This is like <CODE>-eis</CODE>, but tells you what is being done.
</DL>

<P>
Example of <CODE>isamchk -d</CODE> output:

<PRE>
ISAM file:     company.ISM
Data records:           1403698  Deleted blocks:         0
Recordlength:               226
Record format: Fixed length

table description:
Key Start Len Index   Type
1   2     8   unique  double
2   15    10  multip. text packed stripped
3   219   8   multip. double
4   63    10  multip. text packed stripped
5   167   2   multip. unsigned short
6   177   4   multip. unsigned long
7   155   4   multip. text
8   138   4   multip. unsigned long
9   177   4   multip. unsigned long
    193   1           text
</PRE>

<P>
Example of <CODE>isamchk -d -v</CODE> output:

<PRE>
ISAM file:     company.ISM
Isam-version:  2
Creation time: 1996-08-28 11:44:22
Recover time:  1997-01-12 18:35:29
Data records:           1403698  Deleted blocks:              0
Datafile: Parts:        1403698  Deleted data:                0
Datafilepointer (bytes):      3  Keyfile pointer (bytes):     3
Max datafile length: 3791650815  Max keyfile length: 4294967294
Recordlength:               226
Record format: Fixed length

table description:
Key Start Len Index   Type                      Root Blocksize Rec/key
1   2     8   unique  double                15845376      1024       1
2   15    10  multip. text packed stripped  25062400      1024       2
3   219   8   multip. double                40907776      1024      73
4   63    10  multip. text packed stripped  48097280      1024       5
5   167   2   multip. unsigned short        55200768      1024    4840
6   177   4   multip. unsigned long         65145856      1024    1346
7   155   4   multip. text                  75090944      1024    4995
8   138   4   multip. unsigned long         85036032      1024      87
9   177   4   multip. unsigned long         96481280      1024     178
    193   1           text
</PRE>

<P>
Example of <CODE>isamchk -eis</CODE> output:

<PRE>
Checking ISAM file: company.ISM
Key:  1:  Keyblocks used:  97%  Packed:    0%  Max levels:  4
Key:  2:  Keyblocks used:  98%  Packed:   50%  Max levels:  4
Key:  3:  Keyblocks used:  97%  Packed:    0%  Max levels:  4
Key:  4:  Keyblocks used:  99%  Packed:   60%  Max levels:  3
Key:  5:  Keyblocks used:  99%  Packed:    0%  Max levels:  3
Key:  6:  Keyblocks used:  99%  Packed:    0%  Max levels:  3
Key:  7:  Keyblocks used:  99%  Packed:    0%  Max levels:  3
Key:  8:  Keyblocks used:  99%  Packed:    0%  Max levels:  3
Key:  9:  Keyblocks used:  98%  Packed:    0%  Max levels:  4
Total:    Keyblocks used:  98%  Packed:   17%

Records:          1403698    M.recordlength:     226   Packed:             0%
Recordspace used:     100%   Empty space:          0%  Blocks/Record:   1.00
Recordblocks:     1403698    Deleteblocks:         0
Recorddata:     317235748    Deleted data:         0
Lost space:             0    Linkdata:             0

User time 1626.51, System time 232.36
Maximum resident set size 0, Integral resident set size 0
Non physical pagefaults 0, Physical pagefaults 627, Swaps 0
Blocks in 0 out 0, Messages in 0 out 0, Signals 0
Voluntary context switches 639, Involuntary context switches 28966
</PRE>

<P>
Example of <CODE>isamchk -eiv</CODE> output:

<PRE>
Checking ISAM file: company.ISM
Data records: 1403698   Deleted blocks:       0
- check file-size
- check delete-chain
index  1:
index  2:
index  3:
index  4:
index  5:
index  6:
index  7:
index  8:
index  9:
No recordlinks
- check index reference
- check data record references index: 1
Key:  1:  Keyblocks used:  97%  Packed:    0%  Max levels:  4
- check data record references index: 2
Key:  2:  Keyblocks used:  98%  Packed:   50%  Max levels:  4
- check data record references index: 3
Key:  3:  Keyblocks used:  97%  Packed:    0%  Max levels:  4
- check data record references index: 4
Key:  4:  Keyblocks used:  99%  Packed:   60%  Max levels:  3
- check data record references index: 5
Key:  5:  Keyblocks used:  99%  Packed:    0%  Max levels:  3
- check data record references index: 6
Key:  6:  Keyblocks used:  99%  Packed:    0%  Max levels:  3
- check data record references index: 7
Key:  7:  Keyblocks used:  99%  Packed:    0%  Max levels:  3
- check data record references index: 8
Key:  8:  Keyblocks used:  99%  Packed:    0%  Max levels:  3
- check data record references index: 9
Key:  9:  Keyblocks used:  98%  Packed:    0%  Max levels:  4
Total:    Keyblocks used:   9%  Packed:   17%

- check records and index references
[LOTS OF ROW NUMBERS DELETED]

Records:          1403698    M.recordlength:     226   Packed:             0%
Recordspace used:     100%   Empty space:          0%  Blocks/Record:   1.00
Recordblocks:     1403698    Deleteblocks:         0
Recorddata:     317235748    Deleted data:         0
Lost space:             0    Linkdata:             0

User time 1639.63, System time 251.61
Maximum resident set size 0, Integral resident set size 0
Non physical pagefaults 0, Physical pagefaults 10580, Swaps 0
Blocks in 4 out 0, Messages in 0 out 0, Signals 0
Voluntary context switches 10604, Involuntary context switches 122798
</PRE>

<P>
Here are the sizes of the data and index files for the table used in the
preceding examples:

</P>

<PRE>
-rw-rw-r--   1 monty    tcx     317235748 Jan 12 17:30 company.ISD
-rw-rw-r--   1 davida   tcx      96482304 Jan 12 18:35 company.ISM
</PRE>

<P>
Explanations for the types of information <CODE>isamchk</CODE> produces are given
below.  The "keyfile" is the index file.  "Record" and "row" are
synonymous.

</P>
<DL COMPACT>

<DT><CODE>ISAM file</CODE>
<DD>
Name of the ISAM (index) file.

<DT><CODE>Isam-version</CODE>
<DD>
Version of ISAM format. Currently always 2.

<DT><CODE>Creation time</CODE>
<DD>
When the data file was created.

<DT><CODE>Recover time</CODE>
<DD>
When the index/data file was last reconstructed.

<DT><CODE>Data records</CODE>
<DD>
How many records are in the table.

<DT><CODE>Deleted blocks</CODE>
<DD>
How many deleted blocks still have reserved space.
You can optimize your table to minimize this space.
See section <A HREF="manual.html#Optimization">13.4.3  Table optimization</A>.

<DT><CODE>Datafile: Parts</CODE>
<DD>
For dynamic record format, this indicates how many data blocks there are. For
an optimized table without fragmented records, this is the same as <CODE>Data
records</CODE>.

<DT><CODE>Deleted data</CODE>
<DD>
How many bytes of non-reclaimed deleted data there are.
You can optimize your table to minimize this space.
See section <A HREF="manual.html#Optimization">13.4.3  Table optimization</A>.

<DT><CODE>Datafile pointer</CODE>
<DD>
The size of the data file pointer, in bytes. It is usually 2, 3, 4 or 5
bytes. Most tables manage with 2 bytes, but this cannot be controlled
from <STRONG>MySQL</STRONG> yet. For fixed tables, this is a record address. For
dynamic tables, this is a byte address.

<DT><CODE>Keyfile pointer</CODE>
<DD>
The size of the index file pointer, in bytes. It is usually 1, 2 or 3
bytes. Most tables manage with 2 bytes, but this is calculated
automatically by <STRONG>MySQL</STRONG>. It is always a block address.

<DT><CODE>Max datafile length</CODE>
<DD>
How long the table's data file (<CODE>.ISD</CODE> file) can become, in bytes.

<DT><CODE>Max keyfile length</CODE>
<DD>
How long the table's key file (<CODE>.ISM</CODE> file) can become, in bytes.

<DT><CODE>Recordlength</CODE>
<DD>
How much space each record takes, in bytes.

<DT><CODE>Record format</CODE>
<DD>
The format used to store table rows.
The examples shown above use <CODE>Fixed length</CODE>.
Other possible values are <CODE>Compressed</CODE> and <CODE>Packed</CODE>.

<DT><CODE>table description</CODE>
<DD>
A list of all keys in the table. For each key, some low-level information
is presented:

<DL COMPACT>

<DT><CODE>Key</CODE>
<DD>
This key's number.

<DT><CODE>Start</CODE>
<DD>
Where in the record this index part starts.

<DT><CODE>Len</CODE>
<DD>
How long this index part is. For packed numbers, this should always be
the full length of the column. For strings, it may be shorter than the full
length of the indexed column, because you can index a prefix of a string
column.

<DT><CODE>Index</CODE>
<DD>
<CODE>unique</CODE> or <CODE>multip.</CODE> (multiple). Indicates whether or not one value
can exist multiple times in this index.

<DT><CODE>Type</CODE>
<DD>
What data-type this index part has. This is an NISAM data-type
with the options <CODE>packed</CODE>, <CODE>stripped</CODE> or <CODE>empty</CODE>.

<DT><CODE>Root</CODE>
<DD>
Address of the root index block.

<DT><CODE>Blocksize</CODE>
<DD>
The size of each index block. By default this is 1024, but the value may be
changed at compile time.

<DT><CODE>Rec/key</CODE>
<DD>
This is a statistical value used by the optimizer. It tells how many
records there are per value for this key. A unique key always has a
value of 1. This may be updated after a table is loaded (or greatly
changed) with <CODE>isamchk -a</CODE>. If this is not updated at all, a default
value of 30 is given.
</DL>

<DT><CODE></CODE>
<DD>
In the first example above, the 9th key is a multi-part key with two parts.

<DT><CODE>Keyblocks used</CODE>
<DD>
What percentage of the keyblocks are used. Since the table used in the
examples had just been reorganized with <CODE>isamchk</CODE>, the values are very
high (very near the theoretical maximum).

<DT><CODE>Packed</CODE>
<DD>
<STRONG>MySQL</STRONG> tries to pack keys with a common suffix. This can only be used
for <CODE>CHAR</CODE>/<CODE>VARCHAR</CODE>/<CODE>DECIMAL</CODE> keys. For long strings like
names, this can significantly reduce the space used. In the third example
above, the 4th key is 10 characters long and a 60% reduction in space is
achieved.

<DT><CODE>Max levels</CODE>
<DD>
How deep the B-tree for this key is. Large tables with long keys get high
values.

<DT><CODE>Records</CODE>
<DD>
How many rows are in the table.

<DT><CODE>M.recordlength</CODE>
<DD>
The average record length. For tables with fixed-length records, this is the
exact record length.

<DT><CODE>Packed</CODE>
<DD>
<STRONG>MySQL</STRONG> strips spaces from the end of strings. The <CODE>Packed</CODE>
value indicates the percentage savings achieved by doing this.

<DT><CODE>Recordspace used</CODE>
<DD>
What percentage of the data file is used.

<DT><CODE>Empty space</CODE>
<DD>
What percentage of the data file is unused.

<DT><CODE>Blocks/Record</CODE>
<DD>
Average number of blocks per record (i.e., how many links a fragmented
record is composed of). This is always 1 for fixed-format tables. This value
should stay as close to 1.0 as possible. If it gets too big, you can
reorganize the table with <CODE>isamchk</CODE>.
See section <A HREF="manual.html#Optimization">13.4.3  Table optimization</A>.

<DT><CODE>Recordblocks</CODE>
<DD>
How many blocks (links) are used. For fixed format, this is the same as the number
of records.

<DT><CODE>Deleteblocks</CODE>
<DD>
How many blocks (links) are deleted.

<DT><CODE>Recorddata</CODE>
<DD>
How many bytes in the data file are used.

<DT><CODE>Deleted data</CODE>
<DD>
How many bytes in the data file are deleted (unused).

<DT><CODE>Lost space</CODE>
<DD>
If a record is updated to a shorter length, some space is lost. This is
the sum of all such losses, in bytes.

<DT><CODE>Linkdata</CODE>
<DD>
When the dynamic table format is used, record fragments are linked with
pointers (4 to 7 bytes each). <CODE>Linkdata</CODE> is the sum of the amount of
storage used by all such pointers.
</DL>

<P>
If a table has been compressed with <CODE>pack_isam</CODE>, <CODE>isamchk -d</CODE>
prints additional information about each table column.  See section <A HREF="manual.html#pack_isam">12.5  The <STRONG>MySQL</STRONG> compressed read-only table generator</A>, for an example of this information and a description of
what it means.

</P>


<H2><A NAME="Crash_recovery" HREF="manual_toc.html#Crash_recovery">13.4  Using <CODE>isamchk</CODE> for crash recovery</A></H2>

<P>
The file format that <STRONG>MySQL</STRONG> uses to store data has been extensively
tested, but there are always external circumstances that may cause database
tables to become corrupted:

</P>

<UL>
<LI>

The <CODE>mysqld</CODE> process being killed in the middle of a write
<LI>

Unexpected shutdown of the computer (for example, if the computer is turned
off)
<LI>

A hardware error
</UL>

<P>
This chapter describes how to check for and deal with data corruption
in <STRONG>MySQL</STRONG> databases.  If your tables get corrupted a lot you should
try to find the reason for this! See section <A HREF="manual.html#Debugging_server">G.1  Debugging a <STRONG>MySQL</STRONG> server</A>.

</P>
<P>
When performing crash recovery, it is important to understand that each table
<CODE>tbl_name</CODE> in a database corresponds to three files in the database
directory:

</P>
<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><STRONG>File</STRONG> </TD><TD> <STRONG>Purpose</STRONG>
</TR NOSAVE>
<TR><TD><TT>`tbl_name.frm'</TT> </TD><TD> Table definition (form) file
</TR NOSAVE>
<TR><TD><TT>`tbl_name.ISD'</TT> </TD><TD> Data file
</TR NOSAVE>
<TR><TD><TT>`tbl_name.ISM'</TT> </TD><TD> Index file
</TR>
</TABLE>

<P>
Each of these three file types is subject to corruption in various ways, but
problems occur most often in data files and index files.

</P>
<P>
<CODE>isamchk</CODE> works by creating a copy of the <TT>`.ISD'</TT> (data) file row by
row. It ends the repair stage by removing the old <TT>`.ISD'</TT> file and
renaming the new file to the original file name.  If you use <CODE>--quick</CODE>,
<CODE>isamchk</CODE> does not create a temporary <TT>`.ISD'</TT> file, but instead
assumes that the <TT>`.ISD'</TT> file is correct and only generates a new index
file without touching the <TT>`.ISD'</TT> file. This is safe, because
<CODE>isamchk</CODE> automatically detects if the <TT>`.ISD'</TT> file is corrupt and
aborts the repair in this case.  You can also give two <CODE>--quick</CODE> options
to <CODE>isamchk</CODE>.  In this case, <CODE>isamchk</CODE> does not abort on some
errors (like duplicate key) but instead tries to resolve them by
modifying the <TT>`.ISD'</TT> file. Normally the use of two <CODE>--quick</CODE>
options is useful only if you have too little free disk space to perform a
normal repair.  In this case you should at least make a backup before running
<CODE>isamchk</CODE>.

</P>

<P>
<A NAME="IDX644"></A>


<H3><A NAME="Check" HREF="manual_toc.html#Check">13.4.1  How to check tables for errors</A></H3>

<P>
To check a table, use the following commands:

</P>
<DL COMPACT>

<DT><CODE>isamchk tbl_name</CODE>
<DD>
This finds 99.99% of all errors. What it can't find is corruption that
involves <STRONG>ONLY</STRONG> the data file (which is very unusual). If you want
to check a table, you should normally run <CODE>isamchk</CODE> without options or
with either the <CODE>-s</CODE> or <CODE>--silent</CODE> option.

<DT><CODE>isamchk -e tbl_name</CODE>
<DD>
This does a complete and thorough check of all data (<CODE>-e</CODE> means
"extended check"). It does a check-read of every key for each row to verify
that they indeed point to the correct row.  This may take a LONG time on a
big table with many keys.  <CODE>isamchk</CODE> will normally stop after the first
error it finds. If you want to obtain more information, you can add the
<CODE>--verbose</CODE> (<CODE>-v</CODE>) option.  This causes <CODE>isamchk</CODE> to keep
going, up through a maximum of 20 errors.  In normal usage, a simple
<CODE>isamchk</CODE> (with no arguments other than the table name) is sufficient.

<DT><CODE>isamchk -e -i tbl_name</CODE>
<DD>
Like the previous command, but the <CODE>-i</CODE> option tells <CODE>isamchk</CODE> to
print some informational statistics, too.
</DL>



<H3><A NAME="Repair" HREF="manual_toc.html#Repair">13.4.2  How to repair tables</A></H3>

<P>
The symptoms of a corrupted table are usually that queries abort unexpectedly
and that you observe errors such as these:

</P>

<UL>
<LI>

<TT>`tbl_name.frm'</TT> is locked against change
<LI>

Can't find file <TT>`tbl_name.ISM'</TT> (Errcode: ###)
<LI>

Got error ### from table handler (Error 135 is an exception in this case)
<LI>

Unexpected end of file
<LI>

Record file is crashed
</UL>

<P>
In these cases, you must repair your tables. <CODE>isamchk</CODE>
can usually detect and fix most things that go wrong.

</P>
<P>
The repair process involves up to four stages, described below. Before you
begin, you should <CODE>cd</CODE> to the database directory and check the
permissions of the table files. Make sure they are readable by the Unix user
that <CODE>mysqld</CODE> runs as (and to you, since you need to access the files
you are checking).  If it turns out you need to modify files, they must also
be writable by you.

</P>
<P>
<STRONG>Stage 1: Checking your tables</STRONG>

</P>
<P>
Run <CODE>isamchk *.ISM</CODE> or (<CODE>isamchk -e *.ISM</CODE> if you have more time).
Use the <CODE>-s</CODE> (silent) option to suppress unnecessary information.

</P>
<P>
You have to repair only those tables for which <CODE>isamchk</CODE> announces an
error.  For such tables, proceed to Stage 2.

</P>
<P>
If you get weird errors when checking (such as <CODE>out of
memory</CODE> errors), or if <CODE>isamchk</CODE> crashes, go to Stage 3.

</P>
<P>
<STRONG>Stage 2: Easy safe repair</STRONG>

</P>
<P>
First, try <CODE>isamchk -r -q tbl_name</CODE> (<CODE>-r -q</CODE> means "quick recovery
mode"). This will attempt to repair the index file without touching the data
file.  If the data file contains everything that it should and the delete
links point at the correct locations within the data file, this should work
and the table is fixed. Start repairing the next table.  Otherwise, use the
following procedure:

</P>

<OL>
<LI>

Make a backup of the data file before continuing.

<LI>

Use <CODE>isamchk -r tbl_name</CODE> (<CODE>-r</CODE> means "recovery mode"). This will
remove incorrect records and deleted records from the data file and
reconstruct the index file.

<LI>

If the preceding step fails, use <CODE>isamchk --safe-recover tbl_name</CODE>.
Safe recovery mode uses an old recovery method that handles a few cases that
regular recovery mode doesn't (but is slower).
</OL>

<P>
If you get weird errors when repairing (such as <CODE>out of
memory</CODE> errors), or if <CODE>isamchk</CODE> crashes, go to Stage 3.

</P>
<P>
<STRONG>Stage 3: Difficult repair</STRONG>

</P>
<P>
You should only reach this stage if the first 16K block in the index file is
destroyed or contains incorrect information, or if the index file is
missing.  In this case, it's necessary to create a new index file. Do so as
follows:

</P>

<OL>
<LI>

Move the data file to some safe place.

<LI>

Use the table description file to create new (empty) data and index files:


<PRE>
shell&#62; mysql db_name
mysql&#62; DELETE FROM tbl_name;
mysql&#62; quit
</PRE>

<LI>

Copy the old data file back onto the newly created data file.
(Don't just move the old file back onto the new file; you want to retain
a copy in case something goes wrong.)
</OL>

<P>
Go back to Stage 2.  <CODE>isamchk -r -q</CODE> should work now.  (This shouldn't
be an endless loop).

</P>
<P>
<STRONG>Stage 4: Very difficult repair</STRONG>

</P>
<P>
You should reach this stage only if the description file has also
crashed. That should never happen, because the description file isn't changed
after the table is created.

</P>

<OL>
<LI>

Restore the description file from a backup and go back to Stage 3.  You can
also restore the index file and go back to Stage 2.  In the latter case, you
should start with <CODE>isamchk -r</CODE>.

<LI>

If you don't have a backup but know exactly how the table was created, create
a copy of the table in another database.  Remove the new data file, then move
the description and index files from the other database to your crashed
database.  This gives you new description and index files, but leaves
the data file alone.  Go back to Stage 2 and attempt to reconstruct
the index file.
</OL>



<H3><A NAME="Optimization" HREF="manual_toc.html#Optimization">13.4.3  Table optimization</A></H3>

<P>
To coalesce fragmented records and eliminate wasted space resulting from
deleting or updating records, run <CODE>isamchk</CODE> in recovery mode:

</P>

<PRE>
shell&#62; isamchk -r tbl_name
</PRE>

<P>
You can optimize a table in the same way using the SQL <CODE>OPTIMIZE TABLE</CODE>
statement.  <CODE>OPTIMIZE TABLE</CODE> is easier, but <CODE>isamchk</CODE> is faster.

</P>
<P>
<CODE>isamchk</CODE> also has a number of other options you can use to improve
the performance of a table:

</P>
<DL COMPACT>

<DT><CODE>-S, --sort-index</CODE>
<DD>
<DT><CODE>-R index_num, --sort-records=index_num</CODE>
<DD>
<DT><CODE>-a, --analyze</CODE>
<DD>
</DL>

<P>
For a full description of the option see section <A HREF="manual.html#isamchk_syntax">13.1.1  <CODE>isamchk</CODE> invocation syntax</A>.

</P>


<H2><A NAME="Log_files" HREF="manual_toc.html#Log_files">13.5  Log file maintenance</A></H2>

<P>
When using <STRONG>MySQL</STRONG> with log files, you will from time to time
want to remove/backup old log files and tell <STRONG>MySQL</STRONG> to start
logging on new files.  See section <A HREF="manual.html#Update_log">9.2  The update log</A>.

</P>
<P>
One a Linux (<CODE>Redhat</CODE>) installation, you can use the
<CODE>mysql-log-rotate</CODE> script for this. If you installed <STRONG>MySQL</STRONG>
from an RPM distribution, the script should have been installed
automatically.

</P>
<P>
On other systems you must install a short script yourself that you
start from <CODE>cron</CODE> to handle log files.

</P>
<P>
You can force <STRONG>MySQL</STRONG> to start using new log files by using
<CODE>mysqladmin flush-logs</CODE> or by using the SQL command <CODE>FLUSH LOGS</CODE>.
If you are using <STRONG>MySQL</STRONG> 3.21 you must use <CODE>mysqladmin refresh</CODE>.

</P>
<P>
The above command does the following:

</P>

<UL>
<LI>

If standard logging (<CODE>--log</CODE>) is used, closes and reopens the log file.
(<TT>`mysql.log'</TT> as default).
<LI>

If update logging (<CODE>--log-update</CODE>) is used, closes the update log and
opens a new log file with a higher sequence number.
</UL>

<P>
If you are using only an update log, you only have to flush the logs and then
move away the old update log files to a backup.
If you are using the normal logging, you can do something like:

</P>

<PRE>
shell&#62; cd mysql-data-directory
shell&#62; mv mysql.log mysql.old
shell&#62; mysqladmin flush-tables
</PRE>

<P>
and then take a backup and remove <TT>`mysql.old'</TT>.

</P>


<H1><A NAME="Adding_functions" HREF="manual_toc.html#Adding_functions">14  Adding new functions to <STRONG>MySQL</STRONG></A></H1>

<P>
There are two ways to add new functions to <STRONG>MySQL</STRONG>:

</P>

<UL>
<LI>You can add the function through the user-definable function (UDF)

interface.  User-definable functions are added and removed dynamically using
the <CODE>CREATE FUNCTION</CODE> and <CODE>DROP FUNCTION</CODE> statements.
See section <A HREF="manual.html#CREATE_FUNCTION">7.29  <CODE>CREATE FUNCTION/DROP FUNCTION</CODE> syntax</A>.

<LI>You can add the function as a native (built in) <STRONG>MySQL</STRONG> function.

Native functions are compiled into the <CODE>mysqld</CODE> server and become
available on a permanent basis.
</UL>

<P>
Each method has advantages and disadvantages:

</P>

<UL>
<LI>

If you write a user-definable function, you must install the object file
in addition to the server itself.  If you compile your function into the
server, you don't need to do that.
<LI>

You can add UDFs to a binary <STRONG>MySQL</STRONG> distribution.  Native functions
require you to modify a source distribution.
<LI>

If you upgrade your <STRONG>MySQL</STRONG> distribution, you can continue to use your
previously-installed UDFs.  For native functions, you must repeat your
modifications each time you upgrade.
</UL>

<P>
Whichever method you use to add new functions, they may be used just like
native functions such as <CODE>ABS()</CODE> or <CODE>SOUNDEX()</CODE>.

</P>

<P>
<A NAME="IDX645"></A>
<A NAME="IDX646"></A>
<A NAME="IDX647"></A>


<H2><A NAME="Adding_UDF" HREF="manual_toc.html#Adding_UDF">14.1  Adding a new user-definable function</A></H2>

<P>
For the UDF mechanism to work, functions must be written in C or C++ and your
operating system must support dynamic loading.  The <STRONG>MySQL</STRONG> source
distribution includes a file <TT>`sql/udf_example.cc'</TT> that defines 5 new
functions.  Consult this file to see how UDF calling conventions work.

</P>
<P>
For each function that you want to use in SQL statements, you should define
corresponding C (or C++) functions.  In the discussion below, the name
"xxx" is used for an example function name.  To distinquish between SQL and
C/C++ usage, <CODE>XXX()</CODE> (uppercase) indicates a SQL function call, and
<CODE>xxx()</CODE> (lowercase) indicates a C/C++ function call.

</P>
<P>
The C/C++ functions that you write to implement the inferface for
<CODE>XXX()</CODE> are:

</P>
<DL COMPACT>

<DT><CODE>xxx()</CODE> (required)
<DD>
The main function.  This is where the function result is computed.
The correspondence between the SQL type and return type of your C/C++
function is shown below:

<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><STRONG>SQL type</STRONG> </TD><TD> <STRONG>C/C++ type</STRONG>
</TR NOSAVE>
<TR><TD><CODE>STRING</CODE> </TD><TD> <CODE>char *</CODE>
</TR NOSAVE>
<TR><TD><CODE>INTEGER</CODE> </TD><TD> <CODE>long long</CODE>
</TR NOSAVE>
<TR><TD><CODE>REAL</CODE> </TD><TD> <CODE>double</CODE>
</TR>
</TABLE>

<DT><CODE>xxx_init()</CODE> (optional)
<DD>
The initialization function for <CODE>xxx()</CODE>.  It can be used to:


<UL>
<LI>

Check the number of arguments to <CODE>XXX()</CODE>
<LI>

Check that the arguments are of a required type, or, alternatively,
tell <STRONG>MySQL</STRONG> to coerce arguments to the types you want when
the main function is called
<LI>

Allocate any memory required by the main function
<LI>

Specify the maximum length of the result
<LI>

Specify (for <CODE>REAL</CODE> functions) the maximum number of decimals
<LI>

Specify whether or not the result can be <CODE>NULL</CODE>
</UL>

<DT><CODE>xxx_deinit()</CODE> (optional)
<DD>
The deinitialization function for <CODE>xxx()</CODE>.  It should deallocate any
memory allocated by the initialization function.
</DL>

<P>
When a SQL statement invokes <CODE>XXX()</CODE>, <STRONG>MySQL</STRONG> calls the
initialization function <CODE>xxx_init()</CODE> to let it perform any required
setup, such as argument checking or memory allocation.  If <CODE>xxx_init()</CODE>
returns an error, the SQL statement is aborted with an error message and the
main and deinitialization functions are not called.  Otherwise, the main
function <CODE>xxx()</CODE> is called once for each row.  After all rows have been
processed, the deinitialization function <CODE>xxx_deinit()</CODE> is called so it
can perform any required cleanup.

</P>
<P>
All functions must be thread-safe (not just the main function,
but the initialization and deinitialization functions as well). This means
that you are not allowed to allocate any global or static variables that
change!  If you need memory, you should allocate it in <CODE>xxx_init()</CODE>
and free it in <CODE>xxx_deinit()</CODE>.

</P>


<H3><A NAME="UDF_calling_sequences" HREF="manual_toc.html#UDF_calling_sequences">14.1.1  UDF calling sequences</A></H3>

<P>
The main function should be declared as shown below.  Note that the return
type and parameters differ, depending on whether you will declare the SQL
function <CODE>XXX()</CODE> to return <CODE>STRING</CODE>, <CODE>INTEGER</CODE> or <CODE>REAL</CODE>
in the <CODE>CREATE FUNCTION</CODE> statement:

</P>
<P>
For <CODE>STRING</CODE> functions:

</P>

<PRE>
char *xxx(UDF_INIT *initid, UDF_ARGS *args,
              char *result, unsigned long *length,
              char *is_null, char *error);
</PRE>

<P>
For <CODE>INTEGER</CODE> functions:

</P>

<PRE>
long long xxx(UDF_INIT *initid, UDF_ARGS *args,
              char *is_null, char *error);
</PRE>

<P>
For <CODE>REAL</CODE> functions:

</P>

<PRE>
double xxx(UDF_INIT *initid, UDF_ARGS *args,
              char *is_null, char *error);
</PRE>

<P>
The initialization and deinitialization functions are declared like this:

</P>

<PRE>
my_bool xxx_init(UDF_INIT *initid, UDF_ARGS *args, char *message);

void xxx_deinit(UDF_INIT *initid);
</PRE>

<P>
The <CODE>initid</CODE> parameter is passed to all three functions.  It points to a
<CODE>UDF_INIT</CODE> structure that is used to communicate information between
functions.  The <CODE>UDF_INIT</CODE> structure members are listed below.  The
initialization function should fill in any members that it wishes to change.
(To use the default for a member, leave it unchanged.)

</P>
<DL COMPACT>

<DT><CODE>my_bool maybe_null</CODE>
<DD>
<CODE>xxx_init()</CODE> should set <CODE>maybe_null</CODE> to <CODE>1</CODE> if <CODE>xxx()</CODE>
can return <CODE>NULL</CODE>.  The default value is <CODE>1</CODE> if any of the
arguments are declared <CODE>maybe_null</CODE>.

<DT><CODE>unsigned int decimals</CODE>
<DD>
Number of decimals.  The default value is the maximum number of decimals in
the arguments passed to the main function.  (For example, if the function is
passed <CODE>1.34</CODE>, <CODE>1.345</CODE> and <CODE>1.3</CODE>, the default would be 3,
since <CODE>1.345</CODE> has 3 decimals.

<DT><CODE>unsigned int max_length</CODE>
<DD>
The maximum length of the string result.  The default value differs depending
on the result type of the function.  For string functions, the default is the
length of the longest argument.  For integer functions, the default is 21
digits.  For real functions, the default is 13 plus the number of decimals
indicated by <CODE>initid-&#62;decimals</CODE>.  (For numeric functions, the length
includes any sign or decimal point characters.)

<DT><CODE>char *ptr</CODE>
<DD>
A pointer that the function can use for its own purposes.  For example,
functions can use <CODE>initid-&#62;ptr</CODE> to communicate allocated memory
between functions.  In <CODE>xxx_init()</CODE>, allocate the memory and assign it
to this pointer:


<PRE>
initid-&#62;ptr = allocated_memory;
</PRE>

In <CODE>xxx()</CODE> and <CODE>xxx_deinit()</CODE>, refer to <CODE>initid-&#62;ptr</CODE> to use
or deallocate the memory.
</DL>



<H3><A NAME="UDF_arguments" HREF="manual_toc.html#UDF_arguments">14.1.2  Argument processing</A></H3>

<P>
The <CODE>args</CODE> parameter points to a <CODE>UDF_ARGS</CODE> structure which has the
members listed below:

</P>
<DL COMPACT>

<DT><CODE>unsigned int arg_count</CODE>
<DD>
The number of arguments.  Check this value in the initialization function
if you want your function to be called with a particular number of arguments.
For example:


<PRE>
if (args-&#62;arg_count != 2)
{
    strcpy(message,"XXX() requires two arguments");
    return 1;
}
</PRE>

<DT><CODE>enum Item_result *arg_type</CODE>
<DD>
The types for each argument.  The possible type values are
<CODE>STRING_RESULT</CODE>, <CODE>INT_RESULT</CODE> and <CODE>REAL_RESULT</CODE>.

To make sure that arguments are of a given type and return an
error if they are not, check the <CODE>arg_type</CODE> array in the initialization
function.  For example:


<PRE>
if (args-&#62;arg_type[0] != STRING_RESULT
      &#38;& args-&#62;arg_type[1] != INT_RESULT)
{
    strcpy(message,"XXX() requires a string and an integer");
    return 1;
}
</PRE>

As an alternative to requiring your function's arguments to be of particular
types, you can use the initialization function to set the <CODE>arg_type</CODE>
elements to the types you want.  This causes <STRONG>MySQL</STRONG> to coerce
arguments to those types for each call to <CODE>xxx()</CODE>.  For example, to
specify coercion of the first two arguments to string and integer, do this in
<CODE>xxx_init()</CODE>:


<PRE>
args-&#62;arg_type[0] = STRING_RESULT;
args-&#62;arg_type[1] = INT_RESULT;
</PRE>

<DT><CODE>char **args</CODE>
<DD>
<CODE>args-&#62;args</CODE> communicates information to the initialization function
about the general nature of the arguments your function was called with.  For a
constant argument <CODE>i</CODE>, <CODE>args-&#62;args[i]</CODE> points to the argument
value.  (See below for instructions on how to access the value properly.)
For a non-constant argument, <CODE>args-&#62;args[i]</CODE> is <CODE>0</CODE>.
A constant argument is an expression that uses only constants, such as
<CODE>3</CODE> or <CODE>4*7-2</CODE> or <CODE>SIN(3.14)</CODE>.  A non-constant argument is an
expression that refers to values that may change from row to row, such as
column names or functions that are called with non-constant arguments.

For each invocation of the main function, <CODE>args-&#62;args</CODE> contains the
actual arguments that are passed for the row currently being processed.

Functions can refer to an argument <CODE>i</CODE> as follows:


<UL>
<LI>

An argument of type <CODE>STRING_RESULT</CODE> is given as a string pointer plus a
length, to allow handling of binary data or data of arbitrary length.  The
string contents are available as <CODE>args-&#62;args[i]</CODE> and the string length
is <CODE>args-&#62;lengths[i]</CODE>.  You should not assume that strings are
null-terminated.

<LI>

For an argument of type <CODE>INT_RESULT</CODE>, you must cast
<CODE>args-&#62;args[i]</CODE> to a <CODE>long long</CODE> value:


<PRE>
long long int_val;
int_val = *((long long*) args-&#62;args[i]);
</PRE>

<LI>

For an argument of type <CODE>REAL_RESULT</CODE>, you must cast
<CODE>args-&#62;args[i]</CODE> to a <CODE>double</CODE> value:


<PRE>
double    real_val;
real_val = *((double*) args-&#62;args[i]);
</PRE>

</UL>

<DT><CODE>unsigned long *lengths</CODE>
<DD>
For the initialization function, the <CODE>lengths</CODE> array indicates the
maximum string length for each argument.  For each invocation of the main
function, <CODE>lengths</CODE> contains the actual lengths of any string arguments
that are passed for the row currently being processed.  For arguments of
types <CODE>INT_RESULT</CODE> or <CODE>REAL_RESULT</CODE>, <CODE>lengths</CODE> still contains
the maximum length of the argument (as for the initialization function).
</DL>



<H3><A NAME="UDF_return_values" HREF="manual_toc.html#UDF_return_values">14.1.3  Return values and error handling</A></H3>

<P>
The initialization function should return <CODE>0</CODE> if no error occurred and
<CODE>1</CODE> otherwise.  If an error occurs, <CODE>xxx_init()</CODE> should store a
null-terminated error message in the <CODE>message</CODE> parameter.  The message
will be returned to the client.  The message buffer is
<CODE>MYSQL_ERRMSG_SIZE</CODE> characters long, but you should try to keep the
message to less than 80 characters so that it fits the width of a standard
terminal screen.

</P>
<P>
The return value of the main function <CODE>xxx()</CODE> is the function value, for
<CODE>long long</CODE> and <CODE>double</CODE> functions.  For string functions, the
string is returned in the <CODE>result</CODE> and <CODE>length</CODE> arguments.
<CODE>result</CODE> is a buffer at least 255 bytes long.  Set these to the contents
and length of the return value.  For example:

</P>

<PRE>
memcpy(result, "result string", 13);
*length = 13;
</PRE>

<P>
The string function return value normally also points to the result.

</P>
<P>
To indicate a return value of <CODE>NULL</CODE> in the main function, set
<CODE>is_null</CODE> to <CODE>1</CODE>:

</P>

<PRE>
*is_null = 1;
</PRE>

<P>
To indicate an error return in the main function, set the <CODE>error</CODE>
parameter to <CODE>1</CODE>:

</P>

<PRE>
*error = 1;
</PRE>

<P>
If <CODE>xxx()</CODE> sets <CODE>*error</CODE> to <CODE>1</CODE> for any row, the function
value is <CODE>NULL</CODE> for the current row and for any subsequent rows
processed by the statement in which <CODE>XXX()</CODE> was invoked.  (<CODE>xxx()</CODE>
will not even be called for subsequent rows.) <STRONG>Note:</STRONG> In
<STRONG>MySQL</STRONG> versions prior to 3.22.10, you should set both <CODE>*error</CODE>
and <CODE>*is_null</CODE>:

</P>

<PRE>
*error = 1;
*is_null = 1;
</PRE>



<H3><A NAME="UDF_compiling" HREF="manual_toc.html#UDF_compiling">14.1.4  Compiling and installing user-definable functions</A></H3>

<P>
Files implementing UDFs must be compiled and installed on the host where the
server runs.  This process is described below for the example UDF file
<TT>`udf_example.cc'</TT> that is included in the <STRONG>MySQL</STRONG> source
distribution.  This file contains the following functions:

</P>

<UL>
<LI>

<CODE>metaphon()</CODE> returns a metaphon string of the string argument.
This is something like a soundex string, but it's more tuned for English.
<LI>

<CODE>myfunc_double()</CODE> returns the sum of the ASCII values of the
characters in its arguments, divided by the sum of the length of its arguments.
<LI>

<CODE>myfunc_int()</CODE> returns the sum of the length of its arguments.
<LI>

<CODE>lookup()</CODE> returns the IP number for a hostname.
<LI>

<CODE>reverse_lookup()</CODE> returns the hostname for an IP number.
The function may be called with a string <CODE>"xxx.xxx.xxx.xxx"</CODE> or
four numbers.
</UL>

<P>
A dynamically-loadable file should be compiled as a sharable object file,
using a command something like this:

</P>

<PRE>
shell&#62; gcc -shared -o udf_example.so myfunc.cc
</PRE>

<P>
You can easily find out the correct compiler options for your system by
running this command in the <TT>`sql'</TT> directory of your <STRONG>MySQL</STRONG>
source tree:

</P>

<PRE>
shell&#62; make udf_example.o
</PRE>

<P>
You should run a compile command similar to the one that <CODE>make</CODE> displays,
except that you should remove the <CODE>-c</CODE> option near the end of the line
and add <CODE>-o udf_example.so</CODE> to the end of the line.  (On some systems,
you may need to leave  the <CODE>-c</CODE> on the command.)

</P>
<P>
Once you compile a shared object containing UDFs, you must install it
and tell <STRONG>MySQL</STRONG> about it.  Compiling a shared object from
<TT>`udf_example.cc'</TT> produces a file named something like
<TT>`udf_example.so'</TT> (the exact name may vary from platform to platform).
Copy this file to some directory searched by <CODE>ld</CODE>, such as
<TT>`/usr/lib'</TT>.  On many systems, you can set the <CODE>LD_LIBRARY</CODE> or
<CODE>LD_LIBRARY_PATH</CODE> environment variable to point at the directory where
you have your UDF function files. The <CODE>dopen</CODE> manual page tells you
which variable you should use on your system. You should set this in
<CODE>mysql.server</CODE> or <CODE>safe_mysqld</CODE> and restart <CODE>mysqld</CODE>.

</P>
<P>
After the library is installed, notify <CODE>mysqld</CODE> about the new
functions with these commands:

</P>

<PRE>
mysql&#62; CREATE FUNCTION metaphon RETURNS STRING SONAME "udf_example.so";
mysql&#62; CREATE FUNCTION myfunc_double RETURNS REAL SONAME "udf_example.so";
mysql&#62; CREATE FUNCTION myfunc_int RETURNS INTEGER SONAME "udf_example.so";
mysql&#62; CREATE FUNCTION lookup RETURNS STRING SONAME "udf_example.so";
mysql&#62; CREATE FUNCTION reverse_lookup RETURNS STRING SONAME "udf_example.so";
</PRE>

<P>
Functions can be deleted using <CODE>DROP FUNCTION</CODE>:

</P>

<PRE>
mysql&#62; DROP FUNCTION metaphon;
mysql&#62; DROP FUNCTION myfunc_double;
mysql&#62; DROP FUNCTION myfunc_int;
mysql&#62; DROP FUNCTION lookup;
mysql&#62; DROP FUNCTION reverse_lookup;
</PRE>

<P>
The <CODE>CREATE FUNCTION</CODE> and <CODE>DROP FUNCTION</CODE> statements update the
system table <CODE>func</CODE> in the <CODE>mysql</CODE> database.  The function's name,
type and shared library name are saved in the table.  You must have the
<STRONG>insert</STRONG> and <STRONG>delete</STRONG> privileges for the <CODE>mysql</CODE> database
to create and drop functions.

</P>
<P>
You should not use <CODE>CREATE FUNCTION</CODE> to add a function that has already
been created.  If you need to reinstall a function, you should remove it with
<CODE>DROP FUNCTION</CODE> and then reinstall it with <CODE>CREATE FUNCTION</CODE>.  You
would need to do this, for example, if you recompile a new version of your
function, so that <CODE>mysqld</CODE> gets the new version.  Otherwise the server
will continue to use the old version.

</P>
<P>
Active functions are reloaded each time the server starts, unless you start
<CODE>mysqld</CODE> with the <CODE>--skip-grant-tables</CODE> option.  In this case, UDF
initialization is skipped and UDFs are unavailable.  (An active function is
one that has been loaded with <CODE>CREATE FUNCTION</CODE> and not removed with
<CODE>DROP FUNCTION</CODE>.)

</P>
<P>
<A NAME="IDX648"></A>
<A NAME="IDX649"></A>
<A NAME="IDX650"></A>


<H2><A NAME="Adding_native_function" HREF="manual_toc.html#Adding_native_function">14.2  Adding a new native function</A></H2>

<P>
The procedure for adding a new native function is described below.  Note that
you cannot add native functions to a binary distribution since the procedure
involves modifying <STRONG>MySQL</STRONG> source code.  You must compile
<STRONG>MySQL</STRONG> yourself from a source distribution.  Also note that if you
migrate to another version of <STRONG>MySQL</STRONG> (e.g., when a new version is
released), you will need to repeat the procedure with the new version.

</P>
<P>
To add a new native <STRONG>MySQL</STRONG> function, follow these steps:

</P>

<OL>
<LI>

Add one line to <TT>`lex.h'</TT> that defines the function name in the
<CODE>sql_functions[]</CODE> array.
<LI>

Add two lines to <TT>`sql_yacc.yy'</TT>. One indicates the preprocessor
symbol that <CODE>yacc</CODE> should define (this should be added at the
beginning of the file). Then define the function parameters and add an
"item" with these parameters to the <CODE>simple_expr</CODE> parsing rule.
For an example, check all occurrences of <CODE>SOUNDEX</CODE> in
<TT>`sql_yacc.yy'</TT> to see how this is done.
<LI>

In <TT>`item_func.h'</TT>, declare a class inheriting from <CODE>Item_num_func</CODE> or
<CODE>Item_str_func</CODE>, depending on whether your function returns a number or a
string.
<LI>

In <TT>`item_func.cc'</TT>, add one of the following declarations, depending
on whether you are defining a numeric or string function:

<PRE>
double   Item_func_newname::val()
longlong Item_func_newname::val_int()
String  *Item_func_newname::Str(String *str)
</PRE>

<LI>

You should probably also define the following function:

<PRE>
void Item_func_newname::fix_length_and_dec()
</PRE>

This function should at least calculate <CODE>max_length</CODE> based on the
given arguments. <CODE>max_length</CODE> is the maximum number of characters
the function may return.  This function should also set <CODE>maybe_null = 0</CODE>
if the main function can't return a <CODE>NULL</CODE> value.  The function can check
if any of the function arguments can return <CODE>NULL</CODE> by checking the
arguments <CODE>maybe_null</CODE> variable.
</OL>

<P>
All functions must be thread-safe.

</P>
<P>
For string functions, there are some additional considerations to be aware of:

<UL>
<LI>

The <CODE>String *str</CODE> argument provides a string
buffer that may be used to hold the result.
<LI>

The function should return the string that holds the result.
<LI>

All current string functions try to avoid allocating any memory unless
absolutely necessary!
</UL>



<H1><A NAME="Adding_procedures" HREF="manual_toc.html#Adding_procedures">15  Adding new procedures to <STRONG>MySQL</STRONG></A></H1>

<P>
In <STRONG>MySQL</STRONG>, you can define a procedure in C++ that can access and
modify the data in a query before sending it to a client.  The modification
can be done on row by row or <CODE>GROUP BY</CODE> level.

</P>
<P>
We have in <STRONG>MySQL</STRONG> 3.23 created an example procedure to
show you what can be done.

</P>



<H2><A NAME="procedure_analyse" HREF="manual_toc.html#procedure_analyse">15.1  Procedure analyse</A></H2>

<P>
<CODE>analyse([max elements,[max memory]])</CODE>

</P>
<P>
This procedure is defined in the <TT>`sql/sql_analyse.cc'</TT>.  This
examines the result from your query and returns an analysis of the
results.

</P>

<UL>
<LI>

<CODE>max elements</CODE> (default 256) is the maximum number of distinct values
<CODE>analyse</CODE> will notice per column.  This is used by <CODE>analyse</CODE> to check if
the optimal column type should be of type <CODE>ENUM</CODE>.
<LI>

<CODE>max memory</CODE> (default 8192) is the maximum memory <CODE>analyse</CODE> should
allocate per column while trying to find all distinct values.
</UL>


<PRE>
SELECT ... FROM ... WHERE ... PROCEDURE ANALYSE([max elements,[max memory]])
</PRE>



<H2><A NAME="Writing_a_procedure" HREF="manual_toc.html#Writing_a_procedure">15.2  Writing a procedure.</A></H2>

<P>
For the moment, the only documentation for this is the source. :(

</P>
<P>
You can find all information about procedures by examining the following files:

</P>

<UL>
<LI><TT>`sql/sql_analyse.cc'</TT>

<LI><TT>`sql/procedure.h'</TT>

<LI><TT>`sql/procedure.cc'</TT>

<LI><TT>`sql/sql_select.cc'</TT>

</UL>

<P>
<A NAME="IDX651"></A>
<A NAME="IDX652"></A>
<A NAME="IDX653"></A>


<H1><A NAME="ODBC" HREF="manual_toc.html#ODBC">16  <STRONG>MySQL</STRONG> ODBC Support</A></H1>

<P>
<STRONG>MySQL</STRONG> provides support for ODBC by means of the <STRONG>MyODBC</STRONG>
program.

</P>


<H2><A NAME="Which_ODBC_OS" HREF="manual_toc.html#Which_ODBC_OS">16.1  Operating systems supported by <STRONG>MyODBC</STRONG></A></H2>

<P>
<STRONG>MyODBC</STRONG> is a 32-bit ODBC (2.50) level 0 driver for Windows95
and Windows NT. We hope somebody will port it to Windows 3.x.

</P>


<H2><A NAME="ODBC_Problems" HREF="manual_toc.html#ODBC_Problems">16.2  How to report problems with <STRONG>MyODBC</STRONG></A></H2>

<P>
<STRONG>MyODBC</STRONG> has been tested with Access, Admndemo.exe, C++-Builder,
Centura Team Developer (formerly Gupta SQL/Windows), ColdFusion (on
Solaris), Crystal Reports, DataJunction, Delphi, Excel, iHTML, FileMaker
Pro, FoxPro, Notes 4.5/4.6, SBSS, Perl DBD-ODBC, Paradox, Powerbuilder,
VC++ and Visual Basic.

</P>
<P>
If you know of any other application that works with <STRONG>MyODBC</STRONG>, please
mail <a HREF="mailto:myodbc@lists.mysql.com">myodbc@lists.mysql.com</a> about this!

</P>
<P>
If you encounter difficulties, we would like to have the log file from the
ODBC manager (the log you get when requesting logs from ODBCADMIN) and a
<STRONG>MyODBC</STRONG> log.  This will help shed some light on any problems.

</P>
<P>
To get a <STRONG>MyODBC</STRONG> log, please tag the 'Trace MyODBC' option flag in
the <STRONG>MyODBC</STRONG> connect/configure screen.
The log will be written to file <TT>`C:\myodbc.log'</TT>.
Note that you must use <CODE>MYSQL.DLL</CODE> and not <CODE>MYSQL2.DLL</CODE> for this
option to work!

</P>


<H2><A NAME="MyODBC_clients" HREF="manual_toc.html#MyODBC_clients">16.3  Programs known to work with <STRONG>MyODBC</STRONG></A></H2>

<P>
Most programs should work with <STRONG>MyODBC</STRONG>, but for each of those
listed below, we have tested it
ourselves or gotten confirmation from some user that it works:

</P>
<DL COMPACT>

<DT><STRONG>Program</STRONG>
<DD>
<STRONG>Comment</STRONG>
<DT>Access
<DD>
To make Access work:

<UL>
<LI>

You should have a primary key in the table.
<LI>

You should have a timestamp in all tables you want to be able to update..
<LI>

Only use double float fields. Access fails when comparing with single floats.
<LI>

Set the 'Return matching rows' option field when connecting to <STRONG>MySQL</STRONG>.
<LI>

Access on NT will report <CODE>BLOB</CODE> columns as <CODE>OLE OBJECTS</CODE>. If
you want to have <CODE>MEMO</CODE> columns instead, you should change the
column to <CODE>TEXT</CODE> with <CODE>ALTER TABLE</CODE>.
<LI>

Access can't always handle <CODE>DATE</CODE> columns properly. If you have a problem
with these, change the columns to <CODE>DATETIME</CODE>.
<LI>

In some cases, Access may generate illegal SQL queries that
<STRONG>MySQL</STRONG> can't understand. You can fix this by selecting
<CODE>"Query|SQLSpecific|Pass-Through"</CODE> from the Access menu.
</UL>

<DT>DataJunction
<DD>
You have to change it to output <CODE>VARCHAR</CODE> rather than <CODE>ENUM</CODE>, as
it exports the latter in a manner that causes <STRONG>MySQL</STRONG> grief.
<DT>Excel
<DD>
Works. Some tips:

<UL>
<LI>

If you have problems with dates, try to select them as strings using the
<CODE>CONCAT()</CODE> function. For example:

<PRE>
select CONCAT(rise_time), CONCAT(set_time)
    from sunrise_sunset;
</PRE>

Values retrieved as strings this way should be correctly recognized
as time values by Excel97.

The purpose of <CODE>CONCAT()</CODE> in this example is to fool ODBC into thinking
the column is of "string type". Without the <CODE>CONCAT()</CODE>, ODBC knows the
column is of time type, and Excel does not understand that.

Note that this is a bug in Excel, because it automatically converts a
string to a time. This would be great if the source was a text file, but
is plain stupid when the source is an ODBC connection that reports
exact types for each column.
</UL>

<DT>odbcadmin
<DD>
Test program for ODBC.
<DT>Delphi
<DD>
You must use DBE 3.2 or newer.  Set the 'Don't optimize column width'
option field when connecting to <STRONG>MySQL</STRONG>.

Also, here is some potentially useful delphi code that sets up both an
ODBC entry and a BDE entry for MyODBC (the BDE entry requires a BDE
Alias Editor which may be had for free at a Delphi Super Page near
you.):  (Thanks to Bryan Brunton <a HREF="mailto:bryan@flesherfab.com">bryan@flesherfab.com</a> for this)


<PRE>
fReg:= TRegistry.Create;
  fReg.OpenKey('\Software\ODBC\ODBC.INI\DocumentsFab', True);
  fReg.WriteString('Database', 'Documents');
  fReg.WriteString('Description', ' ');
  fReg.WriteString('Driver', 'C:\WINNT\System32\myodbc.dll');
  fReg.WriteString('Flag', '1');
  fReg.WriteString('Password', ");
  fReg.WriteString('Port', ' ');
  fReg.WriteString('Server', 'xmark');
  fReg.WriteString('User', 'winuser');
  fReg.OpenKey('\Software\ODBC\ODBC.INI\ODBC Data Sources', True);
  fReg.WriteString('DocumentsFab', 'MySQL');
  fReg.CloseKey;
  fReg.Free;

  Memo1.Lines.Add('DATABASE NAME=');
  Memo1.Lines.Add('USER NAME=');
  Memo1.Lines.Add('ODBC DSN=DocumentsFab');
  Memo1.Lines.Add('OPEN MODE=READ/WRITE');
  Memo1.Lines.Add('BATCH COUNT=200');
  Memo1.Lines.Add('LANGDRIVER=');
  Memo1.Lines.Add('MAX ROWS=-1');
  Memo1.Lines.Add('SCHEMA CACHE DIR=');
  Memo1.Lines.Add('SCHEMA CACHE SIZE=8');
  Memo1.Lines.Add('SCHEMA CACHE TIME=-1');
  Memo1.Lines.Add('SQLPASSTHRU MODE=SHARED AUTOCOMMIT');
  Memo1.Lines.Add('SQLQRYMODE=');
  Memo1.Lines.Add('ENABLE SCHEMA CACHE=FALSE');
  Memo1.Lines.Add('ENABLE BCD=FALSE');
  Memo1.Lines.Add('ROWSET SIZE=20');
  Memo1.Lines.Add('BLOBS TO CACHE=64');
  Memo1.Lines.Add('BLOB SIZE=32');

  AliasEditor.Add('DocumentsFab','MySQL',Memo1.Lines);
</PRE>

<DT>C++Builder
<DD>
Tested with BDE 3.0. The only known problem is that when the table
schema changes, query fields are not updated. BDE however does not seem
to recognize primary keys, only the index PRIMARY, though this has not
been a problem.
<DT>Visual basic
<DD>
To be able to update a table, you must define a primary key for the table.
</DL>



<H2><A NAME="ODBC_administrator" HREF="manual_toc.html#ODBC_administrator">16.4  How to fill in the various fields in the ODBC administrator program</A></H2>

<P>
There are three possibilities for specifying the server name on
Windows95:

</P>

<UL>
<LI>

Use the IP address of the server.
<LI>

Add a file <TT>`lmhosts'</TT> with the following info:


<PRE>
ip hostname
</PRE>

For example:


<PRE>
194.216.84.21 my
</PRE>

<LI>

Configure the PC to use DNS.
</UL>

<P>
Example of how to fill in the "ODBC setup":

<PRE>
Windows DSN name:   test
Description:        This is my test database
MySql Database:     test
Server:             194.216.84.21
User:               monty
Password:           my_password
Port:
</PRE>

<P>
The value for the <CODE>Windows DSN name</CODE> field is any name that is unique
in your windows ODBC setup.

</P>
<P>
You don't have to specify values for the <CODE>Server</CODE>, <CODE>User</CODE>,
<CODE>Password</CODE> or <CODE>Port</CODE> fields in the ODBC setup screen.
However, if you do, the values will be used as the defaults later when
you attempt to make a connection.  You have the option of changing the
values at that time.

</P>
<P>
If the port number is not given, the default port (3306)
is used.

</P>
<P>
If you specify the option <CODE>Read options from C:\my.cnf</CODE>, the groups
<CODE>client</CODE> and <CODE>odbc</CODE> will be read from the <TT>`C:\my.cnf'</TT> file.
You can use all options that are usable by <CODE>mysql_options()</CODE>.
See section <A HREF="manual.html#mysql_options">19.4.36  <CODE>mysql_options()</CODE></A>.

</P>


<H2><A NAME="ODBC_and_last_insert_id" HREF="manual_toc.html#ODBC_and_last_insert_id">16.5  How to get the value of an <CODE>AUTO_INCREMENT</CODE> column in ODBC</A></H2>

<P>
A common problem is how to get the value of an automatically-generated ID
from an <CODE>INSERT</CODE>. With ODBC, you can do something like this (assuming
that <CODE>auto</CODE> is an <CODE>AUTO_INCREMENT</CODE> field):

</P>

<PRE>
INSERT INTO foo (auto,text) VALUES(NULL,'text');
SELECT LAST_INSERT_ID();
</PRE>

<P>
Or, if you are just going to insert the ID into another table, you can do this:

</P>

<PRE>
INSERT INTO foo (auto,text) VALUES(NULL,'text');
INSERT INTO foo2 (id,text) VALUES(LAST_INSERT_ID(),'text');
</PRE>

<P>
For the benefit of some ODBC applications (at least Delphi and Access),
the following query can be used to find a newly-inserted row:

<PRE>
SELECT * FROM tbl_name WHERE auto IS NULL;
</PRE>



<H1><A NAME="Problems" HREF="manual_toc.html#Problems">17  Problems and common errors</A></H1>



<H2><A NAME="Crashing" HREF="manual_toc.html#Crashing">17.1  What to do if <STRONG>MySQL</STRONG> keeps crashing</A></H2>

<P>
All <STRONG>MySQL</STRONG> versions are tested on many platforms before they are
released.  This doesn't mean that there isn't any bugs in
<STRONG>MySQL</STRONG>, but that if there are bugs they are very few and can be
hard to find.  If you have a problem, it will always help if you try to
find out exactly what crashes your system as you will have a much better
chance of getting this fixed quickly.

</P>
<P>
First you should try to find out whether the problem is that the
<CODE>mysqld</CODE> daemon dies or whether your problem has to do with your
client.  You can check how long your <CODE>mysqld</CODE> server has been up by
executing <CODE>mysqladmin version</CODE>.  If <CODE>mysqld</CODE> has died, you may
find the reason for this in the file
<TT>`mysql-data-directory/'hostname'.err'</TT>.

</P>
<P>
Since it is very difficult to know why something is crashing, first try to
check whether or not things that work for others crash for you.  Please try
the following things:

</P>

<UL>
<LI>

Take down the <CODE>mysqld</CODE> daemon with <CODE>mysqladmin shutdown</CODE>, run
<CODE>isamchk --silent --force */*.ISM</CODE> on all tables and restart the
<CODE>mysqld</CODE> daemon.  This will ensure that you are running from a clean
state.  See section <A HREF="manual.html#Maintenance">13  Maintaining a <STRONG>MySQL</STRONG> installation</A>.

<LI>

Use <CODE>mysqld --log</CODE> and try to determine from the information in the log
whether or not some specific query kills the server. 95% of all bugs are
related to a particular query!  Normally this is one of the last queries in
the log file just before <STRONG>MySQL</STRONG> restarted.

You may be able to verify this using the following procedure:


<UL>
<LI>

Take down the <STRONG>MySQL</STRONG> daemon (with <CODE>mysqladmin shutdown</CODE>)
<LI>

Make a backup of files in the <STRONG>MySQL</STRONG> database directory.
<LI>

Check the tables with <CODE>isamchk -s */*.ISM</CODE> to verify that all tables
are correct.  If any table is corrupted, repair it with
<CODE>isamchk -r path-to-table.ISM</CODE>.
<LI>

Remove (or move away) any old log files from the <STRONG>MySQL</STRONG> data directory.
<LI>

Start the server with <CODE>safe_mysql --log</CODE>.
<LI>

If <CODE>mysqld</CODE> now dies, you can test if the problem is a specific
query by restoring the backup and executing <CODE>mysql &#60;
mysql-log-file</CODE>.  You can of course do the last test in some other
directory than the standard <STRONG>MySQL</STRONG> database directory by
starting another <STRONG>MySQL</STRONG> server with <CODE>safe_mysqld
--data=path-to-backup-directory</CODE>.
</UL>

<LI>

Have you tried the benchmarks?  They should test <STRONG>MySQL</STRONG> rather well.
You can also add code that simulates your application!  The benchmarks can be
found in the <TT>`bench'</TT> directory in the source distribution, or, for a
binary distribution, in the <TT>`sql-bench'</TT> directory under your
<STRONG>MySQL</STRONG> installation directory.

<LI>

Try <CODE>fork_test.pl</CODE> and <CODE>fork2_test.pl</CODE>.

<LI>

Check the file <TT>`mysql-data-directory/'hostname'.err'</TT> for any errors.

<LI>

If you configure <STRONG>MySQL</STRONG> for debugging, it will be much easier to
gather information about possible errors if something goes wrong.
Reconfigure <STRONG>MySQL</STRONG> with the <CODE>--with-debug</CODE> option to
<CODE>configure</CODE> and then recompile.  See section <A HREF="manual.html#Debugging_server">G.1  Debugging a <STRONG>MySQL</STRONG> server</A>.

<LI>

Configuring <STRONG>MySQL</STRONG> for debugging causes a safe memory allocator to be
included that can find some errors. It also provides a lot of output about
what is happening.

<LI>

Have you applied the latest patches for your operating system?

<LI>

Use the <CODE>--skip-locking</CODE> option to <CODE>mysqld</CODE>.  On some systems, the
<CODE>lockd</CODE> lock manager does not work properly; the <CODE>--skip-locking</CODE>
option tells <CODE>mysqld</CODE> not to use external locking.  (This means that you
cannot run 2 <CODE>mysqld</CODE> servers on the same data and that you must be
careful if you use <CODE>isamchk</CODE>, but it may be instructive to try the
option as a test.)

<LI>

Have you tried <CODE>mysqladmin -u root processlist</CODE> when <CODE>mysqld</CODE>
appears to be running but not responding?  Sometimes <CODE>mysqld</CODE> is not
comatose even though you might think so.  The problem may be that all
connections are in use, or there may be some internal lock problem.
<CODE>mysqladmin processlist</CODE> will usually be able to make a connection even
in these cases, and can provide useful information about the current number
of connections and their status.

<LI>

Run the command <CODE>mysqladmin -i 5 status</CODE>
in a separate window to produce statistics while you run your other queries.

<LI>

Try the following:

<OL>
<LI>

Start <CODE>mysqld</CODE> from <CODE>gdb</CODE> (or another debugger).

<LI>

Run your test scripts.

<LI>

Do <CODE>back</CODE> (or the backtrace command in your debugger) when
<CODE>mysqld</CODE> core dumps.
</OL>

<LI>

Try to simulate your application with a Perl script to force
<STRONG>MySQL</STRONG> to crash or misbehave.

<LI>

Or send a normal bug report. See section <A HREF="manual.html#Bug_reports">2.3  How to report bugs or problems</A>. But be even more detailed
than usual.  Since <STRONG>MySQL</STRONG> works for many people, it may be that the
crash results from something that exists only on your computer (for example,
an error that is related to your particular system libraries).
<LI>

If you have a problem with table with dynamic length rows and you are
not using <CODE>BLOB/TEXT</CODE> columns (but only <CODE>VARCHAR</CODE> columns) you
can try to change all <CODE>VARCHAR</CODE> to <CODE>CHAR</CODE> with <CODE>ALTER
TABLE</CODE>.  This will force <STRONG>MySQL</STRONG> to use fixed size rows.  Fixed
size rows take a little extra place, but are much more tolerant for
corruption!

The current dynamic row code has been in use at TCX for at least 3
years without any problems, but by nature dynamic length rows are more
prone to errors so it may be a good idea to try if the above helps!
</UL>



<H2><A NAME="Common_errors" HREF="manual_toc.html#Common_errors">17.2  Some common errors when using <STRONG>MySQL</STRONG></A></H2>



<H3><A NAME="Gone_away" HREF="manual_toc.html#Gone_away">17.2.1  <CODE>MySQL server has gone away</CODE> error</A></H3>

<P>
The most common reason for the <CODE>MySQL server has gone away</CODE> error
is that the server timed out and closed the connection. By default, the
server closes the connection after 8 hours if nothing has happened.

</P>
<P>
You can check that the <STRONG>MySQL</STRONG> hasn't died by executing
<CODE>mysqladmin version</CODE> and examining the uptime.

</P>
<P>
If you have a script, you just have to issue the query again for the client
to do an automatic reconnection.

</P>
<P>
You normally can get the following error codes in this case
(which one you get is OS-dependent):

</P>
<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><CODE>CR_SERVER_GONE_ERROR</CODE> </TD><TD> The client couldn't send a question to the
server.
</TR NOSAVE>
<TR><TD><CODE>CR_SERVER_LOST</CODE> </TD><TD> The client didn't get an error when writing
to the server, but it didn't get a full answer (or any answer) to the question.
</TR>
</TABLE>

<P>
You can also get these errors if you send a query to the server that is
incorrect or too large. If <CODE>mysqld</CODE> gets a packet that is too large
or out of order, it assumes that something has gone wrong with the client and
closes the connection.  If you need big queries (for example, if you are
working with big <CODE>BLOB</CODE> columns), you can increase the query limit by
starting <CODE>mysqld</CODE> with the <CODE>-O max_allowed_packet=#</CODE> option
(default 1M). The extra memory is allocated on demand, so <CODE>mysqld</CODE> will
use more memory only when you issue a big query or when <CODE>mysqld</CODE> must
return a big result row!

</P>


<H3><A NAME="Can_not_connect_to_server" HREF="manual_toc.html#Can_not_connect_to_server">17.2.2  <CODE>Can't connect to [local] MySQL server</CODE> error</A></H3>

<P>
A <STRONG>MySQL</STRONG> client can connect to the <CODE>mysqld</CODE> server in two
different ways: Unix sockets, which connect through a file in the file
system (default <TT>`/tmp/mysqld.sock'</TT>), or TCP/IP, which connects
through a port number.  Unix sockets are faster than TCP/IP but can only
be used when connecting to a server on the same computer.  Unix sockets
are used if you don't specify a hostname or if you specify the special
hostname <CODE>localhost</CODE>.

</P>
<P>
The error <CODE>Can't connect to ...</CODE> normally means that there isn't a
<STRONG>MySQL</STRONG> server running on the system or that you are using a wrong
socket file or TCP/IP port when trying to connect to the <CODE>mysqld</CODE>
server.

</P>
<P>
Start by check (using <CODE>ps</CODE>) that there is a process running named
<CODE>mysqld</CODE> on your server!  If there isn't any <CODE>mysqld</CODE> process, you
should start one. See section <A HREF="manual.html#Starting_server">4.15.2  Problems starting the <STRONG>MySQL</STRONG> server</A>

</P>
<P>
If a <CODE>mysqld</CODE> process is running, you can check the server by
trying these different connections (the port number and socket pathname
might be different in your setup, of course):

</P>

<PRE>
shell&#62; mysqladmin version
shell&#62; mysqladmin -h `hostname` version
shell&#62; mysqladmin -h `hostname` --port=3306 version
shell&#62; mysqladmin -h 'ip for your host' version
shell&#62; mysqladmin --socket=/tmp/mysql.sock version
</PRE>

<P>
Note the use of backquotes rather than forward quotes with the <CODE>hostname</CODE>
command; these cause the output of <CODE>hostname</CODE> (i.e., the current
hostname) to be substituted into the <CODE>mysqladmin</CODE> command.

</P>
<P>
Here are some reasons the <CODE>Can't connect to local MySQL server</CODE>
error might occur:

</P>

<UL>
<LI><CODE>mysqld</CODE> is not running.

<LI>You are running on a system that uses MIT-pthreads.

If you are running on a system that doesn't have native threads, <CODE>mysqld</CODE>
uses the MIT-pthreads package.
See section <A HREF="manual.html#Which_OS">4.2  Operating systems supported by <STRONG>MySQL</STRONG></A>.
However, MIT-pthreads doesn't support Unix sockets, so on such a system you
must always specify the hostname explicitly when connecting to the server.
Try using this command to check the connection to the server:

<PRE>
shell&#62; mysqladmin -h `hostname` version
</PRE>

<LI>Someone has removed the Unix socket that <CODE>mysqld</CODE> uses (default

<TT>`/tmp/mysqld.sock'</TT>).  You might have a <CODE>cron</CODE> job that removes the
<STRONG>MySQL</STRONG> socket (e.g., a job that removes old files from the <TT>`/tmp'</TT>
directory).  You can always run <CODE>mysqladmin version</CODE> and
check that the socket <CODE>mysqladmin</CODE> is trying to use really exists.
The fix in this case is to change the <CODE>cron</CODE> job to not remove
<TT>`mysqld.sock'</TT> or to place the socket somewhere else. You can specify
a different socket location at <STRONG>MySQL</STRONG> configuration time with this
command:

<PRE>
shell&#62; ./configure --with-unix-socket-path=/path/to/socket
</PRE>

You can also start <CODE>safe_mysqld</CODE> with the
<CODE>--socket=/path/to/socket</CODE> option and set the environment variable
<CODE>MYSQL_UNIX_PORT</CODE> to the socket pathname before starting your
<STRONG>MySQL</STRONG> clients.  @item You have started the <CODE>mysqld</CODE> server with
the <CODE>--socket=/path/to/socket</CODE> option.  If you change the socket
pathname for the server, you must also notify the <STRONG>MySQL</STRONG> clients
about the new path. You can do this by setting the environment variable
<CODE>MYSQL_UNIX_PORT</CODE> to the socket pathname or by providing the socket path
as an argument to the clients. You can test the socket with this command:


<PRE>
shell&#62; mysqladmin --socket=/path/to/socket version
</PRE>

<LI>

You are using Linux and one thread has died (core dumped).  In this case
you must kill the other <CODE>mysqld</CODE> threads (for example with the
<CODE>mysql_zap</CODE> script before you can start a new <STRONG>MySQL</STRONG>
server.  See section <A HREF="manual.html#Crashing">17.1  What to do if <STRONG>MySQL</STRONG> keeps crashing</A>
</UL>

<P>
If you get the error message <CODE>Can't connect to MySQL server on
some_hostname</CODE>, you can try the following things to find out what is the
problem:

</P>

<UL>
<LI>

Check if the server up by doing <CODE>telnet your-host-name
tcp-ip-port-number</CODE> and press <CODE>RETURN</CODE> a couple of times.  If there
is a <STRONG>MySQL</STRONG> server running on this port you should get a
responses that includes the version number of the running <STRONG>MySQL</STRONG>
server.  If you get an error like <CODE>telnet: Unable to connect to
remote host: Connection refused</CODE>, then there is no server running on the
used port.
<LI>

Try connecting to the <CODE>mysqld</CODE> daemon on the local machine and check
the TCP/IP port that mysqld it's configured to use (variable <CODE>port</CODE>) with
<CODE>mysqladmin variables</CODE>.
<LI>

Check that your <CODE>mysqld</CODE> server is not started with the
<CODE>--skip-networking</CODE> option.
</UL>



<H3><A NAME="Blocked_host" HREF="manual_toc.html#Blocked_host">17.2.3  <CODE>Host '...' is blocked</CODE> error</A></H3>

<P>
If you get a error like this:

</P>

<PRE>
Host 'hostname' is blocked because of many connection errors.
Unblock with 'mysqladmin flush-hosts'
</PRE>

<P>
This means that <CODE>mysqld</CODE> has gotten a lot (<CODE>max_connect_errors</CODE>)
of connect requests from the host <CODE>'hostname'</CODE> that have been interrupted
in the middle. After <CODE>max_connect_errors</CODE> failed requests, <CODE>mysqld</CODE>
assumes that something is wrong (like a attack from a cracker), and
blocks the site from further connections until someone executes the command
<CODE>mysqladmin flush-hosts</CODE>.

</P>
<P>
By default, <CODE>mysqld</CODE> blocks a host after 10 connection errors.
You can easily adjust this by starting the server like this:

</P>

<PRE>
shell&#62; safe_mysqld -O max_connect_errors=10000 &#38;
</PRE>

<P>
Note that if you get this error message for a given host, you should first
check that there isn't anything wrong with TCP/IP connections from that
host.  If your TCP/IP connections aren't working, it won't do you any good to
increase the value of the <CODE>max_connect_errors</CODE> variable!

</P>


<H3><A NAME="Out_of_memory" HREF="manual_toc.html#Out_of_memory">17.2.4  <CODE>Out of memory</CODE> error</A></H3>

<P>
If you issue a query and get something like the following error:

</P>

<PRE>
mysql: Out of memory at line 42, 'malloc.c'
mysql: needed 8136 byte (8k), memory in use: 12481367 bytes (12189k)
ERROR 2008: MySQL client ran out of memory
</PRE>

<P>
Note that the error refers to the <STRONG>MySQL</STRONG> client <CODE>mysql</CODE>. The
reason for this error is simply that the client does not have enough memory to
store the whole result.

</P>
<P>
To remedy the problem, first check that your query is correct. Is it
reasonable that it should return so many rows?  If so,
you can use <CODE>mysql --quick</CODE>, which uses <CODE>mysql_use_result()</CODE>
to retrieve the result set.  This places less of a load on the client (but
more on the server).

</P>


<H3><A NAME="Packet_too_large" HREF="manual_toc.html#Packet_too_large">17.2.5  <CODE>Packet too large</CODE> error</A></H3>

<P>
When a <STRONG>MySQL</STRONG> client or the <CODE>mysqld</CODE> server gets a packet bigger
than <CODE>max_allowed_packet</CODE> bytes, it issues a <CODE>Packet too large</CODE>
error and closes the connection.

</P>
<P>
If you are using the <CODE>mysql</CODE> client, you may specify a bigger buffer by
starting the client with <CODE>mysql --set-variable=max_allowed_packet=8M</CODE>.

</P>
<P>
If you are using other clients that do not allow you to specify the maximum
packet size (such as <CODE>DBI</CODE>), you need to set the packet size when you
start the server.  You cau use a command-line option to <CODE>mysqld</CODE> to set
<CODE>max_allowed_packet</CODE> to a larger size.  For example, if you are
expecting to store the full length of a <CODE>BLOB</CODE> into a table, you'll need
to start the server with the <CODE>--set-variable=max_allowed_packet=24M</CODE>
option.

</P>
<P>
<A NAME="IDX654"></A>


<H3><A NAME="Full_table" HREF="manual_toc.html#Full_table">17.2.6  <CODE>The table is full</CODE> error</A></H3>

<P>
This error occurs when an in-memory temporary table becomes larger than
<CODE>tmp_table_size</CODE> bytes. To avoid this problem, you can use the
<CODE>-O tmp_table_size=#</CODE> option to <CODE>mysqld</CODE> to increase the
temporary table size, or use the SQL option <CODE>SQL_BIG_TABLES</CODE> before
you issue the problematic query. See section <A HREF="manual.html#SET_OPTION">7.24  <CODE>SET OPTION</CODE> syntax</A>.

</P>
<P>
You can also start <CODE>mysqld</CODE> with the <CODE>--big-tables</CODE> option.
This is exactly the same as using <CODE>SQL_BIG_TABLES</CODE> for all queries.

</P>
<P>
<A NAME="IDX655"></A>


<H3><A NAME="Commands_out_of_sync" HREF="manual_toc.html#Commands_out_of_sync">17.2.7  <CODE>Commands out of sync</CODE> error in client</A></H3>

<P>
If you get <CODE>Commands out of sync; You can't run this command now</CODE>
in your client code, you are calling client functions in the wrong order!

</P>
<P>
This can happen, for example, if you are using <CODE>mysql_use_result()</CODE> and
try to execute a new query before you have called <CODE>mysql_free_result()</CODE>.
It can also happen if you try to execute two queries that return data without
a <CODE>mysql_use_result()</CODE> or <CODE>mysql_store_result()</CODE> in between.

</P>


<H3><A NAME="Ignoring_user" HREF="manual_toc.html#Ignoring_user">17.2.8  <CODE>Ignoring user</CODE> error</A></H3>

<P>
If you get the following error:

</P>
<P>
<CODE>Found wrong password for user: 'some_user@some_host'; Ignoring user</CODE>

</P>
<P>
This means that when <CODE>mysqld</CODE> was started or when it reloaded the
permissions tables, it found an entry in the <CODE>user</CODE> table with
an invalid password.  As a result, the entry is simply ignored by the
permission system.

</P>
<P>
Possible causes of and fixes for this problem:

</P>

<UL>
<LI>

You may be running a new version of <CODE>mysqld</CODE> with an old
<CODE>user</CODE> table.
You can check this by executing <CODE>mysqlshow mysql user</CODE> to see if
the password field is shorter than 16 characters. If so, you can correct this
condition by running the <CODE>scripts/add_long_password</CODE> script.

<LI>

The user has an old password (8 chararacters long) and you didn't start
<CODE>mysqld</CODE> with the <CODE>--old-protocol</CODE> option.
Update the user in the <CODE>user</CODE> table with a new password or
restart <CODE>mysqld</CODE> with <CODE>--old-protocol</CODE>.

<LI>

<A NAME="IDX656"></A>
You have specified a password in the <CODE>user</CODE> table without using the
<CODE>PASSWORD()</CODE> function.  Use <CODE>mysql</CODE> to update the user in the
<CODE>user</CODE> table with a new password. Make sure to use the <CODE>PASSWORD()</CODE>
function:


<PRE>
mysql&#62; update user set password=PASSWORD('your password')
           where user='XXX';
</PRE>

</UL>



<H3><A NAME="Cannot_find_table" HREF="manual_toc.html#Cannot_find_table">17.2.9  <CODE>Table 'xxx' doesn't exist</CODE> error</A></H3>

<P>
If you get the error <CODE>Table 'xxx' doesn't exist</CODE> or <CODE>Can't
find file: 'xxx' (errno: 2)</CODE>, this means that no table exists
in the current database with the name <CODE>xxx</CODE>.

</P>
<P>
Note that as <STRONG>MySQL</STRONG> uses directories and files to store databases and
tables, the database and table names are <STRONG>case sensitive</STRONG>!
(On Win32 the databases and tables names are not case sensitive, but all
references to a given table within a query must use the same case!)

</P>
<P>
You can check which tables you have in the current database with
<CODE>SHOW TABLES</CODE>. See section <A HREF="manual.html#SHOW">7.20  <CODE>SHOW</CODE> syntax (Get information about tables, columns,...)</A>.

</P>
<P>
<A NAME="IDX657"></A>
<A NAME="IDX658"></A>


<H2><A NAME="Full_disk" HREF="manual_toc.html#Full_disk">17.3  How <STRONG>MySQL</STRONG> handles a full disk</A></H2>

<P>
When a disk full condition occurs, <STRONG>MySQL</STRONG> does the following:

</P>

<UL>
<LI>

It checks once every minute to see whether or not there is enough space to
write the current row. If there is enough space, it continues as if nothing had
happened.
<LI>

Every 6 minutes it writes an entry to the log file warning about the disk
full condition.
</UL>

<P>
To alleviate the problem, you can take the following actions:

</P>

<UL>
<LI>

To continue, you only have to free enough disk space to insert all records.
<LI>

To abort the thread, you must send a <CODE>mysqladmin kill</CODE> to the thread.
The thread will be aborted the next time it checks the disk (in 1 minute).
<LI>

Note that other threads may be waiting for the table that caused the "disk
full" condition.  If you have several "locked" threads, killing the one
thread that is waiting on the disk full condition will allow the other
threads to continue.
</UL>



<H2><A NAME="Multiple_sql_commands" HREF="manual_toc.html#Multiple_sql_commands">17.4  How to run SQL commands from a text file</A></H2>

<P>
The <CODE>mysql</CODE> client typically is used interactively, like this:

</P>

<PRE>
shell&#62; mysql database
</PRE>

<P>
However, it's also possible to put your SQL commands in a file and tell
<CODE>mysql</CODE> to read its input from that file.  To do so, create a text
file <TT>`text_file'</TT> that contains the commands you wish to execute.
Then invoke <CODE>mysql</CODE> as shown below:

</P>

<PRE>
shell&#62; mysql database &#60; text_file
</PRE>

<P>
You can also start your text file with a <CODE>USE db_name</CODE> statement.  In
this case, it is unnecessary to specify the database name on the command
line:

</P>

<PRE>
shell&#62; mysql &#60; text_file
</PRE>

<P>
See section <A HREF="manual.html#Programs">12.1  Overview of the different <STRONG>MySQL</STRONG> programs</A>.

</P>


<H2><A NAME="Temporary_files" HREF="manual_toc.html#Temporary_files">17.5  Where <STRONG>MySQL</STRONG> stores temporary files</A></H2>

<P>
<STRONG>MySQL</STRONG> uses the value of the <CODE>TMPDIR</CODE> environment variable as
the pathname of the directory in which to store temporary files.  If you don't
have <CODE>TMPDIR</CODE> set, <STRONG>MySQL</STRONG> uses the system default, which is
normally <TT>`/tmp'</TT> or <TT>`/usr/tmp'</TT>.  If the file system containing your
temporary file directory is too small, you should edit <CODE>safe_mysqld</CODE> to
set <CODE>TMPDIR</CODE> to point to a directory in a file system where you have
enough space!  You can also set the temporary directory using the
<CODE>--tmpdir</CODE> option to <CODE>mysqld</CODE>.

</P>
<P>
<STRONG>MySQL</STRONG> creates all temporary files as "hidden files". This ensures
that the temporary files will be removed if <CODE>mysqld</CODE> is terminated.  The
disadvantage of using hidden files is that you will not see a big temporary
file that fills up the file system in which the temporary file directory is
located.

</P>
<P>
When sorting (<CODE>ORDER BY</CODE> or <CODE>GROUP BY</CODE>), <STRONG>MySQL</STRONG> normally
uses one or two temporary files. The maximum disk-space needed is:

</P>

<PRE>
(length of what is sorted + sizeof(database pointer))
* number of matched rows
* 2
</PRE>

<P>
<CODE>sizeof(database pointer)</CODE> is usually 4, but may grow in the future for
really big tables.

</P>
<P>
For some <CODE>SELECT</CODE> queries, <STRONG>MySQL</STRONG> also creates temporary SQL
tables. These are not hidden and have names of the form <TT>`SQL_*'</TT>.

</P>
<P>
<CODE>ALTER TABLE</CODE> and <CODE>OPTIMIZE TABLE</CODE> create a temporary table in the
same directory as the original table.

</P>


<H2><A NAME="Problems_with_mysql.sock" HREF="manual_toc.html#Problems_with_mysql.sock">17.6  How to protect <TT>`/tmp/mysql.sock'</TT> from being deleted</A></H2>

<P>
If you have problems with the fact that anyone can delete the
<STRONG>MySQL</STRONG> communication socket <TT>`/tmp/mysql.sock'</TT>, you can,
on most versions of Unix, protect your <TT>`/tmp'</TT> file system by setting
the <CODE>sticky</CODE> bit on it.  Log in as <CODE>root</CODE> and do the following:

</P>

<PRE>
shell&#62; chmod +s /tmp
</PRE>

<P>
This will protect your <TT>`/tmp'</TT> file system so that files can be deleted
only by their owners or the superuser (<CODE>root</CODE>).

</P>
<P>
You can check if the <CODE>sticky</CODE> bit is set by executing <CODE>ls -ld /tmp</CODE>.
If the last permission bit is <CODE>t</CODE>, the bit is set.

</P>


<H2><A NAME="Error_Access_denied" HREF="manual_toc.html#Error_Access_denied">17.7  <CODE>Access denied</CODE> error</A></H2>

<P>
See section <A HREF="manual.html#Privileges">6.6  How the privilege system works</A>. And especially see section <A HREF="manual.html#Access_denied">6.13  Causes of <CODE>Access denied</CODE> errors</A>.

</P>


<H2><A NAME="Changing_MySQL_user" HREF="manual_toc.html#Changing_MySQL_user">17.8  How to run <STRONG>MySQL</STRONG> as a normal user</A></H2>

<P>
The <STRONG>MySQL</STRONG> server <CODE>mysqld</CODE> can be started and run by any user.
In order to change <CODE>mysqld</CODE> to run as Unix user <CODE>user_name</CODE>, you must
do the following:

</P>

<OL>
<LI>

Stop the server if it's running (use <CODE>mysqladmin shutdown</CODE>).

<LI>

Change the database directories and files so that <CODE>user_name</CODE> has
privileges to read and write files in them (you may need to do this as
the Unix <CODE>root</CODE> user):


<PRE>
shell&#62; chown -R user_name /path/to/mysql/datadir
</PRE>

If directories or files within the <STRONG>MySQL</STRONG> data directory are
symlinks, you'll also need to follow those links and change the directories
and files they point to.  <CODE>chown -R</CODE> may not follow symlinks for
you.

<LI>

Start the server as user <CODE>user_name</CODE>, or, if you are using
<STRONG>MySQL</STRONG> 3.22 or later, start <CODE>mysqld</CODE> as the Unix <CODE>root</CODE>
user and use the <CODE>--user=user_name</CODE> option.  <CODE>mysqld</CODE> will switch
to run as Unix user <CODE>user_name</CODE> before accepting any connections.

<LI>

If you are using the <CODE>mysql.server</CODE> script to start <CODE>mysqld</CODE> when
the system is rebooted, you should edit <CODE>mysql.server</CODE> to use <CODE>su</CODE>
to run <CODE>mysqld</CODE> as user <CODE>user_name</CODE>, or to invoke <CODE>mysqld</CODE>
with the <CODE>--user</CODE> option.  (No changes to <CODE>safe_mysqld</CODE> are
necessary.)
</OL>

<P>
At this point, your <CODE>mysqld</CODE> process should be running fine and dandy as
the Unix user <CODE>user_name</CODE>. One thing hasn't changed, though: the
contents of the permissions tables. By default (right after running the
permissions table install script <CODE>mysql_install_db</CODE>), the <STRONG>MySQL</STRONG>
user <CODE>root</CODE> is the only user with permission to access the <CODE>mysql</CODE>
database or to create or drop databases.  Unless you have changed those
permissions, they still hold. This shouldn't stop you from accessing
<STRONG>MySQL</STRONG> as the <STRONG>MySQL</STRONG> <CODE>root</CODE> user when you're logged in
as a Unix user other than <CODE>root</CODE>; just specify the <CODE>-u root</CODE> option
to the client program.

</P>
<P>
Note that accessing <STRONG>MySQL</STRONG> as <CODE>root</CODE>, by supplying <CODE>-u
root</CODE> on the command line, has <EM>nothing</EM> to do with <STRONG>MySQL</STRONG> running
as the Unix <CODE>root</CODE> user, or, indeed, as other Unix user. The access
permissions and user names of <STRONG>MySQL</STRONG> are completely separate from
Unix user names. The only connection with Unix user names is that if you
don't provide a <CODE>-u</CODE> option when you invoke a client program, the client
will try to connect using your Unix login name as your <STRONG>MySQL</STRONG> user
name.

</P>
<P>
If your Unix box itself isn't secured, you should probably at least put a
password on the <STRONG>MySQL</STRONG> <CODE>root</CODE> users in the access tables.
Otherwise, any user with an account on that machine can run <CODE>mysql -u
root db_name</CODE> and do whatever he likes.

</P>


<H2><A NAME="File_permissions" HREF="manual_toc.html#File_permissions">17.9  Problems with file permissions</A></H2>

<P>
If you have problems with file permissions, for example, if <CODE>mysql</CODE>
issues the following error message when you create a table:

</P>

<PRE>
ERROR: Can't find file: 'path/with/filename.frm' (Errcode: 13)
</PRE>

<P>
<A NAME="IDX659"></A>
<A NAME="IDX660"></A>
Then the environment variable <CODE>UMASK</CODE> might be set incorrectly when
<CODE>mysqld</CODE> starts up.  The default umask value is <CODE>0660</CODE>. You can
change this behavior by starting <CODE>safe_mysqld</CODE> as follows:

</P>

<PRE>
shell&#62; UMASK=384  # = 600 in octal
shell&#62; export UMASK
shell&#62; /path/to/safe_mysqld &#38;
</PRE>



<H2><A NAME="Not_enough_file_handles" HREF="manual_toc.html#Not_enough_file_handles">17.10  File not found</A></H2>

<P>
If you get <CODE>ERROR '...' not found (errno: 23)</CODE>, <CODE>Can't open
file: ... (errno: 24)</CODE> or any other error with <CODE>errno 23</CODE> or
<CODE>errno 24</CODE> from <STRONG>MySQL</STRONG>, it means that you haven't allocated
enough file descriptors for <STRONG>MySQL</STRONG>.  You can use the
<CODE>perror</CODE> utility to get a description of what the error number
means:

</P>

<PRE>
shell&#62; perror 23
File table overflow
shell&#62; perror 24
Too many open files
</PRE>

<P>
The problem here is that <CODE>mysqld</CODE> is trying to keep open too many
files simultaneously.  You can either tell <CODE>mysqld</CODE> not to open so
many files at once, or increase the number of file descriptors
available to <CODE>mysqld</CODE>.

</P>
<P>
To tell <CODE>mysqld</CODE> to keep open fewer files at a time, you can make the
table cache smaller by using the <CODE>-O table_cache=32</CODE> option
to <CODE>safe_mysqld</CODE> (the default value is 64). Reducing the value of
<CODE>max_connections</CODE> will also reduce the number of open files (the default
value is 90).

</P>
<P>
<A NAME="IDX661"></A>
To change the number of file descriptors available to <CODE>mysqld</CODE>, modify
the <CODE>safe_mysqld</CODE> script.  There is a commented-out line
<CODE>ulimit -n 256</CODE> in the script.  You can remove the <CODE>'#'</CODE> character
to uncomment this line, and change the number 256 to change the number of
file descriptors available to <CODE>mysqld</CODE>.

</P>
<P>
<CODE>ulimit</CODE> can increase the number of file descriptors, but only up to the
limit imposed by the operating system.  If you need to increase the OS limit
on the number of file descriptors available to each process, consult the
documentation for your operating system.

</P>
<P>
Note that if you run the <CODE>tcsh</CODE> shell, <CODE>ulimit</CODE> will not work!
<CODE>tcsh</CODE> will also report incorrect values when you ask for the current
limits!  In this case you should start <CODE>safe_mysqld</CODE> with <CODE>sh</CODE>!

</P>


<H2><A NAME="Using_DATE" HREF="manual_toc.html#Using_DATE">17.11  Problems using <CODE>DATE</CODE> columns</A></H2>

<P>
The format of a <CODE>DATE</CODE> value is <CODE>'YYYY-MM-DD'</CODE>. According to ANSI
SQL, no other format is allowed. You should use this format in <CODE>UPDATE</CODE>
expressions and in the WHERE clause of <CODE>SELECT</CODE> statements.  For
example:

</P>

<PRE>
mysql&#62; SELECT * FROM tbl_name WHERE date &#62;= '1997-05-05';
</PRE>

<P>
As a convenience, <STRONG>MySQL</STRONG> automatically converts a date to a number if
the date is used in a numeric context (and vice versa). It is also smart
enough to allow a "relaxed" string form when updating and in a <CODE>WHERE</CODE>
clause that compares a date to a <CODE>TIMESTAMP</CODE>, <CODE>DATE</CODE> or a
<CODE>DATETIME</CODE> column.  (Relaxed form means that any non-numeric character
may be used as the separator between parts. For example, <CODE>'1998-08-15'</CODE>
and <CODE>'1998#08#15'</CODE> are equivalent.) <STRONG>MySQL</STRONG> can also convert a
string containing no separators (such as <CODE>'19980815'</CODE>), provided it
makes sense as a date.

</P>
<P>
The special date <CODE>'0000-00-00'</CODE> can be stored and retrieved as
<CODE>'0000-00-00'.</CODE> When using a <CODE>'0000-00-00'</CODE> date through
<STRONG>MyODBC</STRONG>, it will automatically be converted to <CODE>NULL</CODE> in
<STRONG>MyODBC</STRONG> 2.50.12 and above, because ODBC can't handle this kind of
date.

</P>
<P>
Since <STRONG>MySQL</STRONG> performs the conversions described above, the following
statements work:

</P>

<PRE>
mysql&#62; INSERT INTO tbl_name (idate) VALUES (19970505);
mysql&#62; INSERT INTO tbl_name (idate) VALUES ('19970505');
mysql&#62; INSERT INTO tbl_name (idate) VALUES ('97-05-05');
mysql&#62; INSERT INTO tbl_name (idate) VALUES ('1997.05.05');
mysql&#62; INSERT INTO tbl_name (idate) VALUES ('1997 05 05');
mysql&#62; INSERT INTO tbl_name (idate) VALUES ('0000-00-00');

mysql&#62; SELECT idate FROM tbl_name WHERE idate &#62;= '1997-05-05';
mysql&#62; SELECT idate FROM tbl_name WHERE idate &#62;= 19970505;
mysql&#62; SELECT mod(idate,100) FROM tbl_name WHERE idate &#62;= 19970505;
mysql&#62; SELECT idate FROM tbl_name WHERE idate &#62;= '19970505';
</PRE>

<P>
However, the following will not work:

</P>

<PRE>
mysql&#62; SELECT idate FROM tbl_name WHERE STRCMP(idate,'19970505')=0;
</PRE>

<P>
<CODE>STRCMP()</CODE> is a string function, so it converts <CODE>idate</CODE> to
a string and performs a string comparison.  It does not convert
<CODE>'19970505'</CODE> to a date and perform a date comparison.

</P>
<P>
Note that <STRONG>MySQL</STRONG> does no checking whether or not the date is
correct.  If you store an incorrect date, such as <CODE>'1998-2-31'</CODE>, the
wrong date will be stored. If the date cannot be converted to any reasonable
value, a <CODE>0</CODE> is stored in the <CODE>DATE</CODE> field.  This is mainly a speed
issue and we think it is up to the application to check the dates, and not
the server.

</P>
<P>
<A NAME="IDX662"></A>
<A NAME="IDX663"></A>
<A NAME="IDX664"></A>


<H2><A NAME="Timezone_problems" HREF="manual_toc.html#Timezone_problems">17.12  Timezone problems</A></H2>

<P>
If you have a problem with <CODE>SELECT NOW()</CODE> returning values in GMT and
not your local time, you have to set the <CODE>TZ</CODE> environment variable to
your current timezone.  This should be done for the environment in which
the server runs, for example in <CODE>safe_mysqld</CODE> or <CODE>mysql.server</CODE>.

</P>
<P>
<A NAME="IDX665"></A>
<A NAME="IDX666"></A>
<A NAME="IDX667"></A>


<H2><A NAME="Case_sensitivity" HREF="manual_toc.html#Case_sensitivity">17.13  Case sensitivity in searches</A></H2>

<P>
By default, <STRONG>MySQL</STRONG> searches are case-insensitive (although there are
some character sets that are never case insensitive, such as <CODE>czech</CODE>).
That means that if you search with <CODE>col_name LIKE 'a%'</CODE>, you will get all
column values that start with <CODE>A</CODE> or <CODE>a</CODE>. If you want to make this
search case-sensitive, use something like <CODE>INDEX(col_name, "A")=0</CODE> to
check a prefix. Or use <CODE>STRCMP(col_name, "A") = 0</CODE> if the column value
must be exactly <CODE>"A"</CODE>.

</P>
<P>
Simple comparison operations (<CODE>&#62;=, &#62;, = , &#60; , &#60;=</CODE>, sorting and
grouping) are based on each character's "sort value". Characters with
the same sort value (like E, e and 'e) are treated as the same character!

</P>
<P>
<CODE>LIKE</CODE> comparisons are done on the uppercase value of each character
(E == e but E &#60;&#62; 'e)

</P>
<P>
If you want a column always to be treated in case-sensitive fashion,
declare it as <CODE>BINARY</CODE>. See section <A HREF="manual.html#CREATE_TABLE">7.6  <CODE>CREATE TABLE</CODE> syntax</A>.

</P>
<P>
If you are using Chinese data in the so-called big5 encoding, you want to
make all character columns <CODE>BINARY</CODE>. This works because the sorting
order of big5 encoding characters is based on the order of ASCII codes.

</P>
<P>
<A NAME="IDX668"></A>
<A NAME="IDX669"></A>


<H2><A NAME="Problems_with_NULL" HREF="manual_toc.html#Problems_with_NULL">17.14  Problems with <CODE>NULL</CODE> values</A></H2>

<P>
The concept of the <CODE>NULL</CODE> value is a common source of confusion for
newcomers to SQL, who often think that <CODE>NULL</CODE> is the same thing as an
empty string <CODE>"</CODE>.  This is not the case! For example, the following
statements are completely different:

</P>

<PRE>
mysql&#62; INSERT INTO my_table (phone) VALUES (NULL);
mysql&#62; INSERT INTO my_table (phone) VALUES ("");
</PRE>

<P>
Both statements insert a value into the <CODE>phone</CODE> column, but the first
inserts a <CODE>NULL</CODE> value and the second inserts an empty string.  The
meaning of the first can be regarded as "phone number is not known" and the
meaning of the second can be regarded as "she has no phone".

</P>
<P>
In SQL, the <CODE>NULL</CODE> value is always false in comparison to any
other value, even <CODE>NULL</CODE>.  An expression that contains <CODE>NULL</CODE>
always produces a <CODE>NULL</CODE> value unless otherwise indicated in
the documentation for the operators and functions involved in the
expression. All columns in the following example return <CODE>NULL</CODE>:

</P>

<PRE>
mysql&#62; SELECT NULL,1+NULL,CONCAT('Invisible',NULL);
</PRE>

<P>
If you want to search for column values that are <CODE>NULL</CODE>, you
cannot use the <CODE>=NULL</CODE> test. The following statement returns no
rows, because <CODE>expr = NULL</CODE> is FALSE, for any expression:

</P>

<PRE>
mysql&#62; SELECT * FROM my_table WHERE phone = NULL;
</PRE>

<P>
To look for <CODE>NULL</CODE> values, you must use the <CODE>IS NULL</CODE> test.
The following shows how to find the <CODE>NULL</CODE> phone number and the
empty phone number:

</P>

<PRE>
mysql&#62; SELECT * FROM my_table WHERE phone IS NULL;
mysql&#62; SELECT * FROM my_table WHERE phone = "";
</PRE>

<P>
In <STRONG>MySQL</STRONG>, as in many other SQL servers, you can't index
columns that can have <CODE>NULL</CODE> values.  You must declare such columns
<CODE>NOT NULL</CODE>. Conversely, you cannot insert <CODE>NULL</CODE> into an indexed
column.

</P>
<P>
<A NAME="IDX670"></A>
When reading data with <CODE>LOAD DATA INFILE</CODE>, empty columns are updated
with <CODE>"</CODE>. If you want a <CODE>NULL</CODE> value in a column, you should use
<CODE>\N</CODE> in the text file. The literal word <CODE>'NULL'</CODE> may also be used
under some circumstances.
See section <A HREF="manual.html#LOAD_DATA">7.15  <CODE>LOAD DATA INFILE</CODE> syntax</A>.

</P>
<P>
When using <CODE>ORDER BY</CODE>, <CODE>NULL</CODE> values are presented first. If you
sort in descending order using <CODE>DESC</CODE>, <CODE>NULL</CODE> values are presented
last.  When using <CODE>GROUP BY</CODE>, all <CODE>NULL</CODE> values are regarded as
equal.

</P>
<P>
To help with <CODE>NULL</CODE> handling, you can use the <CODE>IS NULL</CODE> and
<CODE>IS NOT NULL</CODE> operators and the <CODE>IFNULL()</CODE> function.

</P>
<P>
<A NAME="IDX671"></A>
<A NAME="IDX672"></A>
<A NAME="IDX673"></A>
<A NAME="IDX674"></A>
For some column types, <CODE>NULL</CODE> values are handled specially.  If you
insert <CODE>NULL</CODE> into the first <CODE>TIMESTAMP</CODE> column of a table, the
current date and time is inserted.  If you insert <CODE>NULL</CODE> into an
<CODE>AUTO_INCREMENT</CODE> column, the next number in the sequence is inserted.

</P>
<P>
<A NAME="IDX675"></A>


<H2><A NAME="Problems_with_alias" HREF="manual_toc.html#Problems_with_alias">17.15  Problems with <CODE>alias</CODE></A></H2>

<P>
You can use alias to refer to a column in the <CODE>GROUP BY</CODE>,
<CODE>ORDER BY</CODE> or in the <CODE>HAVING</CODE> part.  Aliases can also be used
to give columns more better names:

</P>

<PRE>
SELECT SQRT(a*b) as rt FROM table_name GROUP BY rt HAVING rt &#62; 0;
SELECT id,COUNT(*) AS cnt FROM table_name GROUP BY id HAVING cnt &#62; 0;
SELECT id AS "Customer identity" FROM table_name;
</PRE>

<P>
Note that you ANSI SQL doesn't allow you to refer to an alias in a
<CODE>WHERE</CODE> clause.  This is because that when the <CODE>WHERE</CODE> code is
executed the column value may not yet be determinated. For example the
following query is <STRONG>illegal</STRONG>:

</P>

<PRE>
SELECT id,COUNT(*) AS cnt FROM table_name WHERE cnt &#62; 0 GROUP BY id;
</PRE>

<P>
The <CODE>WHERE</CODE> statement is executed to determinate which rows should
be included in the <CODE>GROUP BY</CODE> part while <CODE>HAVING</CODE> is used to
decide which rows from the result set should be used.

</P>


<H2><A NAME="Deleting_from_related_tables" HREF="manual_toc.html#Deleting_from_related_tables">17.16  Deleting rows from related tables</A></H2>

<P>
As <STRONG>MySQL</STRONG> doesn't support sub-selects or use of more than one table
in the <CODE>DELETE</CODE> statement, you should use the following approach to
delete rows from 2 related tables:

</P>

<OL>
<LI>

<CODE>SELECT</CODE> the rows based on some <CODE>WHERE</CODE> condition in the main table.
<LI>

<CODE>DELETE</CODE> the rows in the main table based on the same condition.
<LI>

<CODE>DELETE FROM related_table WHERE related_column IN (selected_rows)</CODE>
</OL>

<P>
If the total number of characters in the query with
<CODE>related_column</CODE> is more than 1,048,576 (the default value of
<CODE>max_allowed_packet</CODE>, you should split it into smaller parts and
execute multiple <CODE>DELETE</CODE> statements.  You will probably get the
fastest <CODE>DELETE</CODE> by only deleting 100-1000 <CODE>related_column</CODE>
id's per time if the <CODE>related_column</CODE> is an index.  If the
<CODE>related_column</CODE> isn't an index, the speed is independent of the
number of arguments in the <CODE>IN</CODE> clause.

</P>


<H2><A NAME="No_matching_rows" HREF="manual_toc.html#No_matching_rows">17.17  Solving problems with no matching rows</A></H2>

<P>
If you have a complicated query with many tables that doesn't return any
rows, you should use the following procedure to find out what is wrong
with your query:

</P>

<OL>
<LI>

Test the query with <CODE>EXPLAIN</CODE> and check if you can find something that is
obviously wrong. See section <A HREF="manual.html#EXPLAIN">7.21  <CODE>EXPLAIN</CODE> syntax (Get information about a <CODE>SELECT</CODE>)</A>.

<LI>

Select only those fields that are used in the <CODE>WHERE</CODE> clause.

<LI>

Remove one table at a time from the query until it returns some rows.
If the tables are big, it's a good idea to use <CODE>LIMIT 10</CODE> with the query.

<LI>

Do a <CODE>SELECT</CODE> for the column that should have matched a row,
against the table that was last removed from the query.

<LI>

If you are comparing <CODE>FLOAT</CODE> or <CODE>DOUBLE</CODE> columns with numbers that
have decimals, you can't use <CODE>=</CODE>!  This problem is common in most
computer languages because floating point values are not exact values.


<PRE>
mysql&#62; SELECT * FROM table_name WHERE float_column=3.5;
   -&#62;
mysql&#62; SELECT * FROM table_name WHERE float_column between 3.45 and 3.55;
</PRE>

In most cases, changing the <CODE>FLOAT</CODE> to a <CODE>DOUBLE</CODE> will fix this!

<LI>

If you still can't find out what's wrong, create a minimal test that can
be run with <CODE>mysql test &#60; query.sql</CODE> that shows your problems.
You can create a test file with <CODE>mysqldump --quick database tables &#62; query.sql</CODE>. Take the file up in a editor, remove some insert lines (if there are
too many of these) and add your select statement last in the file.

Test that you still have your problem by doing:


<PRE>
shell&#62; mysqladmin create test2
shell&#62; mysql test2 &#60; query.sql
</PRE>

Post the test file using <CODE>mysqlbug</CODE> to <a HREF="mailto:mysql@lists.mysql.com">mysql@lists.mysql.com</a>.
</OL>



<H2><A NAME="ALTER_TABLE_problems" HREF="manual_toc.html#ALTER_TABLE_problems">17.18  Problems with <CODE>ALTER TABLE</CODE>.</A></H2>

<P>
If <CODE>ALTER TABLE</CODE> dies with an error like this:

</P>

<PRE>
Error on rename of './database/name.frm' to './database/B-a.frm' (Errcode: 17)
</PRE>

<P>
The problem may be that <STRONG>MySQL</STRONG> has crashed in a previous <CODE>ALTER
TABLE</CODE> and there is an old table named <TT>`A-something'</TT> or
<TT>`B-something'</TT> lying around.  In this case, go to the <STRONG>MySQL</STRONG> data
directory and delete all files that have names starting with <CODE>A-</CODE> or
<CODE>B-</CODE>.  (You may want to move them elsewhere instead of deleting them).

</P>
<P>
<CODE>ALTER TABLE</CODE> works the following way:

</P>

<UL>
<LI>Create a new table named <TT>`A-xxx'</TT> with the requested changes.

<LI>All rows from the old table are copied to <TT>`A-xxx'</TT>.

<LI>The old table is renamed <TT>`B-xxx'</TT>.

<LI><TT>`A-xxx'</TT> is renamed to your old table name.

<LI><TT>`B-xxx'</TT> is deleted.

</UL>

<P>
If something goes wrong with the renaming operation, <STRONG>MySQL</STRONG> tries to
undo the changes.  If something goes seriously wrong (this shouldn't happen,
of course), <STRONG>MySQL</STRONG> may leave the old table as <TT>`B-xxx'</TT> but a
simple rename should get your data back.

</P>


<H2><A NAME="Change_column_order" HREF="manual_toc.html#Change_column_order">17.19  How to change the order of columns in a table</A></H2>

<P>
The whole point of SQL is to abstract the application from the data
storage format.  You should always specify the order in wish you wish to
retrieve your data.  For example:

</P>

<PRE>
SELECT col_name1, col_name2, col_name3 FROM tbl_name;
</PRE>

<P>
will return columns in the order <CODE>col_name1</CODE>, <CODE>col_name2</CODE>, <CODE>col_name3</CODE>, whereas:

</P>

<PRE>
SELECT col_name1, col_name3, col_name2 FROM tbl_name;
</PRE>

<P>
will return columns in the order <CODE>col_name1</CODE>, <CODE>col_name3</CODE>, <CODE>col_name2</CODE>.

</P>
<P>
You should <STRONG>NEVER</STRONG>, in an application, use <CODE>SELECT *</CODE> and
retrieve the columns based on their position, because the order in which columns are
returned <STRONG>CANNOT</STRONG> be guaranteed over time; A simple change to
your database may cause your application to fail rather dramatically.

</P>
<P>
If you want to change the order of columns anyway, you can do it as follows:

</P>

<OL>
<LI>

Create a new table with the columns in the right order.
<LI>

Execute
<CODE>INSERT INTO new_table SELECT fields-in-new_table-order FROM old_table</CODE>.
<LI>

Drop or rename <CODE>old_table</CODE>
<LI>

<CODE>ALTER TABLE new_table RENAME old_table</CODE>
</OL>



<H1><A NAME="Common_problems" HREF="manual_toc.html#Common_problems">18  Solving some common problems with <STRONG>MySQL</STRONG></A></H1>

<P>
<A NAME="IDX676"></A>

</P>
<P>
<A NAME="IDX677"></A>
<A NAME="IDX678"></A>


<H2><A NAME="Replication" HREF="manual_toc.html#Replication">18.1  Database replication</A></H2>

<P>
The most general way to replicate a database is to use the update
log. See section <A HREF="manual.html#Update_log">9.2  The update log</A>. This requires one database that acts as a master
(to which data changes are made) and one or more other databases that act
as slaves. To update a slave, just run <CODE>mysql &#60; update_log</CODE>.
Supply host, user and password options that are appropriate for the slave
database, and use the update log from the master database as input.

</P>
<P>
If you never delete anything from a table, you can use a <CODE>TIMESTAMP</CODE>
column to find out which rows have been inserted or changed in the table
since the last replication (by comparing to the time when you did the
replication last time) and only copy these rows to the mirror.

</P>
<P>
It is possible to make a two-way updating system using both the update
log (for deletes) and timestamps (on both sides). But in that case you
must be able to handle conflicts when the same data have been changed in
both ends. You probably want to keep the old version to help with
deciding what has been updated.

</P>
<P>
Because replication in this case is done with SQL statements, you should not
use the following functions in statements that update the database; they may
not return the same value as in the original database:

</P>

<UL>
<LI><CODE>DATABASE()</CODE>

<LI><CODE>GET_LOCK()</CODE> and <CODE>RELEASE_LOCK()</CODE>

<LI><CODE>RAND()</CODE>

<LI><CODE>USER()</CODE>, <CODE>SYSTEM_USER()</CODE> or <CODE>SESSION_USER()</CODE>

<LI><CODE>VERSION()</CODE>

</UL>

<P>
All time functions are safe to use, as the timestamp is sent to the
mirror if needed. <CODE>LAST_INSERT_ID()</CODE> is also safe to use.

</P>
<P>
<A NAME="IDX679"></A>


<H2><A NAME="Backup" HREF="manual_toc.html#Backup">18.2  Database backups</A></H2>

<P>
Since <STRONG>MySQL</STRONG> tables are stored as files, it is easy to do a
backup. To get a consistent backup, do a <CODE>LOCK TABLES</CODE> on the
relevant tables. See section <A HREF="manual.html#LOCK_TABLES">7.23  <CODE>LOCK TABLES/UNLOCK TABLES</CODE> syntax</A>. You only need a
read lock; this allows other threads to continue to query the tables while
you are making a copy of the files in the database directory. If you want to
make a SQL level backup, you can use <CODE>SELECT INTO OUTFILE</CODE>.

</P>
<P>
Another way to backup a database is to use the <CODE>mysqldump</CODE> program:

</P>

<OL>
<LI>

Do a full backup of your databases:


<PRE>
shell&#62; mysqldump --tab=/path/to/some/dir --lock-tables --opt
</PRE>

You can also simply copy all table files (<TT>`*.frm'</TT>, <TT>`*.ISD'</TT> and
<TT>`*.ISM'</TT> files), as long as the server isn't updating anything.

<LI>

<A NAME="IDX680"></A>
Stop <CODE>mysqld</CODE> if it's running, then start it with the
<CODE>--log-update</CODE> option.  You will get log files with names of the
form <TT>`<KBD>hostname</KBD>.n'</TT>, where <CODE>n</CODE> is a number that is
incremented each time you execute <CODE>mysqladmin refresh</CODE> or
<CODE>mysqladmin flush-logs</CODE>, the <CODE>FLUSH LOGS</CODE> statement, or
restart the server.  These log files provide you with the information
you need to replicate changes to the database that are made subsequent
to the point at which you executed <CODE>mysqldump</CODE>.
</OL>

<P>
If you have to restore something, try to recover your tables using
<CODE>isamchk -r</CODE> first.  That should work in 99.9% of all cases.  If
<CODE>isamchk</CODE> fails, try the following procedure:

</P>

<OL>
<LI>

Restore the original <CODE>mysqldump</CODE> backup.
<LI>

Execute the following command to re-run the updates in the update logs:

<PRE>
shell&#62; ls -1 -t -r hostname.[0-9]* | xargs cat | mysql
</PRE>

</OL>

<P>
<CODE>ls</CODE> is used to get all the log files in the right order.

</P>
<P>
You can also do selective backups with <CODE>SELECT * INTO OUTFILE 'file_name'
FROM tbl_name</CODE> and restore with <CODE>LOAD DATA INFILE 'file_name' REPLACE
...</CODE> To avoid duplicate records, you need a <CODE>PRIMARY KEY</CODE> or a
<CODE>UNIQUE</CODE> key in the table. The <CODE>REPLACE</CODE> keyword causes old records
to be replaced with new ones when a new record duplicates an old record on
a unique key value.

</P>
<P>
<A NAME="IDX681"></A>


<H2><A NAME="Multiple_servers" HREF="manual_toc.html#Multiple_servers">18.3  Running multiple <STRONG>MySQL</STRONG> servers on the same machine</A></H2>

<P>
There are circumstances when you might want to run multiple servers on the same
machine.  For example, you might want to test a new <STRONG>MySQL</STRONG> release
while leaving your existing production setup undisturbed.  Or you might
be an Internet service provider that wants to provide independent
<STRONG>MySQL</STRONG> installations for different customers.

</P>
<P>
If you want to run multiple servers, the easiest way is to compile the servers
with different TCP/IP ports and socket files so they are not
both listening to the same TCP/IP port or socket file.

</P>
<P>
Assume an existing server is configured for the default port number and
socket file.  Then configure the new server with a <CODE>configure</CODE> command
something like this:

</P>

<PRE>
shell&#62; ./configure  --with-tcp-port=port_number \
             --with-unix-socket=file_name \
             --prefix=/usr/local/mysql-3.22.9
</PRE>

<P>
Here <CODE>port_number</CODE> and <CODE>file_name</CODE> should be different than the
default port number and socket file pathname, and the <CODE>--prefix</CODE> value
should specify an installation directory different than the one under which
the existing <STRONG>MySQL</STRONG> installation is located.

</P>
<P>
You can check the socket and port used by any currently-executing
<STRONG>MySQL</STRONG> server with this command:

</P>

<PRE>
shell&#62; mysqladmin -h hostname --port=port_number variables
</PRE>

<P>
If you have a <STRONG>MySQL</STRONG> server running on the port you used, you will
get a list of some of the most important configurable variables in
<STRONG>MySQL</STRONG>, including the socket name.

</P>
<P>
You should also edit the initialization script for your machine (probably
<TT>`mysql.server'</TT>) to start and kill multiple <CODE>mysqld</CODE> servers.

</P>
<P>
You don't have to recompile a new <STRONG>MySQL</STRONG> server just to start with
a different port and socket.  You can change the port and socket to be used
by specifying them at runtime as options to <CODE>safe_mysqld</CODE>:

</P>

<PRE>
shell&#62; /path/to/safe_mysqld --socket=file_name --port=port_number
</PRE>

<P>
If you run the new server on the same database directory as another server
with logging enabled, you should also specify the name of the log files
to <CODE>safe_mysqld</CODE> with <CODE>--log</CODE> and <CODE>--log-update</CODE>.  Otherwise,
both servers may be trying to write to the same log file.

</P>
<P>
<STRONG>Warning</STRONG>: Normally you should never have two servers that update
data in the same database!  If your OS doesn't support fault-free system
locking, this may lead to unpleasant surprises!

</P>
<P>
If you want to use another database directory for the second server, you
can use the <CODE>--datadir=path</CODE> option to <CODE>safe_mysqld</CODE>.

</P>
<P>
When you want to connect to a <STRONG>MySQL</STRONG> server that is running with
a different port than the port that is compiled into your client, you
can use one of the following methods:

</P>

<UL>
<LI>

Start the client with <CODE>--host 'hostname' --port=port_numer</CODE> or
<CODE>[--host localhost] --socket=file_name</CODE>.

<LI>

In your C or Perl programs, you can give the port and socket arguments
when connecting to the <STRONG>MySQL</STRONG> server.

<LI>

<A NAME="IDX682"></A>
<A NAME="IDX683"></A>
<A NAME="IDX684"></A>
<A NAME="IDX685"></A>
Set the <CODE>MYSQL_UNIX_PORT</CODE> and <CODE>MYSQL_TCP_PORT</CODE> environment variables
to point to the Unix socket and TCP/IP port before you start your clients.
If you normally use a specific socket or port, you should place commands
to set these environment variables in your <TT>`.login'</TT> file.
See section <A HREF="manual.html#Programs">12.1  Overview of the different <STRONG>MySQL</STRONG> programs</A>.

<LI>

<A NAME="IDX686"></A>
Specify the default socket and TCP/IP port in the <TT>`.my.cnf'</TT> file in your
home directory. See section <A HREF="manual.html#Option_files">4.15.4  Option files</A>.
</UL>



<H1><A NAME="Clients" HREF="manual_toc.html#Clients">19  <STRONG>MySQL</STRONG> client tools and APIs</A></H1>



<H2><A NAME="C" HREF="manual_toc.html#C">19.1  <STRONG>MySQL</STRONG> C API</A></H2>

<P>
The C API code is distributed with <STRONG>MySQL</STRONG>. It is included in the
<CODE>mysqlclient</CODE> library and allows C programs to access a database.

</P>
<P>
Many of the clients in the MySQL source distribution are written in C.  If
you are looking for examples that demonstrate how to use the C API, take a
look at these clients.

</P>
<P>
Most of the other client APIs (all except Java) use the <CODE>mysqlclient</CODE>
library to communicate with the <STRONG>MySQL</STRONG> server. This means that, for
example, you can take advantage of many of the same environment variables
that are used by other client programs, because they are referenced from the
library.  See section <A HREF="manual.html#Programs">12.1  Overview of the different <STRONG>MySQL</STRONG> programs</A>, for a list of these variables.

</P>
<P>
The client has a maximum communication buffer size. The size of the buffer
that is allocated initially (16K bytes) is automatically increased up to the
maximum size (the default maximum is 24M). Since buffer sizes are increased
only as demand warrants, simply increasing the default maximum limit does not
in inself cause more resources to be used. This size check is mostly a check
for erroneous queries and communication packets.

</P>
<P>
The communication buffer must be large enough to contain a single SQL
statement (for client-to-server traffic) and one row of returned data (for
server-to-client traffic).  Each thread's communication buffer is dynamically
enlarged to handle any query or row up to the maximum limit.  For example, if
you have <CODE>BLOB</CODE> values that contain up to 16M of data, you must have a
communication buffer limit of at least 16M (in both server and client).  The
client's default maximum is 24M, but the default maximum in the server is
1M.  You can increase this by changing the value of the
<CODE>max_allowed_packet</CODE> parameter when the server is started.  See section <A HREF="manual.html#Server_parameters">10.1  Tuning server parameters</A>.

</P>
<P>
The <STRONG>MySQL</STRONG> server shrinks each communication buffer to
<CODE>net_buffer_length</CODE> bytes after each query.  For clients, the size of
the buffer associated with a connection is not decreased until the connection
is closed, at which time client memory is reclaimed.

</P>


<H2><A NAME="C_API_datatypes" HREF="manual_toc.html#C_API_datatypes">19.2  C API datatypes</A></H2>
<DL COMPACT>

<DT><CODE>MYSQL</CODE>
<DD>
<A NAME="IDX687"></A>
 
This structure represents a handle to one database connection. It is
used for almost all <STRONG>MySQL</STRONG> functions.

<A NAME="IDX688"></A>
<DT><CODE>MYSQL_RES</CODE>
<DD>
This structure represents the result of a query that returns rows
(<CODE>SELECT</CODE>, <CODE>SHOW</CODE>, <CODE>DESCRIBE</CODE>, <CODE>EXPLAIN</CODE>).  The
information returned from a query is called the <EM>result set</EM> in the
remainder of this section.

<A NAME="IDX689"></A>
<DT><CODE>MYSQL_ROW</CODE>
<DD>
This is a type-safe representation of one row of data. It is currently
implemented as an array of counted byte strings.  (You cannot treat these as
null-terminated strings if field values may contain binary data, because such
values may contain null bytes internally.)  Rows are obtained by calling
<CODE>mysql_fetch_row()</CODE>.

<A NAME="IDX690"></A>
<DT><CODE>MYSQL_FIELD</CODE>
<DD>
This structure contains information about a field, such as the field's
name, type and size. Its members are described in more detail below.
You may obtain the <CODE>MYSQL_FIELD</CODE> structures for each field by
calling <CODE>mysql_fetch_field()</CODE> repeatedly.  Field values are not part of
this structure; they are contained in a <CODE>MYSQL_ROW</CODE> structure.

<A NAME="IDX691"></A>
<DT><CODE>MYSQL_FIELD_OFFSET</CODE>
<DD>
This is a type-safe representation of an offset into a <STRONG>MySQL</STRONG> field
list.  (Used by <CODE>mysql_field_seek()</CODE>.)  Offsets are field numbers
within a row, beginning at zero.

<A NAME="IDX692"></A>
<A NAME="IDX693"></A>
<DT><CODE>my_ulonglong</CODE>
<DD>
The type used for the number of rows and for <CODE>mysql_affected_rows()</CODE>,
<CODE>mysql_num_rows()</CODE> and <CODE>mysql_insert_id()</CODE>. This type provides a
range of <CODE>0</CODE> to <CODE>1.84e19</CODE>.

On some systems, attempting to print a value of type <CODE>my_ulonglong</CODE>
will not work.  To print such a value, convert it to <CODE>unsigned long</CODE>
and use a <CODE>%lu</CODE> print format.  Example:

<PRE>
printf (Number of rows: %lu\n", (unsigned long) mysql_num_rows(result));
</PRE>

</DL>

<P>
The <CODE>MYSQL_FIELD</CODE> structure contains the members listed below:

</P>
<DL COMPACT>

<DT><CODE>char * name</CODE>
<DD>
The name of the field.

<DT><CODE>char * table</CODE>
<DD>
The name of the table containing this field, if it isn't a calculated field.
For calculated fields, the <CODE>table</CODE> value is a <CODE>NULL</CODE> pointer.

<DT><CODE>char * def</CODE>
<DD>
The default value of this field (set only if you use
<CODE>mysql_list_fields()</CODE>).

<DT><CODE>enum enum_field_types type</CODE>
<DD>
The type of the field.
The <CODE>type</CODE> value may be one of the following:

<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><STRONG>Type value</STRONG> </TD><TD> <STRONG>Type meaning</STRONG>
</TR NOSAVE>
<TR><TD><CODE>FIELD_TYPE_TINY</CODE> </TD><TD> <CODE>TINYINT</CODE> field
</TR NOSAVE>
<TR><TD><CODE>FIELD_TYPE_SHORT</CODE> </TD><TD> <CODE>SMALLINT</CODE> field
</TR NOSAVE>
<TR><TD><CODE>FIELD_TYPE_LONG</CODE> </TD><TD> <CODE>INTEGER</CODE> field
</TR NOSAVE>
<TR><TD><CODE>FIELD_TYPE_INT24</CODE> </TD><TD> <CODE>MEDIUMINT</CODE> field
</TR NOSAVE>
<TR><TD><CODE>FIELD_TYPE_LONGLONG</CODE> </TD><TD> <CODE>BIGINT</CODE> field
</TR NOSAVE>
<TR><TD><CODE>FIELD_TYPE_DECIMAL</CODE> </TD><TD> <CODE>DECIMAL</CODE> or <CODE>NUMERIC</CODE> field
</TR NOSAVE>
<TR><TD><CODE>FIELD_TYPE_FLOAT</CODE> </TD><TD> <CODE>FLOAT</CODE> field
</TR NOSAVE>
<TR><TD><CODE>FIELD_TYPE_DOUBLE</CODE> </TD><TD> <CODE>DOUBLE</CODE> or <CODE>REAL</CODE> field
</TR NOSAVE>
<TR><TD><CODE>FIELD_TYPE_TIMESTAMP</CODE> </TD><TD> <CODE>TIMESTAMP</CODE> field
</TR NOSAVE>
<TR><TD><CODE>FIELD_TYPE_DATE</CODE> </TD><TD> <CODE>DATE</CODE> field
</TR NOSAVE>
<TR><TD><CODE>FIELD_TYPE_TIME</CODE> </TD><TD> <CODE>TIME</CODE> field
</TR NOSAVE>
<TR><TD><CODE>FIELD_TYPE_DATETIME</CODE> </TD><TD> <CODE>DATETIME</CODE> field
</TR NOSAVE>
<TR><TD><CODE>FIELD_TYPE_YEAR</CODE> </TD><TD> <CODE>YEAR</CODE> field
</TR NOSAVE>
<TR><TD><CODE>FIELD_TYPE_STRING</CODE> </TD><TD> String (<CODE>CHAR</CODE> or <CODE>VARCHAR</CODE>) field
</TR NOSAVE>
<TR><TD><CODE>FIELD_TYPE_BLOB</CODE> </TD><TD> <CODE>BLOB</CODE> or <CODE>TEXT</CODE> field (use <CODE>max_length</CODE> to determine the maximum length)
</TR NOSAVE>
<TR><TD><CODE>FIELD_TYPE_SET</CODE> </TD><TD> <CODE>SET</CODE> field
</TR NOSAVE>
<TR><TD><CODE>FIELD_TYPE_ENUM</CODE> </TD><TD> <CODE>ENUM</CODE> field
</TR NOSAVE>
<TR><TD><CODE>FIELD_TYPE_NULL</CODE> </TD><TD> <CODE>NULL</CODE>-type field
</TR NOSAVE>
<TR><TD><CODE>FIELD_TYPE_CHAR</CODE> </TD><TD> Deprecated; use <CODE>FIELD_TYPE_TINY</CODE> instead
</TR>
</TABLE>

You can use the <CODE>IS_NUM()</CODE> macro to test whether or not a field has a
numeric type.  Pass the <CODE>type</CODE> value to <CODE>IS_NUM()</CODE> and it
will evaluate to TRUE if the field is numeric:


<PRE>
if (IS_NUM(field-&#62;type))
    printf("Field is numeric\n");
</PRE>

<DT><CODE>unsigned int length</CODE>
<DD>
The width of the field.

<DT><CODE>unsigned int max_length</CODE>
<DD>
The maximum width of the field for the result set. If you used
<CODE>mysql_list_fields()</CODE>, this contains the maximum length for the field.

<DT><CODE>unsigned int flags</CODE>
<DD>
Different bit-flags for the field.  The <CODE>flags</CODE> value may have zero
or more of the following bits set:

<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><STRONG>Flag value</STRONG> </TD><TD> <STRONG>Flag meaning</STRONG>
</TR NOSAVE>
<TR><TD><CODE>NOT_NULL_FLAG</CODE> </TD><TD> Field can't be <CODE>NULL</CODE>
</TR NOSAVE>
<TR><TD><CODE>PRI_KEY_FLAG</CODE> </TD><TD> Field is part of a primary key
</TR NOSAVE>
<TR><TD><CODE>UNIQUE_KEY_FLAG</CODE> </TD><TD> Field is part of a unique key
</TR NOSAVE>
<TR><TD><CODE>MULTIPLE_KEY_FLAG</CODE> </TD><TD> Field is part of a key
</TR NOSAVE>
<TR><TD><CODE>UNSIGNED_FLAG</CODE> </TD><TD> Field has the <CODE>UNSIGNED</CODE> attribute
</TR NOSAVE>
<TR><TD><CODE>ZEROFILL_FLAG</CODE> </TD><TD> Field has the <CODE>ZEROFILL</CODE> attribute
</TR NOSAVE>
<TR><TD><CODE>BINARY_FLAG</CODE> </TD><TD> Field has the <CODE>BINARY</CODE> attribute
</TR NOSAVE>
<TR><TD><CODE>AUTO_INCREMENT_FLAG</CODE> </TD><TD> Field has the <CODE>AUTO_INCREMENT</CODE> attribute
</TR NOSAVE>
<TR><TD><CODE>ENUM_FLAG</CODE> </TD><TD> Field is an <CODE>ENUM</CODE> (deprecated)
</TR NOSAVE>
<TR><TD><CODE>BLOB_FLAG</CODE> </TD><TD> Field is a <CODE>BLOB</CODE> or <CODE>TEXT</CODE> (deprecated)
</TR NOSAVE>
<TR><TD><CODE>TIMESTAMP_FLAG</CODE> </TD><TD> Field is a <CODE>TIMESTAMP</CODE> (deprecated)
</TR>
</TABLE>

Use of the <CODE>BLOB_FLAG</CODE>, <CODE>ENUM_FLAG</CODE> and <CODE>TIMESTAMP_FLAG</CODE> flags
is deprecated because they indicate the type of a field rather than an
attribute of its type.  It is preferable to test <CODE>field-&#62;type</CODE> against
<CODE>FIELD_TYPE_BLOB</CODE>, <CODE>FIELD_TYPE_ENUM</CODE> or <CODE>FIELD_TYPE_TIMESTAMP</CODE>
instead.

The example below illustrates a typical use of the <CODE>flags</CODE> value:


<PRE>
if (field-&#62;flags &#38; NOT_NULL_FLAG)
    printf("Field can't be null\n");
</PRE>

You may use the following convenience macros to determine the boolean
status of the <CODE>flags</CODE> value:

<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><CODE>IS_NOT_NULL(flags)</CODE> </TD><TD> True if this field is defined as <CODE>NOT NULL</CODE>
</TR NOSAVE>
<TR><TD><CODE>IS_PRI_KEY(flags)</CODE> </TD><TD> True if this field is a primary key
</TR NOSAVE>
<TR><TD><CODE>IS_BLOB(flags)</CODE> </TD><TD> True if this field is a <CODE>BLOB</CODE> or <CODE>TEXT</CODE> (deprecated; test <CODE>field-&#62;type</CODE> instead)
</TR>
</TABLE>

<DT><CODE>unsigned int decimals</CODE>
<DD>
The number of decimals for numeric fields.
</DL>



<H2><A NAME="C_API_function_overview" HREF="manual_toc.html#C_API_function_overview">19.3  C API function overview</A></H2>

<P>
The functions available in the C API are listed below and are described in
greater detail in the next section.
See section <A HREF="manual.html#C_API_functions">19.4  C API function descriptions</A>.

</P>
<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><STRONG>mysql_affected_rows()</STRONG> </TD><TD>
Returns the number of rows affected by the last <CODE>UPDATE</CODE>, <CODE>DELETE</CODE> or
<CODE>INSERT</CODE> query.

</TR NOSAVE>
<TR><TD><STRONG>mysql_close()</STRONG> </TD><TD>
Closes a server connection.

</TR NOSAVE>
<TR><TD><STRONG>mysql_connect()</STRONG> </TD><TD>
Connects to a <STRONG>MySQL</STRONG> server. This function is deprecated; use
<CODE>mysql_real_connect()</CODE> instead.

</TR NOSAVE>
<TR><TD><STRONG>mysql_create_db()</STRONG> </TD><TD>
Creates a database. This function is deprecated; use the SQL command
<CODE>CREATE DATABASE</CODE> instead.

</TR NOSAVE>
<TR><TD><STRONG>mysql_data_seek()</STRONG> </TD><TD>
Seeks to an arbitrary row in a query result set.

</TR NOSAVE>
<TR><TD><STRONG>mysql_debug()</STRONG> </TD><TD>
Does a <CODE>DBUG_PUSH</CODE> with the given string.

</TR NOSAVE>
<TR><TD><STRONG>mysql_drop_db()</STRONG> </TD><TD>
Drops a database. This function is deprecated; use the SQL command
<CODE>DROP DATABASE</CODE> instead.

</TR NOSAVE>
<TR><TD><STRONG>mysql_dump_debug_info()</STRONG> </TD><TD>
Makes the server write debug information to the log.

</TR NOSAVE>
<TR><TD><STRONG>mysql_eof()</STRONG> </TD><TD>
Determines whether or not the last row of a result set has been read.
This function is deprecated; <CODE>mysql_errno()</CODE> or <CODE>mysql_error()</CODE>
may be used instead.

</TR NOSAVE>
<TR><TD><STRONG>mysql_errno()</STRONG> </TD><TD>
Returns the error number for the most recently invoked <STRONG>MySQL</STRONG> function.

</TR NOSAVE>
<TR><TD><STRONG>mysql_error()</STRONG> </TD><TD>
Returns the error message for the most recently invoked <STRONG>MySQL</STRONG> function.

</TR NOSAVE>
<TR><TD><STRONG>mysql_escape_string()</STRONG> </TD><TD>
Escapes special characters in a string for use in a SQL statement.

</TR NOSAVE>
<TR><TD><STRONG>mysql_fetch_field()</STRONG> </TD><TD>
Returns the type of the next table field.

</TR NOSAVE>
<TR><TD><STRONG>mysql_fetch_field_direct()</STRONG> </TD><TD>
Returns the type of a table field, given a field number.

</TR NOSAVE>
<TR><TD><STRONG>mysql_fetch_fields()</STRONG> </TD><TD>
Returns an array of all field structures.

</TR NOSAVE>
<TR><TD><STRONG>mysql_fetch_lengths()</STRONG> </TD><TD>
Returns the lengths of all columns in the current row.

</TR NOSAVE>
<TR><TD><STRONG>mysql_fetch_row()</STRONG> </TD><TD>
Fetches the next row from the result set.

</TR NOSAVE>
<TR><TD><STRONG>mysql_field_seek()</STRONG> </TD><TD>
Puts the column cursor on a specified column.

</TR NOSAVE>
<TR><TD><STRONG>mysql_field_count()</STRONG> </TD><TD>
Returns the number of result columns for the most recent query.

</TR NOSAVE>
<TR><TD><STRONG>mysql_field_tell()</STRONG> </TD><TD>
Returns the position of the field cursor used for the last
<CODE>mysql_fetch_field()</CODE>.

</TR NOSAVE>
<TR><TD><STRONG>mysql_free_result()</STRONG> </TD><TD>
Frees memory used by a result set.

</TR NOSAVE>
<TR><TD><STRONG>mysql_get_client_info()</STRONG> </TD><TD>
Returns client version information.

</TR NOSAVE>
<TR><TD><STRONG>mysql_get_host_info()</STRONG> </TD><TD>
Returns a string describing the connection.

</TR NOSAVE>
<TR><TD><STRONG>mysql_get_proto_info()</STRONG> </TD><TD>
Returns the protocol version used by the connection.

</TR NOSAVE>
<TR><TD><STRONG>mysql_get_server_info()</STRONG> </TD><TD>
Returns the server version number.

</TR NOSAVE>
<TR><TD><STRONG>mysql_info()</STRONG> </TD><TD>
Returns information about the most recently executed query.

</TR NOSAVE>
<TR><TD><STRONG>mysql_init()</STRONG> </TD><TD>
Gets or initializes a <CODE>MYSQL</CODE> structure.

</TR NOSAVE>
<TR><TD><STRONG>mysql_insert_id()</STRONG> </TD><TD>
Returns the ID generated for an <CODE>AUTO_INCREMENT</CODE> column by the previous
query.

</TR NOSAVE>
<TR><TD><STRONG>mysql_kill()</STRONG> </TD><TD>
Kill a given thread.

</TR NOSAVE>
<TR><TD><STRONG>mysql_list_dbs()</STRONG> </TD><TD>
Returns database names matching a simple regular expression.

</TR NOSAVE>
<TR><TD><STRONG>mysql_list_fields()</STRONG> </TD><TD>
Returns field names matching a simple regular expression.

</TR NOSAVE>
<TR><TD><STRONG>mysql_list_processes()</STRONG> </TD><TD>
Returns a list of the current server threads.

</TR NOSAVE>
<TR><TD><STRONG>mysql_list_tables()</STRONG> </TD><TD>
Returns table names matching a simple regular expression.

</TR NOSAVE>
<TR><TD><STRONG>mysql_num_fields()</STRONG> </TD><TD>
Returns the number of columns in a result set.

</TR NOSAVE>
<TR><TD><STRONG>mysql_num_rows()</STRONG> </TD><TD>
Returns the number of rows in a result set.

</TR NOSAVE>
<TR><TD><STRONG>mysql_options()</STRONG> </TD><TD>
Set connect options for <CODE>mysql_connect()</CODE>.

</TR NOSAVE>
<TR><TD><STRONG>mysql_ping()</STRONG> </TD><TD>
Checks whether or not the connection to the server is working, reconnecting
as necessary.

</TR NOSAVE>
<TR><TD><STRONG>mysql_query()</STRONG> </TD><TD>
Executes a SQL query specified as a null-terminated string.

</TR NOSAVE>
<TR><TD><STRONG>mysql_real_connect()</STRONG> </TD><TD>
Connects to a <STRONG>MySQL</STRONG> server.

</TR NOSAVE>
<TR><TD><STRONG>mysql_real_query()</STRONG> </TD><TD>
Executes a SQL query specified as a counted string.

</TR NOSAVE>
<TR><TD><STRONG>mysql_reload()</STRONG> </TD><TD>
Tells the server to reload the grant tables.

</TR NOSAVE>
<TR><TD><STRONG>mysql_row_seek()</STRONG> </TD><TD>
Seeks to a row in a result set, using value returned from
<CODE>mysql_row_tell()</CODE>.

</TR NOSAVE>
<TR><TD><STRONG>mysql_row_tell()</STRONG> </TD><TD>
Returns the row cursor position.

</TR NOSAVE>
<TR><TD><STRONG>mysql_select_db()</STRONG> </TD><TD>
Connects to a database.

</TR NOSAVE>
<TR><TD><STRONG>mysql_shutdown()</STRONG> </TD><TD>
Shuts down the database server.

</TR NOSAVE>
<TR><TD><STRONG>mysql_stat()</STRONG> </TD><TD>
Returns the server status as a string.

</TR NOSAVE>
<TR><TD><STRONG>mysql_store_result()</STRONG> </TD><TD>
Retrieves a complete result set to the client.

</TR NOSAVE>
<TR><TD><STRONG>mysql_thread_id()</STRONG> </TD><TD>
Returns the current thread ID.

</TR NOSAVE>
<TR><TD><STRONG>mysql_use_result()</STRONG> </TD><TD>
Initiates a row-by-row result set retrieval.
</TR>
</TABLE>

<P>
To connect to the server, call <CODE>mysql_init()</CODE> to initialize a connection
handler, then call <CODE>mysql_real_connect()</CODE> with that handler (along with
other information such as the hostname, user name and password).  When you
are done with the connection, call <CODE>mysql_close()</CODE> to terminate it.

</P>
<P>
While a connection is active, the client may send SQL queries to the server
using <CODE>mysql_query()</CODE> or <CODE>mysql_real_query()</CODE>.  The difference
between the two is that <CODE>mysql_query()</CODE> expects the query to be
specified as a null-terminated string whereas <CODE>mysql_real_query()</CODE>
expects a counted string.  If the string contains binary data (which may
include null bytes), you must use <CODE>mysql_real_query()</CODE>.

</P>
<P>
For each non-<CODE>SELECT</CODE> query (e.g., <CODE>INSERT</CODE>, <CODE>UPDATE</CODE>,
<CODE>DELETE</CODE>), you can found out how many rows were affected (changed)
by calling <CODE>mysql_affected_rows()</CODE>.

</P>
<P>
For <CODE>SELECT</CODE> queries, you retrieve the selected rows as a result set.
(Note that some statements are <CODE>SELECT</CODE>-like in that they return rows.
These include <CODE>SHOW</CODE>, <CODE>DESCRIBE</CODE> and <CODE>EXPLAIN</CODE>.  They should
be treated the same way as <CODE>SELECT</CODE> statements.)

</P>
<P>
There are two ways for a client to process result sets.  One way is to
retrieve the entire result set all at once by calling
<CODE>mysql_store_result()</CODE>.  This function acquires from the server all the
rows returned by the query and stores them in the client.  The second way is
for the client to initiate a row-by-row result set retrieval by calling
<CODE>mysql_use_result()</CODE>.  This function initializes the retrieval, but does
not actually get any rows from the server.

</P>
<P>
In both cases, you access rows by calling <CODE>mysql_fetch_row()</CODE>.  With
<CODE>mysql_store_result()</CODE>, <CODE>mysql_fetch_row()</CODE> accesses rows that have
already been fetched from the server.  With <CODE>mysql_use_result()</CODE>,
<CODE>mysql_fetch_row()</CODE> actually retrieves the row from the server.
Information about as the size of the data values in each row is available by
calling <CODE>mysql_fetch_lengths()</CODE>.

</P>
<P>
After you are done with a result set, call <CODE>mysql_free_result()</CODE>
to free the memory used for it.

</P>
<P>
The two retrieval mechanisms are complementary.  Client programs should
choose the approach that is most appropriate for their requirements.
In practice, clients tend to use <CODE>mysql_store_result()</CODE> more
commonly.

</P>
<P>
An advantage of <CODE>mysql_store_result()</CODE> is that since the rows have all
been fetched to the client, you not only can access rows sequentially, you
can move back and forth in the result set using <CODE>mysql_data_seek()</CODE> or
<CODE>mysql_row_seek()</CODE> to change the current row position within the result
set.  You can also find out how many rows there are by calling
<CODE>mysql_num_rows()</CODE>.  On the other hand, the memory requirements for
<CODE>mysql_store_result()</CODE> may be very high for large result sets and you
are more likely to encounter out-of-memory conditions.

</P>
<P>
An advantage of <CODE>mysql_use_result()</CODE> is that the client requires less
memory for the result set since it maintains only one row at a time (and
since there is less allocation overhead, <CODE>mysql_use_result()</CODE> can be
faster).  Disadvantages are that you must process each row quickly to avoid
tying up the server, you don't have random access to rows within the result
set (you can only access rows sequentially), and you don't know how many rows
are in the result set until you have retrieved them all.  Furthermore, you
<EM>must</EM> retrieve all the rows even if you determine in mid-retrieval that
you've found the information you were looking for.

</P>
<P>
The API makes it possible for clients to respond appropriately to
queries (retrieving rows only as necessary) without knowing whether or
not the query is a <CODE>SELECT</CODE>.  You can do this by calling
<CODE>mysql_store_result()</CODE> after each <CODE>mysql_query()</CODE> (or
<CODE>mysql_real_query()</CODE>).  If the result set call succeeds, the query
was a <CODE>SELECT</CODE> and you can read the rows.  If the result set call
fails, call <CODE>mysql_field_count()</CODE> to determine whether or not a
result was actually to be expected.  If <CODE>mysql_field_count()</CODE>
returns zero, the query returned no data (indicating that it was an
<CODE>INSERT</CODE>, <CODE>UPDATE</CODE>, <CODE>DELETE</CODE>, etc.), and thus not
expected to return rows.  If <CODE>mysql_field_count()</CODE> is non-zero, the
query should have returned rows, but didn't.  This indicates that the
query was a <CODE>SELECT</CODE> that failed.  See the description for
<CODE>mysql_field_count()</CODE> for an example of how this can be done.

</P>
<P>
Both <CODE>mysql_store_result()</CODE> and <CODE>mysql_use_result()</CODE> allow you to
obtain information about the fields that make up the result set (the number
of fields, their names and types, etc.).  You can access field information
sequentially within the row by calling <CODE>mysql_fetch_field()</CODE> repeatedly,
or by field number within the row by calling
<CODE>mysql_fetch_field_direct()</CODE>.  The current field cursor position may be
changed by calling <CODE>mysql_field_seek()</CODE>.  Setting the field cursor
affects subsequent calls to <CODE>mysql_fetch_field()</CODE>.  You can also get
information for fields all at once by calling <CODE>mysql_fetch_fields()</CODE>.

</P>
<P>
For detecting and reporting errors, <STRONG>MySQL</STRONG> provides access to error
information by means of the <CODE>mysql_errno()</CODE> and <CODE>mysql_error()</CODE>
functions.  These return the error code or error message for the most
recently invoked function that can succeed or fail, allowing you to determine
when an error occurred and what it was.

</P>


<H2><A NAME="C_API_functions" HREF="manual_toc.html#C_API_functions">19.4  C API function descriptions</A></H2>

<P>
In the descriptions below, a parameter or return value of <CODE>NULL</CODE> means
<CODE>NULL</CODE> in the sense of the C programming language, not a
<STRONG>MySQL</STRONG> <CODE>NULL</CODE> value.

</P>
<P>
Functions that return a value generally return a pointer or an integer.
Unless specified otherwise, functions returning a pointer return a
non-<CODE>NULL</CODE> value to indicate success or a <CODE>NULL</CODE> value to indicate
an error, and functions returning an integer return zero to indicate success
or non-zero to indicate an error.  Note that "non-zero" means just that.
Unless the function description says otherwise, do not test against a value
other than zero:

</P>

<PRE>
if (result)                   /* correct */
    ... error ...

if (result &#60; 0)               /* incorrect */
    ... error ...

if (result == -1)             /* incorrect */
    ... error ...
</PRE>

<P>
When a function returns an error, the <STRONG>Errors</STRONG> subsection of the
function description lists the possible types of errors.  You can
find out which of these occurred by calling <CODE>mysql_errno()</CODE>.
A string representation of the error may be obtained by calling
<CODE>mysql_error()</CODE>.

</P>
<P>
<A NAME="IDX694"></A>


<H3><A NAME="mysql_affected_rows" HREF="manual_toc.html#mysql_affected_rows">19.4.1  <CODE>mysql_affected_rows()</CODE></A></H3>

<P>
<CODE>my_ulonglong mysql_affected_rows(MYSQL *mysql)</CODE>

</P>

<H4>19.4.1.1  Description</H4>

<P>
Returns the number of rows affected (changed) by the last <CODE>UPDATE</CODE>,
<CODE>DELETE</CODE> or <CODE>INSERT</CODE> query. May be called immediately after
<CODE>mysql_query()</CODE> for <CODE>UPDATE</CODE>, <CODE>DELETE</CODE> or <CODE>INSERT</CODE>
statements.  For <CODE>SELECT</CODE> statements, <CODE>mysql_affected_rows()</CODE>
works like <CODE>mysql_num_rows()</CODE>.

</P>
<P>
<CODE>mysql_affected_rows()</CODE> is currently implemented as a macro.

</P>

<H4>19.4.1.2  Return values</H4>

<P>
An integer greater than zero indicates the number of rows affected or
retrieved.  Zero indicates that no records matched the <CODE>WHERE</CODE> clause in
the query or that no query has yet been executed.  -1 indicates that the
query returned an error or that, for a <CODE>SELECT</CODE> query,
<CODE>mysql_affected_rows()</CODE> was called prior to calling
<CODE>mysql_store_result()</CODE>.

</P>

<H4>19.4.1.3  Errors</H4>

<P>
None.

</P>

<H4>19.4.1.4  Example</H4>


<PRE>
mysql_query(&#38;mysql,"UPDATE products SET cost=cost*1.25 WHERE group=10");
printf("%d products updated",mysql_affected_rows(&#38;mysql));
</PRE>

<P>
<A NAME="IDX695"></A>


<H3><A NAME="mysql_close" HREF="manual_toc.html#mysql_close">19.4.2  <CODE>mysql_close()</CODE></A></H3>

<P>
<CODE>void mysql_close(MYSQL *mysql)</CODE>

</P>

<H4>19.4.2.1  Description</H4>
<P>
Closes a previously opened connection.  <CODE>mysql_close()</CODE> also deallocates
the connection handle pointed to by <CODE>mysql</CODE> if the handle was allocated
automatically by <CODE>mysql_init()</CODE> or <CODE>mysql_real_connect()</CODE>.

</P>

<H4>19.4.2.2  Return values</H4>

<P>
None.

</P>

<H4>19.4.2.3  Errors</H4>

<DL COMPACT>

<DT><CODE>CR_COMMANDS_OUT_OF_SYNC</CODE>
<DD>
Commands were executed in an improper order.

<DT><CODE>CR_SERVER_GONE_ERROR</CODE>
<DD>
The <STRONG>MySQL</STRONG> server has gone away.

<DT><CODE>CR_SERVER_LOST</CODE>
<DD>
The connection to the server was lost during the query.

<DT><CODE>CR_UNKNOWN_ERROR</CODE>
<DD>
An unknown error occurred.
</DL>

<P>
<A NAME="IDX696"></A>


<H3><A NAME="mysql_connect" HREF="manual_toc.html#mysql_connect">19.4.3  <CODE>mysql_connect()</CODE></A></H3>

<P>
<CODE>MYSQL *mysql_connect(MYSQL *mysql, const char *host, const char *user, const char *passwd)</CODE>

</P>

<H4>19.4.3.1  Description</H4>

<P>
This function is deprecated.  It is preferable to use
<CODE>mysql_real_connect()</CODE> instead.

</P>
<P>
<CODE>mysql_connect()</CODE> attempts to establish a connection to a <STRONG>MySQL</STRONG>
database engine running on <CODE>host</CODE>.  <CODE>mysql_connect()</CODE> must complete
successfully before you can execute any of the other API functions, with the
exception of <CODE>mysql_get_client_info()</CODE>.

</P>
<P>
The meanings of the parameters are the same as for the corresponding
parameters for <CODE>mysql_real_connect()</CODE>.  See the description of that
function for more information.

</P>

<H4>19.4.3.2  Return values</H4>

<P>
Same as for <CODE>mysql_real_connect()</CODE>.

</P>

<H4>19.4.3.3  Errors</H4>

<P>
Same as for <CODE>mysql_real_connect()</CODE>.

</P>
<P>
<A NAME="IDX697"></A>


<H3><A NAME="mysql_create_db" HREF="manual_toc.html#mysql_create_db">19.4.4  <CODE>mysql_create_db()</CODE></A></H3>

<P>
<CODE>int mysql_create_db(MYSQL *mysql, const char *db)</CODE>

</P>

<H4>19.4.4.1  Description</H4>
<P>
Creates the database named by the <CODE>db</CODE> parameter.

</P>
<P>
This function is deprecated.  It is preferable to use <CODE>mysql_query()</CODE>
to issue a SQL <CODE>CREATE DATABASE</CODE> statement instead.

</P>

<H4>19.4.4.2  Return values</H4>

<P>
Zero if the database was created successfully. Non-zero if an error
occurred.

</P>

<H4>19.4.4.3  Errors</H4>
<DL COMPACT>

<DT><CODE>CR_COMMANDS_OUT_OF_SYNC</CODE>
<DD>
Commands were executed in an improper order.

<DT><CODE>CR_SERVER_GONE_ERROR</CODE>
<DD>
The <STRONG>MySQL</STRONG> server has gone away.

<DT><CODE>CR_SERVER_LOST</CODE>
<DD>
The connection to the server was lost during the query.

<DT><CODE>CR_UNKNOWN_ERROR</CODE>
<DD>
An unknown error occurred.
</DL>


<H4>19.4.4.4  Example</H4>


<PRE>
if(mysql_create_db(&#38;mysql, "my_database"))
{
   fprintf(stderr, "Failed to create new database.  Error: %s\n",
           mysql_error(&#38;mysql));
}
</PRE>

<P>
<A NAME="IDX698"></A>


<H3><A NAME="mysql_data_seek" HREF="manual_toc.html#mysql_data_seek">19.4.5  <CODE>mysql_data_seek()</CODE></A></H3>

<P>
<CODE>void mysql_data_seek(MYSQL_RES *result, unsigned int offset)</CODE>

</P>

<H4>19.4.5.1  Description</H4>
<P>
Seeks to an arbitrary row in a query result set.  This requires that the
result set structure contains the entire result of the query, so
<CODE>mysql_data_seek()</CODE> may be used in conjunction only with
<CODE>mysql_store_result()</CODE>, not with <CODE>mysql_use_result()</CODE>.

</P>
<P>
The offset should be a value in the range from 0 to
<CODE>mysql_num_rows(result)-1</CODE>.

</P>

<H4>19.4.5.2  Return values</H4>

<P>
None.

</P>

<H4>19.4.5.3  Errors</H4>
<P>
None.

</P>
<P>
<A NAME="IDX699"></A>


<H3><A NAME="mysql_debug" HREF="manual_toc.html#mysql_debug">19.4.6  <CODE>mysql_debug()</CODE></A></H3>

<P>
<CODE>void mysql_debug(char *debug)</CODE>

</P>

<H4>19.4.6.1  Description</H4>
<P>
Does a <CODE>DBUG_PUSH</CODE> with the given string. <CODE>mysql_debug()</CODE> uses the
Fred Fish debug library. To use this function, you must compile the client
library to support debugging.
See section <A HREF="manual.html#Debugging_server">G.1  Debugging a <STRONG>MySQL</STRONG> server</A>. See section <A HREF="manual.html#Debugging_client">G.2  Debugging a <STRONG>MySQL</STRONG> client</A>.

</P>

<H4>19.4.6.2  Return values</H4>

<P>
None.

</P>

<H4>19.4.6.3  Errors</H4>
<P>
None.

</P>

<H4>19.4.6.4  Example</H4>

<P>
The call shown below causes the client library to generate a trace file in
<TT>`/tmp/client.trace'</TT> on the client machine:

</P>

<PRE>
mysql_debug("d:t:O,/tmp/client.trace");
</PRE>

<P>
<A NAME="IDX700"></A>


<H3><A NAME="mysql_drop_db" HREF="manual_toc.html#mysql_drop_db">19.4.7  <CODE>mysql_drop_db()</CODE></A></H3>

<P>
<CODE>int mysql_drop_db(MYSQL *mysql, const char *db)</CODE>

</P>

<H4>19.4.7.1  Description</H4>
<P>
Drops the database named by the <CODE>db</CODE> parameter.

</P>
<P>
This function is deprecated.  It is preferable to use <CODE>mysql_query()</CODE>
to issue a SQL <CODE>DROP DATABASE</CODE> statement instead.

</P>

<H4>19.4.7.2  Return values</H4>

<P>
Zero if the database was dropped successfully. Non-zero if an error
occurred.

</P>

<H4>19.4.7.3  Errors</H4>

<DL COMPACT>

<DT><CODE>CR_COMMANDS_OUT_OF_SYNC</CODE>
<DD>
Commands were executed in an improper order.
<DT><CODE>CR_SERVER_GONE_ERROR</CODE>
<DD>
The <STRONG>MySQL</STRONG> server has gone away.
<DT><CODE>CR_SERVER_LOST</CODE>
<DD>
The connection to the server was lost during the query.
<DT><CODE>CR_UNKNOWN_ERROR</CODE>
<DD>
An unknown error occurred.
</DL>


<H4>19.4.7.4  Example</H4>


<PRE>
if(mysql_drop_db(&#38;mysql, "my_database"))
  fprintf(stderr, "Failed to drop the database: Error: %s\n",
          mysql_error(&#38;mysql));
</PRE>

<P>
<A NAME="IDX701"></A>


<H3><A NAME="mysql_dump_debug_info" HREF="manual_toc.html#mysql_dump_debug_info">19.4.8  <CODE>mysql_dump_debug_info()</CODE></A></H3>

<P>
<CODE>int mysql_dump_debug_info(MYSQL *mysql)</CODE>

</P>

<H4>19.4.8.1  Description</H4>

<P>
Instructs the server to write some debug information to the log.  The
connected user must have the <STRONG>process</STRONG> privilege for this to work.

</P>

<H4>19.4.8.2  Return values</H4>

<P>
Zero if the command was successful. Non-zero if an error occurred.

</P>

<H4>19.4.8.3  Errors</H4>
<DL COMPACT>

<DT><CODE>CR_COMMANDS_OUT_OF_SYNC</CODE>
<DD>
Commands were executed in an improper order.
<DT><CODE>CR_SERVER_GONE_ERROR</CODE>
<DD>
The <STRONG>MySQL</STRONG> server has gone away.
<DT><CODE>CR_SERVER_LOST</CODE>
<DD>
The connection to the server was lost during the query.
<DT><CODE>CR_UNKNOWN_ERROR</CODE>
<DD>
An unknown error occurred.
</DL>

<P>
<A NAME="IDX702"></A>


<H3><A NAME="mysql_eof" HREF="manual_toc.html#mysql_eof">19.4.9  <CODE>mysql_eof()</CODE></A></H3>

<P>
<CODE>my_bool mysql_eof(MYSQL_RES *result)</CODE>

</P>

<H4>19.4.9.1  Description</H4>

<P>
This function is deprecated.  <CODE>mysql_errno()</CODE> or <CODE>mysql_error()</CODE>
may be used instead.

</P>
<P>
<CODE>mysql_eof()</CODE> determines whether or not the last row of a result
set has been read.

</P>
<P>
If you acquire a result set from a successful call to
<CODE>mysql_store_result()</CODE>, the client receives the entire set in one
operation.  In this case, a <CODE>NULL</CODE> return from <CODE>mysql_fetch_row()</CODE>
always means the end of the result set has been reached and it is
unnecessary to call <CODE>mysql_eof()</CODE>.

</P>
<P>
On the other hand, if you use <CODE>mysql_use_result()</CODE> to initiate a result
set retrieval, the rows of the set are obtained from the server one by one as
you call <CODE>mysql_fetch_row()</CODE> repeatedly.  Because an error may occur on
the connection during this process, a <CODE>NULL</CODE> return value from
<CODE>mysql_fetch_row()</CODE> does not necessarily mean the end of the result set
was reached normally.  In this case, you can use <CODE>mysql_eof()</CODE> to
determine what happened.  <CODE>mysql_eof()</CODE> returns a non-zero value if the
end of the result set was reached and zero if an error occurred.

</P>
<P>
Historically, <CODE>mysql_eof()</CODE> predates the standard <STRONG>MySQL</STRONG> error
functions <CODE>mysql_errno()</CODE> and <CODE>mysql_error()</CODE>.  Since those error
functions provide the same information, their use is preferred over
<CODE>mysql_eof()</CODE>, which is now deprecated.  (In fact, they provide more
information, since <CODE>mysql_eof()</CODE> returns only a boolean value whereas
the error functions indicate a reason for the error when one occurs.)

</P>

<H4>19.4.9.2  Return values</H4>

<P>
Zero if an error occurred. Non-zero if the end of the result set has been
reached.

</P>

<H4>19.4.9.3  Errors</H4>
<P>
None.

</P>

<H4>19.4.9.4  Example</H4>

<P>
The following example shows how you might use <CODE>mysql_eof()</CODE>:

</P>

<PRE>
mysql_query(&#38;mysql,"SELECT * FROM some_table");
result = mysql_use_result(&#38;mysql);
while((row = mysql_fetch_row(result)))
{
    // do something with data
}
if(!mysql_eof(result))  // mysql_fetch_row() failed due to an error
{
    fprintf(stderr, "Error: %s\n", mysql_error(&#38;mysql));
}
</PRE>

<P>
However, you can achieve the same effect with the standard <STRONG>MySQL</STRONG>
error functions:

</P>

<PRE>
mysql_query(&#38;mysql,"SELECT * FROM some_table");
result = mysql_use_result(&#38;mysql);
while((row = mysql_fetch_row(result)))
{
    // do something with data
}
if(mysql_errno(&#38;mysql))  // mysql_fetch_row() failed due to an error
{
    fprintf(stderr, "Error: %s\n", mysql_error(&#38;mysql));
}
</PRE>

<P>
<A NAME="IDX703"></A>


<H3><A NAME="mysql_errno" HREF="manual_toc.html#mysql_errno">19.4.10  <CODE>mysql_errno()</CODE></A></H3>

<P>
<CODE>unsigned int mysql_errno(MYSQL *mysql)</CODE>

</P>

<H4>19.4.10.1  Description</H4>

<P>
For the connection specified by <CODE>mysql</CODE>, <CODE>mysql_errno()</CODE> returns
the error code for the most recently invoked API function that can succeed
or fail.  A return value of zero means that no error occurred. Client error
message numbers are listed in the <STRONG>MySQL</STRONG> <TT>`errmsg.h'</TT> header file.
Server error message numbers are listed in <TT>`mysqld_error.h'</TT>

</P>

<H4>19.4.10.2  Return values:</H4>

<P>
An error code value. Zero if no error occurred.

</P>

<H4>19.4.10.3  Errors</H4>
<P>
None.

</P>
<P>
<A NAME="IDX704"></A>


<H3><A NAME="mysql_error" HREF="manual_toc.html#mysql_error">19.4.11  <CODE>mysql_error()</CODE></A></H3>

<P>
<CODE>char *mysql_error(MYSQL *mysql)</CODE>

</P>

<H4>19.4.11.1  Description</H4>

<P>
For the connection specified by <CODE>mysql</CODE>, <CODE>mysql_error()</CODE> returns
the error message for the most recently invoked API function that can succeed
or fail.  An empty string (<CODE>""</CODE>) is returned if no error occurred.
This means the following two tests are equivalent:

</P>

<PRE>
if(mysql_errno(&#38;mysql))
{
    // an error occurred
}

if(mysql_error(&#38;mysql)[0] != '\0')
{
    // an error occurred
}
</PRE>

<P>
The language of the client error messages may be changed by
recompiling the <STRONG>MySQL</STRONG> client library. Currently you can choose
error messages in several different languages.
See section <A HREF="manual.html#Languages">9.1  What languages are supported by <STRONG>MySQL</STRONG>?</A>.

</P>

<H4>19.4.11.2  Return values</H4>

<P>
A character string that describes the error.  An empty string if no error
occurred.

</P>

<H4>19.4.11.3  Errors</H4>
<P>
None.

</P>
<P>
<A NAME="IDX705"></A>


<H3><A NAME="mysql_escape_string" HREF="manual_toc.html#mysql_escape_string">19.4.12  <CODE>mysql_escape_string()</CODE></A></H3>

<P>
<CODE>unsigned int mysql_escape_string(char *to, const char *from, unsigned int length)</CODE>

</P>

<H4>19.4.12.1  Description</H4>

<P>
Encodes the string in <CODE>from</CODE> to an escaped SQL string that can be sent
to the server in a SQL statement, and places the result in <CODE>to</CODE>.
Characters encoded are <CODE>NUL</CODE> (ASCII 0), <SAMP>`\n'</SAMP>, <SAMP>`\r'</SAMP>, <SAMP>`\'</SAMP>
and <SAMP>`''</SAMP> (see section <A HREF="manual.html#Literals">7.1  Literals: how to write strings and numbers</A>).

</P>
<P>
The string pointed to by <CODE>from</CODE> must be <CODE>length</CODE> bytes long (not
including the terminating null byte). You must allocate the <CODE>to</CODE> buffer
to be at least <CODE>length*2+1</CODE> bytes long. When
<CODE>mysql_escape_string()</CODE> returns, the contents of <CODE>to</CODE> will be a
null-terminated string.  The return value is the length of the encoded
string, not including the terminating null character.

</P>


<H4>19.4.12.2  Example</H4>


<PRE>
char query[1000],*end;

end = strmov(query,"INSERT INTO test_table values(");
*end++ = '\";
end += mysql_escape_string(end,"What's this",11);
*end++ = '\";
*end++ = ',';
*end++ = '\";
end += mysql_escape_string(end,"binary data: \0\r\n",16);
*end++ = '\";
*end++ = ')';

if (mysql_real_query(&#38;mysql,query,(unsigned int) (end - query)))
{
   fprintf(stderr, "Failed to insert row, Error: %s\n",
           mysql_error(&#38;mysql));
}
</PRE>

<P>
The <CODE>strmov()</CODE> function used in the example is included in the
<CODE>mysqlclient</CODE> library and works like <CODE>strcpy()</CODE> but returns a
pointer to the terminating null of the first parameter.

</P>

<H4>19.4.12.3  Return values</H4>

<P>
The length of the value placed into <CODE>to</CODE>, not including the
terminating null character.

</P>

<H4>19.4.12.4  Errors</H4>
<P>
None.

</P>
<P>
<A NAME="IDX706"></A>


<H3><A NAME="mysql_fetch_field" HREF="manual_toc.html#mysql_fetch_field">19.4.13  <CODE>mysql_fetch_field()</CODE></A></H3>

<P>
<CODE>MYSQL_FIELD *mysql_fetch_field(MYSQL_RES *result)</CODE>

</P>

<H4>19.4.13.1  Description</H4>

<P>
Returns the definition of one column of a result set as a <CODE>MYSQL_FIELD</CODE>
structure. Call this function repeatedly to retrieve information about all
columns in the result set.  <CODE>mysql_fetch_field()</CODE> returns <CODE>NULL</CODE>
when no more fields are left.

</P>
<P>
<CODE>mysql_fetch_field()</CODE> is reset to return information about the first
field each time you execute a new <CODE>SELECT</CODE> query.  The field returned by
<CODE>mysql_fetch_field()</CODE> is also affected by calls to
<CODE>mysql_field_seek()</CODE>.

</P>
<P>
If you've called <CODE>mysql_query()</CODE> to perform a <CODE>SELECT</CODE> on a table
but have not called <CODE>mysql_store_result()</CODE>, <STRONG>MySQL</STRONG> returns the
default blob length (8K bytes) if you call <CODE>mysql_fetch_field()</CODE> to ask
for the length of a <CODE>BLOB</CODE> field.  (The 8K size is chosen because
<STRONG>MySQL</STRONG> doesn't know the maximum length for the <CODE>BLOB</CODE>. This
should be made configurable sometime.) Once you've retrieved the result set,
<CODE>field-&#62;max_length</CODE> contains the length of the largest value for this
column in the specific query.

</P>

<H4>19.4.13.2  Return values</H4>

<P>
The <CODE>MYSQL_FIELD</CODE> structure for the current column. <CODE>NULL</CODE>
if no columns are left.

</P>

<H4>19.4.13.3  Errors</H4>
<P>
None.

</P>

<H4>19.4.13.4  Example</H4>


<PRE>
MYSQL_FIELD *field;

while((field = mysql_fetch_field(result)))
{
    printf("field name %s\n", field-&#62;name);
}
</PRE>

<P>
<A NAME="IDX707"></A>


<H3><A NAME="mysql_fetch_fields" HREF="manual_toc.html#mysql_fetch_fields">19.4.14  <CODE>mysql_fetch_fields()</CODE></A></H3>

<P>
<CODE>MYSQL_FIELD *mysql_fetch_fields(MYSQL_RES *result)</CODE>

</P>

<H4>19.4.14.1  Description</H4>

<P>
Returns an array of all <CODE>MYSQL_FIELD</CODE> structures for a result set.
Each structure provides the field definition for one column of the result
set.

</P>

<H4>19.4.14.2  Return values</H4>

<P>
An array of <CODE>MYSQL_FIELD</CODE> structures for all columns of a result set.

</P>

<H4>19.4.14.3  Errors</H4>
<P>
None.

</P>

<H4>19.4.14.4  Example</H4>


<PRE>
unsigned int num_fields;
unsigned int i;
MYSQL_FIELD *fields;

num_fields = mysql_num_fields(result);
fields = mysql_fetch_fields(result);
for(i = 0; i &#60; num_fields; i++)
{
   printf("Field %u is %s\n", i, fields[i].name);
}
</PRE>

<P>
<A NAME="IDX708"></A>


<H3><A NAME="mysql_fetch_field_direct" HREF="manual_toc.html#mysql_fetch_field_direct">19.4.15  <CODE>mysql_fetch_field_direct()</CODE></A></H3>

<P>
<CODE>MYSQL_FIELD *mysql_fetch_field_direct(MYSQL_RES *result, unsigned int fieldnr)</CODE>

</P>

<H4>19.4.15.1  Description</H4>

<P>
Given a field number <CODE>fieldnr</CODE> for a column within a result set, returns
that column's field definition as a <CODE>MYSQL_FIELD</CODE> structure. You may use
this function to retrieve the definition for an arbitrary column.  The value
of <CODE>fieldnr</CODE> should be in the range from 0 to
<CODE>mysql_num_fields(result)-1</CODE>.

</P>

<H4>19.4.15.2  Return values</H4>

<P>
The <CODE>MYSQL_FIELD</CODE> structure for the specified column.

</P>

<H4>19.4.15.3  Errors</H4>
<P>
None.

</P>

<H4>19.4.15.4  Example</H4>


<PRE>
unsigned int num_fields;
unsigned int i;
MYSQL_FIELD *field;

num_fields = mysql_num_fields(result);
for(i = 0; i &#60; num_fields; i++)
{
    field = mysql_fetch_field_direct(result, i);
    printf("Field %u is %s\n", i, field-&#62;name);
}
</PRE>

<P>
<A NAME="IDX709"></A>


<H3><A NAME="mysql_fetch_lengths" HREF="manual_toc.html#mysql_fetch_lengths">19.4.16  <CODE>mysql_fetch_lengths()</CODE></A></H3>

<P>
<CODE>unsigned long *mysql_fetch_lengths(MYSQL_RES *result)</CODE>

</P>

<H4>19.4.16.1  Description</H4>

<P>
Returns the lengths of the columns of the current row within a result set.
If you plan to copy field values, this length information is also useful for
optimization, because you can avoid calling <CODE>strlen()</CODE>.  In addition, if
the result set contains binary data, you <EM>must</EM> use this function to
determine the size of the data, because <CODE>strlen()</CODE> returns incorrect
results for any field containing null characters.

</P>
<P>
The length for empty columns and for columns containing <CODE>NULL</CODE> values is
zero.  To see how to distinguish these two cases, see the description for
<CODE>mysql_fetch_row()</CODE>.

</P>

<H4>19.4.16.2  Return values</H4>

<P>
An array of unsigned long integers representing the size of each column (not
including any terminating null characters).
<CODE>NULL</CODE> if an error occurred.

</P>

<H4>19.4.16.3  Errors</H4>
<P>
<CODE>mysql_fetch_lengths()</CODE> is valid only for the current row of the result
set.  It returns <CODE>NULL</CODE> if you call it before calling
<CODE>mysql_fetch_row()</CODE> or after retrieving all rows in the result.

</P>

<H4>19.4.16.4  Example</H4>


<PRE>
MYSQL_ROW row;
unsigned long *lengths;
unsigned int num_fields;
unsigned int i;

row = mysql_fetch_row(result);
if (row)
{
    num_fields = mysql_num_fields(result);
    lengths = mysql_fetch_lengths(result);
    for(i = 0; i &#60; num_fields; i++)
    {
         printf("Column %u is %lu bytes in length.\n", i, lengths[i]);
    }
}
</PRE>

<P>
<A NAME="IDX710"></A>


<H3><A NAME="mysql_fetch_row" HREF="manual_toc.html#mysql_fetch_row">19.4.17  <CODE>mysql_fetch_row()</CODE></A></H3>

<P>
<CODE>MYSQL_ROW mysql_fetch_row(MYSQL_RES *result)</CODE>

</P>

<H4>19.4.17.1  Description</H4>

<P>
Retrieves the next row of a result set. When used after
<CODE>mysql_store_result()</CODE>, <CODE>mysql_fetch_row()</CODE> returns <CODE>NULL</CODE>
when there are no more rows to retrieve.  When used after
<CODE>mysql_use_result()</CODE>, <CODE>mysql_fetch_row()</CODE> returns <CODE>NULL</CODE> when
there are no more rows to retrieve or if an error occurred.

</P>
<P>
The number of values in the row is given by <CODE>mysql_num_fields(result)</CODE>.
If <CODE>row</CODE> holds the return value from a call to <CODE>mysql_fetch_row()</CODE>,
pointers to the values are accessed as <CODE>row[0]</CODE> to
<CODE>row[mysql_num_fields(result)-1]</CODE>.  <CODE>NULL</CODE> values in the row are
indicated by <CODE>NULL</CODE> pointers.

</P>
<P>
The lengths of the field values in the row may be obtained by calling
<CODE>mysql_fetch_lengths()</CODE>.  Empty fields and fields containing
<CODE>NULL</CODE> both have length 0; you can distinguish these by checking
the pointer for the field value.  If the pointer is <CODE>NULL</CODE>, the field
is <CODE>NULL</CODE>; otherwise the field is empty.

</P>

<H4>19.4.17.2  Return values</H4>

<P>
A <CODE>MYSQL_ROW</CODE> structure for the next row.  <CODE>NULL</CODE> if
there are no more rows to retrieve or if an error occurred.

</P>

<H4>19.4.17.3  Errors</H4>

<DL COMPACT>

<DT><CODE>CR_SERVER_LOST</CODE>
<DD>
The connection to the server was lost during the query.
<DT><CODE>CR_UNKNOWN_ERROR</CODE>
<DD>
An unknown error occurred.
</DL>


<H4>19.4.17.4  Example</H4>


<PRE>
MYSQL_ROW row;
unsigned int num_fields;
unsigned int i;

num_fields = mysql_num_fields(result);
while ((row = mysql_fetch_row(result)))
{
   unsigned long *lengths;
   lengths = mysql_fetch_lengths(result);
   for(i = 0; i &#60; num_fields; i++)
   {
       printf("[%.*s] ", (int) lengths[i], row[i] ? row[i] : "NULL");
   }
   printf("\n");
}
</PRE>

<P>
<A NAME="IDX711"></A>


<H3><A NAME="mysql_field_count" HREF="manual_toc.html#mysql_field_count">19.4.18  <CODE>mysql_field_count()</CODE></A></H3>

<P>
<CODE>unsigned int mysql_field_count(MYSQL *mysql)</CODE>

</P>
<P>
If you are using a version of <STRONG>MySQL</STRONG> earlier than 3.22.24, you
should use <CODE>unsigned int mysql_num_fields(MYSQL *mysql)</CODE> instead.

</P>

<H4>19.4.18.1  Description</H4>

<P>
Returns the number of columns for the most recent query on the connection.

</P>
<P>
The normal use of this function is when <CODE>mysql_store_result()</CODE>
returned <CODE>NULL</CODE> (and thus you have no result set pointer).
In this case, you can call <CODE>mysql_field_count()</CODE> to
determine whether or not <CODE>mysql_store_result()</CODE> should have produced a
non-empty result.  This allows the client program to take proper action
without knowing whether or not the query was a <CODE>SELECT</CODE> (or
<CODE>SELECT</CODE>-like) statement.  The example shown below illustrates how this
may be done.

</P>
<P>
See section <A HREF="manual.html#NULL_mysql_store_result">19.4.50  Why is it that after <CODE>mysql_query()</CODE> returns success, <CODE>mysql_store_result()</CODE> sometimes returns <CODE>NULL?</CODE></A>.

</P>

<H4>19.4.18.2  Return values</H4>

<P>
An unsigned integer representing the number of fields in a result set.

</P>

<H4>19.4.18.3  Errors</H4>
<P>
None.

</P>

<H4>19.4.18.4  Example</H4>


<PRE>
MYSQL_RES *result;
unsigned int num_fields;
unsigned int num_rows;

if (mysql_query(&#38;mysql,query_string))
{
    // error
}
else // query succeeded, process any data returned by it
{
    result = mysql_store_result(&#38;mysql);
    if (result)  // there are rows
    {
        num_fields = mysql_num_fields(result);
        // retrieve rows, then call mysql_free_result(result)
    }
    else  // mysql_store_result() returned nothing; should it have?
    {
        if(mysql_field_count(&#38;mysql) == 0)
        {
            // query does not return data
            // (it was not a SELECT)
            num_rows = mysql_affected_rows(&#38;mysql);
        }
        else // mysql_store_result() should have returned data
        {
            fprintf(stderr, "Error: %s\n", mysql_error(&#38;mysql));
        }
    }
}
</PRE>

<P>
An alternative is to replace the <CODE>mysql_field_count(&#38;mysql)</CODE> call with
<CODE>mysql_errno(&#38;mysql)</CODE>.  In this case, you are checking directly for an
error from <CODE>mysql_store_result()</CODE> rather than inferring from the value
of <CODE>mysql_field_count()</CODE> whether or not the statement was a
<CODE>SELECT</CODE>.

</P>
<P>
<A NAME="IDX712"></A>


<H3><A NAME="mysql_field_seek" HREF="manual_toc.html#mysql_field_seek">19.4.19  <CODE>mysql_field_seek()</CODE></A></H3>

<P>
<CODE>MYSQL_FIELD_OFFSET mysql_field_seek(MYSQL_RES *result, MYSQL_FIELD_OFFSET offset)</CODE>

</P>

<H4>19.4.19.1  Description</H4>

<P>
Sets the field cursor to the given offset.   The next call to
<CODE>mysql_fetch_field()</CODE> will retrieve the field definition of the column
associated with that offset.

</P>
<P>
To seek to the beginning of a row, pass an <CODE>offset</CODE> value of zero.

</P>

<H4>19.4.19.2  Return values</H4>

<P>
The previous value of the field cursor.

</P>

<H4>19.4.19.3  Errors</H4>
<P>
None.

</P>
<P>
<A NAME="IDX713"></A>


<H3><A NAME="mysql_field_tell" HREF="manual_toc.html#mysql_field_tell">19.4.20  <CODE>mysql_field_tell()</CODE></A></H3>

<P>
<CODE>MYSQL_FIELD_OFFSET mysql_field_tell(MYSQL_RES *result)</CODE>

</P>

<H4>19.4.20.1  Description</H4>

<P>
Returns the position of the field cursor used for the last
<CODE>mysql_fetch_field()</CODE>. This value can be used as an argument to
<CODE>mysql_field_seek()</CODE>.

</P>

<H4>19.4.20.2  Return values</H4>

<P>
The current offset of the field cursor.

</P>

<H4>19.4.20.3  Errors</H4>
<P>
None.

</P>
<P>
<A NAME="IDX714"></A>


<H3><A NAME="mysql_free_result" HREF="manual_toc.html#mysql_free_result">19.4.21  <CODE>mysql_free_result()</CODE></A></H3>

<P>
<CODE>void mysql_free_result(MYSQL_RES *result)</CODE>

</P>

<H4>19.4.21.1  Description</H4>

<P>
Frees the memory allocated for a result set by <CODE>mysql_store_result()</CODE>,
<CODE>mysql_use_result()</CODE>, <CODE>mysql_list_dbs()</CODE>, etc.  When you are done
with a result set, you must free the memory it uses by calling
<CODE>mysql_free_result()</CODE>.

</P>

<H4>19.4.21.2  Return values</H4>

<P>
None.

</P>

<H4>19.4.21.3  Errors</H4>
<P>
None.

</P>
<P>
<A NAME="IDX715"></A>


<H3><A NAME="mysql_get_client_info" HREF="manual_toc.html#mysql_get_client_info">19.4.22  <CODE>mysql_get_client_info()</CODE></A></H3>

<P>
<CODE>char *mysql_get_client_info(void)</CODE>

</P>

<H4>19.4.22.1  Description</H4>

<P>
Returns a string that represents the client library version.

</P>

<H4>19.4.22.2  Return values</H4>

<P>
A character string that represents the <STRONG>MySQL</STRONG> client library version.

</P>

<H4>19.4.22.3  Errors</H4>
<P>
None.

</P>
<P>
<A NAME="IDX716"></A>


<H3><A NAME="mysql_get_host_info" HREF="manual_toc.html#mysql_get_host_info">19.4.23  <CODE>mysql_get_host_info()</CODE></A></H3>

<P>
<CODE>char *mysql_get_host_info(MYSQL *mysql)</CODE>

</P>

<H4>19.4.23.1  Description</H4>

<P>
Returns a string describing the type of connection in use, including the
server host name.

</P>

<H4>19.4.23.2  Return values</H4>

<P>
A character string representing the server host name and the connection type.

</P>

<H4>19.4.23.3  Errors</H4>
<P>
None.

</P>
<P>
<A NAME="IDX717"></A>


<H3><A NAME="mysql_get_proto_info" HREF="manual_toc.html#mysql_get_proto_info">19.4.24  <CODE>mysql_get_proto_info()</CODE></A></H3>

<P>
<CODE>unsigned int mysql_get_proto_info(MYSQL *mysql)</CODE>

</P>

<H4>19.4.24.1  Description</H4>

<P>
Returns the protocol version used by current connection.

</P>

<H4>19.4.24.2  Return values</H4>

<P>
An unsigned integer representing the protocol version used by the current
connection.

</P>

<H4>19.4.24.3  Errors</H4>
<P>
None.

</P>
<P>
<A NAME="IDX718"></A>


<H3><A NAME="mysql_get_server_info" HREF="manual_toc.html#mysql_get_server_info">19.4.25  <CODE>mysql_get_server_info()</CODE></A></H3>

<P>
<CODE>char *mysql_get_server_info(MYSQL *mysql)</CODE>

</P>

<H4>19.4.25.1  Description</H4>

<P>
Returns a string that represents the server version number.

</P>

<H4>19.4.25.2  Return values</H4>

<P>
A character string that represents the server version number.

</P>

<H4>19.4.25.3  Errors</H4>
<P>
None.

</P>
<P>
<A NAME="IDX719"></A>


<H3><A NAME="mysql_info" HREF="manual_toc.html#mysql_info">19.4.26  <CODE>mysql_info()</CODE></A></H3>

<P>
<CODE>char *mysql_info(MYSQL *mysql)</CODE>

</P>

<H4>19.4.26.1  Description</H4>

<P>
Retrieves a string providing information about the most recently executed
query, but only for the statements listed below.  For other statements,
<CODE>mysql_info()</CODE> returns <CODE>NULL</CODE>.  The format of the string varies
depending on the type of query, as described below.  The numbers are
illustrative only; the string will contain values appropriate for the query.

</P>
<DL COMPACT>

<DT><CODE>INSERT INTO ... SELECT ...</CODE>
<DD>
String format: <CODE>Records: 100 Duplicates: 0 Warnings: 0</CODE>
<DT><CODE>INSERT INTO ... VALUES (...),(...),(...)...</CODE>
<DD>
String format: <CODE>Records: 3  Duplicates: 0  Warnings: 0</CODE>
<DT><CODE>LOAD DATA INFILE ...</CODE>
<DD>
String format: <CODE>Records: 1 Deleted: 0 Skipped: 0 Warnings: 0</CODE>
<DT><CODE>ALTER TABLE</CODE>
<DD>
String format: <CODE>Records: 3 Duplicates: 0 Warnings: 0</CODE>
</DL>

<P>
Note that <CODE>mysql_info()</CODE> returns a non-<CODE>NULL</CODE> value for the
<CODE>INSERT ... VALUES</CODE> statement only if multiple value lists are
specified in the statement.

</P>

<H4>19.4.26.2  Return values</H4>

<P>
A character string representing additional information about the most
recently executed query.  <CODE>NULL</CODE> if no information is available for the
query.

</P>

<H4>19.4.26.3  Errors</H4>
<P>
None.

</P>
<P>
<A NAME="IDX720"></A>


<H3><A NAME="mysql_init" HREF="manual_toc.html#mysql_init">19.4.27  <CODE>mysql_init()</CODE></A></H3>

<P>
<CODE>MYSQL *mysql_init(MYSQL *mysql)</CODE>

</P>

<H4>19.4.27.1  Description</H4>

<P>
Allocates or initializes a <CODE>MYSQL</CODE> object suitable for
<CODE>mysql_real_connect()</CODE>.  If <CODE>mysql</CODE> is a <CODE>NULL</CODE> pointer, the
function allocates, initializes and returns a new object.  Otherwise the
object is initialized and the address of the object is returned.  If
<CODE>mysql_init()</CODE> allocates a new object, it will be freed when
<CODE>mysql_close()</CODE> is called to close the connection.

</P>

<H4>19.4.27.2  Return values</H4>

<P>
An initialized <CODE>MYSQL*</CODE> handle.  <CODE>NULL</CODE> if there was
insufficient memory to allocate a new object.

</P>

<H4>19.4.27.3  Errors</H4>
<P>
In case of insufficient memory, <CODE>NULL</CODE> is returned.

</P>
<P>
<A NAME="IDX721"></A>


<H3><A NAME="mysql_insert_id" HREF="manual_toc.html#mysql_insert_id">19.4.28  <CODE>mysql_insert_id()</CODE></A></H3>

<P>
<CODE>my_ulonglong mysql_insert_id(MYSQL *mysql)</CODE>

</P>

<H4>19.4.28.1  Description</H4>

<P>
Returns the ID generated for an <CODE>AUTO_INCREMENT</CODE> column by the previous
query.  Use this function after you have performed an <CODE>INSERT</CODE> query
into a table that contains an <CODE>AUTO_INCREMENT</CODE> field.

</P>
<P>
Note that <CODE>mysql_insert_id()</CODE> returns <CODE>0</CODE> if the previous query
does not generate an <CODE>AUTO_INCREMENT</CODE> value.  If you need to save
the value for later, be sure to call <CODE>mysql_insert_id()</CODE> immediately
after the query that generates the value.

</P>
<P>
Also note that the value of the SQL <CODE>LAST_INSERT_ID()</CODE> function always
contains the most recently generated <CODE>AUTO_INCREMENT</CODE> value, and is
not reset between queries since the value of that function is maintained
in the server.

</P>

<H4>19.4.28.2  Return values</H4>

<P>
The value of the <CODE>AUTO_INCREMENT</CODE> field that was updated by the previous
query.  Returns zero if there was no previous query on the connection or if
the query did not update an <CODE>AUTO_INCREMENT</CODE> value.

</P>

<H4>19.4.28.3  Errors</H4>
<P>
None.

</P>
<P>
<A NAME="IDX722"></A>


<H3><A NAME="mysql_kill" HREF="manual_toc.html#mysql_kill">19.4.29  <CODE>mysql_kill()</CODE></A></H3>

<P>
<CODE>int mysql_kill(MYSQL *mysql, unsigned long pid)</CODE>

</P>

<H4>19.4.29.1  Description</H4>

<P>
Asks the server to kill the thread specified by <CODE>pid</CODE>.

</P>

<H4>19.4.29.2  Return values</H4>

<P>
Zero for success.  Non-zero if an error occurred.

</P>

<H4>19.4.29.3  Errors</H4>

<DL COMPACT>

<DT><CODE>CR_COMMANDS_OUT_OF_SYNC</CODE>
<DD>
Commands were executed in an improper order.
<DT><CODE>CR_SERVER_GONE_ERROR</CODE>
<DD>
The <STRONG>MySQL</STRONG> server has gone away.
<DT><CODE>CR_SERVER_LOST</CODE>
<DD>
The connection to the server was lost during the query.
<DT><CODE>CR_UNKNOWN_ERROR</CODE>
<DD>
An unknown error occurred.
</DL>

<P>
<A NAME="IDX723"></A>


<H3><A NAME="mysql_list_dbs" HREF="manual_toc.html#mysql_list_dbs">19.4.30  <CODE>mysql_list_dbs()</CODE></A></H3>

<P>
<CODE>MYSQL_RES *mysql_list_dbs(MYSQL *mysql, const char *wild)</CODE>

</P>

<H4>19.4.30.1  Description</H4>

<P>
Returns a result set consisting of database names on the server that match
the simple regular expression specified by the <CODE>wild</CODE> parameter.
<CODE>wild</CODE> may contain the wildcard characters <SAMP>`%'</SAMP> or <SAMP>`_'</SAMP>, or may
be a <CODE>NULL</CODE> pointer to match all databases.  Calling
<CODE>mysql_list_dbs()</CODE> is similar to executing the query <CODE>SHOW
databases [LIKE wild]</CODE>.

</P>
<P>
You must free the result set with <CODE>mysql_free_result()</CODE>.

</P>

<H4>19.4.30.2  Return values</H4>

<P>
A <CODE>MYSQL_RES</CODE> result set for success.  <CODE>NULL</CODE> if an error occurred.

</P>

<H4>19.4.30.3  Errors</H4>

<DL COMPACT>

<DT><CODE>CR_COMMANDS_OUT_OF_SYNC</CODE>
<DD>
Commands were executed in an improper order.
<DT><CODE>CR_OUT_OF_MEMORY</CODE>
<DD>
Out of memory.
<DT><CODE>CR_SERVER_GONE_ERROR</CODE>
<DD>
The <STRONG>MySQL</STRONG> server has gone away.
<DT><CODE>CR_SERVER_LOST</CODE>
<DD>
The connection to the server was lost during the query.
<DT><CODE>CR_UNKNOWN_ERROR</CODE>
<DD>
An unknown error occurred.
</DL>

<P>
<A NAME="IDX724"></A>


<H3><A NAME="mysql_list_fields" HREF="manual_toc.html#mysql_list_fields">19.4.31  <CODE>mysql_list_fields()</CODE></A></H3>

<P>
<CODE>MYSQL_RES *mysql_list_fields(MYSQL *mysql, const char *table, const char *wild)</CODE>

</P>

<H4>19.4.31.1  Description</H4>

<P>
Returns a result set consisting of field names in the given table that match
the simple regular expression specified by the <CODE>wild</CODE> parameter.
<CODE>wild</CODE> may contain the wildcard characters <SAMP>`%'</SAMP> or <SAMP>`_'</SAMP>, or may
be a <CODE>NULL</CODE> pointer to match all fields.  Calling
<CODE>mysql_list_fields()</CODE> is similar to executing the query <CODE>SHOW
COLUMNS FROM tbl_name [LIKE wild]</CODE>.

</P>
<P>
Note that it's recommended that you use <CODE>SHOW COLUMNS FROM tbl_name</CODE>
instead of <CODE>mysql_list_fields()</CODE>.

</P>
<P>
You must free the result set with <CODE>mysql_free_result()</CODE>.

</P>

<H4>19.4.31.2  Return values</H4>

<P>
A <CODE>MYSQL_RES</CODE> result set for success.  <CODE>NULL</CODE> if an error occurred.

</P>

<H4>19.4.31.3  Errors</H4>

<DL COMPACT>

<DT><CODE>CR_COMMANDS_OUT_OF_SYNC</CODE>
<DD>
Commands were executed in an improper order.
<DT><CODE>CR_SERVER_GONE_ERROR</CODE>
<DD>
The <STRONG>MySQL</STRONG> server has gone away.
<DT><CODE>CR_SERVER_LOST</CODE>
<DD>
The connection to the server was lost during the query.
<DT><CODE>CR_UNKNOWN_ERROR</CODE>
<DD>
An unknown error occurred.
</DL>

<P>
<A NAME="IDX725"></A>


<H3><A NAME="mysql_list_processes" HREF="manual_toc.html#mysql_list_processes">19.4.32  <CODE>mysql_list_processes()</CODE></A></H3>

<P>
<CODE>MYSQL_RES *mysql_list_processes(MYSQL *mysql)</CODE>

</P>

<H4>19.4.32.1  Description</H4>

<P>
Returns a result set describing the current server threads.  This is the same
kind of information as that reported by <CODE>mysqladmin processlist</CODE>.

</P>
<P>
You must free the result set with <CODE>mysql_free_result()</CODE>.

</P>

<H4>19.4.32.2  Return values</H4>

<P>
A <CODE>MYSQL_RES</CODE> result set for success.  <CODE>NULL</CODE> if an error occurred.

</P>

<H4>19.4.32.3  Errors</H4>

<DL COMPACT>

<DT><CODE>CR_COMMANDS_OUT_OF_SYNC</CODE>
<DD>
Commands were executed in an improper order.
<DT><CODE>CR_SERVER_GONE_ERROR</CODE>
<DD>
The <STRONG>MySQL</STRONG> server has gone away.
<DT><CODE>CR_SERVER_LOST</CODE>
<DD>
The connection to the server was lost during the query.
<DT><CODE>CR_UNKNOWN_ERROR</CODE>
<DD>
An unknown error occurred.
</DL>

<P>
<A NAME="IDX726"></A>


<H3><A NAME="mysql_list_tables" HREF="manual_toc.html#mysql_list_tables">19.4.33  <CODE>mysql_list_tables()</CODE></A></H3>

<P>
<CODE>MYSQL_RES *mysql_list_tables(MYSQL *mysql, const char *wild)</CODE>

</P>

<H4>19.4.33.1  Description</H4>

<P>
Returns a result set consisting of table names in the current database that
match the simple regular expression specified by the <CODE>wild</CODE> parameter.
<CODE>wild</CODE> may contain the wildcard characters <SAMP>`%'</SAMP> or <SAMP>`_'</SAMP>, or may
be a <CODE>NULL</CODE> pointer to match all tables.  Calling
<CODE>mysql_list_tables()</CODE> is similar to executing the query <CODE>SHOW
tables [LIKE wild]</CODE>.

</P>
<P>
You must free the result set with <CODE>mysql_free_result()</CODE>.

</P>

<H4>19.4.33.2  Return values</H4>

<P>
A <CODE>MYSQL_RES</CODE> result set for success.  <CODE>NULL</CODE> if an error occurred.

</P>

<H4>19.4.33.3  Errors</H4>

<DL COMPACT>

<DT><CODE>CR_COMMANDS_OUT_OF_SYNC</CODE>
<DD>
Commands were executed in an improper order.
<DT><CODE>CR_SERVER_GONE_ERROR</CODE>
<DD>
The <STRONG>MySQL</STRONG> server has gone away.
<DT><CODE>CR_SERVER_LOST</CODE>
<DD>
The connection to the server was lost during the query.
<DT><CODE>CR_UNKNOWN_ERROR</CODE>
<DD>
An unknown error occurred.
</DL>

<P>
<A NAME="IDX727"></A>


<H3><A NAME="mysql_num_fields" HREF="manual_toc.html#mysql_num_fields">19.4.34  <CODE>mysql_num_fields()</CODE></A></H3>

<P>
<CODE>unsigned int mysql_num_fields(MYSQL_RES *result)</CODE>

</P>
<P>
or

</P>
<P>
<CODE>unsigned int mysql_num_fields(MYSQL *mysql)</CODE>

</P>
<P>
The last function doesn't work on <STRONG>MySQL</STRONG> 3.23 or newer.  To pass a
<CODE>MYSQL*</CODE> argument, you must use
<CODE>unsigned int mysql_field_count(MYSQL *mysql)</CODE> instead.

</P>

<H4>19.4.34.1  Description</H4>

<P>
Returns the number of columns in a result set.

</P>
<P>
Note that you can call <CODE>mysql_num_fields()</CODE> with either a pointer to a
result set or to a connection handle.  You would use the connection handle if
<CODE>mysql_store_result()</CODE> returned <CODE>NULL</CODE> (and thus you have no result
set pointer).  In this case, you can call <CODE>mysql_num_fields()</CODE> to
determine whether or not <CODE>mysql_store_result()</CODE> should have produced a
non-empty result.  This allows the client program to take proper action
without knowing whether or not the query was a <CODE>SELECT</CODE> (or
<CODE>SELECT</CODE>-like) statement.  The example shown below illustrates how this
may be done.

</P>
<P>
See section <A HREF="manual.html#NULL_mysql_store_result">19.4.50  Why is it that after <CODE>mysql_query()</CODE> returns success, <CODE>mysql_store_result()</CODE> sometimes returns <CODE>NULL?</CODE></A>.

</P>

<H4>19.4.34.2  Return values</H4>

<P>
An unsigned integer representing the number of fields in a result set.

</P>

<H4>19.4.34.3  Errors</H4>
<P>
None.

</P>

<H4>19.4.34.4  Example</H4>


<PRE>
MYSQL_RES *result;
unsigned int num_fields;
unsigned int num_rows;

if (mysql_query(&#38;mysql,query_string))
{
    // error
}
else // query succeeded, process any data returned by it
{
    result = mysql_store_result(&#38;mysql);
    if (result)  // there are rows
    {
        num_fields = mysql_num_fields(result);
        // retrieve rows, then call mysql_free_result(result)
    }
    else  // mysql_store_result() returned nothing; should it have?
    {
        if(mysql_num_fields(&#38;mysql) == 0)
        {
            // query does not return data
            // (it was not a SELECT)
            num_rows = mysql_affected_rows(&#38;mysql);
        }
        else // mysql_store_result() should have returned data
        {
            fprintf(stderr, "Error: %s\n", mysql_error(&#38;mysql));
        }
    }
}
</PRE>

<P>
An alternative is to replace the <CODE>mysql_num_fields(&#38;mysql)</CODE> call with
<CODE>mysql_errno(&#38;mysql)</CODE>.  In this case, you are checking directly for an
error from <CODE>mysql_store_result()</CODE> rather than inferring from the value
of <CODE>mysql_num_fields()</CODE> whether or not the statement was a
<CODE>SELECT</CODE>.

</P>
<P>
<A NAME="IDX728"></A>


<H3><A NAME="mysql_num_rows" HREF="manual_toc.html#mysql_num_rows">19.4.35  <CODE>mysql_num_rows()</CODE></A></H3>

<P>
<CODE>my_ulonglong mysql_num_rows(MYSQL_RES *result)</CODE>

</P>

<H4>19.4.35.1  Description</H4>

<P>
Returns the number of rows in the result set.

</P>
<P>
The use of <CODE>mysql_num_rows()</CODE> depends on whether you use
<CODE>mysql_store_result()</CODE> or <CODE>mysql_use_result()</CODE> to return the result
set.  If you use <CODE>mysql_store_result()</CODE>, <CODE>mysql_num_rows()</CODE> may be
called immediately.  If you use <CODE>mysql_use_result()</CODE>,
<CODE>mysql_num_rows()</CODE> will not return the correct value until all the rows
in the result set have been retrieved.

</P>

<H4>19.4.35.2  Return values</H4>

<P>
The number of rows in the result set.

</P>

<H4>19.4.35.3  Errors</H4>
<P>
None.

</P>
<P>
<A NAME="IDX729"></A>


<H3><A NAME="mysql_options" HREF="manual_toc.html#mysql_options">19.4.36  <CODE>mysql_options()</CODE></A></H3>

<P>
<CODE>int mysql_options(MYSQL *mysql, enum mysql_option option, const char *arg)</CODE>

</P>

<H4>19.4.36.1  Description</H4>

<P>
Can be used to set extra connect options and affect behavior for a connection.

</P>
<P>
Should be called after <CODE>mysql_init()</CODE> and before
<CODE>mysql_connect()</CODE> or <CODE>mysql_real_connect()</CODE>.

</P>
<P>
The <CODE>option</CODE> argument is the option that you want to set;  The <CODE>arg</CODE>
argument is the value for the option. If the option is an integer, then
<CODE>arg</CODE> should point to the value of the integer.

</P>
<P>
Possible options values:

</P>
<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><STRONG>Option</STRONG> </TD><TD> <STRONG>Argument type</STRONG> </TD><TD> <STRONG>Function</STRONG>
</TR NOSAVE>
<TR><TD><CODE>MYSQL_OPT_CONNECT_TIMEOUT</CODE> </TD><TD> unsigned int * </TD><TD> Connect timeout in seconds.
</TR NOSAVE>
<TR><TD><CODE>MYSQL_OPT_COMPRESS</CODE> </TD><TD> Not used </TD><TD> Use the compressed client/server protocol.
</TR NOSAVE>
<TR><TD><CODE>MYSQL_OPT_NAMED_PIPE</CODE> </TD><TD> Not used </TD><TD> Use named pipes to connect to a <STRONG>MySQL</STRONG> server on NT.
</TR NOSAVE>
<TR><TD><CODE>MYSQL_INIT_COMMAND</CODE> </TD><TD> char * </TD><TD> Command to execute when connecting to <STRONG>MySQL</STRONG> server. Will automatically be re-executed when reconnecting.
</TR NOSAVE>
<TR><TD><CODE>MYSQL_READ_DEFAULT_FILE</CODE> </TD><TD> char * </TD><TD> Read options from the named option file instead of from <TT>`my.cnf'</TT>.
</TR NOSAVE>
<TR><TD><CODE>MYSQL_READ_DEFAULT_GROUP</CODE> </TD><TD> char * </TD><TD> Read options from the named group from <TT>`my.cnf'</TT>.or the file specified with <CODE>MYSQL_READ_DEFAULT_FILE</CODE>.
</TR>
</TABLE>

<P>
Note that the group <CODE>client</CODE> is always read if you use
<CODE>MYSQL_READ_DEFAULT_FILE</CODE> or <CODE>MYSQL_READ_DEFAULT_GROUP</CODE>.

</P>
<P>
The specified group in the option file may contain the following options:

</P>
<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD>compress </TD><TD> Use the compressed client/server protocol.
</TR NOSAVE>
<TR><TD>database </TD><TD> Connect to this database if there was no database in the connect command
</TR NOSAVE>
<TR><TD>debug </TD><TD> Debug options
</TR NOSAVE>
<TR><TD>host </TD><TD> Default host name
</TR NOSAVE>
<TR><TD>init-command </TD><TD> Command to execute when connecting to <STRONG>MySQL</STRONG> server. Will automatically be re-executed when reconnecting.
</TR NOSAVE>
<TR><TD>password </TD><TD> Default password
</TR NOSAVE>
<TR><TD>pipe </TD><TD> Use named pipes to connect to a <STRONG>MySQL</STRONG> server on NT.
</TR NOSAVE>
<TR><TD>port </TD><TD> Default port number
</TR NOSAVE>
<TR><TD>return-found-rows </TD><TD> Tell <CODE>mysql_info()</CODE> to return found rows instead of updated rows when using <CODE>UPDATE</CODE>.
</TR NOSAVE>
<TR><TD>socket </TD><TD> Default socket number
</TR NOSAVE>
<TR><TD>timeout </TD><TD> Connect timeout in seconds.
</TR NOSAVE>
<TR><TD>user </TD><TD> Default user
</TR>
</TABLE>

<P>
For more information about option files, see section <A HREF="manual.html#Option_files">4.15.4  Option files</A>.

</P>

<H4>19.4.36.2  Return values</H4>

<P>
Zero for success.  Non-zero if you used an unknown option.

</P>

<H4>19.4.36.3  Example</H4>


<PRE>
MYSQL mysql;

mysql_init(&#38;mysql);
mysql_options(&#38;mysql,MYSQL_OPT_COMPRESS,0);
mysql_options(&#38;mysql,MYSQL_READ_DEFAULT_GROUP,"odbc");
if (!mysql_real_connect(&#38;mysql,"host","user","passwd","database",0,NULL,0))
{
    fprintf(stderr, "Failed to connect to database: Error: %s\n",
          mysql_error(&#38;mysql));
}
</PRE>

<P>
The above requests the client to use the compressed client/server protocol and
read the additional options from the <CODE>odbc</CODE> section in the <CODE>my.cnf</CODE>
file.

</P>
<P>
<A NAME="IDX730"></A>


<H3><A NAME="mysql_ping" HREF="manual_toc.html#mysql_ping">19.4.37  <CODE>mysql_ping()</CODE></A></H3>

<P>
<CODE>int mysql_ping(MYSQL *mysql)</CODE>

</P>

<H4>19.4.37.1  Description</H4>

<P>
Checks whether or not the connection to the server is working. If it has gone
down, an automatic reconnection is attempted.

</P>
<P>
This function can be used by clients that remain idle for a long while,
to check whether or not the server has closed the connection and reconnect
if necessary.

</P>

<H4>19.4.37.2  Return values</H4>

<P>
Zero if the server is alive. Non-zero if an error occurred.

</P>

<H4>19.4.37.3  Errors</H4>

<DL COMPACT>

<DT><CODE>CR_COMMANDS_OUT_OF_SYNC</CODE>
<DD>
Commands were executed in an improper order.
<DT><CODE>CR_SERVER_GONE_ERROR</CODE>
<DD>
The <STRONG>MySQL</STRONG> server has gone away.
<DT><CODE>CR_UNKNOWN_ERROR</CODE>
<DD>
An unknown error occurred.
</DL>

<P>
<A NAME="IDX731"></A>


<H3><A NAME="mysql_query" HREF="manual_toc.html#mysql_query">19.4.38  <CODE>mysql_query()</CODE></A></H3>

<P>
<CODE>int mysql_query(MYSQL *mysql, const char *query)</CODE>

</P>

<H4>19.4.38.1  Description</H4>
<P>
Executes the SQL query pointed to by the null-terminated string <CODE>query</CODE>.
The query must consist of a single SQL statement.  You should not add
a terminating semicolon (<SAMP>`;'</SAMP>) or <CODE>\g</CODE> to the statement.

</P>
<P>
<CODE>mysql_query()</CODE> cannot be used for queries that contain binary data; you
should use <CODE>mysql_real_query()</CODE> instead.  (Binary data may contain the
<SAMP>`\0'</SAMP> character, which <CODE>mysql_query()</CODE> interprets as the end of the
query string.)

</P>

<H4>19.4.38.2  Return values</H4>

<P>
Zero if the query was successful. Non-zero if an error occurred.

</P>

<H4>19.4.38.3  Errors</H4>

<DL COMPACT>

<DT><CODE>CR_COMMANDS_OUT_OF_SYNC</CODE>
<DD>
Commands were executed in an improper order.
<DT><CODE>CR_SERVER_GONE_ERROR</CODE>
<DD>
The <STRONG>MySQL</STRONG> server has gone away.
<DT><CODE>CR_SERVER_LOST</CODE>
<DD>
The connection to the server was lost during the query.
<DT><CODE>CR_UNKNOWN_ERROR</CODE>
<DD>
An unknown error occurred.
</DL>

<P>
<A NAME="IDX732"></A>


<H3><A NAME="mysql_real_connect" HREF="manual_toc.html#mysql_real_connect">19.4.39  <CODE>mysql_real_connect()</CODE></A></H3>

<P>
<CODE>MYSQL *mysql_real_connect(MYSQL *mysql, const char *host,
                          const char *user, const char *passwd, const char *db,
                          unsigned int port, const char *unix_socket,
                          unsigned int client_flag)</CODE>

</P>

<H4>19.4.39.1  Description</H4>

<P>
<CODE>mysql_real_connect()</CODE> attempts to establish a connection to a
<STRONG>MySQL</STRONG> database engine running on <CODE>host</CODE>.
<CODE>mysql_real_connect()</CODE> must complete successfully before you can execute
any of the other API functions, with the exception of
<CODE>mysql_get_client_info()</CODE>.

</P>
<P>
The parameters are specified as follows:

</P>

<UL>
<LI>

<CODE>mysql</CODE> is a pointer to a <CODE>MYSQL</CODE> connection structure, or
<CODE>NULL</CODE>.

If <CODE>mysql</CODE> is <CODE>NULL</CODE>, the C API allocates memory for the
connection structure automatically and frees it when you call
<CODE>mysql_close()</CODE>. The disadvantage of this approach is that you can't
retrieve an error message if the connection fails.  (To get error information
from <CODE>mysql_errno()</CODE> or <CODE>mysql_error()</CODE>, you must provide a valid
<CODE>MYSQL</CODE> pointer.)

If the first parameter is not <CODE>NULL</CODE>, it should be the address of an
existing <CODE>MYSQL</CODE> structure.  In this case, before calling
<CODE>mysql_real_connect()</CODE> you must call <CODE>mysql_init()</CODE> to initialize
the <CODE>MYSQL</CODE> structure.  See the example below.

<LI>

The value of <CODE>host</CODE> may be either a hostname or an IP address.  If
<CODE>host</CODE> is <CODE>NULL</CODE> or the string <CODE>"localhost"</CODE>, a connection to
the local host is assumed. If the OS supports sockets (Unix) or named pipes
(Win32), they are used instead of TCP/IP to connect to the server.

<LI>

The <CODE>user</CODE> parameter contains the user's <STRONG>MySQL</STRONG> login ID.  If
<CODE>user</CODE> is <CODE>NULL</CODE>, the current user is assumed.  Under Unix, this is
the current login name.  Under Windows ODBC, the current user name must be
specified explicitly.
See section <A HREF="manual.html#ODBC_administrator">16.4  How to fill in the various fields in the ODBC administrator program</A>.

<LI>

The <CODE>passwd</CODE> parameter contains the password for <CODE>user</CODE>.  If
<CODE>passwd</CODE> is <CODE>NULL</CODE>, only entries in the <CODE>user</CODE> table for the
user that have a blank password field will be checked for a match. This
allows the database administrator to set up the <STRONG>MySQL</STRONG> privilege
system in such a way that users get different privileges depending on whether
or not they have specified a password.

Note: Do not attempt to encrypt the password before calling
<CODE>mysql_real_connect()</CODE>; password encryption is handled automatically by
the client API.

<LI>

<CODE>db</CODE> is the database name.
If <CODE>db</CODE> is not <CODE>NULL</CODE>, the connection will set the default
database to this value.

<LI>

If <CODE>port</CODE> is not 0, the value will be used as the port number
for the TCP/IP connection.  Note that the <CODE>host</CODE> parameter
determines the type of the connection.

<LI>

If <CODE>unix_socket</CODE> is not <CODE>NULL</CODE>, the string specifies the
socket or named pipe that should be used.  Note that the <CODE>host</CODE>
parameter determines the type of the connection.

<LI>

The value of <CODE>client_flag</CODE> is usually 0, but can be set to a combination
of the following flags in very special circumstances:

<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><STRONG>Flag name</STRONG> </TD><TD> <STRONG>Flag meaning</STRONG>
</TR NOSAVE>
<TR><TD><CODE>CLIENT_FOUND_ROWS</CODE> </TD><TD> Return the number of found rows, not the number of affected rows
</TR NOSAVE>
<TR><TD><CODE>CLIENT_NO_SCHEMA</CODE> </TD><TD> Don't allow the
<CODE>db_name.tbl_name.col_name</CODE> syntax.  This is for ODBC; it causes the
parser to generate an error if you use that syntax, which is is useful for
trapping bugs in some ODBC programs.
</TR NOSAVE>
<TR><TD><CODE>CLIENT_COMPRESS</CODE> </TD><TD> Use compression protocol
</TR NOSAVE>
<TR><TD><CODE>CLIENT_ODBC</CODE> </TD><TD> The client is an ODBC client. This changes
<CODE>mysqld</CODE> to be more ODBC-friendly.
</TR>
</TABLE>
</UL>


<H4>19.4.39.2  Return values</H4>

<P>
A <CODE>MYSQL*</CODE> connection handle if the connection was successful.
<CODE>NULL</CODE> if the connection was unsuccessful.  For a successful connection,
the return value is the same as the value of the first parameter, unless you
pass <CODE>NULL</CODE> for that parameter.

</P>

<H4>19.4.39.3  Errors</H4>

<DL COMPACT>

<DT><CODE>CR_CONN_HOST_ERROR</CODE>
<DD>
Failed to connect to the <STRONG>MySQL</STRONG> server.

<DT><CODE>CR_CONNECTION_ERROR</CODE>
<DD>
Failed to connect to the local <STRONG>MySQL</STRONG> server.

<DT><CODE>CR_IPSOCK_ERROR</CODE>
<DD>
Failed to create an IP socket.

<DT><CODE>CR_OUT_OF_MEMORY</CODE>
<DD>
Out of memory.

<DT><CODE>CR_SOCKET_CREATE_ERROR</CODE>
<DD>
Failed to create a Unix socket.

<DT><CODE>CR_UNKNOWN_HOST</CODE>
<DD>
Failed to find the IP address for the hostname.

<DT><CODE>CR_VERSION_ERROR</CODE>
<DD>
A protocol mismatch resulted from attempting to connect to a server with a
client library that uses a different protocol version.  This can happen if you
use a very old client library to connect to a new server that wasn't started
with the <CODE>--old-protocol</CODE> option.

<DT><CODE>CR_NAMEDPIPEOPEN_ERROR;</CODE>
<DD>
Failed to create a named pipe on Win32.

<DT><CODE>CR_NAMEDPIPEWAIT_ERROR;</CODE>
<DD>
Failed to wait for a named pipe on Win32.

<DT><CODE>CR_NAMEDPIPESETSTATE_ERROR;</CODE>
<DD>
Failed to get a pipe handler on Win32.
</DL>


<H4>19.4.39.4  Example</H4>


<PRE>
MYSQL mysql;

mysql_init(&#38;mysql);
if (!mysql_real_connect(&#38;mysql,"host","user","passwd","database",0,NULL,0))
{
    fprintf(stderr, "Failed to connect to database: Error: %s\n",
          mysql_error(&#38;mysql));
}
</PRE>

<P>
<A NAME="IDX733"></A>


<H3><A NAME="mysql_real_query" HREF="manual_toc.html#mysql_real_query">19.4.40  <CODE>mysql_real_query()</CODE></A></H3>

<P>
<CODE>int mysql_real_query(MYSQL *mysql, const char *query, unsigned int length)</CODE>

</P>

<H4>19.4.40.1  Description</H4>

<P>
Executes the SQL query pointed to by query, which should be a string
<CODE>length</CODE> bytes long.  The query must consist of a single SQL statement.
You should not add a terminating semicolon (<SAMP>`;'</SAMP>) or <CODE>\g</CODE> to the
statement.

</P>
<P>
You <EM>must</EM> use <CODE>mysql_real_query()</CODE> rather than
<CODE>mysql_query()</CODE> for queries that contain binary data, since binary data
may contain the <SAMP>`\0'</SAMP> character.  In addition, <CODE>mysql_real_query()</CODE>
is faster than <CODE>mysql_query()</CODE> since it does not call <CODE>strlen()</CODE> on
the query string.

</P>

<H4>19.4.40.2  Return values</H4>

<P>
Zero if the query was successful. Non-zero if an error occurred.

</P>

<H4>19.4.40.3  Errors</H4>

<DL COMPACT>

<DT><CODE>CR_COMMANDS_OUT_OF_SYNC</CODE>
<DD>
Commands were executed in an improper order.
<DT><CODE>CR_SERVER_GONE_ERROR</CODE>
<DD>
The <STRONG>MySQL</STRONG> server has gone away.
<DT><CODE>CR_SERVER_LOST</CODE>
<DD>
The connection to the server was lost during the query.
<DT><CODE>CR_UNKNOWN_ERROR</CODE>
<DD>
An unknown error occurred.
</DL>

<P>
<A NAME="IDX734"></A>


<H3><A NAME="mysql_reload" HREF="manual_toc.html#mysql_reload">19.4.41  <CODE>mysql_reload()</CODE></A></H3>

<P>
<CODE>int mysql_reload(MYSQL *mysql)</CODE>

</P>

<H4>19.4.41.1  Description</H4>

<P>
Asks the <STRONG>MySQL</STRONG> server to reload the grant tables. The
connected user must have the <STRONG>reload</STRONG> privilege.

</P>
<P>
This function is deprecated.  It is preferable to use <CODE>mysql_query()</CODE>
to issue a SQL <CODE>FLUSH PRIVILEGES</CODE> statement instead.

</P>

<H4>19.4.41.2  Return values</H4>

<P>
Zero for success.  Non-zero if an error occurred.

</P>

<H4>19.4.41.3  Errors</H4>

<DL COMPACT>

<DT><CODE>CR_COMMANDS_OUT_OF_SYNC</CODE>
<DD>
Commands were executed in an improper order.
<DT><CODE>CR_SERVER_GONE_ERROR</CODE>
<DD>
The <STRONG>MySQL</STRONG> server has gone away.
<DT><CODE>CR_SERVER_LOST</CODE>
<DD>
The connection to the server was lost during the query.
<DT><CODE>CR_UNKNOWN_ERROR</CODE>
<DD>
An unknown error occurred.
</DL>

<P>
<A NAME="IDX735"></A>


<H3><A NAME="mysql_row_seek" HREF="manual_toc.html#mysql_row_seek">19.4.42  <CODE>mysql_row_seek()</CODE></A></H3>

<P>
<CODE>MYSQL_ROW_OFFSET mysql_row_seek(MYSQL_RES *result, MYSQL_ROW_OFFSET offset)</CODE>

</P>

<H4>19.4.42.1  Description</H4>
<P>
Sets the row cursor to an arbitrary row in a query result set.  This requires
that the result set structure contains the entire result of the query, so
<CODE>mysql_row_seek()</CODE> may be used in conjunction only with
<CODE>mysql_store_result()</CODE>, not with <CODE>mysql_use_result()</CODE>.

</P>
<P>
The offset should be a value returned from a call to <CODE>mysql_row_tell()</CODE>
or to <CODE>mysql_row_seek()</CODE>.  This value is not simply a row number; if you
want to seek to a row within a result set using a row number, use
<CODE>mysql_data_seek()</CODE> instead.

</P>

<H4>19.4.42.2  Return values</H4>

<P>
The previous value of the row cursor.  This value may be passed to a
subsequent call to <CODE>mysql_row_seek()</CODE>.

</P>

<H4>19.4.42.3  Errors</H4>
<P>
None.

</P>
<P>
<A NAME="IDX736"></A>


<H3><A NAME="mysql_row_tell" HREF="manual_toc.html#mysql_row_tell">19.4.43  <CODE>mysql_row_tell()</CODE></A></H3>

<P>
<CODE>MYSQL_ROW_OFFSET mysql_row_tell(MYSQL_RES *result)</CODE>

</P>

<H4>19.4.43.1  Description</H4>

<P>
Returns the current position of the row cursor for the last
<CODE>mysql_fetch_row()</CODE>. This value can be used as an argument to
<CODE>mysql_row_seek()</CODE>.

</P>
<P>
You should use <CODE>mysql_row_tell()</CODE> only after <CODE>mysql_store_result()</CODE>,
not after <CODE>mysql_use_result()</CODE>.

</P>

<H4>19.4.43.2  Return values</H4>

<P>
The current offset of the row cursor.

</P>

<H4>19.4.43.3  Errors</H4>
<P>
None.

</P>
<P>
<A NAME="IDX737"></A>


<H3><A NAME="mysql_select_db" HREF="manual_toc.html#mysql_select_db">19.4.44  <CODE>mysql_select_db()</CODE></A></H3>

<P>
<CODE>int mysql_select_db(MYSQL *mysql, const char *db)</CODE>

</P>

<H4>19.4.44.1  Description</H4>

<P>
Causes the database specified by <CODE>db</CODE> to become the default (current)
database on the connection specified by <CODE>mysql</CODE>.  In subsequent queries,
this database is the default for table references that do not include an
explicit database specifier.

</P>
<P>
<CODE>mysql_select_db()</CODE> fails unless the connected user can be authenticated
as having permission to use the database.

</P>

<H4>19.4.44.2  Return values</H4>

<P>
Zero for success.  Non-zero if an error occurred.

</P>

<H4>19.4.44.3  Errors</H4>

<DL COMPACT>

<DT><CODE>CR_COMMANDS_OUT_OF_SYNC</CODE>
<DD>
Commands were executed in an improper order.
<DT><CODE>CR_SERVER_GONE_ERROR</CODE>
<DD>
The <STRONG>MySQL</STRONG> server has gone away.
<DT><CODE>CR_SERVER_LOST</CODE>
<DD>
The connection to the server was lost during the query.
<DT><CODE>CR_UNKNOWN_ERROR</CODE>
<DD>
An unknown error occurred.
</DL>

<P>
<A NAME="IDX738"></A>


<H3><A NAME="mysql_shutdown" HREF="manual_toc.html#mysql_shutdown">19.4.45  <CODE>mysql_shutdown()</CODE></A></H3>

<P>
<CODE>int mysql_shutdown(MYSQL *mysql)</CODE>

</P>

<H4>19.4.45.1  Description</H4>

<P>
Asks the database server to shutdown. The connected user must have
<STRONG>shutdown</STRONG> privileges.

</P>

<H4>19.4.45.2  Return values</H4>

<P>
Zero for success.  Non-zero if an error occurred.

</P>

<H4>19.4.45.3  Errors</H4>

<DL COMPACT>

<DT><CODE>CR_COMMANDS_OUT_OF_SYNC</CODE>
<DD>
Commands were executed in an improper order.
<DT><CODE>CR_SERVER_GONE_ERROR</CODE>
<DD>
The <STRONG>MySQL</STRONG> server has gone away.
<DT><CODE>CR_SERVER_LOST</CODE>
<DD>
The connection to the server was lost during the query.
<DT><CODE>CR_UNKNOWN_ERROR</CODE>
<DD>
An unknown error occurred.
</DL>

<P>
<A NAME="IDX739"></A>


<H3><A NAME="mysql_stat" HREF="manual_toc.html#mysql_stat">19.4.46  <CODE>mysql_stat()</CODE></A></H3>

<P>
<CODE>char *mysql_stat(MYSQL *mysql)</CODE>

</P>

<H4>19.4.46.1  Description</H4>

<P>
Returns a character string containing information similar to that provided by
the <CODE>mysqladmin status</CODE> command.  This includes uptime in seconds and
the number of running threads, questions, reloads and open tables.

</P>

<H4>19.4.46.2  Return values</H4>

<P>
A character string describing the server status. <CODE>NULL</CODE> if an
error occurred.

</P>

<H4>19.4.46.3  Errors</H4>

<DL COMPACT>

<DT><CODE>CR_COMMANDS_OUT_OF_SYNC</CODE>
<DD>
Commands were executed in an improper order.
<DT><CODE>CR_SERVER_GONE_ERROR</CODE>
<DD>
The <STRONG>MySQL</STRONG> server has gone away.
<DT><CODE>CR_SERVER_LOST</CODE>
<DD>
The connection to the server was lost during the query.
<DT><CODE>CR_UNKNOWN_ERROR</CODE>
<DD>
An unknown error occurred.
</DL>

<P>
<A NAME="IDX740"></A>


<H3><A NAME="mysql_store_result" HREF="manual_toc.html#mysql_store_result">19.4.47  <CODE>mysql_store_result()</CODE></A></H3>

<P>
<CODE>MYSQL_RES *mysql_store_result(MYSQL *mysql)</CODE>

</P>

<H4>19.4.47.1  Description</H4>

<P>
You must call
<CODE>mysql_store_result()</CODE> or <CODE>mysql_use_result()</CODE> for every query
which successfully retrieves data (<CODE>SELECT</CODE>, <CODE>SHOW</CODE>,
<CODE>DESCRIBE</CODE>, <CODE>EXPLAIN</CODE>).

</P>
<P>
<CODE>mysql_store_result()</CODE> reads the entire result of a query to the client,
allocates a <CODE>MYSQL_RES</CODE> structure, and places the result into this
structure.

</P>
<P>
An empty result set is returned if there are no rows returned.  (An empty
result set differs from a <CODE>NULL</CODE> return value.)

</P>
<P>
Once you have called <CODE>mysql_store_result()</CODE>, you may call
<CODE>mysql_num_rows()</CODE> to find out how many rows are in the result set.

</P>
<P>
You can call <CODE>mysql_fetch_row()</CODE> to fetch rows from the result set,
or <CODE>mysql_row_seek()</CODE> and <CODE>mysql_row_tell()</CODE> to obtain or
set the current row position within the result set.

</P>
<P>
You must call <CODE>mysql_free_result()</CODE> once you are done with the result
set.

</P>
<P>
See section <A HREF="manual.html#NULL_mysql_store_result">19.4.50  Why is it that after <CODE>mysql_query()</CODE> returns success, <CODE>mysql_store_result()</CODE> sometimes returns <CODE>NULL?</CODE></A>.

</P>

<H4>19.4.47.2  Return values</H4>

<P>
A <CODE>MYSQL_RES</CODE> result structure with the results. <CODE>NULL</CODE> if
an error occurred.

</P>

<H4>19.4.47.3  Errors</H4>

<DL COMPACT>

<DT><CODE>CR_COMMANDS_OUT_OF_SYNC</CODE>
<DD>
Commands were executed in an improper order.
<DT><CODE>CR_OUT_OF_MEMORY</CODE>
<DD>
Out of memory.
<DT><CODE>CR_SERVER_GONE_ERROR</CODE>
<DD>
The <STRONG>MySQL</STRONG> server has gone away.
<DT><CODE>CR_SERVER_LOST</CODE>
<DD>
The connection to the server was lost during the query.
<DT><CODE>CR_UNKNOWN_ERROR</CODE>
<DD>
An unknown error occurred.
</DL>

<P>
<A NAME="IDX741"></A>


<H3><A NAME="mysql_thread_id" HREF="manual_toc.html#mysql_thread_id">19.4.48  <CODE>mysql_thread_id()</CODE></A></H3>

<P>
<CODE>unsigned long mysql_thread_id(MYSQL *mysql)</CODE>

</P>

<H4>19.4.48.1  Description</H4>

<P>
Returns the thread ID of the current connection.  This value can be used as
an argument to <CODE>mysql_kill()</CODE> to kill the thread.

</P>
<P>
If the connection is lost and you reconnect with <CODE>mysql_ping()</CODE>, the
thread ID will change.  This means you should not get the thread ID and store
it for later, you should get it when you need it.

</P>

<H4>19.4.48.2  Return values</H4>

<P>
The thread ID of the current connection.

</P>

<H4>19.4.48.3  Errors</H4>
<P>
None.

</P>
<P>
<A NAME="IDX742"></A>


<H3><A NAME="mysql_use_result" HREF="manual_toc.html#mysql_use_result">19.4.49  <CODE>mysql_use_result()</CODE></A></H3>

<P>
<CODE>MYSQL_RES *mysql_use_result(MYSQL *mysql)</CODE>

</P>

<H4>19.4.49.1  Description</H4>

<P>
You must call <CODE>mysql_store_result()</CODE> or <CODE>mysql_use_result()</CODE> for
every query which successfully retrieves data (<CODE>SELECT</CODE>, <CODE>SHOW</CODE>,
<CODE>DESCRIBE</CODE>, <CODE>EXPLAIN</CODE>).

</P>
<P>
<CODE>mysql_use_result()</CODE> initiates a result set retrieval but does not
actually read the result set into the client like <CODE>mysql_store_result()</CODE>
does.  Instead, each row must be retrieved individually by making calls to
<CODE>mysql_fetch_row()</CODE>.  This reads the result of a query directly from the
server without storing it in a temporary table or local buffer, which is
somewhat faster and uses much less memory than <CODE>mysql_store_result()</CODE>.
The client will only allocate memory for the current row and a communication
buffer that may grow up to <CODE>max_allowed_packet</CODE> bytes.

</P>
<P>
On the other hand, you shouldn't use <CODE>mysql_use_result()</CODE> if you are
doing a lot of processing for each row on the client side, or if the output
is sent to a screen on which the user may type a <CODE>^S</CODE> (stop scroll).
This will tie up the server and prevent other threads from updating any
tables from which the data are fetched.

</P>
<P>
When using <CODE>mysql_use_result()</CODE>, you must execute
<CODE>mysql_fetch_row()</CODE> until a <CODE>NULL</CODE> value is returned, otherwise the
unfetched rows will be returned as part of the result set for your next
query. The C API will give the error <CODE>Commands out of sync; You can't
run this command now</CODE> if you forget to do this!

</P>
<P>
You may not use <CODE>mysql_data_seek()</CODE>, <CODE>mysql_row_seek()</CODE>,
<CODE>mysql_row_tell()</CODE>, <CODE>mysql_num_rows()</CODE> or
<CODE>mysql_affected_rows()</CODE> with a result returned from
<CODE>mysql_use_result()</CODE>, nor may you issue other queries until the
<CODE>mysql_use_result()</CODE> has finished.  (However, after you have fetched all
the rows, <CODE>mysql_num_rows()</CODE> will accurately return the number of rows
fetched.)

</P>
<P>
You must call <CODE>mysql_free_result()</CODE> once you are done with the result
set.

</P>

<H4>19.4.49.2  Return values</H4>

<P>
A <CODE>MYSQL_RES</CODE> result structure. <CODE>NULL</CODE> if an error occurred.

</P>

<H4>19.4.49.3  Errors</H4>

<DL COMPACT>

<DT><CODE>CR_COMMANDS_OUT_OF_SYNC</CODE>
<DD>
Commands were executed in an improper order.
<DT><CODE>CR_OUT_OF_MEMORY</CODE>
<DD>
Out of memory.
<DT><CODE>CR_SERVER_GONE_ERROR</CODE>
<DD>
The <STRONG>MySQL</STRONG> server has gone away.
<DT><CODE>CR_SERVER_LOST</CODE>
<DD>
The connection to the server was lost during the query.
<DT><CODE>CR_UNKNOWN_ERROR</CODE>
<DD>
An unknown error occurred.
</DL>



<H3><A NAME="NULL_mysql_store_result" HREF="manual_toc.html#NULL_mysql_store_result">19.4.50  Why is it that after <CODE>mysql_query()</CODE> returns success, <CODE>mysql_store_result()</CODE> sometimes returns <CODE>NULL?</CODE></A></H3>

<P>
It is possible for <CODE>mysql_store_result()</CODE> to return <CODE>NULL</CODE>
following a successful call to <CODE>mysql_query()</CODE>.  When this happens, it
means one of the following conditions occurred:

</P>

<UL>
<LI>

There was a <CODE>malloc()</CODE> failure (for example, if the result set was too
large).

<LI>

The data couldn't be read (an error occurred on the connection).

<LI>

The query returned no data (e.g., it was an <CODE>INSERT</CODE>, <CODE>UPDATE</CODE>
or <CODE>DELETE</CODE>).
</UL>

<P>
You can always check whether or not the statement should have produced a
non-empty result by calling <CODE>mysql_num_fields()</CODE>.  If
<CODE>mysql_num_fields()</CODE> returns zero, the result is empty and the last
query was a statement that does not return values (for example, an
<CODE>INSERT</CODE> or a <CODE>DELETE</CODE>).  If <CODE>mysql_num_fields()</CODE> returns a
non-zero value, the statement should have produced a non-empty result.
See the description of the <CODE>mysql_num_fields()</CODE> function for an
example.

</P>
<P>
You can also test for an error by calling <CODE>mysql_error()</CODE> or
<CODE>mysql_errno()</CODE>.

</P>


<H3><A NAME="Query_results" HREF="manual_toc.html#Query_results">19.4.51  What results can I get from a query?</A></H3>

<P>
In addition to the result set returned by a query, you can also get the
following information:

</P>

<UL>
<LI>

<CODE>mysql_affected_rows()</CODE> returns the number of rows affected by the last
query when doing an <CODE>INSERT</CODE>, <CODE>UPDATE</CODE> or <CODE>DELETE</CODE>. An
exception is that if <CODE>DELETE</CODE> is used without a <CODE>WHERE</CODE> clause, the
table is truncated, which is much faster! In this case,
<CODE>mysql_affected_rows()</CODE> returns zero for the number of records
affected.

<LI>

<CODE>mysql_num_rows()</CODE> returns the number of rows in a result set.  With
<CODE>mysql_store_result()</CODE>, <CODE>mysql_num_rows()</CODE> may be called as soon as
<CODE>mysql_store_result()</CODE> returns.  With <CODE>mysql_use_result()</CODE>,
<CODE>mysql_num_rows()</CODE> may be called only after you have fetched all the
rows with <CODE>mysql_fetch_row()</CODE>.

<LI>

<CODE>mysql_insert_id()</CODE> returns the ID generated by the last
query that inserted a row into a table with an <CODE>AUTO_INCREMENT</CODE> index.
See section <A HREF="manual.html#mysql_insert_id">19.4.28  <CODE>mysql_insert_id()</CODE></A>.

<LI>

Some queries (<CODE>LOAD DATA INFILE ...</CODE>, <CODE>INSERT INTO
... SELECT ...</CODE>, <CODE>UPDATE</CODE>) return additional info.  The result is
returned by <CODE>mysql_info()</CODE>.  See the description for <CODE>mysql_info()</CODE>
for the format of the string that it returns.  <CODE>mysql_info()</CODE> returns a
<CODE>NULL</CODE> pointer if there is no additional information.
</UL>



<H3><A NAME="Getting_unique_ID" HREF="manual_toc.html#Getting_unique_ID">19.4.52  How can I get the unique ID for the last inserted row?</A></H3>

<P>
If you insert a record in a table containing a column that has the
<CODE>AUTO_INCREMENT</CODE> attribute, you can get the most recently generated
ID by calling the <CODE>mysql_insert_id()</CODE> function.

</P>
<P>
You can also retrieve the ID by using the <CODE>LAST_INSERT_ID()</CODE> function in
a query string that you pass to <CODE>mysql_query()</CODE>.

</P>
<P>
You can check if an <CODE>AUTO_INCREMENT</CODE> index is used by executing
the following code. This also checks if the query was an <CODE>INSERT</CODE> with
an <CODE>AUTO_INCREMENT</CODE> index:

</P>

<PRE>
if (mysql_error(&#38;mysql)[0] == 0 &#38;&
    mysql_num_fields(result) == 0 &#38;&
    mysql_insert_id(&#38;mysql) != 0)
{
    used_id = mysql_insert_id(&#38;mysql);
}
</PRE>

<P>
The most recently generated ID is maintained in the server on a
per-connection basis.  It will not be changed by another client. It will not
even be changed if you update another <CODE>AUTO_INCREMENT</CODE> column with a
non-magic value (that is, a value that is not <CODE>NULL</CODE> and not <CODE>0</CODE>).

</P>
<P>
If you want to use the ID that was generated for one table and insert
it into a second table, you can use SQL statements like this:

</P>

<PRE>
INSERT INTO foo (auto,text)
    VALUES(NULL,'text');              # generate ID by inserting NULL
INSERT INTO foo2 (id,text)
    VALUES(LAST_INSERT_ID(),'text');  # use ID in second table
</PRE>



<H3><A NAME="C_API_linking_problems" HREF="manual_toc.html#C_API_linking_problems">19.4.53  Problems linking with the C API</A></H3>

<P>
When linking with the C API, the following errors may occur on some systems:

</P>

<PRE>
gcc -g -o client test.o -L/usr/local/lib/mysql -lmysqlclient -lsocket -lnsl

Undefined        first referenced
 symbol          in file
floor            /usr/local/lib/mysql/libmysqlclient.a(password.o)
ld: fatal: Symbol referencing errors. No output written to client
</PRE>

<P>
If this happens on your system, you must include the math library by
adding <CODE>-lm</CODE> to the end of the compile/link line.

</P>


<H3><A NAME="Thread-safe_clients" HREF="manual_toc.html#Thread-safe_clients">19.4.54  How to make a thread-safe client</A></H3>

<P>
The client is "almost" thread-safe. The biggest problem is that the
subroutines in <TT>`net.c'</TT> that read from sockets are not interrupt-safe.
This was done with the thought that you might want to have your own alarm
that can break a long read to a server.

</P>
<P>
The standard client libraries are not compiled with the thread options.

</P>
<P>
To get a thread-safe client, use the <CODE>-lmysys</CODE>, <CODE>-lstring</CODE> and
<CODE>-ldbug</CODE> libraries and <CODE>net_serv.o</CODE> that the server uses.

</P>
<P>
When using a threaded client, you can make great use of the routines in
the <TT>`thr_alarm.c'</TT> file.  If you are using routines from the
<CODE>mysys</CODE> library, the only thing you must remember is to call
<CODE>my_init()</CODE> first!

</P>
<P>
All functions except <CODE>mysql_real_connect()</CODE> are currently thread-safe.
The following notes describe how to compile a thread-safe client library and
use it in a thread-safe manner.  (The notes below for
<CODE>mysql_real_connect()</CODE> actually apply to <CODE>mysql_connect()</CODE> as well,
but since <CODE>mysql_connect()</CODE> is deprecated, you should be using
<CODE>mysql_real_connect()</CODE> anyway.)

</P>
<P>
To make <CODE>mysql_real_connect()</CODE> thread-safe, you must recompile the client
library with this command:

</P>

<PRE>
shell&#62; CPPFLAGS=-DTHREAD_SAFE_CLIENT ./configure ...
</PRE>

<P>
You may get some errors because of undefined symbols when linking the
standard client, because the pthread libraries are not included by
default.

</P>
<P>
The resulting <TT>`libmysqlclient.a'</TT> library is now thread-safe.  What this
means is that client code is thread-safe as long as two threads don't query
the same connection handle returned by <CODE>mysql_real_connect()</CODE> at the
same time; the client/server protocol allows only one request at a time on a
given connection.  If you want to use multiple threads on the same
connection, you must have a mutex lock around your <CODE>mysql_query()</CODE> and
<CODE>mysql_store_result()</CODE> call combination.  Once
<CODE>mysql_store_result()</CODE> is ready, the lock can be released and other
threads may query the same connection.  (In other words, different threads
can use different <CODE>MYSQL_RES</CODE> pointers that were created with
<CODE>mysql_store_result()</CODE>, as long as they use the proper locking
protocol.) If you program with POSIX threads, you can use
<CODE>pthread_mutex_lock()</CODE> and <CODE>pthread_mutex_unlock()</CODE> to establish
and release a mutex lock.

</P>
<P>
If you used <CODE>mysql_use_result()</CODE> rather than <CODE>mysql_store_result()</CODE>,
the lock would need to surround <CODE>mysql_use_result()</CODE> and the calls
to <CODE>mysql_fetch_row()</CODE>.  However, it really is best for threaded
clients not to use <CODE>mysql_use_result()</CODE>.

</P>


<H2><A NAME="Perl" HREF="manual_toc.html#Perl">19.5  <STRONG>MySQL</STRONG> Perl API</A></H2>

<P>
This section documents the Perl <CODE>DBI</CODE> interface.  The former interface
was called <CODE>mysqlperl</CODE>.  Since <CODE>DBI</CODE>/<CODE>DBD</CODE> now is the
recommended Perl interface, <CODE>mysqlperl</CODE> is obsolete and is not
documented here.

</P>



<H3><A NAME="DBI_with_DBD" HREF="manual_toc.html#DBI_with_DBD">19.5.1  <CODE>DBI</CODE> with <CODE>DBD::mysql</CODE></A></H3>

<P>
<CODE>DBI</CODE> is a generic interface for many databases. That means that
you can write a script that works with many different database engines
without change. You need a DataBase Driver (DBD) defined for each
database type. For <STRONG>MySQL</STRONG>, this driver is called
<CODE>DBD::mysql</CODE>.

</P>
<P>
For more information on the Perl5 DBI, please visit the <CODE>DBI</CODE> web
page and read the documentation:

<PRE>
<a HREF="http://www.symbolstone.org/technology/perl/DBI/index.html">http://www.symbolstone.org/technology/perl/DBI/index.html</a>
</PRE>

<P>
For more information on Object Oriented Programming
(OOP) as defined in Perl5, see the Perl OOP page:

<PRE>
<a HREF="http://language.perl.com/info/documentation.html">http://language.perl.com/info/documentation.html</a>
</PRE>

<P>
Installation instructions for <STRONG>MySQL</STRONG> Perl support are given in
section <A HREF="manual.html#Perl_support">4.10  Perl installation comments</A>.

</P>
<P>
<A NAME="IDX743"></A>


<H3><A NAME="Perl_DBI_Class" HREF="manual_toc.html#Perl_DBI_Class">19.5.2  The <CODE>DBI</CODE> interface</A></H3>

<P>
<STRONG>Portable DBI methods</STRONG>

</P>
<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><CODE>connect</CODE> </TD><TD> Establishes a connection to a database server
</TR NOSAVE>
<TR><TD><CODE>disconnect</CODE> </TD><TD> Disconnects from the database server
</TR NOSAVE>
<TR><TD><CODE>prepare</CODE> </TD><TD> Prepares a SQL statement for execution
</TR NOSAVE>
<TR><TD><CODE>execute</CODE> </TD><TD> Executes prepared statements
</TR NOSAVE>
<TR><TD><CODE>do</CODE> </TD><TD> Prepares and executes a SQL statement
</TR NOSAVE>
<TR><TD><CODE>quote</CODE> </TD><TD> Quotes string or <CODE>BLOB</CODE> values to be inserted
</TR NOSAVE>
<TR><TD><CODE>fetchrow_array</CODE> </TD><TD> Fetches the next row as an array of fields.
</TR NOSAVE>
<TR><TD><CODE>fetchrow_arrayref</CODE> </TD><TD> Fetches next row as a reference array of fields
</TR NOSAVE>
<TR><TD><CODE>fetchrow_hashref</CODE> </TD><TD> Fetches next row as a reference to a hashtable
</TR NOSAVE>
<TR><TD><CODE>fetchall_arrayref</CODE> </TD><TD> Fetches all data as an array of arrays
</TR NOSAVE>
<TR><TD><CODE>finish</CODE> </TD><TD> Finishes a statement and let the system free resources
</TR NOSAVE>
<TR><TD><CODE>rows</CODE> </TD><TD> Returns the number of rows affected
</TR NOSAVE>
<TR><TD><CODE>data_sources</CODE> </TD><TD> Returns an array of databases available on localhost
</TR NOSAVE>
<TR><TD><CODE>ChopBlanks</CODE> </TD><TD> Controls whether <CODE>fetchrow_*</CODE> methods trim spaces
</TR NOSAVE>
<TR><TD><CODE>NUM_OF_PARAMS</CODE> </TD><TD> The number of placeholders in the prepared statement
</TR NOSAVE>
<TR><TD><CODE>NULLABLE</CODE> </TD><TD> Which columns can be <CODE>NULL</CODE>
</TR NOSAVE>
<TR><TD><CODE>trace</CODE> </TD><TD> Perform tracing for debugging
</TR>
</TABLE>

<P>
<STRONG>MySQL-specific methods</STRONG>

</P>
<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><CODE>insertid</CODE> </TD><TD> The latest <CODE>AUTO_INCREMENT</CODE> value
</TR NOSAVE>
<TR><TD><CODE>is_blob</CODE> </TD><TD> Which column are <CODE>BLOB</CODE> values
</TR NOSAVE>
<TR><TD><CODE>is_key</CODE> </TD><TD> Which columns are keys
</TR NOSAVE>
<TR><TD><CODE>is_num</CODE> </TD><TD> Which columns are numeric
</TR NOSAVE>
<TR><TD><CODE>is_pri_key</CODE> </TD><TD> Which columns are primary keys
</TR NOSAVE>
<TR><TD><CODE>is_not_null</CODE> </TD><TD> Which columns CANNOT be <CODE>NULL</CODE>. See <CODE>NULLABLE</CODE>.
</TR NOSAVE>
<TR><TD><CODE>length</CODE> </TD><TD> Maximum possible column sizes
</TR NOSAVE>
<TR><TD><CODE>max_length</CODE> </TD><TD> Maximum column sizes actually present in result
</TR NOSAVE>
<TR><TD><CODE>NAME</CODE> </TD><TD> Column names
</TR NOSAVE>
<TR><TD><CODE>NUM_OF_FIELDS</CODE> </TD><TD> Number of fields returned
</TR NOSAVE>
<TR><TD><CODE>table</CODE> </TD><TD> Table names in returned set
</TR NOSAVE>
<TR><TD><CODE>type</CODE> </TD><TD> All column types
</TR>
</TABLE>

<P>
The Perl methods are described in more detail in the following sections.
Variables used for method return values have these meanings:

</P>
<DL COMPACT>

<DT><CODE>$dbh</CODE>
<DD>
Database handle

<DT><CODE>$sth</CODE>
<DD>
Statement handle

<DT><CODE>$rc</CODE>
<DD>
Return code (often a status)

<DT><CODE>$rv</CODE>
<DD>
Return value (often a row count)
</DL>

<P>
<STRONG>Portable DBI methods</STRONG>

</P>
<DL COMPACT>

<DT><CODE>connect($data_source, $username, $password)</CODE>
<DD>
<A NAME="IDX744"></A>
 <A NAME="IDX745"></A>
 
Use the <CODE>connect</CODE> method to make a database connection to the data
source. The <CODE>$data_source</CODE> value should begin with
<CODE>DBI:driver_name:</CODE>.
Example uses of <CODE>connect</CODE> with the <CODE>DBD::mysql</CODE> driver:

<PRE>
$dbh = DBI-&#62;connect("DBI:mysql:$database", $user, $password);
$dbh = DBI-&#62;connect("DBI:mysql:$database:$hostname",
                    $user, $password);
$dbh = DBI-&#62;connect("DBI:mysql:$database:$hostname:$port",
                    $user, $password);
</PRE>

If the user name and/or password are undefined, <CODE>DBI</CODE> uses the
values of the <CODE>DBI_USER</CODE> and <CODE>DBI_PASS</CODE> environment variables,
respectively. If you don't specify a hostname, it defaults to
<CODE>'localhost'</CODE>. If you don't specify a port number, it defaults to the
default <STRONG>MySQL</STRONG> port (3306).

As of <CODE>Msql-Mysql-modules</CODE> version 1.2009,
the <CODE>$data_source</CODE> value allows certain modifiers:

<DL COMPACT>

<DT><CODE>mysql_read_default_file=file_name</CODE>
<DD>
Read <TT>`filename'</TT> as an option file.  For information on option files,
see section <A HREF="manual.html#Option_files">4.15.4  Option files</A>.

<DT><CODE>mysql_read_default_group=group_name</CODE>
<DD>
The default group when reading an option file is normally the
<CODE>[client]</CODE> group.  By specifying the <CODE>mysql_read_default_group</CODE>
option, the default group becomes the <CODE>[group_name]</CODE> group.

<DT><CODE>mysql_compression=1</CODE>
<DD>
Use compressed communication between the client and server (<STRONG>MySQL</STRONG>
3.22.3 or later).

<DT><CODE>mysql_socket=/path/to/socket</CODE>
<DD>
Specify the pathname of the Unix socket that is used to connect
to the server (<STRONG>MySQL</STRONG> 3.21.15 or later).
</DL>

Multiple modifiers may be given; each must be preceded by a semicolon.

For example, if you want to avoid hardcoding the user name and password into
a <CODE>DBI</CODE> script, you can take them from the user's <TT>`~/.my.cnf'</TT>
option file instead by writing your <CODE>connect</CODE> call like this:


<PRE>
$dbh = DBI-&#62;connect("DBI:mysql:$database"
                . ";mysql_read_default_file=$ENV{HOME}/.my.cnf",
                $user, $password);
</PRE>

This call will read options defined for the <CODE>[client]</CODE> group in the
option file.  If you wanted to do the same thing, but use options specified
for the <CODE>[perl]</CODE> group instead, you could use this:


<PRE>
$dbh = DBI-&#62;connect("DBI:mysql:$database"
                . ";mysql_read_default_file=$ENV{HOME}/.my.cnf"
                . ";mysql_read_default_group=perl",
                $user, $password);
</PRE>

<A NAME="IDX746"></A>
<A NAME="IDX747"></A>
<DT><CODE>disconnect</CODE>
<DD>
The <CODE>disconnect</CODE> method disconnects the database handle from the database.
This is typically called right before you exit from the program.
Example:

<PRE>
$rc = $dbh-&#62;disconnect;
</PRE>

<A NAME="IDX748"></A>
<A NAME="IDX749"></A>
<DT><CODE>prepare($statement)</CODE>
<DD>
Prepares a SQL statement for execution by the database engine
and returns a statement handle <CODE>($sth)</CODE> which you can use to invoke
the <CODE>execute</CODE> method.
Typically you handle <CODE>SELECT</CODE> statements (and <CODE>SELECT</CODE>-like statements
such as <CODE>SHOW</CODE>, <CODE>DESCRIBE</CODE> and <CODE>EXPLAIN</CODE>) by means of
<CODE>prepare</CODE> and <CODE>execute</CODE>.
Example:

<PRE>
$sth = $dbh-&#62;prepare($statement)
    or die "Can't prepare $statement: $dbh-&#62;errstr\n";
</PRE>

<A NAME="IDX750"></A>
<A NAME="IDX751"></A>
<DT><CODE>execute</CODE>
<DD>
The <CODE>execute</CODE> method executes a prepared statement. For
non-<CODE>SELECT</CODE> statements, <CODE>execute</CODE> returns the number of rows
affected.  If no rows are affected, <CODE>execute</CODE> returns <CODE>"0E0"</CODE>,
which Perl treats as zero but regards as true.  For <CODE>SELECT</CODE> statements,
<CODE>execute</CODE> only starts the SQL query in the database; you need to use one
of the <CODE>fetch_*</CODE> methods described below to retrieve the data.
Example:

<PRE>
$rv = $sth-&#62;execute
          or die "can't execute the query: $sth-&#62;errstr;
</PRE>

<A NAME="IDX752"></A>
<A NAME="IDX753"></A>
<DT><CODE>do($statement)</CODE>
<DD>
The <CODE>do</CODE> method prepares and executes a SQL statement and returns the
number of rows affected.  If no rows are affected, <CODE>do</CODE> returns
<CODE>"0E0"</CODE>, which Perl treats as zero but regards as true.  This method is
generally used for non-<CODE>SELECT</CODE> statements which cannot be prepared in
advance (due to driver limitations) or which do not need to executed more
than once (inserts, deletes, etc.). Example:

<PRE>
$rv = $dbh-&#62;do($statement)
        or die "Can't execute $statement: $dbh- &#62;errstr\n";
</PRE>

<A NAME="IDX754"></A>
<A NAME="IDX755"></A>
<A NAME="IDX756"></A>
<A NAME="IDX757"></A>
<DT><CODE>quote($string)</CODE>
<DD>
The <CODE>quote</CODE> method is used to "escape" any special characters contained in
the string and to add the required outer quotation marks.
Example:

<PRE>
$sql = $dbh-&#62;quote($string)
</PRE>

<A NAME="IDX758"></A>
<A NAME="IDX759"></A>
<DT><CODE>fetchrow_array</CODE>
<DD>
This method fetches the next row of data and returns it as an array of
field values.  Example:

<PRE>
while(@row = $sth-&#62;fetchrow_array) {
        print qw($row[0]\t$row[1]\t$row[2]\n);
}
</PRE>

<A NAME="IDX760"></A>
<A NAME="IDX761"></A>
<DT><CODE>fetchrow_arrayref</CODE>
<DD>
This method fetches the next row of data and returns it as a reference
to an array of field values. Example:

<PRE>
while($row_ref = $sth-&#62;fetchrow_arrayref) {
        print qw($row_ref-&#62;[0]\t$row_ref-&#62;[1]\t$row_ref-&#62;[2]\n);
}
</PRE>

<A NAME="IDX762"></A>
<A NAME="IDX763"></A>
<DT><CODE>fetchrow_hashref</CODE>
<DD>
This method fetches a row of data and returns a reference to a hash
table containing field name/value pairs. This method is not nearly as
efficient as using array references as demonstrated above. Example:

<PRE>
while($hash_ref = $sth-&#62;fetchrow_hashref) {
        print qw($hash_ref-&#62;{firstname}\t$hash_ref-&#62;{lastname}\t\
                $hash_ref- &#62; title}\n);
}
</PRE>

<A NAME="IDX764"></A>
<A NAME="IDX765"></A>
<DT><CODE>fetchall_arrayref</CODE>
<DD>
This method is used to get all the data (rows) to be returned from the
SQL statement. It returns a reference to an array of arrays of
references to each row. You access or print the data by using a nested
loop. Example:

<PRE>
my $table = $sth-&#62;fetchall_arrayref
                or die "$sth-&#62;errstr\n";
my($i, $j);
for $i ( 0 .. $#{$table} ) {
        for $j ( 0 .. $#{$table-&#62;[$i]} ) {
                print "$table-&#62;[$i][$j]\t";
        }
        print "\n";
}
</PRE>

<A NAME="IDX766"></A>
<A NAME="IDX767"></A>
<DT><CODE>finish</CODE>
<DD>
Indicates that no more data will be fetched from this statement
handle. You call this method to free up the statement handle and any
system resources it may be holding.  Example:

<PRE>
$rc = $sth-&#62;finish;
</PRE>

<A NAME="IDX768"></A>
<A NAME="IDX769"></A>
<DT><CODE>rows</CODE>
<DD>
Returns the number of rows changed (updated, deleted, etc.) by the last
command.  This is usually used after a non-<CODE>SELECT</CODE> <CODE>execute</CODE>
statement.  Example:

<PRE>
$rv = $sth-&#62;rows;
</PRE>

<A NAME="IDX770"></A>
<A NAME="IDX771"></A>
<DT><CODE>NULLABLE</CODE>
<DD>
Returns a reference to an array of boolean values; for each element of
the array, a value of TRUE indicates that this
column may contain <CODE>NULL</CODE> values.
Example:

<PRE>
$null_possible = $sth-&#62;{NULLABLE};
</PRE>

<A NAME="IDX772"></A>
<A NAME="IDX773"></A>
<DT><CODE>NUM_OF_FIELDS</CODE>
<DD>
This attribute indicates
the number of fields returned by a <CODE>SELECT</CODE> or <CODE>SHOW FIELDS</CODE>
statement.  You may use this for checking whether a statement returned a
result: A zero value indicates a non-<CODE>SELECT</CODE> statement like
<CODE>INSERT</CODE>, <CODE>DELETE</CODE> or <CODE>UPDATE</CODE>.
Example:

<PRE>
$nr_of_fields = $sth-&#62;{NUM_OF_FIELDS};
</PRE>

<A NAME="IDX774"></A>
<A NAME="IDX775"></A>
<DT><CODE>data_sources($driver_name)</CODE>
<DD>
This method returns an array containing names of databases available to the
<STRONG>MySQL</STRONG> server on the host <CODE>'localhost'</CODE>.
Example:

<PRE>
@dbs = DBI-&#62;data_sources("mysql");
</PRE>

<A NAME="IDX776"></A>
<A NAME="IDX777"></A>
<DT><CODE>ChopBlanks</CODE>
<DD>
This attribute determines whether the <CODE>fetchrow_*</CODE> methods will chop
leading and trailing blanks from the returned values.
Example:

<PRE>
$sth-&#62;{'ChopBlanks'} =1;
</PRE>

<A NAME="IDX778"></A>
<A NAME="IDX779"></A>
<DT><CODE>trace($trace_level)</CODE>
<DD>
<DT><CODE>trace($trace_level, $trace_filename)</CODE>
<DD>
The <CODE>trace</CODE> method enables or disables tracing.  When invoked as a
<CODE>DBI</CODE> class method, it affects tracing for all handles.  When invoked as
a database or statement handle method, it affects tracing for the given
handle (and any future children of the handle).  Setting <CODE>$trace_level</CODE>
to 2 provides detailed trace information.  Setting <CODE>$trace_level</CODE> to 0
disables tracing.  Trace output goes to the standard error output by
default.  If <CODE>$trace_filename</CODE> is specified, the file is opened in
append mode and output for <EM>all</EM> traced handles is written to that
file.  Example:

<PRE>
DBI-&#62;trace(2);                # trace everything
DBI-&#62;trace(2,"/tmp/dbi.out"); # trace everything to /tmp/dbi.out
$dth-&#62;trace(2);               # trace this database handle
$sth-&#62;trace(2);               # trace this statement handle
</PRE>

<A NAME="IDX780"></A>
<A NAME="IDX781"></A>
You can also enable <CODE>DBI</CODE> tracing by setting the <CODE>DBI_TRACE</CODE>
environment variable.  Setting it to a numeric value is equivalent to calling
<CODE>DBI-&#62;(value)</CODE>.  Setting it to a pathname is equivalent to calling
<CODE>DBI-&#62;(2,value)</CODE>.

</DL>

<P>
<STRONG>MySQL-specific methods</STRONG>

</P>
<P>
The methods shown below are <STRONG>MySQL</STRONG>-specific and not part of the
<CODE>DBI</CODE> standard.  Several of them are now deprecated:
<CODE>is_blob</CODE>, <CODE>is_key</CODE>, <CODE>is_num</CODE>, <CODE>is_pri_key</CODE>,
<CODE>is_not_null</CODE>, <CODE>length</CODE>, <CODE>max_length</CODE>, and <CODE>table</CODE>.
Where <CODE>DBI</CODE>-standard alternatives exist, they are noted below.

</P>
<DL COMPACT>

<DT><CODE>insertid</CODE>
<DD>
<A NAME="IDX782"></A>
 <A NAME="IDX783"></A>
 <A NAME="IDX784"></A>
 
If you use the <CODE>AUTO_INCREMENT</CODE> feature of <STRONG>MySQL</STRONG>, the new
auto-incremented values will be stored here.
Example:

<PRE>
$new_id = $sth-&#62;{insertid};
</PRE>

As an alternative, you can use <CODE>$dbh-&#62;{'mysql_insertid'}</CODE>.

<A NAME="IDX785"></A>
<A NAME="IDX786"></A>
<DT><CODE>is_blob</CODE>
<DD>
Returns a reference to an array of boolean values; for each element of the
array, a value of TRUE indicates that the
respective column is a <CODE>BLOB</CODE>.
Example:

<PRE>
$keys = $sth-&#62;{is_blob};
</PRE>

<A NAME="IDX787"></A>
<A NAME="IDX788"></A>
<DT><CODE>is_key</CODE>
<DD>
Returns a reference to an array of boolean values; for each element of the
array, a value of TRUE indicates that the
respective column is a key.
Example:

<PRE>
$keys = $sth-&#62;{is_key};
</PRE>

<A NAME="IDX789"></A>
<A NAME="IDX790"></A>
<DT><CODE>is_num</CODE>
<DD>
Returns a reference to an array of boolean values; for each element of the
array, a value of TRUE indicates that the
respective column contains numeric values.
Example:

<PRE>
$nums = $sth-&#62;{is_num};
</PRE>

<A NAME="IDX791"></A>
<A NAME="IDX792"></A>
<DT><CODE>is_pri_key</CODE>
<DD>
Returns a reference to an array of boolean values; for each element of the
array, a value of TRUE indicates that the respective column is a primary key.
Example:

<PRE>
$pri_keys = $sth-&#62;{is_pri_key};
</PRE>

<A NAME="IDX793"></A>
<A NAME="IDX794"></A>
<DT><CODE>is_not_null</CODE>
<DD>
Returns a reference to an array of boolean values; for each element of the
array, a value of FALSE indicates that this column may contain <CODE>NULL</CODE>
values.
Example:

<PRE>
$not_nulls = $sth-&#62;{is_not_null};
</PRE>

<CODE>is_not_null</CODE> is deprecated; it is preferable to use the
<CODE>NULLABLE</CODE> attribute (described above), since that is a DBI standard.

<A NAME="IDX795"></A>
<A NAME="IDX796"></A>
<A NAME="IDX797"></A>
<A NAME="IDX798"></A>
<DT><CODE>length</CODE>
<DD>
<DT><CODE>max_length</CODE>
<DD>
Each of these methods returns a reference to an array of column sizes.  The
<CODE>length</CODE> array indicates the maximum possible sizes that each column may
be (as declared in the table description).  The <CODE>max_length</CODE> array
indicates the maximum sizes actually present in the result table.  Example:


<PRE>
$lengths = $sth-&#62;{length};
$max_lengths = $sth-&#62;{max_length};
</PRE>

<A NAME="IDX799"></A>
<A NAME="IDX800"></A>
<DT><CODE>NAME</CODE>
<DD>
Returns a reference to an array of column names.
Example:

<PRE>
$names = $sth-&#62;{NAME};
</PRE>

<A NAME="IDX801"></A>
<A NAME="IDX802"></A>
<DT><CODE>table</CODE>
<DD>
Returns a reference to an array of table names.
Example:

<PRE>
$tables = $sth-&#62;{table};
</PRE>

<A NAME="IDX803"></A>
<A NAME="IDX804"></A>
<DT><CODE>type</CODE>
<DD>
Returns a reference to an array of column types.
Example:

<PRE>
$types = $sth-&#62;{type};
</PRE>

</DL>



<H3><A NAME="DBI-info" HREF="manual_toc.html#DBI-info">19.5.3  More <CODE>DBI</CODE>/<CODE>DBD</CODE> information</A></H3>

<P>
You can use the <CODE>perldoc</CODE> command to get more information about
<CODE>DBI</CODE>.

</P>

<PRE>
perldoc DBI
perldoc DBI::FAQ
perldoc DBD::mysql
</PRE>

<P>
You can also use the <CODE>pod2man</CODE>, <CODE>pod2html</CODE>, etc., tools to
translate to other formats.

</P>
<P>
And of course you can find the latest <CODE>DBI</CODE> information at
the <CODE>DBI</CODE> web page:

<PRE>
<a HREF="http://www.symbolstone.org/technology/perl/DBI/index.html">http://www.symbolstone.org/technology/perl/DBI/index.html</a>
</PRE>



<H2><A NAME="Eiffel" HREF="manual_toc.html#Eiffel">19.6  <STRONG>MySQL</STRONG> Eiffel wrapper</A></H2>

<P>
The <STRONG>MySQL</STRONG> <a HREF="http://www.mysql.com/Contrib/">Contrib directory</a>
contains a Eiffel wrapper written by Michael Ravits

</P>
<P>
You can also find this at:
http://www.netpedia.net/hosting/newplayer/

</P>


<H2><A NAME="Java" HREF="manual_toc.html#Java">19.7  <STRONG>MySQL</STRONG> Java connectivity (JDBC)</A></H2>

<P>
There are 2 supported JDBC drivers for MySQL (the twz and mm driver).
You can find a copy of these at <a HREF="http://www.mysql.com/Contrib">http://www.mysql.com/Contrib</a>.
For documentation consult any JDBC documentation and the
drivers own documentation for <STRONG>MySQL</STRONG> specific features.

</P>


<H2><A NAME="PHP" HREF="manual_toc.html#PHP">19.8  <STRONG>MySQL</STRONG> PHP API</A></H2>

<P>
PHP is a server-side, HTML embedded scripting language that may be used to
create dynamic web pages.  It contains support for accessing several
databases, including <STRONG>MySQL</STRONG>.  PHP may be run as a separate program,
or compiled as a module for use with the Apache web server.

</P>
<P>
The distribution and documentation are available at the
<a HREF="http://www.php.net/"> PHP website</a>.

</P>


<H2><A NAME="Cplusplus" HREF="manual_toc.html#Cplusplus">19.9  <STRONG>MySQL</STRONG> C++ APIs</A></H2>

<P>
Two API's are available in the <STRONG>MySQL</STRONG>
<a HREF="http://www.mysql.com/Contrib/">Contrib directory</a>.

</P>


<H2><A NAME="Python" HREF="manual_toc.html#Python">19.10  <STRONG>MySQL</STRONG> Python APIs</A></H2>

<P>
The <STRONG>MySQL</STRONG> <a HREF="http://www.mysql.com/Contrib/">Contrib directory</a>
contains a Python
interface written by Joseph Skinner.

</P>
<P>
You can also use the Python interface to iODBC to access a
<STRONG>MySQL</STRONG> server.
<a HREF="http://starship.skyport.net/~lemburg/">mxODBC</a>

</P>


<H2><A NAME="TCL" HREF="manual_toc.html#TCL">19.11  <STRONG>MySQL</STRONG> TCL APIs</A></H2>

<P>
<a HREF="http://www.binevolve.com/~tdarugar/tcl-sql/"> TCL at binevolve</a>.
The
<a HREF="http://www.mysql.com/Contrib">Contrib directory</a> contains a TCL
interface that is based on msqltcl 1.50.

</P>


<H1><A NAME="Comparisons" HREF="manual_toc.html#Comparisons">20  How <STRONG>MySQL</STRONG> compares to other databases</A></H1>



<H2><A NAME="Compare_mSQL" HREF="manual_toc.html#Compare_mSQL">20.1  How <STRONG>MySQL</STRONG> compares to <CODE>mSQL</CODE></A></H2>

<P>
This section has been written by the <STRONG>MySQL</STRONG> developers, so it
should be read with that in mind. But there are NO factual errors that
we know of.

</P>
<P>
For a list of all supported limits, functions and types, see the
<a HREF="http://www.mysql.com/crash-me-choose.htmy"> <CODE>crash-me</CODE> web page</a>.

</P>
<DL COMPACT>

<DT><STRONG>Performance</STRONG>
<DD>
For a true comparison of speed, consult the growing <STRONG>MySQL</STRONG> benchmark
suite. See section <A HREF="manual.html#Benchmarks">11  The <STRONG>MySQL</STRONG> benchmark suite</A>.

Because there is no thread creation overhead, a small parser, few features and
simple security, <CODE>mSQL</CODE> should be quicker at:


<UL>
<LI>

Tests that perform repeated connects and disconnects, running a very simple
query during each connection.
<LI>

<CODE>INSERT</CODE> operations into very simple tables with few columns and keys.
<LI>

<CODE>CREATE TABLE</CODE> and <CODE>DROP TABLE</CODE>.
<LI>

<CODE>SELECT</CODE> on something that isn't an index. (A table scan is very
easy.)
</UL>

Since these operations are so simple, it is hard to be better at them when
you have a higher startup overhead. After the connection is established,
<STRONG>MySQL</STRONG> should perform much better.

On the other hand, <STRONG>MySQL</STRONG> is much faster than <CODE>mSQL</CODE> (and
most other SQL implementions) on the following:


<UL>
<LI>

Complex <CODE>SELECT</CODE> operations.
<LI>

Retrieving large results (<STRONG>MySQL</STRONG> has a better, faster and safer
protocol).
<LI>

Tables with variable-length strings, since <STRONG>MySQL</STRONG> has more efficent
handling and can have indexes on <CODE>VARCHAR</CODE> columns.
<LI>

Handling tables with many columns.
<LI>

Handling tables with large record lengths.
<LI>

<CODE>SELECT</CODE> with many expressions.
<LI>

<CODE>SELECT</CODE> on large tables.
<LI>

Handling many connections at the same time. <STRONG>MySQL</STRONG> is fully
multi-threaded. Each connection has its own thread, which means that
no thread has to wait for another (unless a thread is modifying
a table another thread wants to access.) In <CODE>mSQL</CODE>, once one connection
is established, all others must wait until the first has finished, regardless
of whether the connection is running a query that is short or long. When the
first connection terminates, the next can be served, while all the others wait
again, etc.
<LI>

Joins.
<CODE>mSQL</CODE> can become pathologically slow if you change the order of tables
in a <CODE>SELECT</CODE>. In the benchmark suite, a time more than 15000 times
slower than <STRONG>MySQL</STRONG> was seen.  This is due to <CODE>mSQL</CODE>'s lack of a
join optimizer to order tables in the optimal order. However, if you put the
tables in exactly the right order in <CODE>mSQL</CODE>2 and the <CODE>WHERE</CODE> is
simple and uses index columns, the join will be relatively fast!
See section <A HREF="manual.html#Benchmarks">11  The <STRONG>MySQL</STRONG> benchmark suite</A>.
<LI>

<CODE>ORDER BY</CODE> and <CODE>GROUP BY</CODE>.
<LI>

<CODE>DISTINCT</CODE>.
<LI>

Using <CODE>TEXT</CODE> or <CODE>BLOB</CODE> columns.
</UL>

<DT><STRONG>SQL Features</STRONG>
<DD>

<UL>
<LI><CODE>GROUP BY</CODE> and <CODE>HAVING</CODE>.

<CODE>mSQL</CODE> does not support <CODE>GROUP BY</CODE> at all.
<STRONG>MySQL</STRONG> supports a full <CODE>GROUP BY</CODE> with both <CODE>HAVING</CODE> and
the following functions: <CODE>COUNT()</CODE>, <CODE>AVG()</CODE>, <CODE>MIN()</CODE>,
<CODE>MAX()</CODE>, <CODE>SUM()</CODE> and <CODE>STD()</CODE>.  <CODE>COUNT(*)</CODE> is optimized to
return very quickly if the <CODE>SELECT</CODE> retrieves from one table, no other
columns are retrieved and there is no <CODE>WHERE</CODE> clause.  <CODE>MIN()</CODE> and
<CODE>MAX()</CODE> may take string arguments.

<LI><CODE>INSERT</CODE> and <CODE>UPDATE</CODE> with calculations.

<STRONG>MySQL</STRONG> can do calculations in an <CODE>INSERT</CODE> or <CODE>UPDATE</CODE>.
For example:

<PRE>
mysql&#62; UPDATE SET x=x*10+y WHERE x&#60;20;
</PRE>

<LI>Aliasing.

<STRONG>MySQL</STRONG> has column aliasing.

<LI>Qualifying column names.

In <STRONG>MySQL</STRONG>, if a column name is unique among the tables used in a
query, you do not have to use the full qualifier.

<LI><CODE>SELECT</CODE> with functions.

<STRONG>MySQL</STRONG> has many functions (too many to list here; see section <A HREF="manual.html#Functions">7.3  Functions for use in <CODE>SELECT</CODE> and <CODE>WHERE</CODE> clauses</A>).

</UL>

<DT><STRONG>Disk space efficiency</STRONG>
<DD>
That is, how small can you make your tables?

<STRONG>MySQL</STRONG> has very precise types, so you can create tables that take
very little space. An example of a useful <STRONG>MySQL</STRONG> datatype is the
<CODE>MEDIUMINT</CODE> that is 3 bytes long. If you have 100,000,000 records,
saving even one byte per record is very important.

<CODE>mSQL2</CODE> has a more limited set of column types, so it is
more difficult to get small tables.
<DT><STRONG>Stability</STRONG>
<DD>
This is harder to judge objectively. For a discussion of <STRONG>MySQL</STRONG>
stability, see section <A HREF="manual.html#Stability">1.5  How stable is <STRONG>MySQL</STRONG>?</A>.

We have no experience with <CODE>mSQL</CODE> stability, so we cannot say
anything about that.

<DT><STRONG>Price</STRONG>
<DD>
Another important issue is the license. <STRONG>MySQL</STRONG> has a
more flexible license than <CODE>mSQL</CODE>, and is also less expensive than
<CODE>mSQL</CODE>.  Whichever product you choose to use, remember to at least
consider paying for a license or email support.  (You are required to get
a license if you include <STRONG>MySQL</STRONG> with a product that you sell,
of course.)

<DT><STRONG>Perl interfaces</STRONG>
<DD>
<STRONG>MySQL</STRONG> has basically the same interfaces to Perl as <CODE>mSQL</CODE> with
some added features.

<DT><STRONG>JDBC (Java)</STRONG>
<DD>
<STRONG>MySQL</STRONG> currently has 4 JDBC drivers:

<UL>
<LI>

The gwe driver: A Java interface by GWE technologies (not supported anymore).
<LI>

The jms driver: An improved gwe driver by Xiaokun Kelvin ZHU
<LI>

The twz driver: A type 4 JDBC driver by Terrence W. Zellers
and educational use.
<LI>

The mm driver: A type 4 JDBC driver by Mark Matthews
</UL>

The recommended drivers are the twz or mm driver. Both are reported to work
excellently.

We know that <CODE>mSQL</CODE> has a JDBC driver, but we have too little experience
with it to compare.

<DT><STRONG>Rate of development</STRONG>
<DD>
<STRONG>MySQL</STRONG> has a very small team of developers, but we are quite used to
coding C and C++ very rapidly. Since threads, functions, <CODE>GROUP BY</CODE> and so
on are still not implemented in <CODE>mSQL</CODE>, it has a lot of catching up
to do. To get some perspective on this, you can view the <CODE>mSQL</CODE>
<TT>`HISTORY'</TT> file for the last year and compare it with the News
section of the <STRONG>MySQL</STRONG> Reference Manual (see section <A HREF="manual.html#News">D  <STRONG>MySQL</STRONG> change history</A>). It should be
pretty obvious which one has developed most rapidly.

<DT><STRONG>Utility programs</STRONG>
<DD>
Both <CODE>mSQL</CODE> and <STRONG>MySQL</STRONG> have many interesting third-party
tools. Since it is very easy to port upward (from <CODE>mSQL</CODE> to
<STRONG>MySQL</STRONG>), almost all the interesting applications that are available for
<CODE>mSQL</CODE> are also available for <STRONG>MySQL</STRONG>.

<STRONG>MySQL</STRONG> comes with a simple <CODE>msql2mysql</CODE> program that fixes
differences in spelling between <CODE>mSQL</CODE> and <STRONG>MySQL</STRONG> for the
most-used C API functions.
For example, it changes instances of <CODE>msqlConnect()</CODE> to
<CODE>mysql_connect()</CODE>. Converting a client program from <CODE>mSQL</CODE> to
<STRONG>MySQL</STRONG> usually takes a couple of minutes.
</DL>



<H3><A NAME="Using_mSQL_tools" HREF="manual_toc.html#Using_mSQL_tools">20.1.1  How to convert <CODE>mSQL</CODE> tools for <STRONG>MySQL</STRONG></A></H3>

<P>
According to our experience, it would just take a few hours to convert tools
such as <CODE>msql-tcl</CODE> and <CODE>msqljava</CODE> that use the
<CODE>mSQL</CODE> C API so that they work with the <STRONG>MySQL</STRONG> C API.

</P>
<P>
The conversion procedure is:

</P>

<OL>
<LI>

Run the shell script <CODE>msql2mysql</CODE> on the source. This requires the
<CODE>replace</CODE> program, which is distributed with <STRONG>MySQL</STRONG>.
<LI>

Compile.
<LI>

Fix all compiler errors.
</OL>

<P>
Differences between the <CODE>mSQL</CODE> C API and the <STRONG>MySQL</STRONG> C API are:

<UL>
<LI>

<STRONG>MySQL</STRONG> uses a <CODE>MYSQL</CODE> structure as a connection type (<CODE>mSQL</CODE>
uses an <CODE>int</CODE>).
<LI>

<CODE>mysql_connect()</CODE> takes a pointer to a <CODE>MYSQL</CODE> structure as a
parameter.  It is easy to define one globally or to use <CODE>malloc()</CODE> to get
one.
<CODE>mysql_connect()</CODE> also takes 2 parameters for specifying the user and
password.  You may set these to <CODE>NULL, NULL</CODE> for default use.
<LI>

<CODE>mysql_error()</CODE> takes the <CODE>MYSQL</CODE> structure as a parameter. Just add
the parameter to your old <CODE>msql_error()</CODE> code if you are porting old code.
<LI>

<STRONG>MySQL</STRONG> returns an error number and a text error message for all
errors. <CODE>mSQL</CODE> returns only a text error message.
<LI>

Some incompatibilities exist as a result of <STRONG>MySQL</STRONG> supporting
multiple connections to the server from the same process.
</UL>



<H3><A NAME="Protocol_differences" HREF="manual_toc.html#Protocol_differences">20.1.2  How <CODE>mSQL</CODE> and <STRONG>MySQL</STRONG> client/server communications protocols differ</A></H3>

<P>
There are enough differences that it is impossible (or at least not easy)
to support both.

</P>
<P>
The most significant ways in which the <STRONG>MySQL</STRONG> protocol differs
from the <CODE>mSQL</CODE> protocol are listed below:

</P>

<UL>
<LI>

A message buffer may contain many result rows.
<LI>

The message buffers are dynamically enlarged if the query or the
result is bigger than the current buffer, up to a configurable server and
client limit.
<LI>

All packets are numbered to catch duplicated or missing packets.
<LI>

All column values are sent in ASCII. The lengths of columns and rows are sent
in packed binary coding (1, 2 or 3 bytes).
<LI>

<STRONG>MySQL</STRONG> can read in the result unbuffered (without having to store the
full set in the client).
<LI>

If a single write/read takes more than 30 seconds, the server closes
the connection.
<LI>

If a connection is idle for 8 hours, the server closes the connection.
</UL>



<H3><A NAME="Syntax_differences" HREF="manual_toc.html#Syntax_differences">20.1.3  How <CODE>mSQL</CODE> 2.0 SQL syntax differs from <STRONG>MySQL</STRONG></A></H3>

<P>
<STRONG>Column types</STRONG>

</P>
<DL COMPACT>

<DT><CODE><STRONG>MySQL</STRONG></CODE>
<DD>
Has the following additional types (among others; see
see section <A HREF="manual.html#CREATE_TABLE">7.6  <CODE>CREATE TABLE</CODE> syntax</A>):

<UL>
<LI>

<CODE>ENUM</CODE> type for one of a set of strings.
<LI>

<CODE>SET</CODE> type for many of a set of strings.
<LI>

<CODE>BIGINT</CODE> type for 64-bit integers.
</UL>

<DT><CODE></CODE>
<DD>
<STRONG>MySQL</STRONG> also supports
the following additional type attributes:

<UL>
<LI>

<CODE>UNSIGNED</CODE> option for integer columns.
<LI>

<CODE>ZEROFILL</CODE> option for integer columns.
<LI>

<CODE>AUTO_INCREMENT</CODE> option for integer columns that are a
<CODE>PRIMARY KEY</CODE>.
See section <A HREF="manual.html#mysql_insert_id">19.4.28  <CODE>mysql_insert_id()</CODE></A>.
<LI>

<CODE>DEFAULT</CODE> value for all columns.
</UL>

<DT><CODE>mSQL2</CODE>
<DD>
<CODE>mSQL</CODE> column types correspond to the <STRONG>MySQL</STRONG> types shown below:
<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD><CODE>mSQL</CODE> <STRONG>type</STRONG> </TD><TD> <STRONG>Corresponding <STRONG>MySQL</STRONG> type</STRONG>
</TR NOSAVE>
<TR><TD><CODE>CHAR(len)</CODE> </TD><TD> <CODE>CHAR(len)</CODE>
</TR NOSAVE>
<TR><TD><CODE>TEXT(len)</CODE> </TD><TD> <CODE>TEXT(len)</CODE>. <CODE>len</CODE> is the maximal length.
And <CODE>LIKE</CODE> works.
</TR NOSAVE>
<TR><TD><CODE>INT</CODE> </TD><TD> <CODE>INT</CODE>. With many more options!
</TR NOSAVE>
<TR><TD><CODE>REAL</CODE> </TD><TD> <CODE>REAL</CODE>. Or <CODE>FLOAT</CODE>. Both 4- and 8-byte versions are available.
</TR NOSAVE>
<TR><TD><CODE>UINT</CODE> </TD><TD> <CODE>INT UNSIGNED</CODE>
</TR NOSAVE>
<TR><TD><CODE>DATE</CODE> </TD><TD> <CODE>DATE</CODE>. Uses ANSI SQL format rather than <CODE>mSQL</CODE>'s own.
</TR NOSAVE>
<TR><TD><CODE>TIME</CODE> </TD><TD> <CODE>TIME</CODE>
</TR NOSAVE>
<TR><TD><CODE>MONEY</CODE> </TD><TD> <CODE>DECIMAL(12,2)</CODE>. A fixed-point value with two decimals.
</TR>
</TABLE>
</DL>

<P>
<STRONG>Index creation</STRONG>

</P>
<DL COMPACT>

<DT><CODE><STRONG>MySQL</STRONG></CODE>
<DD>
Indexes may be specified at table creation time with the <CODE>CREATE TABLE</CODE>
statement.
<DT><CODE>mSQL</CODE>
<DD>
Indexes must be created after the table has been created, with separate
<CODE>CREATE INDEX</CODE> statements.
</DL>

<P>
<STRONG>To insert a unique identifier into a table</STRONG>

</P>
<DL COMPACT>

<DT><CODE><STRONG>MySQL</STRONG></CODE>
<DD>
Use <CODE>AUTO_INCREMENT</CODE> as a column type
specifier.
See section <A HREF="manual.html#mysql_insert_id">19.4.28  <CODE>mysql_insert_id()</CODE></A>.
<DT><CODE>mSQL</CODE>
<DD>
Create a <CODE>SEQUENCE</CODE> on a table and select the <CODE>_seq</CODE> column.
</DL>

<P>
<STRONG>To obtain a unique identifier for a row</STRONG>

</P>
<DL COMPACT>

<DT><CODE><STRONG>MySQL</STRONG></CODE>
<DD>
Add a <CODE>PRIMARY KEY</CODE> or <CODE>UNIQUE</CODE> key to the table.
<DT><CODE>mSQL</CODE>
<DD>
Use the <CODE>_rowid</CODE> column. Observe that <CODE>_rowid</CODE> may change over time
depending on many factors.
</DL>

<P>
<STRONG>To get the time a column was last modified</STRONG>

</P>
<DL COMPACT>

<DT><CODE><STRONG>MySQL</STRONG></CODE>
<DD>
Add a <CODE>TIMESTAMP</CODE> column to the table. This column is automatically set
to the current date and time for <CODE>INSERT</CODE> or <CODE>UPDATE</CODE> statements if
you don't give the column a value or if you give it a <CODE>NULL</CODE> value.

<DT><CODE>mSQL</CODE>
<DD>
Use the <CODE>_timestamp</CODE> column.
</DL>

<P>
<STRONG><CODE>NULL</CODE> value comparisons</STRONG>

</P>
<DL COMPACT>

<DT><CODE><STRONG>MySQL</STRONG></CODE>
<DD>
<STRONG>MySQL</STRONG> follows
ANSI SQL and a comparison with <CODE>NULL</CODE> is always <CODE>NULL</CODE>.
<DT><CODE>mSQL</CODE>
<DD>
In <CODE>mSQL</CODE>, <CODE>NULL = NULL</CODE> is TRUE.  You
must change <CODE>=NULL</CODE> to <CODE>IS NULL</CODE> and <CODE>&#60;&#62;NULL</CODE> to
<CODE>IS NOT NULL</CODE> when porting old code from <CODE>mSQL</CODE> to <STRONG>MySQL</STRONG>.
</DL>

<P>
<STRONG>String comparisons</STRONG>

</P>
<DL COMPACT>

<DT><CODE><STRONG>MySQL</STRONG></CODE>
<DD>
Normally, string comparisons are performed in case-independent fashion with
the sort order determined by the current character set (ISO-8859-1 Latin1 by
default).  If you don't like this, declare your columns with the
<CODE>BINARY</CODE> attribute, which causes comparisons to be done according to the
ASCII order used on the <STRONG>MySQL</STRONG> server host.
<DT><CODE>mSQL</CODE>
<DD>
All string comparisons are performed in case-sensitive fashion with
sorting in ASCII order.
</DL>

<P>
<STRONG>Case-insensitive searching</STRONG>

</P>
<DL COMPACT>

<DT><CODE><STRONG>MySQL</STRONG></CODE>
<DD>
<CODE>LIKE</CODE> is a case-insensitive or case-sensitive operator, depending on
the columns involved. If possible, <STRONG>MySQL</STRONG> uses indexes if the
<CODE>LIKE</CODE> argument doesn't start with a wildcard character.
<DT><CODE>mSQL</CODE>
<DD>
Use <CODE>CLIKE</CODE>.
</DL>

<P>
<STRONG>Handling of trailing spaces</STRONG>

</P>
<DL COMPACT>

<DT><CODE><STRONG>MySQL</STRONG></CODE>
<DD>
Strips all spaces at the end of <CODE>CHAR</CODE> and <CODE>VARCHAR</CODE>
columns. Use a <CODE>TEXT</CODE> column if this behavior is not desired.
<DT><CODE>mSQL</CODE>
<DD>
Retains trailing space.
</DL>

<P>
<STRONG><CODE>WHERE</CODE> clauses</STRONG>

</P>
<DL COMPACT>

<DT><CODE><STRONG>MySQL</STRONG></CODE>
<DD>
<STRONG>MySQL</STRONG> correctly prioritizes everything (<CODE>AND</CODE> is evaluated
before <CODE>OR</CODE>). To get <CODE>mSQL</CODE> behavior in <STRONG>MySQL</STRONG>, use
parentheses (as shown below).
<DT><CODE>mSQL</CODE>
<DD>
Evaluates everything from left to right. This means that some logical
calculations with more than three arguments cannot be expressed in any
way. It also means you must change some queries when you upgrade to
<STRONG>MySQL</STRONG>. You do this easily by adding parentheses.  Suppose you
have the following <CODE>mSQL</CODE> query:

<PRE>
mysql&#62; SELECT * FROM table WHERE a=1 AND b=2 OR a=3 AND b=4;
</PRE>

To make <STRONG>MySQL</STRONG> evaluate this the way that <CODE>mSQL</CODE> would,
you must add parentheses:

<PRE>
mysql&#62; SELECT * FROM table WHERE (a=1 AND (b=2 OR (a=3 AND (b=4))));
</PRE>

</DL>

<P>
<STRONG>Access control</STRONG>

</P>
<DL COMPACT>

<DT><CODE><STRONG>MySQL</STRONG></CODE>
<DD>
Has tables to store grant (permission) options per user, host and
database. See section <A HREF="manual.html#Privileges">6.6  How the privilege system works</A>.
<DT><CODE>mSQL</CODE>
<DD>
Has a file <TT>`mSQL.acl'</TT> in which you can grant read/write privileges for
users.
<DT><CODE></CODE>
<DD>
</DL>



<H2><A NAME="Compare_PostgreSQL" HREF="manual_toc.html#Compare_PostgreSQL">20.2  How <STRONG>MySQL</STRONG> compares to PostgreSQL</A></H2>

<P>
<CODE>PostgreSQL</CODE> has some more advanced features like user-defined
types, triggers, rules and some transaction support. However, PostgreSQL lacks
many of the standard types and functions from ANSI SQL and ODBC. See the
<a HREF="http://www.mysql.com/crash-me-choose.htmy"> <CODE>crash-me</CODE> web page</a>
for a complete list of limits and which types and functions are supported
or unsupported.

</P>
<P>
Normally, <CODE>PostgreSQL</CODE> is a magnitude slower than
<STRONG>MySQL</STRONG>. See section <A HREF="manual.html#Benchmarks">11  The <STRONG>MySQL</STRONG> benchmark suite</A>.  This is due largely to their
transactions system. If you really need transactions or the rich type
system PostgreSQL offers and you can afford the speed penalty, you
should take a look at PostgreSQL.

</P>


<H1><A NAME="Users" HREF="manual_toc.html#Users">A  Some <STRONG>MySQL</STRONG> users</A></H1>



<H2><A NAME="SEC387" HREF="manual_toc.html#SEC387">A.1  Some Web search engines</A></H2>


<UL>
<LI>

<a HREF="http://www.aaa.com.au"> AAA Matilda Web Search</a>
<LI>

<a HREF="http://www.whatsnu.com/"> What's New</a>
<LI>

<a HREF="http://www.aladin.de/"> Aladin</a>
<LI>

<a HREF="http://www.columbus-finder.de/"> Columbus Finder</a>
<LI>

<a HREF="http://www.spider.de/"> Spider</a>
<LI>

<a HREF="http://www.blitzsuche.de/"> Blitzsuche</a>
<LI>

<a HREF="http://www.indoseek.co.id"> Indoseek Indonesia</a>
<LI>

<a HREF="http://www.yaboo.dk/">
Yaboo - Yet Another BOOkmarker</a>
<LI>

<a HREF="http://www.yahoosuck.com"> Yahoosuck</a>
</UL>



<H2><A NAME="SEC388" HREF="manual_toc.html#SEC388">A.2  Some Information search engines concentrated on some area</A></H2>


<UL>
<LI>

<a HREF="http://www.jobvertise.com">Jobvertise: Post and search for jobs</a>
<LI>

<a HREF="http://www.musicdatabase.com"> The Music Database</a>
<LI>

<a HREF="http://www.soccersearch.com"> Fotball (Soccer) search page</a>
<LI>

<a HREF="http://www.headrush.net/takedown"> TAKEDOWN - wrestling</a>
<LI>

<a HREF="http://www.lyrics.net"> The International Lyrics Network</a>
<LI>

<a HREF="http://TheMatrix.com/~matrix/band_search.phtml">
Musicians looking for other musicians (Free Service)</a>
<LI>

<a HREF="http://www.addall.com/AddBooks/Stores.html">AddALL books searching and price comparison</a>
<LI>

<a HREF="http://www.herbaria.harvard.edu/Data/Gray/gray.html">Harvard's Gray Herbarium Index of Plant Names</a>
<LI>

<a HREF="http://www.csse.monash.edu.au/publications/"> Research Publications at Monash University in Australia</a>
<LI>

<a HREF="http://www.game-developer.com/">The Game Development Search Engine</a>
<LI>

<a HREF="http://www.i-run.com/html/cookbook.html">My-Recipe.com; Cookbook at i-run.com</a>
</UL>



<H2><A NAME="SEC389" HREF="manual_toc.html#SEC389">A.3  Some Domain/Internet/Web and related services</A></H2>


<UL>
<LI>

<a HREF="http://www.wix.com/mysql-hosting"> Registry of Web providers that
support <STRONG>MySQL</STRONG></a>
<LI>

<a HREF="http://www.yi.org/"> Dynamic DNS Services</a>
<LI>

<a HREF="http://www.dynodns.net/">dynamic domain name service</a>
<LI>

<a HREF="http://www.fdns.net/"> Free 3rd level domains</a>
<LI>

<a HREF="http://worldcommunity.com/"> Online Database</a>
<LI>

<a HREF="http://www.bigbiz.com"> BigBiz Internet Services</a>
<LI>

<a HREF="http://virt.circle.net"> The Virt Gazette</a>
<LI>

<a HREF="http://www.california.com"> Global InfoNet Inc</a>
<LI>

<a HREF="http://www.webhosters.com"> WebHosters - A Guide to WWW Providers</a>
<LI>

<a HREF="http://online.dn.ru"> Internet information server</a>
<LI>

<a HREF="http://www.slashdot.org"> A pro-Linux/tech news and comment/discussion site</a>
<LI>

<a HREF="http://www.stopbit.com"> A technology news site</a>
<LI>

<a HREF="http://www.worldnetla.net"> WorldNet Communications - An Internet Services Provider</a>
<LI>

<a HREF="http://www.netizen.com.au/"> Netizen: Australian-based web consultancy</a>
<LI>

<a HREF="http://www.trainingpages.co.uk"> Search site for training courses in the UK</a>
<LI>

<a HREF="http://chat.nitco.com"> Gannon Chat (GPL). Written in Perl and Javascript</a>
<LI>

<a HREF="http://www.addurls.com/">A general links directory</a>
<LI>

<a HREF="http://www.bookmarktracker.com"> A web-based bookmark management service</a>
<LI>

<a HREF="http://www.cdrom.com">Walnut Creek CDROM</a>
<LI>

<a HREF="http://www.wwwthreads.org/"> WWWThreads; Interactive discussion Forums</a>
<LI>

<a HREF="http://pvmon.portici.enea.it/Meteo"> In Italian; Storage data from meteo station</a>
<LI>

<a HREF="http://www.buysell.net/"> Online "Person To Person" Auction</a>
<LI>

<a HREF="http://tips.pair.com">Tips on web development</a>
<LI>

<a HREF="http://www.mailfriends.com"> Mailfriends.com is a FREE service for
everybody who wants to find friends over the internet.</a>
</UL>



<H2><A NAME="SEC390" HREF="manual_toc.html#SEC390">A.4  Web sites that use <CODE>PHP</CODE> and <STRONG>MySQL</STRONG></A></H2>


<UL>
<LI>

<a HREF="http://war.jgaa.com:8080/support/index.php3"> Jgaa's Internet - Official Support Site</a> running via apache
<LI>

<a HREF="http://io.incluso.com"> Ionline - online publication:</a> <STRONG>MySQL</STRONG>,
PHP, Java, Web programming, DB development
<LI>

<a HREF="http://www.baboo.com"> BaBoo(Browse and bookmark). Free web-based bookmark manager and Calendar</a>
<LI>

<a HREF="http://www.courses.pjc.cc.fl.us/Schedule/index.php">Course Schedule System at Pensacola Junior College</a>
<LI>

<a HREF="http://www.devshed.com/resource/advanced/mysql/index.html">A beginners tutoral of how to start using <STRONG>MySQL</STRONG></a>
<LI>

<a HREF="http://www.32bit.com/"> 32bit.com ; An extensive shareware / freeware archive</a>
<LI>

<a HREF="http://www.jokes2000.com/"> Jokes 2000</a>
<LI>

<a HREF="http://www.burken.nu/ "> Burken.NU</a> Burken is a webhotel that provides scripts, among other things, for remote users, like counters, guestbooks etc.
<LI>

<a HREF="http://tips.pair.com"> tips.pair.com</a> Contains tips on html, javascript, 2d/3d graphics and PHP3/MySQL. All pages are generated from a database.
</UL>



<H2><A NAME="SEC391" HREF="manual_toc.html#SEC391">A.5  Uncategorized pages</A></H2>


<UL>
<LI>

<a HREF="http://www.feature-showcase.com/htmls/demo_mysql.sql">
AZC.COM's Feature Showcase</a>
<LI>

<a HREF="http://www.teach.org.uk/subjects/trainingcourse/g.html"> Course Search</a>
<LI>

<a HREF="http://www.northerbys.com"> Northerbys Online Auctions</a>
<LI>

<a HREF="http://www.schiphol.nl/flights/home.htm"> Amsterdam Airport Schiphol</a>
<LI>

<a HREF="http://TheMatrix.com/seventhsin/query.phtml"> CD database</a>
<LI>

<a HREF="http://TheMatrix.com/~flmm/GEAR.html"> Used Audio Gear Database</a>
<LI>

<a HREF="http://www.kiss.de/musik-mueller"> Musical note-sheets</a>
<LI>

<a HREF="http://www.bagism.com"> Bagism - A John Lennon fan page</a>
<LI>

<a HREF="http://www.selftaught.com/"> US Folk art broker</a>
<LI>

<a HREF="http://organizer.net/"> Mail reading on the web</a>
<LI>

<a HREF="http://www.mypage.org/"> Free home pages on www.somecoolname.mypage.org</a>
<LI>

<a HREF="http://www.schulweb.de/"> Der Server f@"ur Schulen im Web (In German)</a>
<LI>

<a HREF="http://www.ald.net/"> Auldhaefen Online Services</a>
<LI>

<a HREF="http://www.cary.net/"> CaryNET Information Center</a>
<LI>

<a HREF="http://www.dataden.com/"> Dataden Computer Systems</a>
<LI>

<a HREF="http://andree.grm.se/"> Andr'emuseet (In Swedish)</a>
<LI>

<a HREF="http://www.him.net/"> HOMESITE Internet Marketing</a>
<LI>

<a HREF="http://www.jade-v.com/techinfo.html"> Jade-V Network Services </a>
<LI>

<a HREF="http://ww2010.atmos.uiuc.edu/(Gl)/abt/aknw/tech.rxml"> Weather
World 2010 Technical Credits<BR></a>
<LI>

<a HREF="http://gimp.foebud.org/registry/doc/"> About The Gimp plugin
registry</a>
<LI>

<a HREF="http://www.fast-inc.com/Products/Archiver/database.html"> Java tool
Archiver technical detail (Slightly optimistic about <STRONG>MySQL</STRONG>
ANSI-92 compliance)</a>
<LI>

<a HREF="http://www.gamesdomain.com/cheats/usrcheat.phtml"> Games Domain
Cheats Database</a>
<LI>

<a HREF="http://www.kcilink.com/poweredby/"> The "Powered By" Page (Kcilink)</a>
<LI>

<a HREF="http://www.netcasting.net/index.whtml"> Netcasting</a>
<LI>

<a HREF="http://homepages.tig.com.au/~mjj/nbltips"> NBL (Australian National
Basketball League) tipping<BR></a>
<LI>

<a HREF="http://www.cgishop.com/"> CGI shop</a>
<LI>

<a HREF="http://www.whirlycott.com/"> Whirlycott: Website Design</a>
<LI>

<a HREF="http://www.mtp.dk"> Museum Tusculanum Press</a>
<LI>

<a HREF="http://csdgi.historie.ku.dk/biblio"> Centro Siciliano di Documentazione</a>
<LI>

<a HREF="http://caribou.dyn.ml.org:8000"> Quake statistics database</a>
<LI>

<a HREF="http://www.astroforum.ch"> Astroforum: Astrologie and related things (in German)</a>
<LI>

<a HREF="http://www.opendebate.com"> OpenDebate - Interactive Polls &#38; Open Discussion</a>
<LI>

<a HREF="http://vermeer.organik.uni-erlangen.de/dissertationen/"> Online chemical dissertation server</a>
<LI>

<a HREF="http://www.freschinfo.com"> FreSch! The Free Scholarship Search Service</a>
<LI>

<a HREF="http://www.nada.kth.se/~staffanu/pinball"> Stockholm Pinball Locator</a>
<LI>

<a HREF="http://www.hek.com"> HEK A construction company</a>
<LI>

<a HREF="http://www.nbi.nl"> Elsevier Bussines Information</a>
<LI>

<a HREF="http://vaccination.medicallink.se/"> Medical Links (Using Coldfusion and
<STRONG>MySQL</STRONG>)</a>
<LI>

<a HREF="http://www.joblink-usa.com"> Search for jobs &#38; people at JobLink-USA</a>
<LI>

<a HREF="http://www.linux-magazin.de/newsflash/"> Daily news about Linux in German language</a>
<LI>

<a HREF="http://www.skydive.net/competfs"> Competition Formation Skydiving</a>
<LI>

<a HREF="http://www.galaxy-net.net/Galaxy-NET Telecommunications">
E-commerce and internal accounting</a>
<LI>

<a HREF="http://www.borsen.dk/">
Denmark's leading business daily newspaper B@o{</a>rsen}
<LI>

<a HREF="http://tmmm.simplenet.com/indb/"> The Internet NES Database</a>
<LI>

<a HREF="http://www.russia.cz"> Travel agency in Prague in 3 languages</a>
<LI>

<a HREF="http://www.linkstation.de"> Linkstation</a>
<LI>

<a HREF="http://www.peoplestaff.com"> Searchable online database at Peoplestaff</a>
<LI>

<a HREF="http://www.dreamhorse.com"> A searchable database system for horse classified ads for sale and at stud.</a>
<LI>

<a HREF="http://pootpoot.com/">The Poot site</a>
<LI>

<a HREF="http://grateful.net/hw_html/">"Playin' in the LAN"; a network monitoring suite</a>
<LI>

<a HREF="http://www-usappc.hoffman.army.mil/index.html">U.S. Army Publishing Agency</a>
<LI>

<a HREF="http://www.nekretnine.co.yu/">Realestate handling in Yugoslavia</a>
<LI>

<a HREF="http://demo.cpsoft.com/pims/devFAQ.html"> PIMS; a Patient Information Management System</a>
<LI>

<a HREF="http://cpsoft.com">Pilkington Software Inc</a>
<LI>

<a HREF="http://www.betazine.com">Betazine - The Ultimate Online Beta Tester's Magazine</a>
<LI>

<a HREF="http://www.no-quarter.org/">A Vietnam Veteran's Memorial (The Wall) database.</a>
<LI>

<a HREF="http://www.gamers-union.com/">Gamer's Union specializes inauctions of used &#38; out of print gaming material</a>
<LI>

<a HREF="http://www.montereyhigh.com/office/dbul.php3"> A daily bulletin at Monterey High school</a>
<LI>

<a HREF="http://www.currents.net/ccinfo/aboutcc.html">Computer Currents Magazine</a>
<LI>

<a HREF="http://www.myEastside.com">Community-owned site serving Lake
Washington's Eastside residents and businesses</a>
<a HREF="http://bowling-france.net/">French bowling site.</a>
</UL>



<H2><A NAME="SEC392" HREF="manual_toc.html#SEC392">A.6  Some MySQL consultants</A></H2>


<UL>
<LI>

<a HREF="http://www.ayni.com"> Ayni AG</a>
<LI>

<a HREF="http://worldcommunity.com/"> Online Database</a>
<LI>

<a HREF="http://www2.dataguard.no/">DataGuard (Uses <STRONG>MySQL</STRONG> and PHP)</a>
<LI>

<a HREF="http://wwits.net/programs/mysql.phtml"> WWITS (Uses <STRONG>MySQL</STRONG> and PHP)</a>
<LI>

<a HREF="http://www.worldcommunity.com/"> WCN - The World Community Network</a>
<LI>

<a HREF="http://www.chipcastle.com"> Chip Castle Dot Com Inc</a>
<LI>

<a HREF="http://www.cyber.com.au/"> Cybersource Pty. Ltd</a>
</UL>



<H2><A NAME="SEC393" HREF="manual_toc.html#SEC393">A.7  Programming</A></H2>


<UL>
<LI>

<a HREF="http://www.perl.org/cpan-testers"> The Perl CPAN Testers results page</a>
</UL>

<P>
Send any additions to this list to <a HREF="mailto:webmaster@mysql.com">webmaster@mysql.com</a>.

</P>


<H1><A NAME="Contrib" HREF="manual_toc.html#Contrib">B  Contributed programs</A></H1>

<P>
Many users of <STRONG>MySQL</STRONG> have contributed <EM>very</EM> useful support
tools and addons.

</P>
<P>
A list of what is available at <a HREF="http://www.mysql.com/Contrib">http://www.mysql.com/Contrib</a>
(or any mirror) is shown below.
If you want to build <STRONG>MySQL</STRONG> support for the Perl <CODE>DBI</CODE>/<CODE>DBD</CODE>
interface, you should fetch the <CODE>Data-Dumper</CODE>, <CODE>DBI</CODE>, and
<CODE>Msql-Mysql-modules</CODE> files and install them.
See section <A HREF="manual.html#Perl_support">4.10  Perl installation comments</A>.

</P>

<P>
<a HREF="http://www.mysql.com/Contrib/00-README"> 00-README</a>
This listing.
 


<H2><A NAME="SEC395" HREF="manual_toc.html#SEC395">B.1  API's</A></H2>


<UL>
<LI>Perl modules


<UL>
<LI><a HREF="http://www.mysql.com/Contrib/Data-Dumper-2.09.tar.gz"> Data-Dumper-2.09.tar.gz</a>

Perl <CODE>Data-Dumper</CODE> module.  Useful with <CODE>DBI</CODE>/<CODE>DBD</CODE> support.

<LI><a HREF="http://www.mysql.com/Contrib/DBI-1.08.tar.gz"> DBI-1.08.tar.gz</a>

Perl <CODE>DBI</CODE> module.

<LI><a HREF="http://www.mysql.com/Contrib/KAMXbase1.0.tar.gz">KAMXbase1.0.tar.gz</a>

Convert between <TT>`.dbf'</TT> files and <STRONG>MySQL</STRONG> tables.  Perl
module written by Pratap Pereira <a HREF="mailto:pereira@ee.eng.ohio-state.edu">pereira@ee.eng.ohio-state.edu</a>,
extened by Kevin A. McGrail <a HREF="mailto:kmcgrail@digital1.peregrinehw.com">kmcgrail@digital1.peregrinehw.com</a>.
This converter can handle MEMO fields.

<LI><a HREF="http://www.mysql.com/Contrib/Msql-Mysql-modules-1.2018.tar.gz"> Msql-Mysql-modules-1.2018.tar.gz</a>

Perl <CODE>DBD</CODE> module to access mSQL and <STRONG>MySQL</STRONG> databases..

<LI><a HREF="http://www.mysql.com/Contrib/Data-ShowTable-3.3.tar.gz">  Data-ShowTable-3.3.tar.gz</a>

Perl <CODE>Data-ShowTable</CODE> module.  Useful with <CODE>DBI</CODE>/<CODE>DBD</CODE> support.
</UL>

<LI>JDBC


<UL>
<LI><a HREF="http://www.mysql.com/Contrib/mm.mysql.jdbc-1.0.tar.gz"> mm.mysql.jdbc-1.0.t

ar.gz</a>
New java JDBC driver for <STRONG>MySQL</STRONG>. This is a production release
and is actively developed. By Mark Matthews
(<a HREF="mailto:mmatthew@ecn.purdue.edu">mmatthew@ecn.purdue.edu</a>). This driver has a LGPL license. You
can always find the newest driver at
<a HREF="http://www.worldserver.com/~mmatthew/mysql/">http://www.worldserver.com/~mmatthew/mysql/</a>.
<LI><a HREF="http://www.mysql.com/Contrib/twz1jdbcForMysql-1.0.4-GA.tar.gz"> twz1jdbcForMysql-1.0.4-GA.tar.gz</a>

The twz driver: A type 4 JDBC driver by Terrence W. Zellers
and educational use. You can always find the latest driver at
<a HREF="http://www.voicenet.com/~zellert/tjFM/">http://www.voicenet.com/~zellert/tjFM/</a>.
</UL>

<LI><a HREF="http://www.mysql.com/Contrib/mysql-c++-0.02.tar.gz"> mysql-c++-0.02.tar.gz</a>

<STRONG>MySQL</STRONG> C++ wrapper library. By Roland Haenel,

<LI><a HREF="http://www.mysql.com/Contrib/mysql++.64.1.1.b.tar.gz"> mysql++.64.1.1.b.tar.gz</a>

<STRONG>MySQL</STRONG> C++ API (More than just a wrapper library). Originally by

<LI><a HREF="http://www.mysql.com/Contrib/delphi-interface.gz"> delphi-interface.g

z</a>
Delphi interface to <CODE>libmysql.dll</CODE>, by Blestan Tabakov,

<LI><a HREF="http://www.mysql.com/Contrib/DelphiMySQL2.zip"> DelphiMySQL2.zip</a>

Delphi interface to <CODE>libmysql.dll</CODE>, by <a HREF="mailto:bsilva@umesd.k12.or.us">bsilva@umesd.k12.or.us</a>

<LI><a HREF="http://www.mysql.com/Contrib/JdmMysqlDriver-0.1.0.tar.gz">JdmMysqlDriver-0.1.0.tar.gz</a>

A VisualWorks 3.0 Smalltalk driver for <STRONG>MySQL</STRONG>. By

<LI><a HREF="http://www.mysql.com/Contrib/Db.py"> Db.py</a>

Python module with caching. By <a HREF="mailto:gandalf@rosmail.com">gandalf@rosmail.com</a>.

<LI><a HREF="http://www.mysql.com/Contrib/MySQLmodule-1.4.tar.gz"> MySQLmodule-1.4.tar.gz</a>

Python interface for the <STRONG>MySQL</STRONG>. By Joseph Skinner <a HREF="mailto:joe@earthlight.co.nz">joe@earthlight.co.nz</a>;  Modified by Joerg Senekowitsch <a HREF="mailto:senekow@ibm.net">senekow@ibm.net</a>

<LI><a HREF="http://www.mysql.com/Contrib/mysql_mex.tar.gz"> mysql_mex.tar.gz</a>

An interface program for the Matlab program by MathWorks.
 
<LI><a HREF="http://www.mysql.com/Contrib/mysqltcl-1.53.tar.gz"> mysqltcl-1.53.tar.gz</a>

Tcl interface for <STRONG>MySQL</STRONG>. Based on <TT>`msqltcl-1.50.tar.gz'</TT>.
Updated by Tobias Ritzau, <a HREF="mailto:tobri@ida.liu.se">tobri@ida.liu.se</a>.

<LI><a HREF="http://www.mysql.com/Contrib/MyC.zip"> MyC.zip</a>

A Visual Basic-like API, by Ed Carp.
 
<LI><a HREF="http://www.mysql.com/Contrib/sqlscreens-1.0.1.tar.gz"> sqlscreens-1.0.1.tar.gz</a>

TCL/TK code to generate database screens. By Jean-Francois Dockes.

<LI><a HREF="http://www.mysql.com/Contrib/Vdb-dflts-2.1.tar.gz"> Vdb-dflts-2.1.tar.gz</a>

This is a new version of a set of library utilities intended
to provide a generic interface to SQL database engines such that your
application becomes a 3-tiered application.  The advantage is that you
can easily switch between and move to other database engines by
implementing one file for the new backend without needing to make any
changes to your applications. By <a HREF="mailto:damian@cablenet.net">damian@cablenet.net</a>.

<LI><a HREF="http://www.mysql.com/Contrib/DbFramework-1.10.tar.gz"> DbFramework-1.10.tar.gz</a>

DbFramework is a collection of classes for manipulating <STRONG>MySQL</STRONG>
databases.  The classes are loosely based on the CDIF Data Model
Subject Area. By Paul Sharpe <a HREF="mailto:paul@miraclefish.com">paul@miraclefish.com</a>.

<LI><a HREF="http://www.mysql.com/Contrib/pike-mysql-1.4.tar.gz"> pike-mysql-1.4.tar.gz</a>

<STRONG>MySQL</STRONG> module for pike. For use with the Roxen web server.

<LI><a HREF="http://www.mysql.com/Contrib/squile.tar.gz"> squile.tar.gz</a>

Module for <CODE>guile</CODE> that allows <CODE>guile</CODE> to interact with SQL
databases. By Hal Roberts.

<LI><a HREF="http://www.mysql.com/Contrib/stk-mysql.tar.gz"> stk-mysql.tar.gz</a>

Interface for Stk. Stk is the Tk widgets with Scheme underneath instead of Tcl.
By Terry Jones

<LI><a HREF="http://www.mysql.com/Contrib/eiffel-wrapper-1.0.tar.gz">eiffel-wrapper-1.0.tar.gz</a>.

Eiffel wrapper by Michael Ravits.
</UL>



<H2><A NAME="SEC396" HREF="manual_toc.html#SEC396">B.2  Clients</A></H2>


<UL>
<LI>Graphical clients


<UL>
<LI><a HREF="http://www.mysql.com/Contrib/kmysqladmin-0.1.tar.gz"> kmysqladmin-0.1.tar.gz</a>

An administration tool for the <STRONG>MySQL</STRONG> server using QT / KDE.  Tested
only on Linux.

<LI><a HREF="http://www.mysql.com/Contrib/Admin.tar.gz"> Java client with Swing</a>

By Fredy Fischer, <a HREF="mailto:se-afs@dial.eunet.ch">se-afs@dial.eunet.ch</a>
<LI><a HREF="http://www.mysql.com/Contrib/mysqlwinadmn.zip"> mysqlwinadmn.zip</a>

Win32 GUI (binary only) to administrate a database, by David B. Mansel,

<LI><a HREF="http://www.mysql.com/Contrib/xmysqladmin-1.0.tar.gz"> xmysqladmin-1.0.tar.gz</a>

A front end to the <STRONG>MySQL</STRONG> database engine.  It allows reloads,
status check, process control, isamchk, grant/revoke privileges,
creating databases, dropping databases, create, alter, browse and drop
tables.  Originally by Gilbert Therrien, <a HREF="mailto:gilbert@ican.net">gilbert@ican.net</a> but
now in public domain and supported by TcX.

<LI><a HREF="http://www.mysql.com/Contrib/xmysql-1.9.tar.gz"> xmysql-1.9.tar.gz</a>

<LI><a HREF="http://web.wt.net/~dblhack"> xmysql home page</a>

A front end to the <STRONG>MySQL</STRONG> database engine. It allows for simple
queries and table maintenance, as well as batch queries. By Rick
Mehalick, <a HREF="mailto:dblhack@wt.net">dblhack@wt.net</a>.
Requires <a HREF="http://bragg.phys.uwm.edu/xforms">xforms 0.88</a> to work.
</UL>

<LI>Web clients


<UL>
<LI><a HREF="http://www.mysql.com/Contrib/mysqladmin-atif-1.0.tar.gz"> mysqladmin-atif-1.0.tar.gz</a>

WWW <STRONG>MySQL</STRONG> administrator for the <CODE>user,</CODE> <CODE>db</CODE> and
<CODE>host</CODE> tables.  By Tim Sailer, modified by Atif Ghaffar

<LI><a HREF="http://www.mysql.com/Contrib/mysql-webadmin-1.0a8-rz.tar.gz"> mysql-webadmin-1.0a8-rz.tar.gz</a>

A tool written in PHP-FI to administrate <STRONG>MySQL</STRONG> databases
remotely over the web within a Web-Browser. By Peter Kuppelwieser,
Not maintained anymore!

<LI><a HREF="http://www.mysql.com/Contrib/mysqladm.tar.gz"> mysqladm.tar.gz</a>

<STRONG>MySQL</STRONG> Web Database Administration written in Perl.  By Tim
Sailer.

<LI><a HREF="http://www.mysql.com/Contrib/mysqladm-2.tar.gz"> mysqladm-2.tar.gz</a>

Updated version of <TT>`mysqladm.tar.gz'</TT>, by High Tide.

<LI><a HREF="http://www.mysql.com/Contrib/myadmin-0.4.tar.gz"> myadmin-0.4.tar.gz</a>

<LI><a HREF="http://myadmin.cheapnet.net/"> MyAdmin home page</a>

A web based mysql administrator by Mike Machado.

<LI><a HREF="http://www.mysql.com/Contrib/phpMyAdmin_2.0.1.tar.gz">phpMyAdmin_2.0.1.tar.gz</a>

A set of PHP3-scripts to adminstrate MySQL over the WWW.

<LI><a HREF="http://www.htmlwizard.net/phpMyAdmin/"> phpMyAdmin home page</a>

A PHP3 tool in the spirit of mysql-webadmin, by Tobias Ratschiller, tobias@dnet.it

<LI><a HREF="http://www.mysql.com/Contrib/useradm.tar.gz"> useradm.tar.gz</a>

<STRONG>MySQL</STRONG> administrator in PHP. By Ofni Thomas
</UL>

</UL>



<H2><A NAME="SEC397" HREF="manual_toc.html#SEC397">B.3  Web tools</A></H2>


<UL>

<LI><a HREF="http://www.odbsoft.com/cook/sources.htm">http://www.odbsoft.com/cook/sources.htm</a>

This package has various functions for generating html code from an SQL
table structure and for generating SQL statements (Select, Insert,
Update, Delete) from an html form. You can build a complete forms
interface to an SQL database (query, add, update, delete) without any
programming!  By Marc Beneteau, <a HREF="mailto:marc@odbsoft.com">marc@odbsoft.com</a>.

<LI><a HREF="http://www.mysql.com/Contrib/sqlhtml.tar.gz"> sqlhtml.tar.gz</a>

SQL/HTML is an HTML database manager for <STRONG>MySQL</STRONG> using <CODE>DBI</CODE> 1.06.

<LI><a HREF="http://www.mysql.com/Contrib/UdmSearch-2.0.tar.gz">UdmSearch-2.0.tar.gz</a>

<LI><a HREF="http://www.mysql.com/Contrib/UdmSearch-2.1.tar.gz">UdmSearch-2.1.tar.gz</a>

A <STRONG>MySQL</STRONG>- and PHP- based search engine over http. By
Alexander I. Barkov <a HREF="mailto:bar@izhcom.ru">bar@izhcom.ru</a>.

<LI><a HREF="http://www.mysql.com/Contrib/wmtcl.doc"> wmtcl.doc</a>

<LI><a HREF="http://www.mysql.com/Contrib/wmtcl.lex"> wmtcl.lex</a>

With this you can write HTML files with inclusions of TCL code. By

<LI><a HREF="http://www.mysql.com/Contrib/www-sql-0.5.7.lsm"> www-sql-0.5.7.lsm</a>

<LI><a HREF="http://www.mysql.com/Contrib/www-sql-0.5.3.md5"> www-sql-0.5.3.md5</a>

<LI><a HREF="http://www.mysql.com/Contrib/www-sql-0.5.7.tar.gz"> www-sql-0.5.7.tar.gz</a>

A CGI program that parses an HTML file containing special tags, parses
them and inserts data from a <STRONG>MySQL</STRONG> database.

<LI><a HREF="http://www.mysql.com/Contrib/genquery.zip"> genquery.zip</a>

Perl SQL database interface package for html.

<LI><a HREF="http://www.mysql.com/Contrib/cgi++-0.2.tar.gz"> cgi++-0.2.tar.gz</a>

A CGI wrapper by Sasha Pachev.

<LI><a HREF="http://www.mysql.com/Contrib/webboard-1.0.zip"> WebBoard 1.0</a>

EU-Industries Internet-Message-Board. 
</UL>



<H2><A NAME="SEC398" HREF="manual_toc.html#SEC398">B.4  Authentication tools</A></H2>


<UL>
<LI><a HREF="http://www.mysql.com/Contrib/ascend-radius-mysql-0.4.3.patch.gz">ascend-radius-mysql-0.4.3.patch.gz</a>

This is authentication and logging patch using <STRONG>MySQL</STRONG> for
Ascend-Radius. By <a HREF="mailto:takeshi@SoftAgency.co.jp">takeshi@SoftAgency.co.jp</a>.

<LI><a HREF="http://www.mysql.com/Contrib/checkpassword-0.76-mysql-0.3.2.patch.gz">checkpassword-0.76-mysql-0.3.2.patch.gz</a>

MySQL authentication patch for QMAIL and checkpassword. These are
useful for management user(mail,pop account) by <STRONG>MySQL</STRONG>.
By <a HREF="mailto:takeshi@SoftAgency.co.jp">takeshi@SoftAgency.co.jp</a>

<LI><a HREF="http://www.mysql.com/Contrib/jradius-diff.gz"> jradius-diff.gz</a>

<STRONG>MySQL</STRONG> support for Livingston's Radius 2.01. Authentication and
Accounting. By Jose de Leon, <a HREF="mailto:jdl@thevision.net">jdl@thevision.net</a>

<LI><a HREF="http://www.mysql.com/Contrib/mod_auth_mysql-2.20.tar.gz"> mod_auth_mysql-2.20.tar.gz</a>

Apache authentication module for <STRONG>MySQL</STRONG>. By Zeev Suraski,

<STRONG>Please</STRONG> register this module at:
http://bourbon.netvision.net.il/mysql/mod_auth_mysql/register.html. The
registering information is only used for statistical purposes and will
encourage further development of this module!

<LI><a HREF="http://www.mysql.com/Contrib/mod_log_mysql-1.05.tar.gz"> mod_log_mysql-1.05.tar.gz</a>

<STRONG>MySQL</STRONG> logging module for Apache. By Zeev Suraski,

<LI><a HREF="http://www.mysql.com/Contrib/mypasswd-2.0.tar.gz"> mypasswd-2.0.tar.gz</a>

Extra for <CODE>mod_auth_mysql</CODE>. This is a little tool that allows you
to add/change user records storing group and/or password entries in
<STRONG>MySQL</STRONG> tables. By Harry Brueckner, <a HREF="mailto:brueckner@respublica.de">brueckner@respublica.de</a>.

<LI><a HREF="http://www.mysql.com/Contrib/mysql-passwd.README"> mysql-passwd.README</a>

<LI><a HREF="http://www.mysql.com/Contrib/mysql-passwd-1.2.tar.gz"> mysql-passwd-1.2.tar.gz</a>

Extra for <CODE>mod_auth_mysql</CODE>. This is a two-part system for use with
<CODE>mod_auth_mysql</CODE>.

<LI><a HREF="http://www.mysql.com/Contrib/pam_mysql.tar.gz"> pam_mysql.tar.gz</a>

This module authenticates users via <CODE>pam</CODE>, using <STRONG>MySQL</STRONG>.

<LI><a HREF="http://www.mysql.com/Contrib/nsapi_auth_mysql.tar"> nsapi_auth_mysql.tar</a>

Netscape Web Server API (NSAPI) functions to authenticate (BASIC) users
against <STRONG>MySQL</STRONG> tables. By Yuan John Jiang.

<LI><a HREF="http://www.mysql.com/Contrib/qmail-1.03-mysql-0.3.2.patch.gz">qmail-1.03-mysql-0.3.2.patch.gz</a>

Patch for qmail to authenticate users from a <STRONG>MySQL</STRONG> table.
<LI><a HREF="http://www.mysql.com/Contrib/pwcheck_mysql-0.1.tar.gz">pwcheck_mysql-0.1.tar.gz</a>

An authentication module for the Cyrus IMAP server. By Aaron Newsome.
</UL>



<H2><A NAME="SEC399" HREF="manual_toc.html#SEC399">B.5  Converters</A></H2>


<UL>
<LI><a HREF="http://www.mysql.com/Contrib/dbf2mysql-1.10d.tar.gz"> dbf2mysql-1.10d.tar.gz</a>

Convert between <TT>`.dbf'</TT> files and <STRONG>MySQL</STRONG> tables. By Maarten
Boekhold, <a HREF="mailto:boekhold@cindy.et.tudelft.nl">boekhold@cindy.et.tudelft.nl</a>, and Michael Widenius.
This converter can't handle MEMO fields.

<LI><a HREF="http://www.mysql.com/Contrib/dbf2mysql.zip"> dbf2mysql.zip</a>

Convert between FoxPro <TT>`.dbf'</TT> files and <STRONG>MySQL</STRONG> tables on Win32.
By Alexander Eltsyn, <a HREF="mailto:ae@nica.ru">ae@nica.ru</a> or <a HREF="mailto:ae@usa.net">ae@usa.net</a>.

<LI><a HREF="http://www.mysql.com/Contrib/dump2h-1.20.gz"> dump2h-1.20.gz</a>

Convert from <CODE>mysqldump</CODE> output to a C header file. By Harry Brueckner,

<LI><a HREF="http://www.mysql.com/Contrib/exportsql.txt"> exportsql.txt</a>

A script that is similar to <CODE>access_to_mysql.txt</CODE>, except that this
one is fully configurable, has better type conversion (including
detection of <CODE>TIMESTAMP</CODE> fields), provides warnings and suggestions
while converting, quotes <STRONG>all</STRONG> special characters in text and
binary data, and so on.  It will also convert to <CODE>mSQL</CODE> v1 and v2,
and is free of charge for anyone. See
<a HREF="http://www.cynergi.net/prod/exportsql/">http://www.cynergi.net/prod/exportsql/</a> for latest version. By
Pedro Freire, <a HREF="mailto:support@cynergi.net">support@cynergi.net</a>.  Note: Doesn't work with
Access2!
<LI><a HREF="http://www.mysql.com/Contrib/access_to_mysql.txt"> access_to_mysql.txt</a>

Paste this function into an Access module of a database which has the
tables you want to export. See also <CODE>exportsql</CODE>. By Brian Andrews.
Note: Doesn't work with Access2!

<LI><a HREF="http://www.mysql.com/Contrib/importsql.txt"> importsql.txt</a>

A script that does the exact reverse of <CODE>exportsql.txt</CODE>.  That is,
it imports data from <STRONG>MySQL</STRONG> into an Access database via
ODBC. This is very handy when combined with exportSQL, since it lets you
use Access for all DB design and administration, and synchronize with
your actual <STRONG>MySQL</STRONG> server either way. Free of charge. See
<a HREF="http://www.netdive.com/freebies/importsql/">http://www.netdive.com/freebies/importsql/</a> for any updates.
Created by Laurent Bossavit of NetDIVE.
<STRONG>Note:</STRONG> Doesn't work with Access2!

<LI><a HREF="http://www.mysql.com/Contrib/msql2mysqlWrapper-1.0.tgz"> /msql2mysqlWrapper 1.0</a>

A C wrapper from <CODE>mSQL</CODE> to <STRONG>MySQL</STRONG>. By <a HREF="mailto:alfred@sb.net">alfred@sb.net</a>

<LI><a HREF="http://www.mysql.com/Contrib/sqlconv.pl"> sqlconv.pl</a>

A simple script that can be used to copy fields from one <STRONG>MySQL</STRONG> table to
another in bulk. Basically, you can run <CODE>mysqldump</CODE> and pipe it to
the <CODE>sqlconv.pl</CODE> script and the script will parse through the
<CODE>mysqldump</CODE> output and will rearrange the fields so they can be
inserted into a new table. An example is when you want to create a new
table for a different site you are working on, but the table is just a
bit different (ie - fields in different order, etc.).
By Steve Shreeve.
</UL>



<H2><A NAME="SEC400" HREF="manual_toc.html#SEC400">B.6  Using MySQL with other products</A></H2>


<UL>
<LI><a HREF="http://www.mysql.com/Contrib/emacs-sql-mode.tar.gz"> emacs-sql-mode.tar.gz</a>

Raw port of a SQL mode for XEmacs. Supports completion. Original by
Peter D. Pezaris <a HREF="mailto:pez@atlantic2.sbi.com">pez@atlantic2.sbi.com</a> and partial
<STRONG>MySQL</STRONG> port by David Axmark.

<LI><a HREF="http://www.mysql.com/Contrib/MyAccess.mda"> MyAccess.mda</a>

MyAccess is an AddIn for Access 97 and handles a lot of maintanance work
for <STRONG>MySQL</STRONG> databases.
<a HREF="http://www.mysql.com/Contrib/MyAccess-0.90.readme">
MyAccess-readme</a>.  By Hubertus Hiden.

<LI><a HREF="http://www.mysql.com/Contrib/radius-0.3.tar.gz"> radius-0.3.tar.gz</a>

Patches for <CODE>radiusd</CODE> to make it support <STRONG>MySQL</STRONG>. By Wim Bonis,
</UL>



<H2><A NAME="SEC401" HREF="manual_toc.html#SEC401">B.7  Useful tools</A></H2>


<UL>
<LI><a HREF="http://www.mysql.com/Contrib/mysql_watchdog.pl"> mysql_watchdog.pl</a>

Monitor the <STRONG>MySQL</STRONG> daemon for possible lockups. By Yermo Lamers,

<LI><a HREF="http://www.mysql.com/Contrib/mysqltop.tar.gz"> mysqltop.tar.gz</a>

Shows and updates the process-list in a fixed time interleave. By Thomas Wana.

<LI><a HREF="http://www.mysql.com/Contrib/mysqlsync"> mysqlsync</a>.

A perl script to keep remote copies of a <STRONG>MySQL</STRONG> database in sync with a
central master copy. By Mark Jeftovic.  <a HREF="mailto:markjr@easydns.com">markjr@easydns.com</a>
<LI><a HREF="http://www.mysql.com/Contrib/MySQLTutor-0.2.tar.gz"> MySQLTutor</a>.

MySQLTutor. A tutor of <STRONG>MySQL</STRONG> for beginners</A>
</UL>



<H2><A NAME="SEC402" HREF="manual_toc.html#SEC402">B.8  Uncategorized</A></H2>


<UL>
<LI><a HREF="http://www.mysql.com/Contrib/findres.pl"> findres.pl</a>

Find reserved words in tables. By Nem W Schlecht.

<LI><a HREF="http://www.mysql.com/Contrib/handicap.tar.gz"> handicap.tar.gz</a>

Performance handicapping system for yachts. Uses PHP. By

<LI><a HREF="http://www.mysql.com/Contrib/hylalog-1.0.tar.gz"> hylalog-1.0.tar.gz</a>

Store <CODE>hylafax</CODE> outgoing faxes in a <STRONG>MySQL</STRONG> database. By Sinisa
Milivojevic, <a HREF="mailto:sinisa@coresinc.com">sinisa@coresinc.com</a>.

<LI><a HREF="http://www.mysql.com/Contrib/mrtg-mysql-1.0.tar.gz"> mrtg-mysql-1.0.tar.gz</a>

<STRONG>MySQL</STRONG> status plotting with MRTG, by Luuk de Boer, <a HREF="mailto:luuk@wxs.nl">luuk@wxs.nl</a>.

<LI><a HREF="http://www.mysql.com/Contrib/wuftpd-2.4.2.18-mysql_support.2.tar.gz"> wuftpd-2.4.2.18-mysql_support.2.tar.gz</a>

Patches to add logging to <STRONG>MySQL</STRONG> for WU-ftpd. By Zeev Suraski,

<LI><a HREF="http://www.mysql.com/Contrib/Old-Versions"> Old-Versions</a>

Previous versions of things found here that you probably won't be
interested in.
</UL>



<H1><A NAME="Credits" HREF="manual_toc.html#Credits">C  Contributors to <STRONG>MySQL</STRONG></A></H1>

<P>
Contributors to the <STRONG>MySQL</STRONG> distribution are listed below, in
somewhat random order:

</P>
<DL COMPACT>

<DT>Michael (Monty) Widenius
<DD>
Has written the following parts of <STRONG>MySQL</STRONG>:

<UL>
<LI>

All the main code in <CODE>mysqld</CODE>.
<LI>

New functions for the string library.
<LI>

Most of the <CODE>mysys</CODE> library.
<LI>

The <CODE>NISAM</CODE> and <CODE>MyISAM</CODE> libraries (B-tree index file
handlers with index compression and different record formats).
<LI>

The <CODE>heap</CODE> library. A memory table system with our superior full dynamic
hashing. In use since 1981 and published around 1984.
<LI>

The <CODE>replace</CODE> program (look into it, it's COOL!).
<LI>

<STRONG>MyODBC</STRONG>, the ODBC driver for Windows95.
<LI>

Fixing bugs in MIT-pthreads to get it to work for <STRONG>MySQL</STRONG>. And
also Unireg, a curses-based application tool with many utilities.
<LI>

Porting of <CODE>mSQL</CODE> tools like <CODE>msqlperl</CODE>, <CODE>DBD</CODE>/<CODE>DBI</CODE> and
<CODE>DB2mysql</CODE>.
<LI>

Most parts of crash-me and the <STRONG>MySQL</STRONG> benchmarks.
</UL>

<DT>David Axmark
<DD>

<UL>
<LI>

Coordinator and main writer for the <STRONG>Reference Manual</STRONG>, including
enhancements to <CODE>texi2html</CODE>. Also automatic website updating from
this manual.
<LI>

Autoconf, Automake and <CODE>libtool</CODE> support.
<LI>

The licensing stuff.
<LI>

Parts of all the text files.  (Nowadays only the <TT>`README'</TT> is
left. The rest ended up in the manual.)
<LI>

Our Mail master.
<LI>

Lots of testing of new features.
<LI>

Our in-house "free" software lawyer.
<LI>

Mailing list maintainer (who never has the time to do it right...)
<LI>

Our original portability code (more than 10 years old now). Nowadays
only some parts of <CODE>mysys</CODE> are left.
<LI>

Someone for Monty to call in the middle of the night when he just got
that new feature to work. :-)
</UL>

<DT>Paul DuBois
<DD>
Help with making the Reference Manual correct and understandable.
<DT>Gianmassimo Vigazzola <a HREF="mailto:qwerg@mbox.vol.it">qwerg@mbox.vol.it</a> or <a HREF="mailto:qwerg@tin.it">qwerg@tin.it</a>
<DD>
The initial port to Win32/NT.
<DT>Kim Aldale
<DD>
Rewriting Monty's and David's attempts at English into English.
<DT>Allan Larsson (The BOSS at TcX)
<DD>
For all the time he has allowed Monty to spend on this "maybe useful"
tool (<STRONG>MySQL</STRONG>). Dedicated user (and bug finder) of Unireg &#38; <STRONG>MySQL</STRONG>.
<DT>Per Eric Olsson
<DD>
For more or less constructive criticism and real testing of the dynamic
record format.
<DT>Irena Pancirov <a HREF="mailto:irena@mail.yacc.it">irena@mail.yacc.it</a>
<DD>
Win32 port with Borland compiler.
<DT>David J. Hughes
<DD>
For the effort to make a shareware SQL database. We at TcX started with
<CODE>mSQL</CODE>, but found that it couldn't satisfy our purposes so instead we
wrote a SQL interface to our application builder Unireg.  <CODE>mysqladmin</CODE>
and <CODE>mysql</CODE> are programs that were largely influenced by their
<CODE>mSQL</CODE> counterparts. We have put a lot of effort into making the
<STRONG>MySQL</STRONG> syntax a superset of <CODE>mSQL</CODE>. Many of the APIs ideas are
borrowed from <CODE>mSQL</CODE> to make it easy to port free <CODE>mSQL</CODE> programs
to <STRONG>MySQL</STRONG>. <STRONG>MySQL</STRONG> doesn't contain any code from <CODE>mSQL</CODE>.
Two files in the distribution (<TT>`client/insert_test.c'</TT> and
<TT>`client/select_test.c'</TT>) are based on the corresponding (non-copyrighted)
files in the <CODE>mSQL</CODE> distribution, but are modified as examples showing
the changes necessary to convert code from <CODE>mSQL</CODE> to <STRONG>MySQL</STRONG>.
(<CODE>mSQL</CODE> is copyrighted David J. Hughes.)
<DT>Fred Fish
<DD>
For his excellent C debugging and trace library. Monty has made a number
of smaller improvements to the library (speed and additional options).
<DT>Richard A. O'Keefe
<DD>
For his public domain string library.
<DT>Henry Spencer
<DD>
For his regex library, used in <CODE>WHERE column REGEXP regexp</CODE>.
<DT>Free Software Foundation
<DD>
From whom we got an excellent compiler (<CODE>gcc</CODE>), the <CODE>libc</CODE> library
(from which we have borrowed <TT>`strto.c'</TT> to get some code working in Linux)
and the <CODE>readline</CODE> library (for the <CODE>mysql</CODE> client).
<DT>Free Software Foundation &#38; The XEmacs development team
<DD>
For a really great editor/environment used by almost everybody at TcX/detron.
<DT>Igor Romanenko <a HREF="mailto:igor@frog.kiev.ua">igor@frog.kiev.ua</a>
<DD>
<CODE>mysqldump</CODE> (previously <CODE>msqldump</CODE>, but ported and enhanced by
Monty).
<DT>Tim Bunce, Alligator Descartes
<DD>
For the <CODE>DBD</CODE> (Perl) interface.
<DT>Andreas Koenig <a HREF="mailto:a.koenig@mind.de">a.koenig@mind.de</a>
<DD>
For the Perl interface to <STRONG>MySQL</STRONG>.
<DT>Eugene Chan <a HREF="mailto:eugene@acenet.com.sg">eugene@acenet.com.sg</a>
<DD>
For porting PHP to <STRONG>MySQL</STRONG>.
<DT>Michael J. Miller Jr. <a HREF="mailto:mke@terrapin.turbolift.com">mke@terrapin.turbolift.com</a>
<DD>
For the growing <STRONG>MySQL</STRONG> user manual. And a lot of
spelling/language fixes for the FAQ.
<DT>Giovanni Maruzzelli <a HREF="mailto:maruzz@matrice.it">maruzz@matrice.it</a>
<DD>
For porting iODBC (Unix ODBC).
<DT>Chris Provenzano
<DD>
Portable user level pthreads. From the copyright: This product includes
software developed by Chris Provenzano, the University of California,
Berkeley, and contributors.  We are currently using version 1_60_beta6
patched by Monty (see <TT>`mit-pthreads/Changes-mysql'</TT>).
<DT>Xavier Leroy <a HREF="mailto:Xavier.Leroy@inria.fr">Xavier.Leroy@inria.fr</a>
<DD>
The author of LinuxThreads (used by <STRONG>MySQL</STRONG> on Linux).
<DT>Zarko Mocnik <a HREF="mailto:zarko.mocnik@dem.si">zarko.mocnik@dem.si</a>
<DD>
Sorting for Slovenian language and the <TT>`cset.tar.gz'</TT> module that makes
it easier to add other character sets.
<DT>"TAMITO" <a HREF="mailto:tommy@valley.ne.jp">tommy@valley.ne.jp</a>
<DD>
The <CODE>_MB</CODE> character set macros and the ujis and sjis character sets.
<DT>Yves Carlier <a HREF="mailto:Yves.Carlier@rug.ac.be">Yves.Carlier@rug.ac.be</a>
<DD>
<CODE>mysqlaccess</CODE>, a program to show the access rights for a user.
<DT>Rhys Jones <a HREF="mailto:rhys@wales.com">rhys@wales.com</a> (And GWE Technologies Limited)
<DD>
For the JDBC, a module to extract data from <STRONG>MySQL</STRONG> with a Java
client.
<DT>Dr Xiaokun Kelvin ZHU <a HREF="mailto:X.Zhu@brad.ac.uk">X.Zhu@brad.ac.uk</a>
<DD>
Further development of the JDBC driver and other <STRONG>MySQL</STRONG>-related
Java tools.
<DT>James Cooper <a HREF="mailto:pixel@organic.com">pixel@organic.com</a>
<DD>
For setting up a searchable mailing list archive at his site.
<DT>Rick Mehalick <a HREF="mailto:Rick_Mehalick@i-o.com">Rick_Mehalick@i-o.com</a>
<DD>
For <CODE>xmysql</CODE>, a graphical X client for <STRONG>MySQL</STRONG>.
<DT>Doug Sisk <a HREF="mailto:sisk@wix.com">sisk@wix.com</a>
<DD>
For providing RPM packages of <STRONG>MySQL</STRONG> for RedHat Linux.
<DT>Diemand Alexander V. <a HREF="mailto:axeld@vial.ethz.ch">axeld@vial.ethz.ch</a>
<DD>
For providing RPM packages of <STRONG>MySQL</STRONG> for RedHat Linux/Alpha.
<DT>Antoni Pamies Olive <a HREF="mailto:toni@readysoft.es">toni@readysoft.es</a>
<DD>
For providing RPM versions of a lot of <STRONG>MySQL</STRONG> clients for Intel
and SPARC.
<DT>Jay Bloodworth <a HREF="mailto:jay@pathways.sde.state.sc.us">jay@pathways.sde.state.sc.us</a>
<DD>
For providing RPM versions for <STRONG>MySQL</STRONG> 3.21 versions.
<DT>Jochen Wiedmann <a HREF="mailto:wiedmann@neckar-alb.de">wiedmann@neckar-alb.de</a>
<DD>
For maintaining the Perl <CODE>DBD::mysql</CODE> module.
<DT>Therrien Gilbert <a HREF="mailto:gilbert@ican.net">gilbert@ican.net</a>, Jean-Marc Pouyot <a HREF="mailto:jmp@scalaire.fr">jmp@scalaire.fr</a>
<DD>
French error messages.
<DT>Petr snajdr, <a HREF="mailto:snajdr@pvt.net">snajdr@pvt.net</a>
<DD>
Czech error messages.
<DT>Jaroslaw Lewandowski <a HREF="mailto:jotel@itnet.com.pl">jotel@itnet.com.pl</a>
<DD>
Polish error messages.
<DT>Miguel Angel Fernandez Roiz
<DD>
Spanish error messages.
<DT>Roy-Magne Mo <a HREF="mailto:rmo@www.hivolda.no">rmo@www.hivolda.no</a>
<DD>
Norwegian error messages and testing of 3.21.#.
<DT>Timur I. Bakeyev <a HREF="mailto:root@timur.tatarstan.ru">root@timur.tatarstan.ru</a>
<DD>
Russian error messages.
<DT>brenno@dewinter.com
<DD>
Italian error messages.
<DT>Dirk Munzinger <a HREF="mailto:dirk@trinity.saar.de">dirk@trinity.saar.de</a>
<DD>
German error messages.
<DT>Billik Stefan <a HREF="mailto:billik@sun.uniag.sk">billik@sun.uniag.sk</a>
<DD>
Slovak error messages.
<DT>David Sacerdote <a HREF="mailto:davids@secnet.com">davids@secnet.com</a>
<DD>
Ideas for secure checking of DNS hostnames.
<DT>Wei-Jou Chen <a HREF="mailto:jou@nematic.ieo.nctu.edu.tw">jou@nematic.ieo.nctu.edu.tw</a>
<DD>
Some support for Chinese(BIG5) characters.
<DT>Zeev Suraski <a HREF="mailto:bourbon@netvision.net.il">bourbon@netvision.net.il</a>
<DD>
<CODE>FROM_UNIXTIME()</CODE> time formatting, <CODE>ENCRYPT()</CODE> functions, and
<CODE>bison</CODE> adviser.
Active mailing list member.
<DT>Luuk de Boer <a HREF="mailto:luuk@wxs.nl">luuk@wxs.nl</a>
<DD>
Ported (and extended) the benchmark suite to <CODE>DBI</CODE>/<CODE>DBD</CODE>. Have
been of great help with <CODE>crash-me</CODE> and running benchmarks. Some new
date functions. The mysql_setpermissions script.
<DT>Jay Flaherty <a HREF="mailto:fty@utk.edu">fty@utk.edu</a>
<DD>
Big parts of the Perl <CODE>DBI</CODE>/<CODE>DBD</CODE> section in the manual.
<DT>Paul Southworth <a HREF="mailto:pauls@etext.org">pauls@etext.org</a>, Ray Loyzaga <a HREF="mailto:yar@cs.su.oz.au">yar@cs.su.oz.au</a>
<DD>
Proof-reading of the Reference Manual.
<DT>Alexis Mikhailov <a HREF="mailto:root@medinf.chuvashia.su">root@medinf.chuvashia.su</a>
<DD>
User definable functions (UDFs); <CODE>CREATE FUNCTION</CODE> and
<CODE>DROP FUNCTION</CODE>.
<DT>Andreas F. Bobak <a HREF="mailto:bobak@relog.ch">bobak@relog.ch</a>
<DD>
The <CODE>AGGREGATE</CODE> extension to UDF functions.
<DT>Ross Wakelin <a HREF="mailto:R.Wakelin@march.co.uk">R.Wakelin@march.co.uk</a>
<DD>
Help to set up InstallShield for MySQL-Win32.
<DT>Jethro Wright III <a HREF="mailto:jetman@li.net">jetman@li.net</a>
<DD>
The <TT>`libmysql.dll'</TT> library.
<DT>James Pereria <a HREF="mailto:jpereira@iafrica.com">jpereira@iafrica.com</a>
<DD>
Mysqlmanager, a Win32 GUI tool for administrating <STRONG>MySQL</STRONG>.
<DT>Curt Sampson <a HREF="mailto:cjs@portal.ca">cjs@portal.ca</a>
<DD>
Porting of MIT-pthreads to NetBSD/Alpha and NetBSD 1.3/i386.
<DT>Sinisa Milivojevic <a HREF="mailto:sinisa@coresinc.com">sinisa@coresinc.com</a>
<DD>
Compression (with <CODE>zlib</CODE>) to the client/server protocol.
Perfect hashing for the lexical analyzer phase.
<DT>Antony T. Curtis <a HREF="mailto:antony.curtis@olcs.net">antony.curtis@olcs.net</a>
<DD>
Porting of <STRONG>MySQL</STRONG> to OS/2.
</DL>

<P>
Other contributors, bugfinders and testers: James H. Thompson, Maurizio
Menghini, Wojciech Tryc, Luca Berra, Zarko Mocnik, Wim Bonis, Elmar
Haneke, <a HREF="mailto:jehamby@lightside">jehamby@lightside</a>, <a HREF="mailto:psmith@BayNetworks.COM">psmith@BayNetworks.COM</a>,
Mike Simons, Jaakko Hyv@"atti.

</P>
<P>
And lots of bug report/patches from the folks on the mailing list.

</P>
<P>
And a big tribute to those that help us answer questions on the
<CODE>mysql@lists.mysql.com</CODE> mailing list:

</P>
<DL COMPACT>

<DT>Daniel Koch <a HREF="mailto:dkoch@amcity.com">dkoch@amcity.com</a>
<DD>
Irix setup.
<DT>Luuk de Boer <a HREF="mailto:luuk@wxs.nl">luuk@wxs.nl</a>
<DD>
Benchmark questions.
<DT>Tim Sailer <a HREF="mailto:tps@users.buoy.com">tps@users.buoy.com</a>
<DD>
<CODE>DBD-mysql</CODE> questions.
<DT>Boyd Lynn Gerber <a HREF="mailto:gerberb@zenez.com">gerberb@zenez.com</a>
<DD>
SCO related questions.
<DT>Richard Mehalick <a HREF="mailto:RM186061@shellus.com">RM186061@shellus.com</a>
<DD>
<CODE>xmysql</CODE>-releated questions and basic installation questions.
<DT>Zeev Suraski <a HREF="mailto:bourbon@netvision.net.il">bourbon@netvision.net.il</a>
<DD>
Apache module configuration questions (log &#38; auth), PHP-related
questions, SQL syntax related questions and other general questions.
<DT>Francesc Guasch <a HREF="mailto:frankie@citel.upc.es">frankie@citel.upc.es</a>
<DD>
General questions.
<DT>Jonathan J Smith <a HREF="mailto:jsmith@wtp.net">jsmith@wtp.net</a>
<DD>
Questions pertaining to OS-specifics with Linux, SQL syntax, and other
things that might be needing some work.
<DT>David Sklar <a HREF="mailto:sklar@student.net">sklar@student.net</a>
<DD>
Using <STRONG>MySQL</STRONG> from PHP and Perl.
<DT>Alistair MacDonald <a HREF="mailto:A.MacDonald@uel.ac.uk">A.MacDonald@uel.ac.uk</a>
<DD>
Not yet specified, but is flexible and can handle Linux and maybe HP-UX.
Will try to get user to use <CODE>mysqlbug</CODE>.
<DT>John Lyon <a HREF="mailto:jlyon@imag.net">jlyon@imag.net</a>
<DD>
Questions about installing <STRONG>MySQL</STRONG> on Linux systems, using either
<TT>`.rpm'</TT> files, or compiling from source.
<DT>Lorvid Ltd. <a HREF="mailto:lorvid@WOLFENET.com">lorvid@WOLFENET.com</a>
<DD>
Simple billing/license/support/copyright issues.
<DT>Patrick Sherrill <a HREF="mailto:patrick@coconet.com">patrick@coconet.com</a>
<DD>
ODBC and VisualC++ interface questions.
<DT>Randy Harmon <a HREF="mailto:rjharmon@uptimecomputers.com">rjharmon@uptimecomputers.com</a>
<DD>
<CODE>DBD</CODE>, Linux, some SQL syntax questions.
</DL>



<H1><A NAME="News" HREF="manual_toc.html#News">D  <STRONG>MySQL</STRONG> change history</A></H1>

<P>
Note that we tend to update the manual at the same time we implement new
things to <STRONG>MySQL</STRONG>. If you find a version listed below that you can't
find on the
<a HREF="http://www.mysql.com/download.html"><STRONG>MySQL</STRONG> download page</a>,
this means that the version has not yet been released!

</P>



<H2><A NAME="News-3.23.x" HREF="manual_toc.html#News-3.23.x">D.1  Changes in release 3.23.x  (Not released yet)</A></H2>

<P>
The major difference between release 3.23 and releases 3.22 and 3.21 is that
3.23 contains a new ISAM library (MyISAM), which is more tuned for SQL
than the old ISAM was.

</P>
<P>
The 3.23 release is under development, and things will be added at a
fast pace to it.  For the moment we recommend this version only for
users that desperately need a new feature that is found only in this
release (like big file support and machine-independent tables).  (Note
that all new functionality in MySQL 3.23 is extensively tested, but as
this release involves much new code, it's difficult to test everything).  This
version should start to stabilise as soon as we get subselects included
in it.

</P>



<H3><A NAME="News-3.23.0" HREF="manual_toc.html#News-3.23.0">D.1.1  Changes in release 3.23.0</A></H3>


<UL>
A new table handler library (<CODE>MyISAM</CODE>) with a lot of new features.
See section <A HREF="manual.html#Table_types">10.17  <STRONG>MySQL</STRONG> table types.</A>.
<LI>

You can create in-memory <CODE>HEAP</CODE> tables which are extremely fast for
lookups.
<LI>

Support for big files (63 bit) on OSes that support big files.
<LI>

New function <CODE>LOAD_FILE(filename)</CODE> to get the contents of a file as a
string value.
<LI>

New operator <CODE>&#60;=&#62;</CODE> which will act as <CODE>=</CODE> but will return TRUE
if both arguments are <CODE>NULL</CODE>.  This is useful for comparing changes
between tables.
<LI>

Added the ODBC 3.0 <CODE>EXTRACT(interval FROM datetime)</CODE> function.
<LI>

Columns defined as <CODE>FLOAT(4)</CODE> or <CODE>FLOAT(8)</CODE> are not rounded
on storage and may be in scientific notation (1.0 E+10) when retrieved.
<LI>

<CODE>REPLACE</CODE> is now faster than before.
<LI>

Changed <CODE>LIKE</CODE> character comparison to behave as <CODE>=</CODE>;
This means that <CODE>'e' LIKE '?</CODE> is now true.
<LI>

<CODE>SHOW TABLE STATUS</CODE> returns a lot of information about the tables.
<LI>

Added <CODE>LIKE</CODE> to the <CODE>SHOW STATUS</CODE> command.
<LI>

Added privilege column to <CODE>SHOW COLUMNS</CODE>.
<LI>

Added columns <CODE>packed</CODE> and <CODE>comment</CODE> to <CODE>SHOW INDEX</CODE>.
<LI>

Added comments to tables (with <CODE>CREATE TABLE ... COMMENT "xxx"</CODE>).
<LI>

Added <CODE>UNIQUE</CODE>, as in
<CODE>CREATE TABLE table_name (col int not null UNIQUE)</CODE>
<LI>

New create syntax: <CODE>CREATE TABLE SELECT ....</CODE>
<LI>

New create syntax: <CODE>CREATE TABLE IF NOT EXISTS ...</CODE>
<LI>

Allow creation of <CODE>CHAR(0)</CODE> columns.
<LI>

<CODE>DATE_FORMAT()</CODE> now requires <CODE>%</CODE> before any format character.
<LI>

<CODE>DELAYED</CODE> is now a reserved word (sorry about that :( ).
<LI>

An example procedure is added: <CODE>analyse</CODE>, file: <TT>`sql_analyse.c'</TT>.
This will describe the data in your query.  Try the following:

<PRE>
SELECT ... FROM ... WHERE ... PROCEDURE ANALYSE([max elements,[max memory]])
</PRE>

 
This procedure is extremely useful when you want to check the data in your
table!
<LI>

<CODE>BINARY</CODE> cast to force a string to be compared case sensitively.
<LI>

Added option <CODE>--skip-show-databases</CODE> to <CODE>mysqld</CODE>.
<LI>

Check if a row has changed in an <CODE>UPDATE</CODE> now also works with
<CODE>BLOB</CODE>/<CODE>TEXT</CODE> columns.
<LI>

Added the <CODE>INNER</CODE> join syntax.  <STRONG>NOTE</STRONG>:  This made <CODE>INNER</CODE>
an reserved word!
<LI>

Added support for netmasks to the hostname in the <STRONG>MySQL</STRONG> tables.
You can specify a netmask using the <CODE>IP/NETMASK</CODE> syntax.
<LI>

If you compare a <CODE>NOT NULL DATE/DATETIME</CODE> column with <CODE>IS
NULL</CODE>, this is changed to a compare against <CODE>0</CODE> to satisfy some ODBC
applications.  (By <a HREF="mailto:shreeve@uci.edu">shreeve@uci.edu</a>).
<LI>

<CODE>NULL IN (...)</CODE> now returns <CODE>NULL</CODE> instead of <CODE>0</CODE>.  This will
ensure that <CODE>null_column NOT IN (...)</CODE> doesn't match
<CODE>NULL</CODE> values.
<LI>

Fix storage of floating point values in <CODE>TIME</CODE> columns.
<LI>

Changed parsing of <CODE>TIME</CODE> strings to be more strict.  Now the
fractional second part is detected (and currently skipped). The
following formats are supported:
<DL COMPACT>

<DT><CODE>[[DAYS] [H]H:]MM:]SS[.fraction]</CODE>
<DD>
<DT><CODE>[[[[[H]H]H]H]MM]SS[.fraction]</CODE>
<DD>
</DL>
<LI>

Detect (and ignore) second fraction part from <CODE>DATETIME</CODE>.
<LI>

Added the <CODE>LOW_PRIORITY</CODE> attribute to <CODE>LOAD DATA INFILE</CODE>.
<LI>

The default index name now uses the same case as the used column name.
<LI>

Changed default number of connections to 100.
<LI>

Use bigger buffers when using <CODE>LOAD DATA INFILE</CODE>.
<LI>

<CODE>DECIMAL(x,y)</CODE> now works according to ANSI SQL.
<LI>

Added aggregate UDF functions. Thanks to Andreas F. Bobak
<LI>

<CODE>LAST_INSERT_ID()</CODE> is now updated for <CODE>INSERT INTO ... SELECT</CODE>.
<LI>

Some small changes to the join table optimizer to make some joins faster.
<LI>

<CODE>SELECT DISTINCT</CODE> is much faster; It uses the new <CODE>UNIQUE</CODE>
functionality in <CODE>MyISAM</CODE>. One difference compared to <STRONG>MySQL</STRONG> 3.22
is that the output of <CODE>DISTINCT</CODE> is not sorted anymore.
<LI>

Temporary in-memory <CODE>HEAP</CODE> tables are automatically converted to
<CODE>MyISAM</CODE> disk-based tables when needed. This means that you should no
longer get the <CODE>TABLE is FULL</CODE> error.
<LI>

All C client API macros are now functions to make shared libraries more
reliable. Because of this, you can no longer call <CODE>mysql_num_fields()</CODE> on
a <CODE>MYSQL</CODE> object, you must use <CODE>mysql_field_count()</CODE> instead.
<LI>

Added use of <CODE>LIBEWRAP</CODE>;  Patch by Henning P . Schmiedehausen.
<LI>

Don't allow <CODE>AUTO_INCREMENT</CODE> for other than numerical columns.
<LI>

Using <CODE>AUTO_INCREMENT</CODE> will now automatically make the column
<CODE>NOT NULL</CODE>.
<LI>

Show <CODE>NULL</CODE> as the default value for AUTO_INCREMENT columns.
<LI>

Added <CODE>SQL_BIG_RESULT</CODE>;  <CODE>SQL_SMALL_RESULT</CODE> is now default.
<LI>

Added a shared library RPM. This enchancement was contributed by David
Fox (dsfox@cogsci.ucsd.edu).
<LI>

Added a <CODE>--enable-large-files/--disable-large-files</CODE> switch to
<CODE>configure</CODE>. See <TT>`configure.in'</TT> for some systems where this is automatically
turned off because of broken implementations.
<LI>

Upgraded <CODE>readline</CODE> to 4.0.
<LI>

New <CODE>CREATE TABLE</CODE> options: <CODE>PACK_KEYS</CODE> and <CODE>CHECKSUM</CODE>.
<LI>

Added <CODE>mysqld</CODE> option <CODE>--default-table-type</CODE>.
</UL>



<H2><A NAME="News-3.22.x" HREF="manual_toc.html#News-3.22.x">D.2  Changes in release 3.22.x</A></H2>

<P>
The 3.22 version has faster and safer connect code and a lot of new nice
enhancements.  The reason for not including these changes in the 3.21 version
is mainly that we are trying to avoid big changes to 3.21 to keep it as
stable as possible.  As there aren't really any MAJOR changes, upgrading to
3.22 should be very easy and painless.
See section <A HREF="manual.html#Upgrading-from-3.21">4.16.2  Upgrading from a 3.21 version to 3.22</A>.

</P>
<P>
3.22 should also be used with the new <CODE>DBD-mysql</CODE> (1.20xx) driver
that can use the new connect protocol!

</P>



<H3><A NAME="News-3.22.25" HREF="manual_toc.html#News-3.22.25">D.2.1  Changes in release 3.22.25</A></H3>


<UL>
<LI>

Fixed some small problems with the installation.
</UL>



<H3><A NAME="News-3.22.24" HREF="manual_toc.html#News-3.22.24">D.2.2  Changes in release 3.22.24</A></H3>


<UL>
<LI>

<CODE>DATA</CODE> is not a reserved word anymore. 
<LI>

Fixed optimizer bug with tables with only one row.
<LI>

Fixed bug when using <CODE>LOCK TABLES table_name READ; FLUSH TABLES;</CODE>
<LI>

Applied some patches for HPUX.
<LI>

<CODE>isamchk</CODE> should now work on Win32.
<LI>

Changed <TT>`configure'</TT> to not use big file handling on Linux as this
crashes some RedHat 6.0 systems
</UL>



<H3><A NAME="News-3.22.23" HREF="manual_toc.html#News-3.22.23">D.2.3  Changes in release 3.22.23</A></H3>


<UL>
<LI>

Upgraded to use Autoconf 2.13, Automake 1.4 and <CODE>libtool</CODE> 1.3.2.
<LI>

Better support for SCO in <CODE>configure</CODE>.
<LI>

Added option <CODE>--defaults-file=###</CODE> to option file handling to force use
of only one specific option file.
<LI>

Extended <CODE>CREATE</CODE> syntax to ignore <CODE>MySQL 3.23</CODE> keywords.
<LI>

Fixed deadlock problem when using <CODE>INSERT DELAYED</CODE> on a table locked with
<CODE>LOCK TABLES</CODE>.
<LI>

Fixed deadlock problem when using <CODE>DROP TABLE</CODE> on a table that was
locked by another thread.
<LI>

Add logging of <CODE>GRANT/REVOKE</CODE> commands in the update log.
<LI>

Fixed <CODE>isamchk</CODE> to detect a new error condition.
<LI>

Fixed bug in <CODE>NATURAL LEFT JOIN</CODE>.
</UL>



<H3><A NAME="News-3.22.22" HREF="manual_toc.html#News-3.22.22">D.2.4  Changes in release 3.22.22</A></H3>


<UL>
<LI>

Fixed problem in the C API when you called <CODE>mysql_close()</CODE> directly after
<CODE>mysql_init()</CODE>.
<LI>

Better client error message when you can't open socket.
<LI>

Fixed <CODE>delayed_insert_thread</CODE> counting when you couldn't create a new
delayed_insert thread.
<LI>

Fixed bug in <CODE>CONCAT()</CODE> with many arguments.
<LI>

Added patches for DEC 3.2 and SCO.
<LI>

Fixed path-bug when installing <STRONG>MySQL</STRONG> as a service on NT.
<LI>

The <STRONG>MySQL</STRONG>-win32 version is now compiled with VC++ 6.0 instead of
with VC++ 5.0.
<LI>

New installation setup for <STRONG>MySQL-Win32</STRONG>
</UL>



<H3><A NAME="News-3.22.21" HREF="manual_toc.html#News-3.22.21">D.2.5  Changes in release 3.22.21</A></H3>


<UL>
<LI>

Fixed problem with <CODE>DELETE FROM TABLE</CODE> when table was locked by
another thread.
<LI>

Fixed bug in <CODE>LEFT JOIN</CODE> involving empty tables.
<LI>

Changed the <CODE>mysql.db</CODE> column from <CODE>char(32)</CODE> to <CODE>char(60)</CODE>.
<LI>

<CODE>MODIFY</CODE> and <CODE>DELAYED</CODE> are not reserved words anymore.
<LI>

Fixed a bug when storing days in a <CODE>TIME</CODE> column.
<LI>

Fixed a problem with <CODE>Host '..' is not allowed to connect to this MySQL
server</CODE> after one had inserted a new <STRONG>MySQL</STRONG> user with a <CODE>GRANT</CODE>
command.
<LI>

Changed to use TCP_NODELAY also on Linux (Should give faster TCP/IP
connections).
</UL>



<H3><A NAME="News-3.22.20" HREF="manual_toc.html#News-3.22.20">D.2.6  Changes in release 3.22.20</A></H3>


<UL>
<LI>

Fixed <CODE>STD()</CODE> for big tables when result should be 0.
<LI>

The update log didn't have newlines on some operating systems.
<LI>

<CODE>INSERT DELAYED</CODE> had some garbage at end in the update log.
</UL>



<H3><A NAME="News-3.22.19" HREF="manual_toc.html#News-3.22.19">D.2.7  Changes in release 3.22.19</A></H3>


<UL>
<LI>

Fixed bug in <CODE>mysql_install_db</CODE> (from 3.22.17).
<LI>

Changed default key cache size to 8M.
<LI>

Fixed problem with queries that needed temporary tables with <CODE>BLOB</CODE>
columns.
</UL>



<H3><A NAME="News-3.22.18" HREF="manual_toc.html#News-3.22.18">D.2.8  Changes in release 3.22.18</A></H3>


<UL>
<LI>

Fixes a fatal problem in 3.22.17 on Linux;  After <CODE>shutdown</CODE>
all threads didn't die properly.
<LI>

Added option <CODE>-O flush-time=#</CODE> to <CODE>mysqld</CODE>.  This is mostly
useful on Win32 and tells how often <STRONG>MySQL</STRONG> should close all
unused tables and flush all updated tables to disk.
<LI>

Fixed problem that a <CODE>VARCHAR</CODE> column compared with <CODE>CHAR</CODE> column
didn't use keys efficiently.
</UL>



<H3><A NAME="News-3.22.17" HREF="manual_toc.html#News-3.22.17">D.2.9  Changes in release 3.22.17</A></H3>


<UL>
<LI>

Fixed a core dump problem when using <CODE>--log-update</CODE> and connecting
without a default database.
<LI>

Fixed some <CODE>configure</CODE> and portability problems.
<LI>

Using <CODE>LEFT JOIN</CODE> on tables that had circular dependencies caused
<CODE>mysqld</CODE> to hang forever.
</UL>



<H3><A NAME="News-3.22.16" HREF="manual_toc.html#News-3.22.16">D.2.10  Changes in release 3.22.16</A></H3>


<UL>
<LI>

<CODE>mysqladmin processlist</CODE> could kill the server if a new user logged in.
<LI>

<CODE>DELETE FROM tbl_name WHERE key_column=col_name</CODE> didn't find any matching
rows.  Fixed.
<LI>

<CODE>DATE_ADD(column,...)</CODE> didn't work.
<LI>

<CODE>INSERT DELAYED</CODE> could deadlock with status 'upgrading lock'
<LI>

Extended <CODE>ENCRYPT()</CODE> to take longer salt strings than 2 characters.
<LI>

<CODE>longlong2str</CODE> is now much faster than before.  For <CODE>Intel x86</CODE>
platforms, this function is written in optimized assembler.
<LI>

Added the <CODE>MODIFY</CODE> keyword to <CODE>ALTER TABLE</CODE>.
</UL>



<H3><A NAME="News-3.22.15" HREF="manual_toc.html#News-3.22.15">D.2.11  Changes in release 3.22.15</A></H3>


<UL>
<LI>

<CODE>GRANT</CODE> used with <CODE>IDENTIFIED BY</CODE> didn't take effect until privileges
were flushed.
<LI>

Name change of some variables in <CODE>SHOW STATUS</CODE>.
<LI>

Fixed problem with <CODE>ORDER BY</CODE> with 'only index' optimzation when there
were multiple key definitions for a used column.
<LI>

<CODE>DATE</CODE> and <CODE>DATETIME</CODE> columns are now up to 5 times faster than
before.
<LI>

<CODE>INSERT DELAYED</CODE> can be used to let the client do other things while the
server inserts rows into a table.
<LI>

<CODE>LEFT JOIN USING (col1,col2)</CODE> didn't work if one used it with tables
from 2 different databases.
<LI>

<CODE>LOAD DATA LOCAL INFILE</CODE> didn't work in the Unix version because of
a missing file.
<LI>

Fixed problems with <CODE>VARCHAR</CODE>/<CODE>BLOB</CODE> on very short rows (&#60; 4 bytes);
error 127 could occur when deleting rows.
<LI>

Updating <CODE>BLOB/TEXT</CODE> through formulas didn't work for short (&#60; 256 char)
strings.
<LI>

When you did a <CODE>GRANT</CODE> on a new host, <CODE>mysqld</CODE> could die on the first
connect from this host.
<LI>

Fixed bug when one used <CODE>ORDER BY</CODE> on column name that was the same
name as an alias.
<LI>

Added <CODE>BENCHMARK(loop-count,expression)</CODE> function to time expressions.
</UL>



<H3><A NAME="News-3.22.14" HREF="manual_toc.html#News-3.22.14">D.2.12  Changes in release 3.22.14</A></H3>


<UL>
<LI>

Allow empty arguments to <CODE>mysqld</CODE> to make it easier to start from shell
scripts.
<LI>

Setting a <CODE>TIMESTAMP</CODE> column to <CODE>NULL</CODE> didn't record the timestamp
value in the update log.
<LI>

Fixed lock handler bug when one did
<CODE>INSERT INTO TABLE ... SELECT ... GROUP BY</CODE>.
<LI>

Added a patch for <CODE>localtime_r()</CODE> on Win32 so that it will not crash
anymore if your date is &#62; 2039, but instead will return a time of all zero.
<LI>

Names for
user-defined functions are no longer case sensitive.
<LI>

Added escape of <CODE>^Z</CODE> (ASCII 26) to <CODE>\Z</CODE> as <CODE>^Z</CODE> doesn't
work with pipes on Win32.
<LI>

<CODE>mysql_fix_privileges</CODE> adds a new column to the <CODE>mysql.func</CODE> to
support aggregate UDF functions in future <STRONG>MySQL</STRONG> releases.
</UL>



<H3><A NAME="News-3.22.13" HREF="manual_toc.html#News-3.22.13">D.2.13  Changes in release 3.22.13</A></H3>


<UL>
<LI>

Saving <CODE>NOW()</CODE>, <CODE>CURDATE()</CODE> or <CODE>CURTIME()</CODE> directly in a
column didn't work.
<LI>

<CODE>SELECT COUNT(*) ... LEFT JOIN ...</CODE> didn't work with no <CODE>WHERE</CODE> part.
<LI>

Updated <TT>`config.guess'</TT> to allow <STRONG>MySQL</STRONG> to configure on
UnixWare 7.0.x.
<LI>

Changed the implementation of <CODE>pthread_cond()</CODE> on the Win32 version.
<CODE>get_lock()</CODE> now correctly times out on Win32!
</UL>



<H3><A NAME="News-3.22.12" HREF="manual_toc.html#News-3.22.12">D.2.14  Changes in release 3.22.12</A></H3>


<UL>
<LI>

Fixed problem when using <CODE>DATE_ADD()</CODE> and <CODE>DATE_SUB()</CODE> in a
<CODE>WHERE</CODE> clause.
<LI>

You can now set the password for a user with the <CODE>GRANT ... TO user
IDENTIFIED BY 'password'</CODE> syntax.
<LI>

Fixed bug in <CODE>GRANT</CODE> checking with <CODE>SELECT</CODE> on many tables.
<LI>

Added missing file <CODE>mysql_fix_privilege_tables</CODE> to the RPM
distribution. This is not run by default since it relies on the client
package.
<LI>

Added option <CODE>SQL_SMALL_RESULT</CODE> to <CODE>SELECT</CODE> to force use of
fast temporary tables when you know that the result set will be small.
<LI>

Allow use of negative real numbers without a decimal point.
<LI>

Day number is now adjusted to max days in month if the resulting month
after <CODE>DATE_ADD</CODE>/<CODE>DATE_SUB()</CODE> doesn't have enough days.
<LI>

Fix that <CODE>GRANT</CODE> compares columns in case-insensitive fashion.
<LI>

Fixed a bug in <TT>`sql_list.h'</TT> that made <CODE>ALTER TABLE</CODE> dump core in
some contexts.
<LI>

The hostname in <CODE>user@hostname</CODE> can now include <SAMP>`.'</SAMP> and <SAMP>`-'</SAMP>
without quotes in the context of the <CODE>GRANT</CODE>, <CODE>REVOKE</CODE> and
<CODE>SET PASSWORD FOR ...</CODE> statements.
<LI>

Fix for <CODE>isamchk</CODE> for tables which need big temporary files.
</UL>



<H3><A NAME="News-3.22.11" HREF="manual_toc.html#News-3.22.11">D.2.15  Changes in release 3.22.11</A></H3>


<UL>
<LI>

<STRONG>IMPORTANT</STRONG>: You must run the <CODE>mysql_fix_privilege_tables</CODE> script
when you upgrade to this version!  This is needed because of the new
<CODE>GRANT</CODE> system. If you don't do this, you will get <CODE>Access
denied</CODE> when you try to use <CODE>ALTER TABLE</CODE>, <CODE>CREATE INDEX</CODE> or
<CODE>DROP INDEX</CODE>.
<LI>

<CODE>GRANT</CODE> to allow/deny users table and column access.
<LI>

Changed <CODE>USER()</CODE> to return <CODE>user@host</CODE>
<LI>

Changed the syntax for how to set <CODE>PASSWORD</CODE> for another user.
<LI>

New command <CODE>FLUSH STATUS</CODE> that sets most status variables to zero.
<LI>

New status variables: <CODE>aborted_threads</CODE>, <CODE>aborted_connects</CODE>.
<LI>

New option variable: <CODE>connection_timeout</CODE>.
<LI>

Added support for Thai sorting (by Pruet Boonma
<LI>

Slovak and japanese error messages.
<LI>

Configuration and portability fixes.
<LI>

Added option <CODE>SET SQL_WARNINGS=1</CODE> to get a warning count also for simple
inserts.
<LI>

<STRONG>MySQL</STRONG> now uses <CODE>SIGTERM</CODE> instead of <CODE>SIGQUIT</CODE> with
shutdown to work better on FreeBSD.
<LI>

Added option <CODE>\G</CODE> (print vertically) to <CODE>mysql</CODE>.
<LI>

<CODE>SELECT HIGH_PRIORITY</CODE> ... killed <CODE>mysqld</CODE>.
<LI>

<CODE>IS NULL</CODE> on a <CODE>AUTO_INCREMENT</CODE> column in a <CODE>LEFT JOIN</CODE> didn't
work as expected.
<LI>

New function <CODE>MAKE_SET()</CODE>.
</UL>



<H3><A NAME="News-3.22.10" HREF="manual_toc.html#News-3.22.10">D.2.16  Changes in release 3.22.10</A></H3>


<UL>
<LI>

<CODE>mysql_install_db</CODE> no longer starts the <STRONG>MySQL</STRONG> server!  You
should start <CODE>mysqld</CODE> with <CODE>safe_mysqld</CODE> after installing it!  The
<STRONG>MySQL</STRONG> RPM will however start the server as before.
<LI>

Added <CODE>--bootstrap</CODE> option to <CODE>mysqld</CODE> and recoded
<CODE>mysql_install_db</CODE> to use it.  This will make it easier to install
<STRONG>MySQL</STRONG> with RPMs.
<LI>

Changed <CODE>+</CODE>, <CODE>-</CODE> (sign and minus), <CODE>*</CODE>, <CODE>/</CODE>, <CODE>%</CODE>,
<CODE>ABS()</CODE> and <CODE>MOD()</CODE> to be <CODE>BIGINT</CODE> aware (64-bit safe).
<LI>

Fixed a bug in <CODE>ALTER TABLE</CODE> that caused <CODE>mysqld</CODE> to crash.
<LI>

<STRONG>MySQL</STRONG> now always reports the conflicting key values when a
duplicate key entry occurs. (Before this was only reported for <CODE>INSERT</CODE>).
<LI>

New syntax: <CODE>INSERT INTO tbl_name SET col_name=value,col_name=value,...</CODE>
<LI>

Most errors in the <TT>`.err'</TT> log are now prefixed with a time stamp.
<LI>

Added option <CODE>MYSQL_INIT_COMMAND</CODE> to <CODE>mysql_options()</CODE> to make
a query on connect or reconnect.
<LI>

Added option <CODE>MYSQL_READ_DEFAULT_FILE</CODE> and
<CODE>MYSQL_READ_DEFAULT_GROUP</CODE> to <CODE>mysql_options()</CODE> to read the
following parameters from the <STRONG>MySQL</STRONG> option files: port, socket,
compress, password, pipe, timeout, user, init-command, host and
database.
<LI>

Added <CODE>maybe_null</CODE> to the UDF structure.
<LI>

Added option <CODE>IGNORE</CODE> to <CODE>INSERT</CODE> statemants with many rows.
<LI>

Fixed some problems with sorting of the koi8 character sets; Users of koi8
<STRONG>MUST</STRONG> run <CODE>isamchk -rq</CODE> on each table that has an index on
a <CODE>CHAR</CODE> or <CODE>VARCHAR</CODE> column.
<LI>

New script <CODE>mysql_setpermission</CODE>, by Luuk de Boer, allows one
to easily create new users with permissions for specific databases.
<LI>

Allow use of hexadecimal strings (0x...) when specifying a constant string
(like in the column separators with <CODE>LOAD DATA INFILE</CODE>).
<LI>

Ported to OS/2 (thanks to Antony T. Curtis <a HREF="mailto:antony.curtis@olcs.net">antony.curtis@olcs.net</a>).
<LI>

Added more variables to <CODE>SHOW STATUS</CODE> and changed format of output to
be like <CODE>SHOW VARIABLES</CODE>.
<LI>

Added <CODE>extended-status</CODE> command to <CODE>mysqladmin</CODE> which will show the
new status variables.
</UL>



<H3><A NAME="News-3.22.9" HREF="manual_toc.html#News-3.22.9">D.2.17  Changes in release 3.22.9</A></H3>


<UL>
<LI>

<CODE>SET SQL_LOG_UPDATE=0</CODE> caused a lockup of the server.
<LI>

New SQL command:  <CODE>FLUSH [ TABLES | HOSTS | LOGS | PRIVILEGES ] [, ...]</CODE>
<LI>

New SQL command:  <CODE>KILL</CODE> thread_id
<LI>

Added casts and changed include files to make <STRONG>MySQL</STRONG> easier to
compile on AIX and DEC OSF1 4.x
<LI>

Fixed conversion problem when using <CODE>ALTER TABLE</CODE> from a <CODE>INT</CODE>
to a short <CODE>CHAR()</CODE> column.
<LI>

Added <CODE>SELECT HIGH_PRIORITY</CODE>; This will get a lock for the
<CODE>SELECT</CODE> even if there is a thread waiting for another
<CODE>SELECT</CODE> to get a <CODE>WRITE LOCK</CODE>.
<LI>

Moved wild_compare to string class to be able to use <CODE>LIKE</CODE> on
<CODE>BLOB</CODE>/<CODE>TEXT</CODE> columns with <CODE>\0</CODE>.
<LI>

Added <CODE>ESCAPE</CODE> option to <CODE>LIKE</CODE>.
<LI>

Added a lot more output to <CODE>mysqladmin debug</CODE>.
<LI>

You can now start <CODE>mysqld</CODE> on Win32 with the <CODE>--flush</CODE> option.
This will flush all tables to disk after each update.  This makes things
much safer on NT/Win98 but also <STRONG>MUCH</STRONG> slower.
</UL>



<H3><A NAME="News-3.22.8" HREF="manual_toc.html#News-3.22.8">D.2.18  Changes in release 3.22.8</A></H3>


<UL>
<LI>

Czech character sets should now work much better.  You must also install
<a HREF="ftp://www.mysql.com/pub/mysql/Downloads/Patches/czech-3.22.8-patch">ftp://www.mysql.com/pub/mysql/Downloads/Patches/czech-3.22.8-patch</a>.
This patch should also be installed if you are using a character set with
uses <CODE>my_strcoll()</CODE>!  The patch should always be safe to install (for any system),
but as this patch changes ISAM internals it's not yet in the default
distribution.
<LI>

<CODE>DATE_ADD()</CODE> and <CODE>DATE_SUB()</CODE> didn't work with group functions.
<LI>

<CODE>mysql</CODE> will now also try to reconnect on <CODE>USE DATABASE</CODE> commands.
<LI>

Fix problem with <CODE>ORDER BY</CODE> and <CODE>LEFT JOIN</CODE> and <CODE>const</CODE> tables.
<LI>

Fixed problem with <CODE>ORDER BY</CODE> if the first <CODE>ORDER BY</CODE> column
was a key and the rest of the <CODE>ORDER BY</CODE> columns wasn't part of the key.
<LI>

Fixed a big problem with <CODE>OPTIMIZE TABLE</CODE>.
<LI>

<STRONG>MySQL</STRONG> clients on NT will now by default first try to connect with
named pipes and after this with TCP/IP.
<LI>

Fixed a problem with <CODE>DROP TABLE</CODE> and <CODE>mysqladmin shutdown</CODE> on Win32
(a fatal bug from 3.22.6).
<LI>

Fixed problems with <CODE>TIME columns</CODE> and negative strings.
<LI>

Added an extra thread signal loop on shutdown to avoid some error messages
from the client.
<LI>

<STRONG>MySQL</STRONG> now uses the next available number as extension for the update
log file.
<LI>

Added patches for UNIXWARE 7.
</UL>



<H3><A NAME="News-3.22.7" HREF="manual_toc.html#News-3.22.7">D.2.19  Changes in release 3.22.7</A></H3>


<UL>
<LI>

Added <CODE>LIMIT</CODE> clause for the <CODE>DELETE</CODE> statement.
<LI>

You can now use the <CODE>/*! ... */</CODE> syntax to hide <STRONG>MySQL</STRONG>-specific
keywords when you write portable code.  <STRONG>MySQL</STRONG> will parse the code
inside the comments as if the surrounding <CODE>/*!</CODE> and <CODE>*/</CODE> comment
characters didn't exist.
<LI>

<CODE>OPTIMIZE TABLE tbl_name</CODE> can now be used to reclaim disk space
after many deletes.  Currently, this uses <CODE>ALTER TABLE</CODE> to re-generate
the table, but in the future it will use an integrated <CODE>isamchk</CODE>
for more speed.
<LI>

Upgraded <CODE>libtool</CODE> to get the configure more portable.
<LI>

Fixed slow <CODE>UPDATE</CODE> and <CODE>DELETE</CODE> operations when using
<CODE>DATETIME</CODE> or <CODE>DATE</CODE> keys.
<LI>

Changed optimizer to make it better at deciding when to do a full join
and when using keys.
<LI>

You can now use <CODE>mysqladmin proc</CODE> to display information about your own
threads. Only users with the <STRONG>Process_priv</STRONG> privilege can get
information about all threads.
<LI>

Added handling of formats <CODE>YYMMDD</CODE>, <CODE>YYYYMMDD</CODE>,
<CODE>YYMMDDHHMMSS</CODE> for numbers when using <CODE>DATETIME</CODE> and
<CODE>TIMESTAMP</CODE> types. (Formerly these formats only worked with strings.)
<LI>

Added connect option <CODE>CLIENT_IGNORE_SPACE</CODE> to allow use of spaces
after function names and before <SAMP>`('</SAMP> (Powerbuilder requires this).
This will make all function names reserved words.
<LI>

Added the <CODE>--log-long-format</CODE> option to <CODE>mysqld</CODE> to enable timestamps
and INSERT_ID's in the update log.
<LI>

Added <CODE>--where</CODE> option to <CODE>mysqldump</CODE> (patch by Jim Faucette).
<LI>

The lexical analyzer now uses "perfect hashing" for faster parsing of SQL
statements.
</UL>



<H3><A NAME="News-3.22.6" HREF="manual_toc.html#News-3.22.6">D.2.20  Changes in release 3.22.6</A></H3>


<UL>
<LI>

Faster <CODE>mysqldump</CODE>.
<LI>

For the <CODE>LOAD DATA INFILE</CODE> statement, you can now use the new <CODE>LOCAL</CODE>
keyword to read the file from the client.  <CODE>mysqlimport</CODE> will
automatically use <CODE>LOCAL</CODE> when importing with the TCP/IP protocol.
<LI>

Fixed small optimize problem when updating keys.
<LI>

Changed makefiles to support shared libraries.
<LI>

<STRONG>MySQL</STRONG>-NT can now use named pipes, which means that you can now use
<STRONG>MySQL</STRONG>-NT without having to install TCP/IP.
</UL>



<H3><A NAME="News-3.22.5" HREF="manual_toc.html#News-3.22.5">D.2.21  Changes in release 3.22.5</A></H3>


<UL>
<LI>

All table lock handing is changed to avoid some very subtle
deadlocks when using <CODE>DROP TABLE</CODE>, <CODE>ALTER TABLE</CODE>, <CODE>DELETE FROM
TABLE</CODE> and <CODE>mysqladmin flush-tables</CODE> under heavy usage.
Changed locking code to get better handling of locks of different types.
<LI>

Updated <CODE>DBI</CODE> to 1.00 and <CODE>DBD</CODE> to 1.2.0.
<LI>

Added a check that the error message file contains error messages suitable for
the current version of <CODE>mysqld</CODE>. (To avoid errors if you accidentally
try to use an old error message file.)
<LI>

All count structures in the client (<CODE>affected_rows()</CODE>,
<CODE>insert_id()</CODE>,...) are now of type <CODE>BIGINT</CODE> to allow 64-bit values
to be used.
This required a minor change in the <STRONG>MySQL</STRONG> protocol which should affect
only old clients when using tables with <CODE>AUTO_INCREMENT</CODE> values &#62; 24M.
<LI>

The return type of <CODE>mysql_fetch_lengths()</CODE> has changed from <CODE>uint *</CODE>
to <CODE>ulong *</CODE>. This may give a warning for old clients but should work
on most machines.
<LI>

Change <CODE>mysys</CODE> and <CODE>dbug</CODE> libraries to allocate all thread variables
in one struct.  This makes it easier to make a threaded <TT>`libmysql.dll'</TT>
library.
<LI>

Use the result from <CODE>gethostname()</CODE> (instead of <CODE>uname()</CODE>) when
constructing <TT>`.pid'</TT> file names.
<LI>

New better compressed server/client protocol.
<LI>

<CODE>COUNT()</CODE>, <CODE>STD()</CODE> and <CODE>AVG()</CODE> are extended to handle more than
4G rows.
<LI>

You can now store values in the range <CODE>-838:59:59</CODE> &#60;= x &#60;=
<CODE>838:59:59</CODE> in a <CODE>TIME</CODE> column.
<LI>

<STRONG>WARNING: INCOMPATIBLE CHANGE!!</STRONG>
If you set a <CODE>TIME</CODE> column to too short a value, <STRONG>MySQL</STRONG> now
assumes the value is given as: <CODE>[[[D ]HH:]MM:]SS</CODE> instead of
<CODE>HH[:MM[:SS]]</CODE>.
<LI>

<CODE>TIME_TO_SEC()</CODE> and <CODE>SEC_TO_TIME()</CODE> can now handle negative times
and hours up to 32767.
<LI>

Added new option
<CODE>SET OPTION SQL_LOG_UPDATE={0|1}</CODE> to allow users with
the <STRONG>process</STRONG> privilege to bypass the update log.
(Modified patch from Sergey A Mukhin <a HREF="mailto:violet@rosnet.net">violet@rosnet.net</a>.)
<LI>

Fixed fatal bug in <CODE>LPAD()</CODE>.
<LI>

Initialize line buffer in <TT>`mysql.cc'</TT> to make <CODE>BLOB</CODE> reading from
pipes safer.
<LI>

Added <CODE>-O max_connect_errors=#</CODE> option to <CODE>mysqld</CODE>.
Connect errors are now reset for each correct connection.
<LI>

Increased the default value of <CODE>max_allowed_packet</CODE> to <CODE>1M</CODE> in
<CODE>mysqld</CODE>.
<LI>

Added <CODE>--low-priority-updates</CODE> option to <CODE>mysqld</CODE>, to give
<CODE>UPDATE</CODE> operations lower priority than retrievals.  You can now use
<CODE>{INSERT | REPLACE | UPDATE | DELETE} LOW_PRIORITY ...</CODE>
You can also use <CODE>SET OPTION LOW_PRIORITY_UPDATES={0|1}</CODE> to change the
priority for one thread.
One side effect is that <CODE>LOW_PRIORITY</CODE> is now a reserved word. :(
<LI>

Add support for <CODE>INSERT INTO table ... VALUES(...),(...),(...)</CODE>,
to allow inserting multiple rows with a single statement.
<LI>

<CODE>INSERT INTO tbl_name</CODE> is now also cached when used with <CODE>LOCK TABLES</CODE>.
(Previously only <CODE>INSERT ... SELECT</CODE> and <CODE>LOAD DATA INFILE</CODE> were
cached.)
<LI>

Allow <CODE>GROUP BY</CODE> functions with <CODE>HAVING</CODE>:

<PRE>
mysql&#62; SELECT col FROM table GROUP BY col HAVING COUNT(*)&#62;0;
</PRE>

<LI>

<CODE>mysqld</CODE> will now ignore trailing <SAMP>`;'</SAMP> characters in queries. This
is to make it easier to migrate from some other SQL servers that require the
trailing <SAMP>`;'</SAMP>.
<LI>

Fix for corrupted fixed-format output generated by <CODE>SELECT INTO OUTFILE</CODE>.
<LI>

<STRONG>WARNING: INCOMPATIBLE CHANGE!!</STRONG>
Added Oracle <CODE>GREATEST()</CODE> and <CODE>LEAST()</CODE> functions.  You must now use
these instead of the <CODE>MAX()</CODE> and <CODE>MIN()</CODE> functions to get the
largest/smallest value from a list of values. These can now handle <CODE>REAL</CODE>,
<CODE>BIGINT</CODE> and string (<CODE>CHAR</CODE> or <CODE>VARCHAR</CODE>) values.
<LI>

<STRONG>WARNING: INCOMPATIBLE CHANGE!!</STRONG>
<CODE>DAYOFWEEK()</CODE> had offset 0 for Sunday. Changed the offset to 1.
<LI>

Give an error for queries that mix <CODE>GROUP BY</CODE> columns and fields when
there is no <CODE>GROUP BY</CODE> specification.
<LI>

Added <CODE>--vertical</CODE> option to <CODE>mysql</CODE>, for printing results in
vertical mode.
<LI>

Index-only optimization; some queries are now resolved using
only indexes.  Until <STRONG>MySQL</STRONG> 4.0, this works only for numeric columns.
See section <A HREF="manual.html#MySQL_indexes">10.4  How <STRONG>MySQL</STRONG> uses indexes</A>.
<LI>

Lots of new benchmarks.
<LI>

A new C API chapter and lots of other improvements in the manual.
</UL>



<H3><A NAME="News-3.22.4" HREF="manual_toc.html#News-3.22.4">D.2.22  Changes in release 3.22.4</A></H3>


<UL>
<LI>

Added <CODE>--tmpdir</CODE> option to <CODE>mysqld</CODE>, for specifying the location
of the temporary file directory.
<LI>

<STRONG>MySQL</STRONG> now automatically changes a query from an ODBC client:

<PRE>
SELECT ... FROM table WHERE auto_increment_column IS NULL
</PRE>

to:

<PRE>
SELECT ... FROM table WHERE auto_increment_column == LAST_INSERT_ID()
</PRE>

This allows some ODBC programs (Delphi, Access) to retrieve the newly
inserted row to fetch the <CODE>AUTO_INCREMENT</CODE> id.
<LI>

<CODE>DROP TABLE</CODE> now waits for all users to free a table before deleting it.
<LI>

Fixed small memory leak in the new connect protocol.
<LI>

New functions <CODE>BIN()</CODE>, <CODE>HEX()</CODE> and <CODE>CONV()</CODE> for converting
between different number bases.
<LI>

Added function <CODE>SUBSTRING()</CODE> with 2 arguments.
<LI>

If you created a table with a record length smaller than 5, you couldn't
delete rows from the table.
<LI>

Added optimization to remove const reference tables from <CODE>ORDER BY</CODE> and
<CODE>GROUP BY</CODE>.
<LI>

<CODE>mysqld</CODE> now automatically disables system locking on Linux and Win32,
and for systems that use MIT-pthreads.  You can force the use of locking
with the <CODE>--enable-locking</CODE> option.
<LI>

Added <CODE>--console</CODE> option to <CODE>mysqld</CODE>, to force a console window
(for error messages) when using Win32.
<LI>

Fixed table locks for Win32.
<LI>

Allow <SAMP>`$'</SAMP> in identifiers.
<LI>

Changed name of user-specific configuration file from <TT>`my.cnf'</TT> to
<TT>`.my.cnf'</TT> (Unix only).
<LI>

Added <CODE>DATE_ADD()</CODE> and <CODE>DATE_SUB()</CODE> functions.
</UL>



<H3><A NAME="News-3.22.3" HREF="manual_toc.html#News-3.22.3">D.2.23  Changes in release 3.22.3</A></H3>


<UL>
<LI>

Fixed a lock problem (bug in <STRONG>MySQL</STRONG> 3.22.1) when closing temporary tables.
<LI>

Added missing <CODE>mysql_ping()</CODE> to the client library.
<LI>

Added <CODE>--compress</CODE> option to all <STRONG>MySQL</STRONG> clients.
<LI>

Changed <CODE>byte</CODE> to <CODE>char</CODE> in <TT>`mysql.h'</TT> and <TT>`mysql_com.h'</TT>.
</UL>



<H3><A NAME="News-3.22.2" HREF="manual_toc.html#News-3.22.2">D.2.24  Changes in release 3.22.2</A></H3>


<UL>
<LI>

Searching on multiple constant keys that matched more than 30% of the rows
didn't always use the best possible key.
<LI>

New functions <CODE>&#60;&#60;</CODE>, <CODE>&#62;&#62;</CODE>, <CODE>RPAD()</CODE> and <CODE>LPAD()</CODE>.
<LI>

You can now save default options (like passwords) in a configuration file
(<TT>`my.cnf'</TT>).
<LI>

Lots of small changes to get <CODE>ORDER BY</CODE> to work when no records are found
when using fields that are not in <CODE>GROUP BY</CODE> (<STRONG>MySQL</STRONG> extension).
<LI>

Added <CODE>--chroot</CODE> option to <CODE>mysqld</CODE>, to start <CODE>mysqld</CODE> in
a chroot environment (by Nikki Chumakov <a HREF="mailto:nikkic@cityline.ru">nikkic@cityline.ru</a>).
<LI>

Trailing spaces are now ignored when comparing case-sensitive strings;
this should fix some problems with ODBC and flag 512!
<LI>

Fixed a core-dump bug in the range optimizer.
<LI>

Added <CODE>--one-thread</CODE> option to <CODE>mysqld</CODE>, for debugging with
LinuxThreads (or <CODE>glibc</CODE>).  (This replaces the <CODE>-T32</CODE> flag)
<LI>

Added <CODE>DROP TABLE IF EXISTS</CODE> to prevent an error from occurring if the
table doesn't exist.
<LI>

<CODE>IF</CODE> and <CODE>EXISTS</CODE> are now reserved words (they would have to
be sooner or later).
<LI>

Added lots of new options to <CODE>mysqldump</CODE>.
<LI>

Server error messages are now in <TT>`mysqld_error.h'</TT>.
<LI>

The server/client protocol now supports compression.
<LI>

All bug fixes from <STRONG>MySQL</STRONG> 3.21.32.
</UL>



<H3><A NAME="News-3.22.1" HREF="manual_toc.html#News-3.22.1">D.2.25  Changes in release 3.22.1</A></H3>


<UL>
<LI>

Added new C API function <CODE>mysql_ping()</CODE>.
<LI>

Added new API functions <CODE>mysql_init()</CODE> and <CODE>mysql_options()</CODE>.
You now MUST call <CODE>mysql_init()</CODE> before you call
<CODE>mysql_real_connect()</CODE>.
You don't have to call <CODE>mysql_init()</CODE> if you only use
<CODE>mysql_connect()</CODE>.
<LI>

Added <CODE>mysql_options(...,MYSQL_OPT_CONNECT_TIMEOUT,...)</CODE> so you can set a
timeout for connecting to a server.
<LI>

Added <CODE>--timeout</CODE> option to <CODE>mysqladmin</CODE>, as a test of
<CODE>mysql_options()</CODE>.
<LI>

Added <CODE>AFTER column</CODE> and <CODE>FIRST</CODE> options to
<CODE>ALTER TABLE ... ADD columns</CODE>.
This makes it possible to add a new column at some specific location
within a row in an existing table.
<LI>

<CODE>WEEK()</CODE> now takes an optional argument to allow handling of weeks when
the week starts on Monday (some European countries).  By default,
<CODE>WEEK()</CODE> assumes the week starts on Sunday.
<LI>

<CODE>TIME</CODE> columns weren't stored properly (bug in <STRONG>MySQL</STRONG> 3.22.0).
<LI>

<CODE>UPDATE</CODE> now returns information about how many rows were
matched and updated, and how many "warnings" occurred when doing the update.
<LI>

Fixed incorrect result from <CODE>FORMAT(-100,2)</CODE>.
<LI>

<CODE>ENUM</CODE> and <CODE>SET</CODE> columns were compared in binary (case-sensitive)
fashion; changed to be case insensitive.
</UL>



<H3><A NAME="News-3.22.0" HREF="manual_toc.html#News-3.22.0">D.2.26  Changes in release 3.22.0</A></H3>


<UL>
<LI>

New (backward compatible) connect protocol that allows you to
specify the database to use when connecting, to get much faster
connections to a specific database.

The <CODE>mysql_real_connect()</CODE> call is changed to:


<PRE>
mysql_real_connect(MYSQL *mysql, const char *host, const char *user,
                   const char *passwd, const char *db, uint port,
                   const char *unix_socket, uint client_flag)
</PRE>

<LI>

Each connection is handled by its own thread, rather than by the
master <CODE>accept()</CODE> thread.  This fixes permanently the telnet bug
that was a topic on the mail list some time ago.
<LI>

All TCP/IP connections are now checked with backward resolution of
the hostname to get better security. <CODE>mysqld</CODE> now has a local hostname
resolver cache so connections should actually be faster than before,
even with this feature.
<LI>

A site automatically will be blocked from future connections if someone
repeatedly connects with an "improper header" (like when one uses telnet).
<LI>

You can now refer to tables in different databases with references of the form
<CODE>tbl_name@db_name</CODE> or <CODE>db_name.tbl_name</CODE>.  This makes it possible to
give a user read access to some tables and write access to others simply by
keeping them in different databases!
<LI>

Added <CODE>--user</CODE> option to <CODE>mysqld</CODE>, to allow it to run
as another Unix user (if it is started as the Unix <CODE>root</CODE> user).
<LI>

Added caching of users and access rights (for faster access rights checking)
<LI>

Normal users (not anonymous ones) can change their password with
<CODE>mysqladmin password 'new_password'</CODE>.  This uses encrypted passwords
that are not logged in the normal <STRONG>MySQL</STRONG> log!
<LI>

All important string functions are now coded in assembler for x86 Linux
machines.  This gives a speedup of 10% in many cases.
<LI>

For tables that have many columns, the column names are now hashed for
much faster column name lookup (this will speed up some benchmark
tests a lot!)
<LI>

Some benchmarks are changed to get better individual timing.
(Some loops were so short that a specific test took &#60; 2 seconds. The
loops have been changed to take about 20 seconds to make it easier
to compare different databases. A test that took 1-2 seconds before
now takes 11-24 seconds, which is much better)
<LI>

Re-arranged <CODE>SELECT</CODE> code to handle some very specific queries
involving group functions (like <CODE>COUNT(*)</CODE>) without a <CODE>GROUP BY</CODE> but
with <CODE>HAVING</CODE>. The following now works:

<PRE>
mysql&#62; SELECT count(*) as C FROM table HAVING C &#62; 1;
</PRE>

<LI>

Changed the protocol for field functions to be faster and avoid some
calls to <CODE>malloc()</CODE>.
<LI>

Added <CODE>-T32</CODE> option to <CODE>mysqld</CODE>, for running all queries under the
main thread.  This makes it possible to debug <CODE>mysqld</CODE> under Linux with
<CODE>gdb</CODE>!
<LI>

Added optimization of <CODE>not_null_column IS NULL</CODE> (needed for some Access
queries).
<LI>

Allow <CODE>STRAIGHT_JOIN</CODE> to be used between two tables to force the optimizer
to join them in a specific order.
<LI>

String functions now return <CODE>VARCHAR</CODE> rather than <CODE>CHAR</CODE> and
the column type is now <CODE>VARCHAR</CODE> for fields saved as <CODE>VARCHAR</CODE>.
This should make the <STRONG>MyODBC</STRONG> driver better, but may break some old
<STRONG>MySQL</STRONG> clients that don't handle <CODE>FIELD_TYPE_VARCHAR</CODE> the same
way as <CODE>FIELD_TYPE_CHAR</CODE>.
<LI>

<CODE>CREATE INDEX</CODE> and <CODE>DROP INDEX</CODE> are now implemented through
<CODE>ALTER TABLE</CODE>.
<CODE>CREATE TABLE</CODE> is still the recommended (fast) way to create indexes.
<LI>

Added <CODE>--set-variable</CODE> option <CODE>wait_timeout</CODE> to <CODE>mysqld</CODE>.
<LI>

Added time column to <CODE>mysqladmin processlist</CODE> to show how long a query
has taken or how long a thread has slept.
<LI>

Added lots of new variables to <CODE>show variables</CODE> and some new to
<CODE>show status</CODE>.
<LI>

Added new type <CODE>YEAR</CODE>. <CODE>YEAR</CODE> is stored in 1 byte with allowable
values of 0, and 1901 to 2155.
<LI>

Added new <CODE>DATE</CODE> type that is stored in 3 bytes rather than 4 bytes.
All new tables are created with the new date type if you don't use the
<CODE>--old-protocol</CODE> option to <CODE>mysqld</CODE>.
<LI>

Fixed bug in record caches; for some queries, you could get
<CODE>Error from table handler: #</CODE> on some operating systems.
<LI>

Added <CODE>--enable-assembler</CODE> option to <CODE>configure</CODE>, for x86 machines
(tested on Linux + <CODE>gcc</CODE>).  This will enable assembler functions for the
most important string functions for more speed!
</UL>



<H2><A NAME="News-3.21.x" HREF="manual_toc.html#News-3.21.x">D.3  Changes in release 3.21.x</A></H2>



<H3><A NAME="News-3.21.33" HREF="manual_toc.html#News-3.21.33">D.3.1  Changes in release 3.21.33</A></H3>


<UL>
<LI>

Fixed problem when sending <CODE>SIGHUP</CODE> to <CODE>mysqld</CODE>;
<CODE>mysqld</CODE> core dumped when starting from boot on some systems.
<LI>

Fixed problem with losing a little memory for some connections.
<LI>

<CODE>DELETE FROM tbl_name</CODE> without a <CODE>WHERE</CODE> condition is now done the
long way when you use <CODE>LOCK TABLES</CODE> or if the table is in use, to
avoid race conditions.
<LI>

<CODE>INSERT INTO TABLE (timestamp_column) VALUES (NULL);</CODE> didn't set timestamp.
</UL>



<H3><A NAME="News-3.21.32" HREF="manual_toc.html#News-3.21.32">D.3.2  Changes in release 3.21.32</A></H3>


<UL>
<LI>

Fixed some possible race conditions when doing many reopen/close on the same
tables under heavy load!  This can happen if you execute <CODE>mysqladmin
refresh</CODE> often. This could in some very rare cases corrupt the header of the
index file and cause error 126 or 138.

<LI>

Fixed fatal bug in <CODE>refresh()</CODE> when running with the <CODE>--skip-locking</CODE>
option.
There was a "very small" time gap after a <CODE>mysqladmin refresh</CODE> when
a table could be corrupted if one thread updated a table while another
thread did <CODE>mysqladmin refresh</CODE> and another thread started a new update
ont the same table before the first thread had finished.
A refresh (or <CODE>--flush-tables</CODE>) will now not return until all used tables
are closed!
<LI>

<CODE>SELECT DISTINCT</CODE> with a <CODE>WHERE</CODE> clause that didn't match any rows
returned a row in some contexts (bug only in 3.21.31).
<LI>

<CODE>GROUP BY</CODE> + <CODE>ORDER BY</CODE> returned one empty row when no rows where
found.
<LI>

Fixed a bug in the range optimizer that wrote
<CODE>Use_count: Wrong count for ...</CODE> in the error log file.
</UL>



<H3><A NAME="News-3.21.31" HREF="manual_toc.html#News-3.21.31">D.3.3  Changes in release 3.21.31</A></H3>

<UL>
<LI>

Fixed a sign extension problem for the <CODE>TINYINT</CODE> type on Irix.
<LI>

Fixed problem with <CODE>LEFT("constant_string",function)</CODE>.
<LI>

Fixed problem with <CODE>FIND_IN_SET()</CODE>.
<LI>

<CODE>LEFT JOIN</CODE> core dumped if the second table is used with a constant
<CODE>WHERE/ON</CODE> expression that uniquely identifies one record.
<LI>

Fixed problems with <CODE>DATE_FORMAT()</CODE> and incorrect dates.
<CODE>DATE_FORMAT()</CODE> now ignores <CODE>'%'</CODE> to make it possible to extend
it more easily in the future.
</UL>



<H3><A NAME="News-3.21.30" HREF="manual_toc.html#News-3.21.30">D.3.4  Changes in release 3.21.30</A></H3>

<UL>
<LI>

<CODE>mysql</CODE> now returns an exit code &#62; 0 if the query returned an error.
<LI>

Saving of command line history to file in <CODE>mysql</CODE> client.
By Tommy Larsen <a HREF="mailto:tommy@mix.hive.no">tommy@mix.hive.no</a>.
<LI>

Fixed problem with empty lines that were ignored in <TT>`mysql.cc'</TT>.
<LI>

Save the pid of the signal handler thread in the pid file instead
of the pid of the main thread.
<LI>

Added patch by <a HREF="mailto:tommy@valley.ne.jp">tommy@valley.ne.jp</a> to support Japanese characters
SJIS and UJIS.
<LI>

Changed <CODE>safe_mysqld</CODE> to redirect startup messages to
<CODE>'hostname'.err</CODE> instead
of <CODE>'hostname'.log</CODE> to reclaim file space on <CODE>mysqladmin refresh</CODE>.
<LI>

<CODE>ENUM</CODE> always had the first entry as default value.
<LI>

<CODE>ALTER TABLE</CODE> wrote two entries to the update log.
<LI>

<CODE>sql_acc()</CODE> now closes the <CODE>mysql</CODE> grant tables after a reload to
save table space and memory.
<LI>

Changed <CODE>LOAD DATA</CODE> to use less memory with tables and <CODE>BLOB</CODE>
columns.
<LI>

Sorting on a function which made a division / 0 produced a wrong set
in some cases.
<LI>

Fixed <CODE>SELECT</CODE> problem with <CODE>LEFT()</CODE> when using the czech character
set.
<LI>

Fixed problem in <CODE>isamchk</CODE>; it couldn't repair a packed table in a very
unusual case.
<LI>

<CODE>SELECT</CODE> statements with <CODE>&#38;</CODE> or <CODE>|</CODE> (bit functions) failed on
columns with <CODE>NULL</CODE> values.
<LI>

When comparing a field = field, where one of the fields was a part key,
only the length of the part key was compared.
</UL>



<H3><A NAME="News-3.21.29" HREF="manual_toc.html#News-3.21.29">D.3.5  Changes in release 3.21.29</A></H3>

<UL>
<LI>

<CODE>LOCK TABLES</CODE> + <CODE>DELETE from tbl_name</CODE> never removed locks properly.
<LI>

Fixed problem when grouping on an <CODE>OR</CODE> function.
<LI>

Fixed permission problem with <CODE>umask()</CODE> and creating new databases.
<LI>

Fixed permission problem on result file with <CODE>SELECT ... INTO OUTFILE ...</CODE>
<LI>

Fixed problem in range optimizer (core dump) for a very complex query.
<LI>

Fixed problem when using <CODE>MIN(integer)</CODE> or <CODE>MAX(integer)</CODE> in
<CODE>GROUP BY</CODE>.
<LI>

Fixed bug on Alpha when using integer keys. (Other keys worked on Alpha).
<LI>

Fixed bug in <CODE>WEEK("XXXX-xx-01")</CODE>.
</UL>



<H3><A NAME="News-3.21.28" HREF="manual_toc.html#News-3.21.28">D.3.6  Changes in release 3.21.28</A></H3>

<UL>
<LI>

Fixed socket permission (clients couldn't connect to Unix socket on Linux).
<LI>

Fixed bug in record caches; for some queries, you could get
<CODE>Error from table handler: #</CODE> on some operating systems.
</UL>



<H3><A NAME="News-3.21.27" HREF="manual_toc.html#News-3.21.27">D.3.7  Changes in release 3.21.27</A></H3>

<UL>
<LI>

Added user level lock functions <CODE>GET_LOCK(string,timeout)</CODE>,
<CODE>RELEASE_LOCK(string)</CODE>.
<LI>

Added <CODE>opened_tables</CODE> to <CODE>show status</CODE>.
<LI>

Changed connect timeout to 3 seconds to make it somewhat harder
for crackers to kill <CODE>mysqld</CODE> through telnet + TCP/IP.
<LI>

Fixed bug in range optimizer when using
<CODE>WHERE key_part_1 &#62;= something AND key_part_2 &#60;= something_else</CODE>.
<LI>

Changed <CODE>configure</CODE> for detection of FreeBSD 3.0 9803xx and above
<LI>

<CODE>WHERE</CODE> with string_column_key = constant_string didn't always find
all rows if the column had many values differing only with characters of
the same sort value (like e and 'e).
<LI>

Strings keys looked up with 'ref' were not compared in case-sensitive fashion.
<LI>

Added <CODE>umask()</CODE> to make log files non-readable for normal users.
<LI>

Ignore users with old (8-byte) password on startup if not using
<CODE>--old-protocol</CODE> option to <CODE>mysqld</CODE>.
<LI>

<CODE>SELECT</CODE> which matched all key fields returned the values in the
case of the matched values, not of the found values. (Minor problem.)
</UL>



<H3><A NAME="News-3.21.26" HREF="manual_toc.html#News-3.21.26">D.3.8  Changes in release 3.21.26</A></H3>

<UL>
<LI>

<CODE>FROM_DAYS(0)</CODE> now returns "0000-00-00".
<LI>

In <CODE>DATE_FORMAT()</CODE>, PM and AM were swapped for hours 00 and 12.
<LI>

Extended the default maximum key size to 256.
<LI>

Fixed bug when using <CODE>BLOB</CODE>/<CODE>TEXT</CODE> in <CODE>GROUP BY</CODE> with many
tables.
<LI>

An <CODE>ENUM</CODE> field that is not declared <CODE>NOT NULL</CODE> has <CODE>NULL</CODE> as
the default value.
(Previously, the default value was the first enumeration value.)
<LI>

Fixed bug in the join optimizer code when using many part keys
on the same key:  <CODE>INDEX (Organization,Surname(35),Initials(35))</CODE>.
<LI>

Added some tests to the table order optimizer to get some cases with
<CODE>SELECT ... FROM many_tables</CODE> much faster.
<LI>

Added a retry loop around <CODE>accept()</CODE> to possibly fix some problems on some
Linux machines.
</UL>



<H3><A NAME="News-3.21.25" HREF="manual_toc.html#News-3.21.25">D.3.9  Changes in release 3.21.25</A></H3>

<UL>
<LI>

Changed <CODE>typedef 'string'</CODE> to <CODE>typedef 'my_string'</CODE> for better
portability.
<LI>

You can now kill threads that are waiting on a disk full condition.
<LI>

Fixed some problems with UDF functions.
<LI>

Added long options to <CODE>isamchk</CODE>. Try <CODE>isamchk --help</CODE>.
<LI>

Fixed a bug when using 8 bytes long (alpha); <CODE>filesort()</CODE> didn't work.
Affects <CODE>DISTINCT</CODE>, <CODE>ORDER BY</CODE> and <CODE>GROUP BY</CODE> on 64-bit
processors.
</UL>



<H3><A NAME="News-3.21.24" HREF="manual_toc.html#News-3.21.24">D.3.10  Changes in release 3.21.24</A></H3>

<UL>
<LI>

Dynamic loadable functions. Based on source from Alexis Mikhailov.
<LI>

You couldn't delete from a table if no one had done a <CODE>SELECT</CODE> on the
table.
<LI>

Fixed problem with range optimizer with many <CODE>OR</CODE> operators on key parts
inside each other.
<LI>

Recoded <CODE>MIN()</CODE> and <CODE>MAX()</CODE> to work properly with strings and
<CODE>HAVING</CODE>.
<LI>

Changed default umask value for new files from <CODE>0664</CODE> to <CODE>0660</CODE>.
<LI>

Fixed problem with <CODE>LEFT JOIN</CODE> and constant expressions in the <CODE>ON</CODE>
part.
<LI>

Added Italian error messages from <a HREF="mailto:brenno@3cord.philips.nl">brenno@3cord.philips.nl</a>.
<LI>

<CODE>configure</CODE> now works better on OSF1 (tested on 4.0D).
<LI>

Added hooks to allow <CODE>LIKE</CODE> optimization with international character
support.
<LI>

Upgraded <CODE>DBI</CODE> to 0.93.
</UL>



<H3><A NAME="News-3.21.23" HREF="manual_toc.html#News-3.21.23">D.3.11  Changes in release 3.21.23</A></H3>

<UL>
<LI>

The following symbols are now reserved words:
<CODE>TIME</CODE>, <CODE>DATE</CODE>, <CODE>TIMESTAMP</CODE>, <CODE>TEXT</CODE>, <CODE>BIT</CODE>,
<CODE>ENUM</CODE>, <CODE>NO</CODE>, <CODE>ACTION</CODE>, <CODE>CHECK</CODE>, <CODE>YEAR</CODE>,
<CODE>MONTH</CODE>, <CODE>DAY</CODE>, <CODE>HOUR</CODE>, <CODE>MINUTE</CODE>, <CODE>SECOND</CODE>,
<CODE>STATUS</CODE>, <CODE>VARIABLES</CODE>.
<LI>

Setting a <CODE>TIMESTAMP</CODE> to <CODE>NULL</CODE> in <CODE>LOAD DATA INFILE ...</CODE> didn't
set the current time for the <CODE>TIMESTAMP</CODE>.
<LI>

Fix <CODE>BETWEEN</CODE> to recognize binary strings. Now <CODE>BETWEEN</CODE> is
case sensitive.
<LI>

Added <CODE>--skip-thread-priority</CODE> option to <CODE>mysqld</CODE>, for systems
where <CODE>mysqld</CODE>'s thread scheduling doesn't work properly (BSDI 3.1).
<LI>

Added ODBC functions <CODE>DAYNAME()</CODE> and <CODE>MONTHNAME()</CODE>.
<LI>

Added function <CODE>TIME_FORMAT()</CODE>.  This works like <CODE>DATE_FORMAT()</CODE>,
but takes a time string (<CODE>'HH:MM:DD'</CODE>) as argument.
<LI>

Fixed unlikely(?) key optimizer bug when using <CODE>OR</CODE>s of key parts
inside <CODE>AND</CODE>s.
<LI>

Added command <CODE>variables</CODE> to <CODE>mysqladmin</CODE>.
<LI>

A lot of small changes to the binary releases.
<LI>

Fixed a bug in the new protocol from <STRONG>MySQL</STRONG> 3.21.20.
<LI>

Changed <CODE>ALTER TABLE</CODE> to work with Win32 (Win32 can't rename open files).
Also fixed a couple of small bugs in the Win32 version.
<LI>

All standard <STRONG>MySQL</STRONG> clients are now ported to MySQL-Win32.
<LI>

<STRONG>MySQL</STRONG> can now be started as a service on NT.
</UL>



<H3><A NAME="News-3.21.22" HREF="manual_toc.html#News-3.21.22">D.3.12  Changes in release 3.21.22</A></H3>

<UL>
<LI>

Starting with this version, all <STRONG>MySQL</STRONG> distributions will be
configured, compiled and tested with <CODE>crash-me</CODE> and the benchmarks on
the following platforms: SunOS 5.6 sun4u, SunOS 5.5.1 sun4u, SunOS 4.14 sun4c,
SunOS 5.6 i86pc, Irix 6.3 mips5k, HP-UX 10.20 hppa, AIX 4.2.1 ppc,
OSF1 V4.0 alpha, FreeBSD 2.2.2 i86pc and BSDI 3.1 i386.
<LI>

Fix <CODE>COUNT(*)</CODE> problems when the <CODE>WHERE</CODE> clause didn't match any
records.  (Bug from 3.21.17.)
<LI>

Removed that <CODE>NULL = NULL</CODE> is true.  Now you must use <CODE>IS NULL</CODE>
or <CODE>IS NOT NULL</CODE> to test whether or not a value is <CODE>NULL</CODE>.
(This is according to ANSI SQL but may break
old applications that are ported from <CODE>mSQL</CODE>.)
You can get the old behavior by compiling with <CODE>-DmSQL_COMPLIANT</CODE>.
<LI>

Fixed bug that core dumped when using many <CODE>LEFT OUTER JOIN</CODE> clauses.
<LI>

Fixed bug in <CODE>ORDER BY</CODE> on string formula with possible <CODE>NULL</CODE> values.
<LI>

Fixed problem in range optimizer when using &#60;= on sub index.
<LI>

Added functions <CODE>DAYOFYEAR()</CODE>, <CODE>DAYOFMONTH()</CODE>, <CODE>MONTH()</CODE>,
<CODE>YEAR()</CODE>, <CODE>WEEK()</CODE>, <CODE>QUARTER()</CODE>, <CODE>HOUR()</CODE>, <CODE>MINUTE()</CODE>,
<CODE>SECOND()</CODE> and <CODE>FIND_IN_SET()</CODE>.
<LI>

Added command <CODE>SHOW VARIABLES</CODE>.
<LI>

Added support of "long constant strings" from ANSI SQL:

<PRE>
mysql&#62; SELECT 'first ' 'second';       -&#62; 'first second'
</PRE>

<LI>

Upgraded mSQL-Mysql-modules to 1.1825.
<LI>

Upgraded <CODE>mysqlaccess</CODE> to 2.02.
<LI>

Fixed problem with Russian character set and <CODE>LIKE</CODE>.
<LI>

Ported to OpenBSD 2.1.
<LI>

New Dutch error messages.
</UL>



<H3><A NAME="News-3.21.21a" HREF="manual_toc.html#News-3.21.21a">D.3.13  Changes in release 3.21.21a</A></H3>

<UL>
<LI>

Configure changes for some operating systems.
</UL>



<H3><A NAME="News-3.21.21" HREF="manual_toc.html#News-3.21.21">D.3.14  Changes in release 3.21.21</A></H3>

<UL>
<LI>

Fixed optimizer bug when using
<CODE>WHERE data_field = date_field2 AND date_field2 = constant</CODE>.
<LI>

Added command <CODE>SHOW STATUS</CODE>.
<LI>

Removed <TT>`manual.ps'</TT> from the source distribution to make it smaller.
</UL>



<H3><A NAME="News-3.21.20" HREF="manual_toc.html#News-3.21.20">D.3.15  Changes in release 3.21.20</A></H3>

<UL>
<LI>

Changed the maximum table name and column name lengths from 32 to 64.
<LI>

Aliases can now be of "any" length.
<LI>

Fixed <CODE>mysqladmin stat</CODE> to return the right number of queries.
<LI>

Changed protocol (downward compatible) to mark if a column has the
<CODE>AUTO_INCREMENT</CODE> attribute or is a <CODE>TIMESTAMP</CODE>. This is needed for
the new Java driver.
<LI>

Added Hebrew sorting order by Zeev Suraski.
<LI>

Solaris 2.6: Fixed <CODE>configure</CODE> bugs and increased maximum table size
from 2G to 4G.
</UL>



<H3><A NAME="News-3.21.19" HREF="manual_toc.html#News-3.21.19">D.3.16  Changes in release 3.21.19</A></H3>

<UL>
<LI>

Upgraded <CODE>DBD</CODE> to 1823. This version implements <CODE>mysql_use_result</CODE> in
<CODE>DBD-Mysql</CODE>.
<LI>

Benchmarks updated for empress (by Luuk).
<LI>

Fixed a case of slow range searching.
<LI>

Configure fixes (<TT>`Docs'</TT> directory).
<LI>

Added function <CODE>REVERSE()</CODE> (by Zeev Suraski).
</UL>



<H3><A NAME="News-3.21.18" HREF="manual_toc.html#News-3.21.18">D.3.17  Changes in release 3.21.18</A></H3>

<UL>
<LI>

Issue error message if client C functions are called in wrong order.
<LI>

Added automatic reconnect to the <TT>`libmysql.c'</TT> library. If a write command
fails, an automatic reconnect is done.
<LI>

Small sort sets no longer use temporary files.
<LI>

Upgraded <CODE>DBI</CODE> to 0.91.
<LI>

Fixed a couple of problems with <CODE>LEFT OUTER JOIN</CODE>.
<LI>

Added <CODE>CROSS JOIN</CODE> syntax. <CODE>CROSS</CODE> is now a reserved word.
<LI>

Recoded <CODE>yacc</CODE>/<CODE>bison</CODE> stack allocation to be even safer and to allow
<STRONG>MySQL</STRONG> to handle even bigger expressions.
<LI>

Fixed a couple of problems with the update log.
<LI>

<CODE>ORDER BY</CODE> was slow when used with key ranges.
</UL>



<H3><A NAME="News-3.21.17" HREF="manual_toc.html#News-3.21.17">D.3.18  Changes in release 3.21.17</A></H3>

<UL>
<LI>

Changed documentation string of <CODE>--with-unix-socket-path</CODE> to avoid
confusion.
<LI>

Added ODBC and ANSI SQL style <CODE>LEFT OUTER JOIN</CODE>.
<LI>

The following are new reserved words: <CODE>LEFT</CODE>, <CODE>NATURAL</CODE>,
<CODE>USING</CODE>.
<LI>

The client library now uses the value of the environment variable
<CODE>MYSQL_HOST</CODE> as the default host if it's defined.
<LI>

<CODE>SELECT column, SUM(expr)</CODE> now returns <CODE>NULL</CODE> for <CODE>column</CODE> when
there are matching rows.
<LI>

Fixed problem with comparing binary strings and <CODE>BLOB</CODE>s with ASCII
characters over 127.
<LI>

Fixed lock problem: when freeing a read lock on a table with multiple
read locks, a thread waiting for a write lock would have been given the lock.
This shouldn't affect data integrity, but could possibly make <CODE>mysqld</CODE>
restart if one thread was reading data that another thread modified.
<LI>

<CODE>LIMIT offset,count</CODE> didn't work in <CODE>INSERT ... SELECT</CODE>.
<LI>

Optimized key block caching. This will be quicker than the old algorithm when
using bigger key caches.
</UL>



<H3><A NAME="News-3.21.16" HREF="manual_toc.html#News-3.21.16">D.3.19  Changes in release 3.21.16</A></H3>


<UL>
<LI>

Added ODBC 2.0 &#38; 3.0 functions <CODE>POWER()</CODE>, <CODE>SPACE()</CODE>,
<CODE>COT()</CODE>, <CODE>DEGREES()</CODE>, <CODE>RADIANS()</CODE>, <CODE>ROUND(2 arg)</CODE>
and <CODE>TRUNCATE()</CODE>.
<LI>

<STRONG>WARNING: INCOMPATIBLE CHANGE!!</STRONG> <CODE>LOCATE()</CODE> parameters were
swapped according to ODBC standard. Fixed.
<LI>

Added function <CODE>TIME_TO_SEC()</CODE>.
<LI>

In some cases, default values were not used for <CODE>NOT NULL</CODE> fields.
<LI>

Timestamp wasn't always updated properly in <CODE>UPDATE SET ...</CODE> statements.
<LI>

Allow empty strings as default values for <CODE>BLOB</CODE> and <CODE>TEXT</CODE>, to
be compatible with <CODE>mysqldump</CODE>.
</UL>



<H3><A NAME="News-3.21.15" HREF="manual_toc.html#News-3.21.15">D.3.20  Changes in release 3.21.15</A></H3>


<UL>
<LI>

<STRONG>WARNING: INCOMPATIBLE CHANGE!!</STRONG> <CODE>mysqlperl</CODE> is now from
Msql-Mysql-modules. This means that <CODE>connect()</CODE> now takes
<CODE>host</CODE>, <CODE>database</CODE>, <CODE>user</CODE>, <CODE>password</CODE> arguments! The old
version took <CODE>host</CODE>, <CODE>database</CODE>, <CODE>password</CODE>, <CODE>user</CODE>.
<LI>

Allow <CODE>DATE '1997-01-01'</CODE>, <CODE>TIME '12:10:10'</CODE> and
<CODE>TIMESTAMP '1997-01-01 12:10:10'</CODE> formats required by ANSI SQL.
<STRONG>WARNING: INCOMPATIBLE CHANGE!!</STRONG> This has the unfortunate
side-effect that you no longer can have columns named <CODE>DATE</CODE>, <CODE>TIME</CODE>
or <CODE>TIMESTAMP</CODE>. :( Old columns can still be accessed through
<CODE>tablename.columnname</CODE>!)
<LI>

Changed Makefiles to hopefully work better with BSD systems. Also,
<TT>`manual.dvi'</TT> is now included in the distribution to avoid having stupid
<CODE>make</CODE> programs trying to rebuild it.
<LI>

<CODE>readline</CODE> library upgraded to version 2.1.
<LI>

A new sortorder german-1. That is a normal ISO-Latin1 with a german sort
order.
<LI>

Perl <CODE>DBI</CODE>/<CODE>DBD</CODE> is now included in the distribution. <CODE>DBI</CODE>
is now the recommended way to connect to <STRONG>MySQL</STRONG> from Perl.
<LI>

New portable benchmark suite with <CODE>DBD</CODE>, with test results from
<CODE>mSQL</CODE> 2.0.3, <STRONG>MySQL</STRONG>, PostgreSQL 6.2.1 and Solid server 2.2.
<LI>

<CODE>crash-me</CODE> is now included with the benchmarks; This is a Perl program
designed to find as many limits as possible in a SQL server. Tested with
<CODE>mSQL</CODE>, PostgreSQL, Solid and <STRONG>MySQL</STRONG>.
<LI>

Fixed bug in range-optimizer that crashed <STRONG>MySQL</STRONG> on some queries.
<LI>

Table and column name completion for <CODE>mysql</CODE> command line tool, by Zeev
Suraski and Andi Gutmans.
<LI>

Added new command <CODE>REPLACE</CODE> that works like <CODE>INSERT</CODE> but
replaces conflicting records with the new record. <CODE>REPLACE INTO
TABLE ... SELECT ...</CODE> works also.
<LI>

Added new commands <CODE>CREATE DATABASE db_name</CODE> and <CODE>DROP
DATABASE db_name</CODE>.
<LI>

Added <CODE>RENAME</CODE> option to <CODE>ALTER TABLE</CODE>: <CODE>ALTER TABLE name
RENAME AS new_name</CODE>.
<LI>

<CODE>make_binary_distribution</CODE> now includes <TT>`libgcc.a'</TT> in
<TT>`libmysqlclient.a'</TT>. This should make linking work for people who don't
have <CODE>gcc</CODE>.
<LI>

Changed <CODE>net_write()</CODE> to <CODE>my_net_write()</CODE> because of a name
conflict with Sybase.
<LI>

<A NAME="IDX805"></A>
<A NAME="IDX806"></A>
New function <CODE>DAYOFWEEK()</CODE> compatible with ODBC.
<LI>

Stack checking and <CODE>bison</CODE> memory overrun checking to make <STRONG>MySQL</STRONG>
safer with weird queries.
</UL>



<H3><A NAME="News-3.21.14b" HREF="manual_toc.html#News-3.21.14b">D.3.21  Changes in release 3.21.14b</A></H3>


<UL>
<LI>

Fixed a couple of small <CODE>configure</CODE> problems on some platforms.
</UL>



<H3><A NAME="News-3.21.14a" HREF="manual_toc.html#News-3.21.14a">D.3.22  Changes in release 3.21.14a</A></H3>


<UL>
<LI>

Ported to SCO Openserver 5.0.4  with FSU Pthreads.
<LI>

HP-UX 10.20 should work.
<LI>

Added new function <CODE>DATE_FORMAT()</CODE>.
<LI>

Added <CODE>NOT IN</CODE>.
<LI>

Added automatic removal of 'ODBC function conversions': <CODE>{fn now() }</CODE>
<LI>

Handle ODBC 2.50.3 option flags.
<LI>

Fixed comparison of <CODE>DATE</CODE> and <CODE>TIME</CODE> values with <CODE>NULL</CODE>.
<LI>

Changed language name from germany to german to be consistent with
the other language names.
<LI>

Fixed sorting problem on functions returning a <CODE>FLOAT</CODE>. Previously, the
values were converted to <CODE>INT</CODE>s before sorting.
<LI>

Fixed slow sorting when sorting on key field when using
<CODE>key_column=constant</CODE>.
<LI>

Sorting on calculated <CODE>DOUBLE</CODE> values sorted on integer results instead.
<LI>

<CODE>mysql</CODE> no longer needs a database argument.
<LI>

Changed the place where <CODE>HAVING</CODE> should be. According to ANSI, it should
be after <CODE>GROUP BY</CODE> but before <CODE>ORDER BY</CODE>. <STRONG>MySQL</STRONG> 3.20
incorrectly had it last.
<LI>

Added Sybase command <CODE>USE DATABASE</CODE> to start using another database.
<LI>

Added automatic adjusting of number of connections and table cache size
if the maximum number of files that can be opened is less than needed.
This should fix that <CODE>mysqld</CODE> doesn't crash even if you haven't done a
<CODE>ulimit -n 256</CODE> before starting <CODE>mysqld</CODE>.
<LI>

Added lots of limit checks to make it safer when running with too little
memory or when doing weird queries.
</UL>



<H3><A NAME="News-3.21.13" HREF="manual_toc.html#News-3.21.13">D.3.23  Changes in release 3.21.13</A></H3>


<UL>
<LI>

Added retry of interrupted reads and clearing of <CODE>errno</CODE>.
This makes Linux systems much safer!
<LI>

Fixed locking bug when using many aliases on the same table in the same
<CODE>SELECT</CODE>.
<LI>

Fixed bug with <CODE>LIKE</CODE> on number key.
<LI>

New error message so you can check whether the connection was lost while
the command was running or whether the connection was down from the start.
<LI>

Added <CODE>--table</CODE> option to <CODE>mysql</CODE> to print in table format.
Moved time and row information after query result.
Added automatic reconnect of lost connections.
<LI>

Added <CODE>!=</CODE> as a synonym for <CODE>&#60;&#62;</CODE>.
<LI>

Added function <CODE>VERSION()</CODE> to make easier logs.
<LI>

New multi-user test <TT>`tests/fork_test.pl'</TT> to put some strain on the
thread library.
</UL>



<H3><A NAME="News-3.21.12" HREF="manual_toc.html#News-3.21.12">D.3.24  Changes in release 3.21.12</A></H3>


<UL>
<LI>

Fixed <CODE>ftruncate()</CODE> call in MIT-pthreads. This made <CODE>isamchk</CODE>
destroy the <TT>`.ISM'</TT> files on (Free)BSD 2.x systems.
<LI>

Fixed broken <CODE>__P_</CODE> patch in MIT-pthreads.
<LI>

Many memory overrun checks. All string functions now return <CODE>NULL</CODE>
if the returned string should be longer than <CODE>max_allowed_packet</CODE> bytes.
<LI>

Changed the name of the <CODE>INTERVAL</CODE> type to <CODE>ENUM</CODE>, because
<CODE>INTERVAL</CODE> is used in ANSI SQL.
<LI>

In some cases, doing a <CODE>JOIN</CODE> + <CODE>GROUP</CODE> + <CODE>INTO OUTFILE</CODE>,
the result wasn't grouped.
<LI>

<CODE>LIKE</CODE> with <CODE>'_'</CODE> as last character didn't work. Fixed.
<LI>

Added extended ANSI SQL <CODE>TRIM()</CODE> function.
<LI>

Added <CODE>CURTIME()</CODE>.
<LI>

Added <CODE>ENCRYPT()</CODE> function by Zeev Suraski.
<LI>

Fixed better <CODE>FOREIGN KEY</CODE> syntax skipping. New reserved words:
<CODE>MATCH</CODE>, <CODE>FULL</CODE>, <CODE>PARTIAL</CODE>.
<LI>

<CODE>mysqld</CODE> now allows IP number and hostname to the <CODE>--bind-address</CODE>
option.
<LI>

Added <CODE>SET OPTION CHARACTER SET cp1251_koi8</CODE> to enable conversions of
data to/from cp1251_koi8.
<LI>

Lots of changes for Win95 port. In theory, this version should now be
easily portable to Win95.
<LI>

Changed the <CODE>CREATE COLUMN</CODE> syntax of <CODE>NOT NULL</CODE> columns to be after
the <CODE>DEFAULT</CODE> value, as specified in the ANSI SQL standard. This will
make <CODE>mysqldump</CODE> with <CODE>NOT NULL</CODE> and default values incompatible with
<STRONG>MySQL</STRONG> 3.20.
<LI>

Added many function name aliases so the functions can be used with
ODBC or ANSI SQL92 syntax.
<LI>

Fixed syntax of <CODE>ALTER TABLE tbl_name ALTER COLUMN col_name SET DEFAULT
NULL</CODE>.
<LI>

Added <CODE>CHAR</CODE> and <CODE>BIT</CODE> as synonyms for <CODE>CHAR(1)</CODE>.
<LI>

Fixed core dump when updating as a user who has only <STRONG>select</STRONG> privilege.
<LI>

<CODE>INSERT ... SELECT ... GROUP BY</CODE> didn't work in some cases. An
<CODE>Invalid use of group function</CODE> error occurred.
<LI>

When using <CODE>LIMIT</CODE>, <CODE>SELECT</CODE> now always uses keys instead of record
scan.  This will give better performance on <CODE>SELECT</CODE> and a <CODE>WHERE</CODE>
that matches many rows.
<LI>

Added Russian error messages.
</UL>



<H3><A NAME="News-3.21.11" HREF="manual_toc.html#News-3.21.11">D.3.25  Changes in release 3.21.11</A></H3>


<UL>
<LI>

Configure changes.
<LI>

<STRONG>MySQL</STRONG> now works with the new thread library on BSD/OS 3.0.
<LI>

Added new group functions <CODE>BIT_OR()</CODE> and <CODE>BIT_AND()</CODE>.
<LI>

Added compatibility functions <CODE>CHECK</CODE> and <CODE>REFERENCES</CODE>.
<CODE>CHECK</CODE> is now a reserved word.
<LI>

Added <CODE>ALL</CODE> option to <CODE>GRANT</CODE> for better compatibility. (<CODE>GRANT</CODE>
is still a dummy function.)
<LI>

Added partly-translated dutch messages.
<LI>

Fixed bug in <CODE>ORDER BY</CODE> and <CODE>GROUP BY</CODE> with <CODE>NULL</CODE> columns.
<LI>

Added function <CODE>last_insert_id()</CODE> to retrieve last <CODE>AUTO_INCREMENT</CODE>
value.  This is intended for clients to ODBC that can't use the
<CODE>mysql_insert_id()</CODE> API function, but can be used by any client.
<LI>

Added <CODE>--flush-logs</CODE> option to <CODE>mysqladmin</CODE>.
<LI>

Added command <CODE>STATUS</CODE> to <CODE>mysql</CODE>.
<LI>

Fixed problem with <CODE>ORDER BY</CODE>/<CODE>GROUP BY</CODE> because of bug in <CODE>gcc</CODE>.
<LI>

Fixed problem with <CODE>INSERT ... SELECT ... GROUP BY</CODE>.
</UL>



<H3><A NAME="News-3.21.10" HREF="manual_toc.html#News-3.21.10">D.3.26  Changes in release 3.21.10</A></H3>


<UL>
<LI>

New <CODE>mysqlaccess</CODE>.
<LI>

<CODE>CREATE</CODE> now supports all ODBC types and the <CODE>mSQL</CODE> <CODE>TEXT</CODE> type.
All ODBC 2.5 functions are also supported (added <CODE>REPEAT</CODE>). This provides
better portability.
<LI>

Added text types <CODE>TINYTEXT</CODE>, <CODE>TEXT</CODE>, <CODE>MEDIUMTEXT</CODE> and
<CODE>LONGTEXT</CODE>.  These are actually <CODE>BLOB</CODE>types, but all searching is
done in case-insensitive fashion.
<LI>

All old <CODE>BLOB</CODE> fields are now <CODE>TEXT</CODE> fields.  This only
changes that all searching on strings is done in case-sensitive fashion.
You must do an <CODE>ALTER TABLE</CODE> and change the field type to <CODE>BLOB</CODE>
if you want to have tests done in case-sensitive fashion.
<LI>

Fixed some <CODE>configure</CODE> issues.
<LI>

Made the locking code a bit safer. Fixed very unlikely
deadlock situation.
<LI>

Fixed a couple of bugs in the range optimizer. Now the new range benchmark
<CODE>test-select</CODE> works.
</UL>



<H3><A NAME="News-3.21.9" HREF="manual_toc.html#News-3.21.9">D.3.27  Changes in release 3.21.9</A></H3>


<UL>
<LI>

Added <CODE>--enable-unix-socket=pathname</CODE> option to <CODE>configure</CODE>.
<LI>

Fixed a couple of portability problems with include files.
<LI>

Fixed bug in range calculation that could return empty
set when searching on multiple key with only one entry (very rare).
<LI>

Most things ported to FSU Pthreads, which should allow <STRONG>MySQL</STRONG> to
run on SCO. See section <A HREF="manual.html#SCO">4.11.11  SCO notes</A>.
</UL>



<H3><A NAME="News-3.21.8" HREF="manual_toc.html#News-3.21.8">D.3.28  Changes in release 3.21.8</A></H3>


<UL>
<LI>

Works now in Solaris 2.6.
<LI>

Added handling of calculation of <CODE>SUM()</CODE> functions.
For example, you can now use <CODE>SUM(column)/COUNT(column)</CODE>.
<LI>

Added handling of trigometric functions:
<CODE>PI()</CODE>, <CODE>ACOS()</CODE>, <CODE>ASIN()</CODE>, <CODE>ATAN()</CODE>, <CODE>COS()</CODE>,
<CODE>SIN()</CODE> and <CODE>TAN()</CODE>.
<LI>

New languages: norwegian, norwegian-ny and portuguese.
<LI>

Fixed parameter bug in <CODE>net_print()</CODE> in <TT>`procedure.cc'</TT>.
<LI>

Fixed a couple of memory leaks.
<LI>

Now allow also the old <CODE>SELECT ... INTO OUTFILE</CODE> syntax.
<LI>

Fixed bug with <CODE>GROUP BY</CODE> and <CODE>SELECT</CODE> on key with many values.
<LI>

<CODE>mysql_fetch_lengths()</CODE> sometimes returned incorrect lengths when you used
<CODE>mysql_use_result()</CODE>. This affected at least some cases of
<CODE>mysqldump --quick</CODE>.
<LI>

Fixed bug in optimization of <CODE>WHERE const op field</CODE>.
<LI>

Fixed problem when sorting on <CODE>NULL</CODE> fields.
<LI>

Fixed a couple of 64-bit (Alpha) problems.
<LI>

Added <CODE>--pid-file=#</CODE> option to <CODE>mysqld</CODE>.
<LI>

Added date formatting to <CODE>FROM_UNIXTIME()</CODE>, originally by Zeev Suraski.
<LI>

Fixed bug in <CODE>BETWEEN</CODE> in range optimizer (Did only test = of the first
argument).
<LI>

Added machine-dependent files for MIT-pthreads i386-SCO. There is probably
more to do to get this to work on SCO 3.5.
</UL>



<H3><A NAME="News-3.21.7" HREF="manual_toc.html#News-3.21.7">D.3.29  Changes in release 3.21.7</A></H3>


<UL>
<LI>

Changed <TT>`Makefile.am'</TT> to take advantage of Automake 1.2.
<LI>

Added the beginnings of a benchmark suite.
<LI>

Added more secure password handling.
<LI>

Added new client function <CODE>mysql_errno()</CODE>, to get the error number of
the error message. This makes error checking in the client much easier.
This makes the new server incompatible with the 3.20.x server when running
without <CODE>--old-protocol</CODE>.  The client code is backward compatible.
More information can be found in the <TT>`README'</TT> file!
<LI>

Fixed some problems when using very long, illegal names.
</UL>



<H3><A NAME="News-3.21.6" HREF="manual_toc.html#News-3.21.6">D.3.30  Changes in release 3.21.6</A></H3>


<UL>
<LI>

Fixed more portability issues (incorrect <CODE>sigwait</CODE> and <CODE>sigset</CODE>
defines).
<LI>

<CODE>configure</CODE> should now be able to detect the last argument to
<CODE>accept()</CODE>.
</UL>



<H3><A NAME="News-3.21.5" HREF="manual_toc.html#News-3.21.5">D.3.31  Changes in release 3.21.5</A></H3>


<UL>
<LI>

Should now work with FreeBSD 3.0 if used with
<TT>`FreeBSD-3.0-libc_r-1.0.diff'</TT>,
which can be found at <a HREF="http://www.mysql.com/Download/Patches">http://www.mysql.com/Download/Patches</a>.
<LI>

Added new option <CODE>-O tmp_table_size=#</CODE> to <CODE>mysqld</CODE>.
<LI>

New function <CODE>FROM_UNIXTIME(timestamp)</CODE> which returns a date string in
'YYYY-MM-DD HH:MM:DD' format.
<LI>

New function <CODE>SEC_TO_TIME(seconds)</CODE> which returns a string in
'HH:MM:SS' format.
<LI>

New function <CODE>SUBSTRING_INDEX()</CODE>, originally by Zeev Suraski.
</UL>



<H3><A NAME="News-3.21.4" HREF="manual_toc.html#News-3.21.4">D.3.32  Changes in release 3.21.4</A></H3>


<UL>
<LI>

Should now configure and compile on OSF1 4.0 with the DEC compiler.
<LI>

Configuration and compilation on BSD/OS 3.0 works, but due to some bugs in
BSD/OS 3.0, <CODE>mysqld</CODE> doesn't work on it yet.
<LI>

Configuration and compilation on FreeBSD 3.0 works, but I couldn't get
<CODE>pthread_create</CODE> to work.
</UL>



<H3><A NAME="News-3.21.3" HREF="manual_toc.html#News-3.21.3">D.3.33  Changes in release 3.21.3</A></H3>


<UL>
<LI>

Added reverse check lookup of hostnames to get better security.
<LI>

Fixed some possible buffer overflows if filenames that are too long are used.
<LI>

<CODE>mysqld</CODE> doesn't accept hostnames that start with digits followed by a
<CODE>'.'</CODE>, because the hostname may look like an IP number.
<LI>

Added <CODE>--skip-networking</CODE> option to <CODE>mysqld</CODE>, to only allow socket
connections.  (This will not work with MIT-pthreads!)
<LI>

Added check of too long table names for alias.
<LI>

Added check if database name is okay.
<LI>

Added check if too long table names.
<LI>

Removed incorrect <CODE>free()</CODE> that killed the server on
<CODE>CREATE DATABASE</CODE> or <CODE>DROP DATABASE</CODE>.
<LI>

Changed some <CODE>mysqld</CODE> <CODE>-O</CODE> options to better names.
<LI>

Added <CODE>-O join_cache_size=#</CODE> option to <CODE>mysqld</CODE>.
<LI>

Added <CODE>-O max_join_size=#</CODE> option to <CODE>mysqld</CODE>, to be able to set a
limit how big queries (in this case big = slow) one should be able to handle
without specifying <CODE>SET OPTION SQL_BIG_SELECTS=1</CODE>.  A # = is about 10
examined records. The default is "unlimited".
<LI>

When comparing a <CODE>TIME</CODE>, <CODE>DATE</CODE>, <CODE>DATETIME</CODE> or <CODE>TIMESTAMP</CODE>
column to a constant, the constant is converted to a time value before
performing the comparison.
This will make it easier to get ODBC (particularly Access97) to work with
the above types. It should also make dates easier to use and the comparisons
should be quicker than before.
<LI>

Applied patch from Jochen Wiedmann that allows <CODE>query()</CODE> in
<CODE>mysqlperl</CODE> to take a query with <CODE>\0</CODE> in it.
<LI>

Storing a timestamp with a 2-digit year (<CODE>YYMMDD</CODE>) didn't work.
<LI>

Fix that timestamp wasn't automatically updated if set in an <CODE>UPDATE</CODE>
clause.
<LI>

Now the automatic timestamp field is the FIRST timestamp field.
<LI>

<CODE>SELECT * INTO OUTFILE</CODE>, which didn't correctly if the outfile already
existed.
<LI>

<CODE>mysql</CODE> now shows the thread ID when starting or doing a reconnect.
<LI>

Changed the default sort buffer size from 2M to 1M.
</UL>



<H3><A NAME="News-3.21.2" HREF="manual_toc.html#News-3.21.2">D.3.34  Changes in release 3.21.2</A></H3>


<UL>
<LI>

The range optimizer is coded, but only 85% tested. It can be enabled with
<CODE>--new</CODE>, but it crashes core a lot yet...
<LI>

More portable. Should compile on AIX and alpha-digital.
At least the <CODE>isam</CODE> library should be relatively 64-bit clean.
<LI>

New <CODE>isamchk</CODE> which can detect and fix more problems.
<LI>

New options for <CODE>isamlog</CODE>.
<LI>

Using new version of Automake.
<LI>

Many small portability changes (from the AIX and alpha-digital port)
Better checking of pthread(s) library.
<LI>

czech error messages by <a HREF="mailto:snajdr@pvt.net">snajdr@pvt.net</a>.
<LI>

Decreased size of some buffers to get fewer problems on systems with little
memory.  Also added more checks to handle "out of memory" problems.
<LI>

<CODE>mysqladmin</CODE>: you can now do <CODE>mysqladmin kill 5,6,7,8</CODE> to kill
multiple threads.
<LI>

When the maximum connection limit is reached, one extra connection by a user
with the <STRONG>PROCESS_ACL</STRONG> privilege is granted.
<LI>

Added <CODE>-O backlog=#</CODE> option to <CODE>mysqld</CODE>.
<LI>

Increased maximum packet size from 512K to 1024K for client.
<LI>

Almost all of the function code is now tested in the internal test suite.
<LI>

<CODE>ALTER TABLE</CODE> now returns warnings from field conversions.
<LI>

Port changed to 3306 (got it reserved from ISI).
<LI>

Added a fix for Visual FoxBase so that any schema name from a table
specification is automatically removed.
<LI>

New function <CODE>ASCII()</CODE>.
<LI>

Removed function <CODE>BETWEEN(a,b,c)</CODE>. Use the standard ANSI
synax instead: <CODE>expr BETWEEN expr AND expr</CODE>.
<LI>

<STRONG>MySQL</STRONG> no longer has to use an extra temporary table when sorting
on functions or <CODE>SUM()</CODE> functions.
<LI>

Fixed bug that you couldn't use <CODE>tbl_name.field_name</CODE> in <CODE>UPDATE</CODE>.
<LI>

Fixed <CODE>SELECT DISTINCT</CODE> when using 'hidden group'. For example:

<PRE>
mysql&#62; SELECT DISTINCT MOD(some_field,10) FROM test
           GROUP BY some_field;
</PRE>

Note: <CODE>some_field</CODE> is normally in the <CODE>SELECT</CODE> part. ANSI SQL should
require it.
</UL>



<H3><A NAME="News-3.21.0" HREF="manual_toc.html#News-3.21.0">D.3.35  Changes in release 3.21.0</A></H3>


<UL>
<LI>

New keywords used: <CODE>INTERVAL</CODE>, <CODE>EXPLAIN</CODE>, <CODE>READ</CODE>,
<CODE>WRITE</CODE>, <CODE>BINARY</CODE>.
<LI>

Added ODBC function <CODE>CHAR(num,...)</CODE>.
<LI>

New operator <CODE>IN</CODE>. This uses a binary search to find a match.
<LI>

New command <CODE>LOCK TABLES tbl_name [AS alias] {READ|WRITE} ...</CODE>
<LI>

Added <CODE>--log-update</CODE> option to <CODE>mysqld</CODE>, to get a log suitable for
incremental updates.
<LI>

New command <CODE>EXPLAIN SELECT ...</CODE> to get information about how the
optimizer will do the join.
<LI>

For easier client code, the client should no longer use
<CODE>FIELD_TYPE_TINY_BLOB</CODE>, <CODE>FIELD_TYPE_MEDIUM_BLOB</CODE>,
<CODE>FIELD_TYPE_LONG_BLOB</CODE> or <CODE>FIELD_TYPE_VAR_STRING</CODE> (as
previously returned by <CODE>mysql_list_fields</CODE>).  You should instead only use
<CODE>FIELD_TYPE_BLOB</CODE> or <CODE>FIELD_TYPE_STRING</CODE>.  If you want exact
types, you should use the command <CODE>SHOW FIELDS</CODE>.
<LI>

Added varbinary syntax: <CODE>0x######</CODE> which can be used as a string
(default) or a number.
<LI>

<CODE>FIELD_TYPE_CHAR</CODE> is renamed to <CODE>FIELD_TYPE_TINY</CODE>.
<LI>

Changed all fields to C++ classes.
<LI>

Removed FORM struct.
<LI>

Fields with <CODE>DEFAULT</CODE> values no longer need to be <CODE>NOT NULL</CODE>.
<LI>

New field types:
<DL COMPACT>

<DT><CODE>ENUM</CODE>
<DD>
A string which can take only a couple of defined values. The value is
stored as a 1-3 byte number that is mapped automatically to a string.
This is sorted according to string positions!
<DT><CODE>SET</CODE>
<DD>
A string which may have one or many string values separated with ','.
The string is stored as a 1-, 2-, 3-, 4- or 8-byte number where each bit stands
for a specific set member.  This is sorted according to the unsigned value
of the stored packed number.
</DL>
<LI>

Now all function calculation is done with <CODE>double</CODE> or <CODE>long long</CODE>.
This will provide the full 64-bit range with bit functions and fix some
conversions that previously could result in precision losses.  One should
avoid using <CODE>unsigned long long</CODE> columns with full 64-bit range
(numbers bigger than 9223372036854775807) because calculations are done
with <CODE>signed long long</CODE>.
<LI>

<CODE>ORDER BY</CODE> will now put <CODE>NULL</CODE> field values first. <CODE>GROUP BY</CODE>
will also work with <CODE>NULL</CODE> values.
<LI>

Full <CODE>WHERE</CODE> with expressions.
<LI>

New range optimizer that can resolve ranges when some keypart prefix is
constant. Example:

<PRE>
mysql&#62; SELECT * FROM tbl_name
           WHERE key_part_1="customer"
           AND key_part_2&#62;=10 AND key_part_2&#60;=10;
</PRE>

</UL>



<H2><A NAME="News-3.20.x" HREF="manual_toc.html#News-3.20.x">20.3  Changes in release 3.20.x</A></H2>

<P>
Changes from 3.20.18 to 3.20.32b are not documented here since the
3.21 release branched here. And the relevant changes are also
documented as changes to the 3.21 version.

</P>



<H3><A NAME="News-3.20.18" HREF="manual_toc.html#News-3.20.18">D.3.36  Changes in release 3.20.18</A></H3>


<UL>
<LI>

Added <CODE>-p#</CODE> (remove <CODE>#</CODE> directories from path) to <CODE>isamlog</CODE>.
All files are written with a relative path from the database directory
Now <CODE>mysqld</CODE> shouldn't crash on shutdown when using the
<CODE>--log-isam</CODE> option.
<LI>

New <CODE>mysqlperl</CODE> version. It is now compatible with <CODE>msqlperl-0.63</CODE>.
<LI>

New <CODE>DBD</CODE> module available at <a HREF="http://www.mysql.com/Contrib">http://www.mysql.com/Contrib</a>
site.
<LI>

Added group function <CODE>STD()</CODE> (standard deviation).
<LI>

The <CODE>mysqld</CODE> server is now compiled by default without debugging
information.  This will make the daemon smaller and faster.
<LI>

Now one usually only has to specify the <CODE>--basedir</CODE> option to
<CODE>mysqld</CODE>. All other paths are relative in a normal installation.
<LI>

<CODE>BLOB</CODE> columns sometimes contained garbage when used with a <CODE>SELECT</CODE>
on more than one table and <CODE>ORDER BY</CODE>.
<LI>

Fixed that calculations that are not in <CODE>GROUP BY</CODE> work as expected
(ANSI SQL extension).
Example:

<PRE>
mysql&#62; SELECT id,id+1 FROM table GROUP BY id;
</PRE>

<LI>

The test of using <CODE>MYSQL_PWD</CODE> was reversed. Now <CODE>MYSQL_PWD</CODE> is
enabled as default in the default release.
<LI>

Fixed conversion bug which caused <CODE>mysqld</CODE> to core dump with
Arithmetic error on Sparc-386.
<LI>

Added <CODE>--unbuffered</CODE> option to <CODE>mysql</CODE>, for new <CODE>mysqlaccess</CODE>.
<LI>

When using overlapping (unnecessary) keys and join over many tables,
the optimizer could get confused and return 0 records.
</UL>



<H3><A NAME="News-3.20.17" HREF="manual_toc.html#News-3.20.17">D.3.37  Changes in release 3.20.17</A></H3>


<UL>
<LI>

You can now use <CODE>BLOB</CODE> columns and the functions <CODE>IS NULL</CODE> and
<CODE>IS NOT NULL</CODE> in the <CODE>WHERE</CODE> clause.
<LI>

All communication packets and row buffers are now allocated dynamically
on demand. The default value of <CODE>max_allowed_packet</CODE> is now 64K for
the server and 512K for the client. This is mainly used to catch
incorrect packets that could trash all memory. The server limit may be
changed when it is started.
<LI>

Changed stack usage to use less memory.
<LI>

Changed <CODE>safe_mysqld</CODE> to check for running daemon.
<LI>

The <CODE>ELT()</CODE> function is renamed to <CODE>FIELD()</CODE>.  The new
<CODE>ELT()</CODE> function returns a value based on an index: <CODE>FIELD()</CODE>
is the inverse of <CODE>ELT()</CODE> Example: <CODE>ELT(2,"A","B","C")</CODE> returns
<CODE>"B"</CODE>. <CODE>FIELD("B","A","B","C")</CODE> returns <CODE>2</CODE>.
<LI>

<CODE>COUNT(field)</CODE>, where <CODE>field</CODE> could have a <CODE>NULL</CODE> value, now
works.
<LI>

A couple of bugs fixed in <CODE>SELECT ... GROUP BY</CODE>.
<LI>

Fixed memory overrun bug in <CODE>WHERE</CODE> with many unoptimizable brace levels.
<LI>

Fixed some small bugs in the grant code.
<LI>

If hostname isn't found by <CODE>get_hostname</CODE>, only the IP is checked.
Previously, you got <CODE>Access denied</CODE>.
<LI>

Inserts of timestamps with values didn't always work.
<LI>

<CODE>INSERT INTO ... SELECT ... WHERE</CODE> could give the error
<CODE>Duplicated field</CODE>.
<LI>

Added some tests to <CODE>safe_mysqld</CODE> to make it "safer".
<LI>

<CODE>LIKE</CODE> was case sensitive in some places and case insensitive in others.
Now <CODE>LIKE</CODE> is always case insensitive.
<LI>

<TT>`mysql.cc'</TT>: Allow <CODE>'#'</CODE> anywhere on the line.
<LI>

New command <CODE>SET OPTION SQL_SELECT_LIMIT=#</CODE>. See the FAQ for more details.
<LI>

New version of the <CODE>mysqlaccess</CODE> script.
<LI>

Change <CODE>FROM_DAYS()</CODE> and <CODE>WEEKDAY()</CODE> to also take a full
<CODE>TIMESTAMP</CODE> or <CODE>DATETIME</CODE> as argument. Before they only took a
number of type <CODE>YYYYMMDD</CODE> or <CODE>YYMMDD</CODE>.
<LI>

Added new function <CODE>UNIX_TIMESTAMP(timestamp_column)</CODE>.
</UL>



<H3><A NAME="News-3.20.16" HREF="manual_toc.html#News-3.20.16">D.3.38  Changes in release 3.20.16</A></H3>


<UL>
<LI>

More changes in MIT-pthreads to get them safer. Fixed also some link
bugs at least in SunOS.
<LI>

Changed <CODE>mysqld</CODE> to work around a bug in MIT-pthreads. This makes multiple
small <CODE>SELECT</CODE> operations 20 times faster. Now <CODE>lock_test.pl</CODE> should
work.
<LI>

Added <CODE>mysql_FetchHash(handle)</CODE> to <CODE>mysqlperl</CODE>.
<LI>

The <CODE>mysqlbug</CODE> script is now distributed built to allow for reporting
bugs that appear during the build with it.
<LI>

Changed <TT>`libmysql.c'</TT> to prefer <CODE>getpwuid()</CODE> instead of
<CODE>cuserid()</CODE>.
<LI>

Fixed bug in <CODE>SELECT</CODE> optimizer when using many tables with the same
column used as key to different tables.
<LI>

Added new latin2 and Russian KOI8 character tables.
<LI>

Added support for a dummy <CODE>GRANT</CODE> command to satisfy Powerbuilder.
</UL>



<H3><A NAME="News-3.20.15" HREF="manual_toc.html#News-3.20.15">D.3.39  Changes in release 3.20.15</A></H3>


<UL>
<LI>

Fixed fatal bug <CODE>packets out of order</CODE> when using MIT-pthreads.
<LI>

Removed possible loop when a thread waits for command from client
and <CODE>fcntl()</CODE> fails. Thanks to Mike Bretz for finding this bug.
<LI>

Changed alarm loop in <TT>`mysqld.cc'</TT> because shutdown didn't always
succeed in Linux.
<LI>

Removed use of <CODE>termbits</CODE> from <TT>`mysql.cc'</TT>.  This conflicted with
<CODE>glibc</CODE> 2.0.
<LI>

Fixed some syntax errors for at least BSD and Linux.
<LI>

Fixed bug when doing a <CODE>SELECT</CODE> as superuser without a database.
<LI>

Fixed bug when doing <CODE>SELECT</CODE> with group calculation to outfile.
</UL>



<H3><A NAME="News-3.20.14" HREF="manual_toc.html#News-3.20.14">D.3.40  Changes in release 3.20.14</A></H3>


<UL>
<LI>

If one gives <CODE>-p</CODE> or <CODE>--password</CODE> option to <CODE>mysql</CODE> without
an argument, the user is solicited for the password from the tty.
<LI>

Added default password from <CODE>MYSQL_PWD</CODE> (by Elmar Haneke).
<LI>

Added command <CODE>kill</CODE> to <CODE>mysqladmin</CODE> to kill a specific
<STRONG>MySQL</STRONG> thread.
<LI>

Sometimes when doing a reconnect on a down connection this succeeded
first on second try.
<LI>

Fixed adding an <CODE>AUTO_INCREMENT</CODE> key with <CODE>ALTER_TABLE</CODE>.
<LI>

<CODE>AVG()</CODE> gave too small value on some <CODE>SELECT</CODE>s with
<CODE>GROUP BY</CODE> and <CODE>ORDER BY</CODE>.
<LI>

Added new <CODE>DATETIME</CODE> type (by Giovanni Maruzzelli
<LI>

Fixed that define <CODE>DONT_USE_DEFAULT_FIELDS</CODE> works.
<LI>

Changed to use a thread to handle alarms instead of signals on Solaris to
avoid race conditions.
<LI>

Fixed default length of signed numbers. (George Harvey
<LI>

Allow anything for <CODE>CREATE INDEX</CODE>.
<LI>

Add prezeros when packing numbers to <CODE>DATE</CODE>, <CODE>TIME</CODE> and
<CODE>TIMESTAMP</CODE>.
<LI>

Fixed a bug in <CODE>OR</CODE> of multiple tables (gave empty set).
<LI>

Added many patches to MIT-pthreads. This fixes at least one lookup bug.
</UL>



<H3><A NAME="News-3.20.13" HREF="manual_toc.html#News-3.20.13">D.3.41  Changes in release 3.20.13</A></H3>


<UL>
<LI>

Added ANSI SQL94 <CODE>DATE</CODE> and <CODE>TIME</CODE> types.
<LI>

Fixed bug in <CODE>SELECT</CODE> with <CODE>AND</CODE>-<CODE>OR</CODE> levels.
<LI>

Added support for Slovenian characters. The <TT>`Contrib'</TT> directory contains
source and instructions for adding other character sets.
<LI>

Fixed bug with <CODE>LIMIT</CODE> and <CODE>ORDER BY</CODE>.
<LI>

Allow <CODE>ORDER BY</CODE> and <CODE>GROUP BY</CODE> on items that aren't in the
<CODE>SELECT</CODE> list.
(Thanks to Wim Bonis <a HREF="mailto:bonis@kiss.de">bonis@kiss.de</a>, for pointing this out.)
<LI>

Allow setting of timestamp values in <CODE>INSERT</CODE>.
<LI>

Fixed bug with <CODE>SELECT ... WHERE ... = NULL</CODE>.
<LI>

Added changes for <CODE>glibc</CODE> 2.0. To get <CODE>glibc</CODE> to work, you should
add the <TT>`gibc-2.0-sigwait-patch'</TT> before compiling <CODE>glibc</CODE>.
<LI>

Fixed bug in <CODE>ALTER TABLE</CODE> when changing a <CODE>NOT NULL</CODE> field to
allow <CODE>NULL</CODE> values.
<LI>

Added some ANSI92 synonyms as field types to <CODE>CREATE TABLE</CODE>.
<CODE>CREATE TABLE</CODE> now allows <CODE>FLOAT(4)</CODE> and <CODE>FLOAT(8)</CODE> to mean
<CODE>FLOAT</CODE> and <CODE>DOUBLE</CODE>.
<LI>

New utility program <CODE>mysqlaccess</CODE> by <a HREF="mailto:Yves.Carlier@rug.ac.be">Yves.Carlier@rug.ac.be</a>.
This program shows the access rights for a specific user and the grant
rows that determine this grant.
<LI>

Added <CODE>WHERE const op field</CODE> (by <a HREF="mailto:bonis@kiss.de">bonis@kiss.de</a>).
</UL>



<H3><A NAME="News-3.20.11" HREF="manual_toc.html#News-3.20.11">D.3.42  Changes in release 3.20.11</A></H3>


<UL>
<LI>

When using <CODE>SELECT ... INTO OUTFILE</CODE>, all temporary tables are ISAM
instead of HEAP to allow big dumps.
<LI>

Changed date functions to be string functions. This fixed some "funny"
side effects when sorting on dates.
<LI>

Extended <CODE>ALTER TABLE</CODE> according to SQL92.
<LI>

Some minor compability changes.
<LI>

Added <CODE>--port</CODE> and <CODE>--socket</CODE> options to all utility programs and
<CODE>mysqld</CODE>.
<LI>

Fixed MIT-pthreads <CODE>readdir_r()</CODE>. Now <CODE>mysqladmin create database</CODE>
and <CODE>mysqladmin drop database</CODE> should work.
<LI>

Changed MIT-pthreads to use our <CODE>tempnam()</CODE>. This should fix the "sort
aborted" bug.
<LI>

Added sync of records count in <CODE>sql_update</CODE>. This fixed slow updates
on first connection. (Thanks to Vaclav Bittner for the test.)
</UL>



<H3><A NAME="News-3.20.10" HREF="manual_toc.html#News-3.20.10">D.3.43  Changes in release 3.20.10</A></H3>


<UL>
<LI>

New insert type: <CODE>INSERT INTO ... SELECT ...</CODE>
<LI>

<CODE>MEDIUMBLOB</CODE> fixed.
<LI>

Fixed bug in <CODE>ALTER TABLE</CODE> and <CODE>BLOB</CODE>s.
<LI>

<CODE>SELECT ... INTO OUTFILE</CODE> now creates the file in the current
database directory.
<LI>

<CODE>DROP TABLE</CODE> now can take a list of tables.
<LI>

Oracle synonym <CODE>DESCRIBE</CODE> (<CODE>DESC</CODE>).
<LI>

Changes to <CODE>make_binary_distribution</CODE>.
<LI>

Added some comments to installation instructions about <CODE>configure</CODE>'s
C++ link test.
<LI>

Added <CODE>--without-perl</CODE> option to <CODE>configure</CODE>.
<LI>

Lots of small portability changes.
</UL>



<H3><A NAME="News-3.20.9" HREF="manual_toc.html#News-3.20.9">D.3.44  Changes in release 3.20.9</A></H3>


<UL>
<LI>

<CODE>ALTER TABLE</CODE> didn't copy null bit. As a result, fields that were allowed
to have <CODE>NULL</CODE> values were always <CODE>NULL</CODE>.
<LI>

<CODE>CREATE</CODE> didn't take numbers as <CODE>DEFAULT</CODE>.
<LI>

Some compatibility changes for SunOS.
<LI>

Removed <TT>`config.cache'</TT> from old distribution.
</UL>



<H3><A NAME="News-3.20.8" HREF="manual_toc.html#News-3.20.8">D.3.45  Changes in release 3.20.8</A></H3>


<UL>
<LI>

Fixed bug with <CODE>ALTER TABLE</CODE> and multi-part keys.
</UL>



<H3><A NAME="News-3.20.7" HREF="manual_toc.html#News-3.20.7">D.3.46  Changes in release 3.20.7</A></H3>


<UL>
<LI>

New commands: <CODE>ALTER TABLE</CODE>, <CODE>SELECT ... INTO OUTFILE</CODE> and
<CODE>LOAD DATA INFILE</CODE>.
<LI>

New function: <CODE>NOW()</CODE>.
<LI>

Added new field <STRONG>file_priv</STRONG> to <CODE>mysql/user</CODE> table.
<LI>

New script <CODE>add_file_priv</CODE> which adds the new field <STRONG>file_priv</STRONG>
to the <CODE>user</CODE> table. This script must be executed if you want to
use the new <CODE>SELECT ... INTO</CODE> and <CODE>LOAD DATA INFILE ...</CODE> commands
with a version of <STRONG>MySQL</STRONG> earlier than 3.20.7.
<LI>

Fixed bug in locking code, which made <CODE>lock_test.pl</CODE> test fail.
<LI>

New files <TT>`NEW'</TT> and <TT>`BUGS'</TT>.
<LI>

Changed <TT>`select_test.c'</TT> and <TT>`insert_test.c'</TT> to include
<TT>`config.h'</TT>.
<LI>

Added command <CODE>status</CODE> to <CODE>mysqladmin</CODE> for short logging.
<LI>

Increased maximum number of keys to 16 and maximum number of key parts to 15.
<LI>

Use of sub keys. A key may now be a prefix of a string field.
<LI>

Added <CODE>-k</CODE> option to <CODE>mysqlshow</CODE>, to get key information for a table.
<LI>

Added long options to <CODE>mysqldump</CODE>.
</UL>



<H3><A NAME="News-3.20.6" HREF="manual_toc.html#News-3.20.6">D.3.47  Changes in release 3.20.6</A></H3>


<UL>
<LI>

Portable to more systems because of MIT-pthreads, which will
be used automatically if <CODE>configure</CODE> cannot find a <CODE>-lpthreads</CODE>
library.
<LI>

Added GNU-style long options to almost all programs. Test with
<CODE><KBD>program</KBD> --help</CODE>.
<LI>

Some shared library support for Linux.
<LI>

The FAQ is now in <TT>`.texi'</TT> format and is available in <TT>`.html'</TT>,
<TT>`.txt'</TT> and <TT>`.ps'</TT> formats.
<LI>

Added new SQL function <CODE>RAND([init])</CODE>.
<LI>

Changed <CODE>sql_lex</CODE> to handle <CODE>\0</CODE> unquoted, but the client can't send
the query through the C API, because it takes a str pointer.
You must use <CODE>mysql_real_query()</CODE> to send the query.
<LI>

Added API function <CODE>mysql_get_client_info()</CODE>.
<LI>

<CODE>mysqld</CODE> now uses the <CODE>N_MAX_KEY_LENGTH</CODE> from <TT>`nisam.h'</TT> as
the maximum allowed key length.
<LI>

The following now works:

<PRE>
mysql&#62; SELECT filter_nr,filter_nr FROM filter ORDER BY filter_nr;
</PRE>

Previously, this resulted in the error:
<CODE>Column: 'filter_nr' in order clause is ambiguous</CODE>.
<LI>

<CODE>mysql</CODE> now outputs <CODE>'\0'</CODE>, <CODE>'\t'</CODE>, <CODE>'\n'</CODE> and <CODE>'\\'</CODE>
when encountering ASCII 0, tab, newline or <CODE>'\'</CODE> while writing
tab-separated output.
This is to allow printing of binary data in a portable format.
To get the old behavior, use <CODE>-r</CODE> (or <CODE>--raw</CODE>).
<LI>

Added german error messages (60 of 80 error messages translated).
<LI>

Added new API function <CODE>mysql_fetch_lengths(MYSQL_RES *)</CODE>, which
returns an array of of column lengths (of type <CODE>uint</CODE>).
<LI>

Fixed bug with <CODE>IS NULL</CODE> in <CODE>WHERE</CODE> clause.
<LI>

Changed the optimizer a little to get better results when searching on a key
part.
<LI>

Added <CODE>SELECT</CODE> option <CODE>STRAIGHT_JOIN</CODE> to tell the optimizer that
it should join tables in the given order.
<LI>

Added support for comments starting with <CODE>'--'</CODE> in <TT>`mysql.cc'</TT>
(Postgres syntax).
<LI>

You can have <CODE>SELECT</CODE> expressions and table columns in a <CODE>SELECT</CODE>
which are not used in the group part. This makes it efficient to implement
lookups.  The column that is used should be a constant for each group because
the value is calculated only once for the first row that is found for a group.

<PRE>
mysql&#62; SELECT id,lookup.text,sum(*) FROM test,lookup
         WHERE test.id=lookup.id GROUP BY id;
</PRE>

<LI>

Fixed bug in <CODE>SUM(function)</CODE> (could cause a core dump).
<LI>

Changed <CODE>AUTO_INCREMENT</CODE> placement in the SQL query:

<PRE>
INSERT into table (auto_field) values (0);
</PRE>

inserted 0, but it should insert an <CODE>AUTO_INCREMENT</CODE> value.
<LI>

<TT>`mysqlshow.c'</TT>: Added number of records in table. Had to change the
client code a little to fix this.
<LI>

<CODE>mysql</CODE> now allows doubled <CODE>"</CODE> or <CODE>""</CODE> within strings for
embedded <CODE>'</CODE> or <CODE>"</CODE>.
<LI>

New math functions:
<CODE>EXP()</CODE>, <CODE>LOG()</CODE>, <CODE>SQRT()</CODE>, <CODE>ROUND()</CODE>, <CODE>CEILING()</CODE>.
</UL>



<H3><A NAME="News-3.20.3" HREF="manual_toc.html#News-3.20.3">D.3.48  Changes in release 3.20.3</A></H3>


<UL>
<LI>

The <CODE>configure</CODE> source now compiles a thread-free client library
<CODE>-lmysqlclient</CODE>. This is the only library that needs to be linked
with client applications.  When using the binary releases, you must
link with <CODE>-lmysql -lmysys -ldbug -lstrings</CODE> as before.
<LI>

New <CODE>readline</CODE> library from <CODE>bash-2.0</CODE>.
<LI>

LOTS of small changes to <CODE>configure</CODE> and makefiles (and related source).
<LI>

It should now be possible to compile in another directory using
<CODE>VPATH</CODE>. Tested with GNU Make 3.75.
<LI>

<CODE>safe_mysqld</CODE> and <CODE>mysql.server</CODE> changed to be more compatible
between the source and the binary releases.
<LI>

<CODE>LIMIT</CODE> now takes one or two numeric arguments.
If one argument is given, it indicates the maximum number of rows in
a result. If two arguments are given, the first argument indicates the offset
of the first row to return, the second is the maximum number of rows.
With this it's easy to do a poor man's next page/previous page WWW
application.
<LI>

Changed name of SQL function <CODE>FIELDS()</CODE> to <CODE>ELT()</CODE>.
Changed SQL function <CODE>INTERVALL()</CODE> to <CODE>INTERVAL()</CODE>.
<LI>

Made <CODE>SHOW COLUMNS</CODE> a synonym for <CODE>SHOW FIELDS</CODE>.
Added compatibility syntax <CODE>FRIEND KEY</CODE> to <CODE>CREATE TABLE</CODE>. In
<STRONG>MySQL</STRONG>, this creates a non-unique key on the given columns.
<LI>

Added <CODE>CREATE INDEX</CODE> and <CODE>DROP INDEX</CODE> as compatibility functions.
In <STRONG>MySQL</STRONG>, <CODE>CREATE INDEX</CODE> only checks if the index exists and
issues an error if it doesn't exist. <CODE>DROP INDEX</CODE> always succeeds.
<LI>

<TT>`mysqladmin.c'</TT>: added client version to version information.
<LI>

Fixed core dump bug in <CODE>sql_acl</CODE> (core on new connection).
<LI>

Removed <CODE>host</CODE>, <CODE>user</CODE> and <CODE>db</CODE> tables from database <CODE>test</CODE>
in the distribution.
<LI>

<CODE>FIELD_TYPE_CHAR</CODE> can now be signed (-128 - 127) or unsigned (0 - 255)
Previously, it was always unsigned.
<LI>

Bug fixes in <CODE>CONCAT()</CODE> and <CODE>WEEKDAY()</CODE>.
<LI>

Changed a lot of source to get <CODE>mysqld</CODE> to be compiled with SunPro
compiler.
<LI>

SQL functions must now have a <CODE>'('</CODE> immediately after the function name
(no intervening space).
For example, <CODE>'user('</CODE> is regarded as beginning a function call, and
<CODE>'user ('</CODE> is regarded as an identifier <CODE>user</CODE> followed by a
<CODE>'('</CODE>, not as a function call.
</UL>



<H3><A NAME="News-3.20.0" HREF="manual_toc.html#News-3.20.0">D.3.49  Changes in release 3.20.0</A></H3>


<UL>
<LI>

The source distribution is done with <CODE>configure</CODE> and Automake.
It will make porting much easier.  The <CODE>readline</CODE> library is included
in the distribution.
<LI>

Separate client compilation:
the client code should be very easy to compile on systems which
don't have threads.
<LI>

The old Perl interface code is automatically compiled and installed.
Automatic compiling of <CODE>DBD</CODE> will follow when the new <CODE>DBD</CODE> code
is ported.
<LI>

Dynamic language support: <CODE>mysqld</CODE> can now be started with Swedish
or English (default) error messages.
<LI>

New functions: <CODE>INSERT()</CODE>, <CODE>RTRIM()</CODE>, <CODE>LTRIM()</CODE> and
<CODE>FORMAT()</CODE>.
<LI>

<CODE>mysqldump</CODE> now works correctly for all field types (even
<CODE>AUTO_INCREMENT</CODE>). The format for <CODE>SHOW FIELDS FROM tbl_name</CODE> is changed
so the <CODE>Type</CODE> column contains information suitable for <CODE>CREATE TABLE</CODE>.
In previous releases, some <CODE>CREATE TABLE</CODE> information had to be patched
when recreating tables.
<LI>

Some parser bugs from 3.19.5 (<CODE>BLOB</CODE> and <CODE>TIMESTAMP</CODE>) are corrected.
<CODE>TIMESTAMP</CODE> now returns different date information depending on its
create length.
<LI>

Changed parser to allow a database, table or field name to
start with a number or <CODE>'_'</CODE>.
<LI>

All old C code from Unireg changed to C++ and cleaned up. This makes
the daemon a little smaller and easier to understand.
<LI>

A lot of small bug fixes done.
<LI>

New INSTALL files (not final version) and some info regarding porting.
</UL>



<H2><A NAME="News-3.19.x" HREF="manual_toc.html#News-3.19.x">D.4  Changes in release 3.19.x</A></H2>



<H3><A NAME="News-3.19.5" HREF="manual_toc.html#News-3.19.5">D.4.1  Changes in release 3.19.5</A></H3>


<UL>
<LI>

Some new functions, some more optimization on joins.
<LI>

Should now compile clean on Linux (2.0.x).
<LI>

Added functions <CODE>DATABASE()</CODE>, <CODE>USER()</CODE>, <CODE>POW()</CODE>,
<CODE>LOG10()</CODE> (needed for ODBC).
<LI>

In a <CODE>WHERE</CODE> with an <CODE>ORDER BY</CODE> on fields from only one table,
the table is now preferred as first table in a multi-join.
<LI>

<CODE>HAVING</CODE> and <CODE>IS NULL</CODE> or <CODE>IS NOT NULL</CODE> now works.
<LI>

A group on one column and a sort on a group function (<CODE>SUM()</CODE>,
<CODE>AVG()</CODE>...) didn't work together. Fixed.
<LI>

<CODE>mysqldump</CODE>: Didn't send password to server.
</UL>



<H3><A NAME="News-3.19.4" HREF="manual_toc.html#News-3.19.4">D.4.2  Changes in release 3.19.4</A></H3>


<UL>
<LI>

Fixed horrible locking bug when inserting in one thread and reading
in another thread.
<LI>

Fixed one-off decimal bug.  1.00 was output as 1.0.
<LI>

Added attribute <CODE>'Locked'</CODE> to process list as info if a query is
locked by another query.
<LI>

Fixed full magic timestamp. Timestamp length may now be 14, 12, 10, 8, 6, 4
or 2 bytes.
<LI>

Sort on some numeric functions could sort incorrectly on last number.
<LI>

<CODE>IF(arg,syntax_error,syntax_error)</CODE> crashed.
<LI>

Added functions <CODE>CEILING()</CODE>, <CODE>ROUND()</CODE>, <CODE>EXP()</CODE>, <CODE>LOG()</CODE> and <CODE>SQRT()</CODE>.
<LI>

Enhanced <CODE>BETWEEN</CODE> to handle strings.
</UL>



<H3><A NAME="News-3.19.3" HREF="manual_toc.html#News-3.19.3">D.4.3  Changes in release 3.19.3</A></H3>


<UL>
<LI>

Fixed <CODE>SELECT</CODE> with grouping on <CODE>BLOB</CODE> columns not to return
incorrect <CODE>BLOB</CODE> info. Grouping, sorting and distinct on <CODE>BLOB</CODE>
columns will not yet work as
expected (probably it will group/sort by the first 7 characters in the
<CODE>BLOB</CODE>). Grouping on formulas with a fixed string size (use <CODE>MID()</CODE>
on a <CODE>BLOB</CODE>) should work.
<LI>

When doing a full join (no direct keys) on multiple tables with <CODE>BLOB</CODE>
fields, the <CODE>BLOB</CODE> was garbage on output.
<LI>

Fixed <CODE>DISTINCT</CODE> with calculated columns.
</UL>



<H1><A NAME="Bugs" HREF="manual_toc.html#Bugs">E  Known errors and design deficiencies in <STRONG>MySQL</STRONG></A></H1>


<UL>
<LI>

You cannot build in another directory when using
MIT-pthreads. Since this requires changes to MIT-pthreads, we are not
likely to fix this.
<LI>

<CODE>BLOB</CODE> values can't "reliably" be used in <CODE>GROUP BY</CODE> or
<CODE>ORDER BY</CODE> or <CODE>DISTINCT</CODE>. Only the first <CODE>max_sort_length</CODE>
bytes (default 1024) are used when comparing <CODE>BLOB</CODE>bs in these cases.
This can be changed with the <CODE>-O max_sort_length</CODE> option to
<CODE>mysqld</CODE>. A workaround for most cases is to use a substring:
<CODE>SELECT DISTINCT LEFT(blob,2048) FROM tbl_name</CODE>.
<LI>

Calculation is done with <CODE>BIGINT</CODE> or <CODE>DOUBLE</CODE> (both are
normally 64 bits long). It depends on the function which precision one
gets. The general rule is that bit functions are done with <CODE>BIGINT</CODE>
precision, <CODE>IF</CODE>, and <CODE>ELT()</CODE> with <CODE>BIGINT</CODE> or <CODE>DOUBLE</CODE>
precision and the rest with <CODE>DOUBLE</CODE> precision.  One should try to
avoid using bigger unsigned long long values than 63 bits
(9223372036854775807) for anything else than bit fields!
<LI>

All numeric types are treated as fixed-point fields. That means you must
specify how many decimals a floating-point field shall have. All results will
be returned with the correct number of decimals. (<STRONG>MySQL</STRONG> 3.23 supports
floating-point columns).
<LI>

All string columns, except <CODE>BLOB</CODE> and <CODE>TEXT</CODE> columns, automatically
have all trailing spaces removed when retrieved. For <CODE>CHAR</CODE> types this
is okay, and may be regarded as a feature according to ANSI SQL92. The bug is
that in <STRONG>MySQL</STRONG>, <CODE>VARCHAR</CODE> columns are treated the same way.
<LI>

You can only have up to 255 <CODE>ENUM</CODE> and <CODE>SET</CODE> columns in one table.
<LI>

An <CODE>UPDATE</CODE> that updates a key with a <CODE>WHERE</CODE> on the same key may
fail because the key is used to search for records and will be found
multiple times:


<PRE>
UPDATE tbl_name SET KEY=KEY+1 WHERE KEY &#62; 100;
</PRE>

This will be fixed in newer <STRONG>MySQL</STRONG> versions by not using keys
that contain fields that are going to be updated.

Until this fixed you can use the current workaround:


<PRE>
mysql&#62; UPDATE tbl_name SET KEY=KEY+1 WHERE KEY+0 &#62; 100;
</PRE>

This will work because <STRONG>MySQL</STRONG> will not use index on expressions in
the <CODE>WHERE</CODE> clause.
<LI>

<CODE>safe_mysqld</CODE> re-directs all messages from <CODE>mysqld</CODE> to the
<CODE>mysqld</CODE> log.  One problem with this is that if you execute
<CODE>mysqladmin refresh</CODE> to close and reopen the log,
<CODE>stdout</CODE> and <CODE>stderr</CODE> are still redirected to the old log.
If you use <CODE>--log</CODE> extensively, you should edit <CODE>safe_mysqld</CODE> to
log to <TT>`'hostname'.err'</TT> instead of <TT>`'hostname'.log'</TT> so you can
easily reclaim the space for the old log by deleting the old one and
executing <CODE>mysqladmin refresh</CODE>.
<LI>

In the <CODE>UPDATE</CODE> statement, columns are updated from left to right.
If you refer to a updated column, you will get the updated value instead of the
original value. For example:

<PRE>
mysql&#62; UPDATE tbl_name SET KEY=KEY+1,KEY=KEY+1
</PRE>

will update <CODE>KEY</CODE> with <CODE>2</CODE> instead of with <CODE>1</CODE>.
</UL>

<P>
For platform-specific bugs, see the sections about compiling and porting.

</P>
<P>
<A NAME="IDX807"></A>


<H1><A NAME="TODO" HREF="manual_toc.html#TODO">F  List of things we want to add to <STRONG>MySQL</STRONG> in the future (The TODO)</A></H1>

<P>
Everything in this list is in the order it will be done.  If you want to
affect the priority order, please register a license or support us and
tell us what you want to have done more quickly. See section <A HREF="manual.html#Licensing_and_Support">3  <STRONG>MySQL</STRONG> licensing and support</A>.

</P>


<H2><A NAME="TODO_future" HREF="manual_toc.html#TODO_future">F.1  Things that must done in the real near future</A></H2>


<UL>
<LI>

Binary compatible ISAM tables.
<LI>

Subqueries. <CODE>select id from t where grp in (select grp from g where u &#62; 100)</CODE>
<LI>

If you perform an <CODE>ALTER TABLE</CODE> on a table that is symlinked to another
disk, create temporary tables on this disk.
<LI>

FreeBSD and MIT-pthreads;  Do sleeping threads take CPU?
<LI>

Allow join on key parts (optimization issue).
<LI>

Automatically convert temporary HEAP tables to NISAM if
they get too big. At the moment you get <CODE>error 135</CODE> or <CODE>Table
xxx is full</CODE>
if you execute a query which has to use a big temporary table.
<LI>

Binary portable data tables (a new version of ISAM).
<LI>

Add <CODE>DISTINCT</CODE> qualifier to <CODE>COUNT()</CODE>, <CODE>SUM()</CODE>, ...
<LI>

Change conv_blob to handle <CODE>BLOB</CODE> as a <CODE>TEXT</CODE> field.
<LI>

Entry for <CODE>DECRYPT()</CODE>.
<LI>

Remember <CODE>FOREIGN</CODE> key definitions in the <TT>`.frm'</TT> file.
<LI>

Server side cursors.
<LI>

Allow users to change startup options.
<LI>

Add --ansi option to MySQL (to change || -&#62; CONCAT())
<LI>

Don't add automatic <CODE>DEFAULT</CODE> values to columns.  Give an error when using
an <CODE>INSERT</CODE> that doesn't contain a column that doesn't have a
<CODE>DEFAULT</CODE>.
<LI>

Caching of queries and results. This should be done as a separated
module that examines each query and if this is query is in the cache
the cached result should be returned.  When one updates a table one
should remove as few queries as possible from the cache.
This should give a big speed bost on machines with much RAM where
queries are often repeated (like WWW applications).
One idea would be to only cache queries of type:
<CODE>SELECT CACHED ....</CODE>
<LI>

Fix <TT>`libmysql.c'</TT> to allow two <CODE>mysql_query()</CODE> commands in a row
without reading results or give a nice error message when one does this.
<LI>

Optimize <CODE>BIT</CODE> type to take 1 bit (now <CODE>BIT</CODE> takes 1 char).
<LI>

Check why MIT-pthreads <CODE>ctime()</CODE> doesn't work on some FreeBSD systems.
<LI>

Check if locked threads take any CPU.
<LI>

Add <CODE>ORDER BY</CODE> to update. This would be handy with functions like:
<CODE>generate_id(start,step)</CODE>.
<LI>

Add an <CODE>IMAGE</CODE> option to <CODE>LOAD DATA INFILE</CODE> to not update
<CODE>TIMESTAMP</CODE> and <CODE>AUTO_INCREMENT</CODE> fields.
<LI>

Make <CODE>LOAD DATA INFILE</CODE> understand a syntax like:

<PRE>
LOAD DATA INFILE 'file_name.txt' INTO TABLE tbl_name
TEXT_FIELDS (text_field1, text_field2, text_field3)
SET table_field1=concatenate(text_field1, text_field2), table_field3=23
IGNORE text_field3
</PRE>

<LI>

Allow strings with <CODE>MIN()</CODE>, <CODE>MAX()</CODE> (not group functions).
These should be synonyms for <CODE>LEAST()</CODE>, <CODE>GREATEST()</CODE>.
<LI>

Demo procedure: analyze
<LI>

Automatic output from <CODE>mysql</CODE> to netscape.
<LI>

<CODE>LOCK DATABASES</CODE>. (with various options)
<LI>

<CODE>NATURAL JOIN</CODE>.
<LI>

Change sort to allocate memory in "hunks" to get better memory utilization.
<LI>

<CODE>DECIMAL</CODE> and <CODE>NUMERIC</CODE> types can't read exponential numbers;
<CODE>Field_decimal::store(const char *from,uint len)</CODE> must be recoded
to fix this.
<LI>

Fix <CODE>mysql.cc</CODE> to do fewer <CODE>malloc()</CODE> calls when hashing field
names.
<LI>

Add functions:

<PRE>
EXPORT_SET(set_column,'Y','N',[separator],[number_of_set_values])
</PRE>

where <CODE>separator</CODE> is <CODE>','</CODE> by default and
<CODE>number_of_set_values</CODE> is taken from the <CODE>set_column</CODE> (or is
64 if <CODE>set_column</CODE> is an expression). For example:


<PRE>
EXPORT_SET(9,'Y','N',',',5) -&#62; Y,N,N,Y,N
</PRE>

<LI>

Functions:
ADD_TO_SET(value,set) and REMOVE_FROM_SET(value,set)
<LI>

Add use of <CODE>t1 JOIN t2 ON ...</CODE> and <CODE>t1 JOIN t2 USING ...</CODE>
Currently, you can only use this syntax with <CODE>LEFT JOIN</CODE>.
<LI>

Add full support for <CODE>unsigned long long</CODE> type.
<LI>

Function <CODE>CASE</CODE>.
<LI>

Many more variables for <CODE>show status</CODE>.  Counts for:
<CODE>INSERT</CODE>/<CODE>DELETE</CODE>/<CODE>UPDATE</CODE> statements. Records reads and updated.
Selects on 1 table and selects with joins.  Mean number of tables in
select. Key buffer read/write hits (logical and real).
<CODE>ORDER BY</CODE>, <CODE>GROUP BY</CODE>, temporary tables created.
<LI>

If you abort <CODE>mysql</CODE> in the middle of a query, you should open
another connection and kill the old running query.
Alternatively, an attempt should be made to detect this in the server.
<LI>

Add optimization to make <CODE>LEFT JOIN ..  WHERE not_null_field IS NULL</CODE> much
faster. (This is often used to find rows that don't match)
<LI>

Add a handler interface for table information so you can use it as a system
table. This would be a bit slow if you requested information about all tables,
but very flexible.  <CODE>SHOW INFO FROM tbl_name</CODE> for basic table information
should be implemented.
<LI>

Allow <CODE>mysqld</CODE> to support many character sets at the same time.
<LI>

Add support for UNICODE.
<LI>

<CODE>NATURAL JOIN</CODE>.
<LI>

Oracle like <CODE>CONNECT BY PRIOR ...</CODE> to search hierarchy structures.
<LI>

<CODE>RENAME DATABASE</CODE>
<LI>

<CODE>mysqladmin copy database new-database</CODE>.
<LI>

Processlist should show number of queries/thread.
<LI>

<CODE>IGNORE</CODE> option to the <CODE>UPDATE</CODE> statement (this will delete
all rows that gets a dupplicate key error while updating).
<LI>

<CODE>select distinct a from foo order by b</CODE> should not return duplicate
rows, if there are different pairs of (a,b)
<LI>

Change the format of <CODE>DATETIME</CODE> to store fractions of seconds.
<LI>

Add all missing ANSI92 and ODBC 3.0 types.
<LI>

Change table names from empty strings to <CODE>NULL</CODE> for calculated columns.
</UL>



<H2><A NAME="TODO_sometime" HREF="manual_toc.html#TODO_sometime">F.2  Things that have to be done sometime</A></H2>


<UL>
<LI>

Implement a table optimizer by an analyze procedure call that returns a
table like show fields with min and max value and the best
<STRONG>MySQL</STRONG> type for that expression.
<LI>

Implement function: <CODE>get_changed_tables(timeout,table1,table2,...)</CODE>
<LI>

Implement function: <CODE>LAST_UPDATED(tbl_name)</CODE>
<LI>

Atomic updates; This includes a language that one can even use for
a set of stored procedures.
<LI>

<CODE>update items,month set items.price=month.price where items.id=month.id;</CODE>
<LI>

Change reading through tables to use memmap when possible. Now only
compressed tables use memmap.
<LI>

Make a SQL standard <CODE>GRANT</CODE> command with <STRONG>MySQL</STRONG> extensions.
<LI>

Add a new privilege <STRONG>'Show_priv'</STRONG> for <CODE>SHOW</CODE> commands.
<LI>

Make the automatic timestamp code nicer.  Add timestamps to the update
log with <CODE>SET TIMESTAMP=#;</CODE>
<LI>

Optimize the autoincrement code.
<LI>

Use read/write mutex in some places to get more speed.
<LI>

Full foreign key support. One probably wants to implement a procedural
language first.
<LI>

Simple views (first on one table, later on any expression).
<LI>

Automatically close some tables if a table, temporary table or temporary files
gets error 23 (not enough open files).
<LI>

When one finds a field=#, change all occurrences of field to #.  Now this
is only done for some simple cases.
<LI>

Change all const expressions with calculated expressions if possible.
<LI>

Optimize key = expression. At the moment only key = field or key =
constant are optimized.
<LI>

Join some of the copy functions for nicer code.
<LI>

Change <TT>`sql_yacc.yy'</TT> to an inline parser to reduce its size and get
better error messages (5 days).
<LI>

Change the parser to use only one rule per different number of arguments
in function.
<LI>

Use of full calculation names in the order part. (For ACCESS97)
<LI>

<CODE>UNION</CODE>, <CODE>MINUS</CODE>, <CODE>INTERSECT</CODE> and <CODE>FULL OUTER JOIN</CODE>.
(Currently only <CODE>LEFT OUTER JOIN</CODE> is supported)
<LI>

Allow <CODE>UNIQUE</CODE> on fields that can be <CODE>NULL</CODE>.
<LI>

<CODE>SQL_OPTION MAX_SELECT_TIME=#</CODE> to put a time limit on a query.
<LI>

Make the update log to a database.
<LI>

Negative <CODE>LIMIT</CODE> to retrieve data from the end.
<LI>

Alarm around client connect/read/write functions.
<LI>

Make a <CODE>mysqld</CODE> version which isn't multithreaded (3-5 days).
<LI>

Please note the changes to <CODE>safe_mysqld</CODE>: according to FSSTND (which
Debian tries to follow) PID files should go into <TT>`/var/run/&#60;progname&#62;.pid'</TT>
and log files into <TT>`/var/log'</TT>. It would be nice if you could put the
"DATADIR" in the first declaration of "pidfile" and "log", so the
placement of these files can be changed with a single statement.
<LI>

Better dynamic record layout to avoid fragmentation.
<LI>

<CODE>UPDATE SET blob=read_blob_from_file('my_gif') where id=1;</CODE>
<LI>

Allow sorting on <CODE>RAND()</CODE>:


<PRE>
SELECT email,RAND() AS ran FROM info ORDER BY ran;
</PRE>

<LI>

Allow a client to request logging.
<LI>

Add use of <CODE>zlib()</CODE> for <CODE>gzip</CODE>-ed files to <CODE>LOAD DATA INFILE</CODE>.
<LI>

Fix sorting and grouping of <CODE>BLOB</CODE> columns (partly solved now).
<LI>

Stored procedures.  This is currently not regarded to be very
important as stored procedures are not very standardized yet.
Another problem is that true stored procedures make it much harder for
the optimizer and in many cases the result is slower than before
We will, on the other hand, add a simple (atomic) update language that
can be used to write loops and such in the <STRONG>MySQL</STRONG> server.
<LI>

Change to use semaphores when counting threads.  One should first implement
a semaphore library to MIT-pthreads.
<LI>

Don't assign a new <CODE>AUTO_INCREMENT</CODE> value when one sets a column to 0.
Use <CODE>NULL</CODE> instead.
<LI>

Add full support for <CODE>JOIN</CODE> with parentheses.
<LI>

Reuse threads for system with a lot of connections.
</UL>

<P>
Time is given according to amount of work, not real time. TcX's main
business is the use of <STRONG>MySQL</STRONG> not the development of it. But
since TcX is a very flexible company, we have put a lot of resources
into the development of <STRONG>MySQL</STRONG>.

</P>


<H2><A NAME="TODO_unplanned" HREF="manual_toc.html#TODO_unplanned">F.3  Some things we don't have any plans to do</A></H2>


<UL>
<LI>

Transactions with rollback (we mainly do <CODE>SELECT</CODE>s, and because we don't
do transactions, we can be much quicker on everything else). We will
support some kind of atomic operations on multiple tables,
though. Currently atomic operations can be done with <CODE>LOCK
TABLES</CODE>/<CODE>UNLOCK TABLES</CODE> but we will make this more automatic in the
future.
</UL>



<H1><A NAME="Porting" HREF="manual_toc.html#Porting">G  Comments on porting to other systems</A></H1>

<P>
A working Posix thread library is needed for the server. On Solaris 2.5
we use SUN PThreads (the native thread support in 2.4 and earlier
versions are not good enough) and on Linux we use LinuxThreads by Xavier
Leroy, <a HREF="mailto:Xavier.Leroy@inria.fr">Xavier.Leroy@inria.fr</a>.

</P>
<P>
The hard part of porting to a new Unix variant without good native
thread support is probably to port MIT-pthreads. See
<TT>`mit-pthreads/README'</TT> and
<a HREF="http://www.humanfactor.com/pthreads/"> Programming POSIX Threads</a>.

</P>
<P>
The <STRONG>MySQL</STRONG> distribution includes a patched version of
Provenzano's Pthreads from MIT (see
<a HREF="http://www.mit.edu:8001/people/proven/pthreads.html"> MIT Pthreads
web page</a>). This can be used for some operating systems that do not
have POSIX threads.

</P>
<P>
It is also possible to use another user level thread package named
FSU Pthreads (see
<a HREF="http://www.informatik.hu-berlin.de/~mueller/pthreads.html"> FSU Pthreads
home page</a>). This implementation is being used for the SCO port.

</P>
<P>
See the <TT>`thr_lock.c'</TT> and <TT>`thr_alarm.c'</TT> programs in the <TT>`mysys'</TT>
directory for some tests/examples of these problems.

</P>
<P>
Both the server and the client need a working C++ compiler (we use <CODE>gcc</CODE>
and have tried SparcWorks). Another compiler that is known to work is the
Irix <CODE>cc</CODE>.

</P>
<P>
To compile only the client use <CODE>./configure --without-server</CODE>.

</P>
<P>
There is currently no support for only compiling the server. Nor is it
likly to be added unless someone has a good reason for it.

</P>
<P>
If you want/need to change any <TT>`Makefile'</TT> or the configure script you must
get Automake and Autoconf. We have used the <CODE>automake-1.2</CODE> and
<CODE>autoconf-2.12</CODE> distributions.

</P>
<P>
All steps needed to remake everything from the most basic files.

</P>

<PRE>
/bin/rm */.deps/*.P
/bin/rm -f config.cache
aclocal
autoheader
aclocal
automake
autoconf
./configure --with-debug --prefix='your installation directory'

# The makefiles generated above need GNU make 3.75 or newer.
# (called gmake below)
gmake clean all install init-db
</PRE>

<P>
If you run into problems with a new port, you may have to do some debugging
of <STRONG>MySQL</STRONG>!
See section <A HREF="manual.html#Debugging_server">G.1  Debugging a <STRONG>MySQL</STRONG> server</A>.

</P>
<P>
<STRONG>Note:</STRONG> Before you start debugging <CODE>mysqld</CODE>, first get the test
programs <CODE>mysys/thr_alarm</CODE> and <CODE>mysys/thr_lock</CODE> to work.  This
will ensure that your thread installation has even a remote chance to work!

</P>



<H2><A NAME="Debugging_server" HREF="manual_toc.html#Debugging_server">G.1  Debugging a <STRONG>MySQL</STRONG> server</A></H2>

<P>
If you are using some functionality that is very new in <STRONG>MySQL</STRONG>,
you can try to run mysqld with the <CODE>--skip-new</CODE> (which will disable all
new, potentially unsafe functionality) or with <CODE>--safe-mode</CODE> which
disables a lot of optimization that may cause problems.
See section <A HREF="manual.html#Crashing">17.1  What to do if <STRONG>MySQL</STRONG> keeps crashing</A>.

</P>
<P>
If <CODE>mysqld</CODE> doesn't want to start, you should check that you don't have
any <CODE>my.cnf</CODE> file that interferes with your setup!
You can check your <CODE>my.cnf</CODE> arguments with <CODE>mysqld --print-defaults</CODE>
and avoid using them by starting with <CODE>mysqld --no-defaults ...</CODE>.

</P>
<P>
If you have some very specific problem, you can always try to debug
<STRONG>MySQL</STRONG>.  To do this you must configure <STRONG>MySQL</STRONG> with the
option <CODE>--with-debug</CODE>.  You can check whether or not
<STRONG>MySQL</STRONG> was compiled with debugging by doing: <CODE>mysqld
--help</CODE>.  If the <CODE>--debug</CODE> flag is listed with the options then you
have debugging enabled.  <CODE>mysqladmin ver</CODE> also lists the
<CODE>mysqld</CODE> version as <CODE>mysql ... -debug</CODE> in this case.

</P>
<P>
If you are using gcc or egcs, the recommended configure line is:

</P>

<PRE>
CC=gcc CFLAGS="-O6" CXX=gcc CXXFLAGS="-O6 -felide-constructors -fno-exceptions -fno-rtti" ./configure --prefix=/usr/local/mysql --with-debug
</PRE>

<P>
This will avoid problems with the libstdc++ library and with C++ exceptions.

</P>
<P>
If you can cause the <CODE>mysqld</CODE> server to crash quickly, you can try to
create a trace file of this:

</P>
<P>
Start the <CODE>mysqld</CODE> server with a trace log in <TT>`/tmp/mysql.trace'</TT>.
The log file will get very <EM>BIG</EM>.

</P>
<P>
<CODE>mysqld --debug --log</CODE>

</P>
<P>
or you can start it with

</P>
<P>
<CODE>mysqld --debug=d,info,error,query,general,where:O,/tmp/mysql.trace</CODE>

</P>
<P>
which only prints information with the most interesting tags.

</P>
<P>
When you configure <STRONG>MySQL</STRONG> for debugging you automatically enable a
lot of extra safety check functions that monitor the health of <CODE>mysqld</CODE>.
If they find something "unexpected," an entry will be written to
<CODE>stderr</CODE>, which <CODE>safe_mysqld</CODE> directs to the error log!  This also
means that if you are having some unexpected problems with <STRONG>MySQL</STRONG> and
are using a source distribution, the first thing you should do is to
configure <STRONG>MySQL</STRONG> for debugging!  (The second thing, of course, is to
send mail to <a HREF="mailto:mysql@lists.mysql.com">mysql@lists.mysql.com</a> and ask for help.  Please use the
<CODE>mysqlbug</CODE> script for all bug reports or questions regarding the
<STRONG>MySQL</STRONG> version you are using!

</P>
<P>
On most system you can also start <CODE>mysqld</CODE> from <CODE>gdb</CODE> to get
more information if <CODE>mysqld</CODE> crashes.

</P>
<P>
With some <CODE>gdb</CODE> versions on Linux you must use <CODE>run --one-thread</CODE> if
you want to be able to debug <CODE>mysqld</CODE> threads.  In this case you
can only have one thread active at a time.

</P>
<P>
If you are using gdb 4.17.x on Linux, you should install a <TT>`.gdb'</TT> file,
with the following information, in your current directory:

</P>

<PRE>
set print sevenbit off
handle SIGUSR1 nostop noprint
handle SIGUSR2 nostop noprint
handle SIGWAITING nostop noprint
handle SIGLWP nostop noprint
handle SIGPIPE nostop
handle SIGALRM nostop
handle SIGHUP nostop
handle SIGTERM nostop noprint
</PRE>

<P>
Here follows an example how to debug mysqld:

</P>

<PRE>
shell&#62; gdb /usr/local/libexec/mysqld
gdb&#62; run
...
back   # Do this when mysqld crashes
info locals
up
info locals
up
...
(until you get some information about local variables)

quit
</PRE>

<P>
Include the above output in a mail generated with <CODE>mysqlbug</CODE> and
mail this to <CODE>mysql@lists.mysql.com</CODE>.

</P>
<P>
If <CODE>mysqld</CODE> hangs you can try to use some system tools like
<CODE>strace</CODE> or <CODE>/usr/proc/bin/pstack</CODE> to examine where
<CODE>mysqld</CODE> has hanged.

</P>
<P>
If <CODE>mysqld</CODE> starts to eat up CPU or memory or if it "hangs", you
can use <CODE>mysqladmin processlist status</CODE> to find out if someone is
executing some query that takes a long time.  It may be a good idea to
run <CODE>mysqladmin -i10 processlist status</CODE> in some window if you are
experiencing performance problems or problems when new clients can't connect.

</P>
<P>
If <CODE>mysqld</CODE> dies or hangs, you should start <CODE>mysqld</CODE> with
<CODE>--log</CODE>.  When <CODE>mysqld</CODE> dies again, you can check in the log file
for the query that killed <CODE>mysqld</CODE>.  Note that before starting
<CODE>mysqld</CODE> with <CODE>--log</CODE> you should check all your tables with
<CODE>isamchk</CODE>.  See section <A HREF="manual.html#Maintenance">13  Maintaining a <STRONG>MySQL</STRONG> installation</A>.

</P>
<P>
If you are using a log file, <CODE>mysqld --log</CODE>, you should check the
'hostname' log files, that you can find in the database directory, for
any queries that could cause a problem. Try the command <CODE>EXPLAIN</CODE>
on all <CODE>SELECT</CODE> statements that takes a long time to ensure that
mysqld are using indexes properly. See section <A HREF="manual.html#EXPLAIN">7.21  <CODE>EXPLAIN</CODE> syntax (Get information about a <CODE>SELECT</CODE>)</A>. You
should also test complicated queries that didn't complete within the
<CODE>mysql</CODE> command line tool.

</P>
<P>
If you find the text <CODE>mysqld restarted</CODE> in the error log file (normally
named <TT>`hostname.err'</TT>) you have probably found a query that causes
<CODE>mysqld</CODE> to fail.  If this happens you should check all your tables with
<CODE>isamchk</CODE> (see section <A HREF="manual.html#Maintenance">13  Maintaining a <STRONG>MySQL</STRONG> installation</A>), and test the queries in the
<STRONG>MySQL</STRONG> log files if someone doesn't work.  If you find such a query,
try first upgrading to the newest <STRONG>MySQL</STRONG> version.  If this doesn't
help and you can't find anything in the <CODE>mysql</CODE> mail archive, you should
report the bug to <a HREF="mailto:mysql@lists.mysql.com">mysql@lists.mysql.com</a>.  Links to mail archives are
available at the online <a HREF="http://www.mysql.com/doc.html"> <STRONG>MySQL</STRONG>
documentation page</a>.

</P>
<P>
If you get corrupted tables or if <CODE>mysqld</CODE> always fails after some
update commands, you can test if this bug is reproducible by doing the
following:

</P>

<UL>
<LI>

Stop the mysqld daemon (with <CODE>mysqladmin shutdown</CODE>)
<LI>

Check all tables with <CODE>isamchk -s database/*.ISM</CODE>.  Repair any
wrong tables with <CODE>isamchk -r database/table.ISM</CODE>.
<LI>

Start <CODE>mysqld</CODE> with <CODE>--log-update</CODE>
<LI>

When you have got a crashed table, stop the <CODE>mysqld server</CODE>.
<LI>

Restore the backup.
<LI>

Restart the <CODE>mysqld</CODE> server <STRONG>without</STRONG> <CODE>--log-update</CODE>
<LI>

Re-execute the commands with <CODE>mysql &#60; update-log</CODE>.  The update log
is saved in the <STRONG>MySQL</STRONG> database directory with the name
<CODE>your-hostname.#</CODE>.
<LI>

If the tables are now again corrupted, you have found reproducible bug
in the <CODE>ISAM</CODE> code!  ftp the tables + the update log to
<a HREF="ftp://www.mysql.com/pub/mysql/secret">ftp://www.mysql.com/pub/mysql/secret</a> and we will fix this as soon as
possible!
</UL>

<P>
The command <CODE>mysqladmin debug</CODE> will dump some information about
locks in use, used memory and query usage to the mysql log file. This
may help solve some problems.  This command also provides some useful
information even if you haven't compiled <STRONG>MySQL</STRONG> for debugging!

</P>
<P>
If the problem is that some tables are getting slower and slower you
should try to repair the tables with <CODE>isamchk</CODE> to optimize the
table layout.  You should also check the slow queries with <CODE>EXPLAIN</CODE>.
See section <A HREF="manual.html#Maintenance">13  Maintaining a <STRONG>MySQL</STRONG> installation</A>.

</P>
<P>
You should also read the OS-specific section in this manual for
problems that may be unique to your environment. See section <A HREF="manual.html#Source_install_system_issues">4.11  System-specific issues</A>

</P>
<P>
<A NAME="IDX808"></A>
<A NAME="IDX809"></A>
<A NAME="IDX810"></A>
<A NAME="IDX811"></A>
If you are using the Perl <CODE>DBI</CODE> interface, you can turn on
debugging information by using the <CODE>trace</CODE> method or by
setting the <CODE>DBI_TRACE</CODE> environment variable.
See section <A HREF="manual.html#Perl_DBI_Class">19.5.2  The <CODE>DBI</CODE> interface</A>.

</P>


<H2><A NAME="Debugging_client" HREF="manual_toc.html#Debugging_client">G.2  Debugging a <STRONG>MySQL</STRONG> client</A></H2>

<P>
To be able to debug a <STRONG>MySQL</STRONG> client with the integrated debug package,
you should configure <STRONG>MySQL</STRONG> with <CODE>--with-debug</CODE>.
See section <A HREF="manual.html#configure_options">4.7.3  Typical <CODE>configure</CODE> options</A>

</P>
<P>
<A NAME="IDX812"></A>
<A NAME="IDX813"></A>
Before running a client, you should set the <CODE>MYSQL_DEBUG</CODE> environment
variable:

</P>

<PRE>
shell&#62; MYSQL_DEBUG=d:t:O,/tmp/client.trace
shell&#62; export MYSQL_DEBUG
</PRE>

<P>
This causes clients to generate a trace file in <TT>`/tmp/client.trace'</TT>.

</P>
<P>
If you have problems with your own client code, you should attempt to
connect to the server and run your query using a client that is known to
work.  Do this by running <CODE>mysql</CODE> in debugging mode (assuming you
have compiled <STRONG>MySQL</STRONG> with debugging on):

</P>

<PRE>
shell&#62; mysql --debug=d:t:O,/tmp/client.trace
</PRE>

<P>
This will provide useful information in case you mail a bug report.
See section <A HREF="manual.html#Bug_reports">2.3  How to report bugs or problems</A>.

</P>
<P>
If your client crashes at some 'legal' looking code, you should check
that your <TT>`mysql.h'</TT> include file matches your mysql library file.
A very common mistake is to use an old <TT>`mysql.h'</TT> file from an old
<STRONG>MySQL</STRONG> installation with new <STRONG>MySQL</STRONG> library.

</P>


<H2><A NAME="RTS-threads" HREF="manual_toc.html#RTS-threads">G.3  Comments about RTS threads</A></H2>

<P>
I have tried to use the RTS thread packages with <STRONG>MySQL</STRONG> but
stumbled on the following problems:

</P>
<P>
They use old version of a lot of POSIX calls and it is very tedious to
make wrappers for all functions. I am inclined to think that it would
be easier to change the thread libraries to the newest POSIX
specification.

</P>
<P>
Some wrappers are already written. See <TT>`mysys/my_pthread.c'</TT> for more info.

</P>
<P>
At least the following should be changed:

</P>
<P>
<CODE>pthread_get_specific</CODE> should use one argument.
<CODE>sigwait</CODE> should take two arguments.
A lot of functions (at least <CODE>pthread_cond_wait</CODE>,
<CODE>pthread_cond_timedwait</CODE>)
should return the error code on error. Now they return -1 and set <CODE>errno</CODE>.

</P>
<P>
Another problem is that user-level threads use the <CODE>ALRM</CODE> signal and this
aborts a lot of functions (<CODE>read</CODE>, <CODE>write</CODE>, <CODE>open</CODE>...).
<STRONG>MySQL</STRONG> should do a retry on interrupt on all of these but it is
not that easy to verify it.

</P>
<P>
The biggest unsolved problem is the following:

</P>
<P>
To get thread-level alarms I changed <TT>`mysys/thr_alarm.c'</TT> to wait between
alarms with <CODE>pthread_cond_timedwait()</CODE>, but this aborts with error
<CODE>EINTR</CODE>.  I tried to debug the thread library as to why this happens,
but couldn't find any easy solution.

</P>
<P>
If someone wants to try <STRONG>MySQL</STRONG> with RTS threads I suggest the
following:

</P>

<UL>
<LI>

Change functions <STRONG>MySQL</STRONG> uses from the thread library to POSIX.
This shouldn't take that long.
<LI>

Compile all libraries with the <CODE>-DHAVE_rts_threads</CODE>.
<LI>

Compile <CODE>thr_alarm</CODE>.
<LI>

If there are some small differences in the implementation, they may be fixed
by changing <TT>`my_pthread.h'</TT> and <TT>`my_pthread.c'</TT>.
<LI>

Run <CODE>thr_alarm</CODE>. If it runs without any "warning", "error" or aborted
messages, you are on the right track. Here follows a successful run on
Solaris:

<PRE>
Main thread: 1
Tread 0 (5) started
Thread: 5  Waiting
process_alarm
Tread 1 (6) started
Thread: 6  Waiting
process_alarm
process_alarm
thread_alarm
Thread: 6  Slept for 1 (1) sec
Thread: 6  Waiting
process_alarm
process_alarm
thread_alarm
Thread: 6  Slept for 2 (2) sec
Thread: 6  Simulation of no alarm needed
Thread: 6  Slept for 0 (3) sec
Thread: 6  Waiting
process_alarm
process_alarm
thread_alarm
Thread: 6  Slept for 4 (4) sec
Thread: 6  Waiting
process_alarm
thread_alarm
Thread: 5  Slept for 10 (10) sec
Thread: 5  Waiting
process_alarm
process_alarm
thread_alarm
Thread: 6  Slept for 5 (5) sec
Thread: 6  Waiting
process_alarm
process_alarm

...
thread_alarm
Thread: 5  Slept for 0 (1) sec
end
</PRE>

</UL>



<H2><A NAME="Thread_packages" HREF="manual_toc.html#Thread_packages">G.4  Differences between different thread packages</A></H2>

<P>
<STRONG>MySQL</STRONG> is very dependent on the thread package used. So when
choosing a good platform for <STRONG>MySQL</STRONG>, the thread package is very
important.

</P>
<P>
There are at least three types of thread packages:

</P>

<UL>
<LI>

User threads in a single process. Thread switching is managed with
alarms and the threads library manages all non-thread-safe functions
with locks. Read, write and select operations are usually managed with a
thread-specific select that switches to another thread if the running
threads have to wait for data.  If the user thread packages are
integrated in the standard libs (FreeBSD and BSDI threads) the thread
package requires less overhead than thread packages that have to map all
unsafe calls (MIT-pthreads, FSU Pthreads and RTS threads).  In some
environments (for example, SCO), all system calls are thread-safe so the
mapping can be done very easily (FSU Pthreads on SCO).  Downside: All
mapped calls take a little time and it's quite tricky to be able to
handle all situations. There are usually also some system calls that are
not handled by the thread package (like MIT-pthreads and sockets). Thread
scheduling isn't always optimal.
<LI>

User threads in separate processes. Thread switching is done by the
kernel and all data are shared between threads.  The thread package
manages the standard thread calls to allow sharing data between threads.
LinuxThreads is using this method.  Downside: Lots of processes. Thread
creating is slow. If one thread dies the rest are usually left hanging
and you must kill them all before restarting. Thread switching is
somewhat expensive.
<LI>

Kernel threads. Thread switching is handled by the thread library or the
kernel and is very fast. Everything is done in one process, but on some
systems, <CODE>ps</CODE> may show the different threads. If one thread aborts the
whole process aborts. Most system calls are thread-safe and should
require very little overhead.  Solaris, HP-UX, AIX and OSF1 have kernel
threads.
</UL>

<P>
In some systems kernel threads are managed by integrating user
level threads in the system libraries. In such cases, the thread
switching can only be done by the thread library and the kernel isn't
really "thread aware".

</P>


<H1><A NAME="Regexp" HREF="manual_toc.html#Regexp">H  Description of <STRONG>MySQL</STRONG> regular expression syntax</A></H1>

<P>
A regular expression (regex) is a powerful way of specifying a complex search.

</P>
<P>
<STRONG>MySQL</STRONG> uses regular Henry Spencer's inplementation of regular
expressions. And that is aimed to conform to POSIX
1003.2. <STRONG>MySQL</STRONG> uses the extended version.

</P>
<P>
This is a simplistic reference that skips the details. To get more exact
information, see Henry Spencer's <CODE>regex(7)</CODE> manual page that is
included in the source distribution. See section <A HREF="manual.html#Credits">C  Contributors to <STRONG>MySQL</STRONG></A>.

</P>
<P>
A regular expression describes a set of strings. The simplest regexp is
one that has no special characters in it. For example, the regexp
<CODE>hello</CODE> matches <CODE>hello</CODE> and nothing else.

</P>
<P>
Nontrivial regular expressions use certain special constructs so that
they can match more than one string. For example, the regexp
<CODE>hello|word</CODE> matches either the string <CODE>hello</CODE> or the string
<CODE>word</CODE>.

</P>
<P>
As a more complex example, the regexp <CODE>B[an]*s</CODE> matches any of the
strings <CODE>Bananas</CODE>, <CODE>Baaaaas</CODE>, <CODE>Bs</CODE> and any other string
starting with a <CODE>B</CODE>, ending with an <CODE>s</CODE>, and containing any
number of <CODE>a</CODE> or <CODE>n</CODE> characters in between.

</P>
<P>
A regular expression may use any of the following special
characters/constructs:
<DL COMPACT>

<DT><CODE>^</CODE>
<DD>
Match the beginning of a string.

<PRE>
mysql&#62; select "fo\nfo" REGEXP "^fo$";           -&#62; 0
mysql&#62; select "fofo" REGEXP "^fo";              -&#62; 1
</PRE>

<DT><CODE>$</CODE>
<DD>
Match the end of a string.

<PRE>
mysql&#62; select "fo\no" REGEXP "^fo\no$";         -&#62; 1
mysql&#62; select "fo\no" REGEXP "^fo$";            -&#62; 0
</PRE>

<DT><CODE>.</CODE>
<DD>
Match any character (including newline).

<PRE>
mysql&#62; select "fofo" REGEXP "^f.*";             -&#62; 1
mysql&#62; select "fo\nfo" REGEXP "^f.*";           -&#62; 1
</PRE>

<DT><CODE>a*</CODE>
<DD>
Match any sequence of zero or more <CODE>a</CODE> characters.

<PRE>
mysql&#62; select "Ban" REGEXP "^Ba*n";             -&#62; 1
mysql&#62; select "Baaan" REGEXP "^Ba*n";           -&#62; 1
mysql&#62; select "Bn" REGEXP "^Ba*n";              -&#62; 1
</PRE>

<DT><CODE>a+</CODE>
<DD>
Match any sequence of one or more <CODE>a</CODE> characters.

<PRE>
mysql&#62; select "Ban" REGEXP "^Ba+n";             -&#62; 1
mysql&#62; select "Bn" REGEXP "^Ba+n";              -&#62; 0
</PRE>

<DT><CODE>a?</CODE>
<DD>
Match either zero or one <CODE>a</CODE> character.

<PRE>
mysql&#62; select "Bn" REGEXP "^Ba?n";              -&#62; 1
mysql&#62; select "Ban" REGEXP "^Ba?n";             -&#62; 1
mysql&#62; select "Baan" REGEXP "^Ba?n";            -&#62; 0
</PRE>

<DT><CODE>de|abc</CODE>
<DD>
Match either of the sequences <CODE>de</CODE> or <CODE>abc</CODE>.

<PRE>
mysql&#62; select "pi" REGEXP "pi|apa";             -&#62; 1
mysql&#62; select "axe" REGEXP "pi|apa";            -&#62; 0
mysql&#62; select "apa" REGEXP "pi|apa";            -&#62; 1
mysql&#62; select "apa" REGEXP "^(pi|apa)$";        -&#62; 1
mysql&#62; select "pi" REGEXP "^(pi|apa)$";         -&#62; 1
mysql&#62; select "pix" REGEXP "^(pi|apa)$";        -&#62; 0
</PRE>

<DT><CODE>(abc)*</CODE>
<DD>
Match zero or more instances of the sequence <CODE>abc</CODE>.

<PRE>
mysql&#62; select "pi" REGEXP "^(pi)+$";            -&#62; 1
mysql&#62; select "pip" REGEXP "^(pi)+$";           -&#62; 0
mysql&#62; select "pipi" REGEXP "^(pi)+$";          -&#62; 1
</PRE>

<DT><CODE>{1}</CODE>
<DD>
<DT><CODE>{2,3}</CODE>
<DD>
The is a more general way of writing regexps that match many
occurrences of the previous atom.
<DL COMPACT>

<DT><CODE>a*</CODE>
<DD>
Can be written as <CODE>a{0,}</CODE>.
<DT><CODE>a+</CODE>
<DD>
Can be written as <CODE>a{1,}</CODE>.
<DT><CODE>a?</CODE>
<DD>
Can be written as <CODE>a{0,1}</CODE>.
</DL>
To be more precise, an atom followed by a bound containing one integer
<CODE>i</CODE> and no comma matches a sequence of exactly <CODE>i</CODE> matches of
the atom. An atom followed by a bound containing one integer <CODE>i</CODE>
and a comma matches a sequence of <CODE>i</CODE> or more matches of the atom.
An atom followed by a bound containing two integers <CODE>i</CODE> and
<CODE>j</CODE> matches a sequence of <CODE>i</CODE> through <CODE>j</CODE> (inclusive)
matches of the atom.

Both arguments must <CODE>0 &#62;= value &#60;= RE_DUP_MAX (default 255)</CODE>.
If there are two arguments, the second must be greater than or equal to the
first.
<DT><CODE>[a-dX]</CODE>
<DD>
<DT><CODE>[^a-dX]</CODE>
<DD>
Matches
any character which is (or is not, if ^ is used) either <CODE>a</CODE>, <CODE>b</CODE>,
<CODE>c</CODE>, <CODE>d</CODE> or <CODE>X</CODE>. To include a literal <CODE>]</CODE> character,
it must immediately follow the opening bracket <CODE>[</CODE>.  To include a
literal <CODE>-</CODE> character, it must be written first or last. So
<CODE>[0-9]</CODE> matches any decimal digit. Any character that does not have
a defined meaning inside a <CODE>[]</CODE> pair has no special meaning and
matches only itself.

<PRE>
mysql&#62; select "aXbc" REGEXP "[a-dXYZ]";         -&#62; 1
mysql&#62; select "aXbc" REGEXP "^[a-dXYZ]$";       -&#62; 0
mysql&#62; select "aXbc" REGEXP "^[a-dXYZ]+$";      -&#62; 1
mysql&#62; select "aXbc" REGEXP "^[^a-dXYZ]+$";     -&#62; 0
mysql&#62; select "gheis" REGEXP "^[^a-dXYZ]+$";    -&#62; 1
mysql&#62; select "gheisa" REGEXP "^[^a-dXYZ]+$";   -&#62; 0
</PRE>

<DT><CODE>[[.characters.]]</CODE>
<DD>
The sequence of characters of that collating element. The sequence is a
single element of the bracket expression's list. A bracket expression
containing a multi-character collating element can thus match more than
one character, e.g., if the collating sequence includes a <CODE>ch</CODE>
collating element, then the regular expression <CODE>[[.ch.]]*c</CODE> matches the
first five characters of <CODE>chchcc</CODE>.

<DT><CODE>[=character-class=]</CODE>
<DD>
An equivalence class, standing for the sequences of characters of all
collating elements equivalent to that one, including itself.

For example, if <CODE>o</CODE> and <CODE>(+)</CODE> are the members of an
equivalence class, then <CODE>[[=o=]]</CODE>, <CODE>[[=(+)=]]</CODE>, and
<CODE>[o(+)]</CODE> are all synonymous. An equivalence class may not be an
endpoint of a range.

<DT><CODE>[:character_class:]</CODE>
<DD>
Within a bracket expression, the name of a character class enclosed in
<CODE>[:</CODE> and <CODE>:]</CODE> stands for the list of all characters belonging
to that class. Standard character class names are:

<TABLE BORDER WIDTH="100%" NOSAVE >
<TR><TD>alnum </TD><TD> digit </TD><TD> punct
</TR NOSAVE>
<TR><TD>alpha </TD><TD> graph </TD><TD> space
</TR NOSAVE>
<TR><TD>blank </TD><TD> lower </TD><TD> upper
</TR NOSAVE>
<TR><TD>cntrl </TD><TD> print </TD><TD> xdigit
</TR>
</TABLE>

These stand for the character classes defined in the <CODE>ctype(3)</CODE> manual
page. A locale may provide others. A character class may not be used as an
endpoint of a range.

<PRE>
mysql&#62; select "justalnums" REGEXP "[[:alnum:]]+";       -&#62; 1
mysql&#62; select "!!" REGEXP "[[:alnum:]]+";               -&#62; 0
</PRE>

<DT><CODE>[[:&#60;:]]</CODE>
<DD>
<DT><CODE>[[:&#62;:]]</CODE>
<DD>
These match the null string at the beginning and end of a word
respectively.  A word is defined as a sequence of word characters which
is neither preceded nor followed by word characters. A word character is
an alnum character (as defined by <CODE>ctype(3)</CODE>) or an underscore
(<CODE>_</CODE>).

<PRE>
mysql&#62; select "a word a" REGEXP "[[:&#60;:]]word[[:&#62;:]]";      -&#62; 1
mysql&#62; select "a xword a" REGEXP "[[:&#60;:]]word[[:&#62;:]]";     -&#62; 0
</PRE>

</DL>


<PRE>
mysql&#62; select "weeknights" REGEXP "^(wee|week)(knights|nights)$"; -&#62; 1
</PRE>



<H1><A NAME="Unireg" HREF="manual_toc.html#Unireg">I  What is Unireg?</A></H1>

<P>
Unireg is our tty interface builder, but it uses a low level connection
to our NISAM (which is used by <STRONG>MySQL</STRONG>) and because of this it is very
quick. It has existed since 1979 (on Unix in C since ~1986).

</P>
<P>
Unireg has the following components:

</P>

<UL>
<LI>

One table viewer with updates/browsing.
<LI>

Multi table viewer (with one scrolling region).
<LI>

Table creator. (With lots of column tags you can't create with <STRONG>MySQL</STRONG>)
This is WYSIWYG (for a tty). You design a screen and Unireg prompts for
the column specification.
<LI>

Report generator.
<LI>

A lot of utilities (quick export/import of tables to/from text files,
analysis of table contents...).
<LI>

Powerful multi-table updates (which we use a lot) with a BASIC-like
language with LOTS of functions.
<LI>

Dynamic languages (at present in Swedish and Finnish). If somebody wants
an English version there are a few files that would have to be translated.
<LI>

The ability to run updates interactively or in a batch.
<LI>

Emacs-like key definitions with keyboard macros.
<LI>

All this in a binary of 800K.
<LI>

The <CODE>convform</CODE> utility. Converts <TT>`.frm'</TT> and text files between
different character sets.
<LI>

The <CODE>pack_isam</CODE> utility. Packs a NISAM table (makes it 50-80%
smaller). The table can be read by <STRONG>MySQL</STRONG> like an ordinary
table. Only one record has to be decompressed  per access. Cannot handle
<CODE>BLOB</CODE> or <CODE>TEXT</CODE> columns or updates (yet).
</UL>

<P>
We update most of our production databases with the Unireg interface and
serve web pages through <STRONG>MySQL</STRONG> (and in some extreme cases the Unireg
report generator).

</P>
<P>
Unireg takes about 3M of disk space and works on at least the following
platforms: SunOS 4.x, Solaris, Linux, HP-UX, ICL Unix, DNIX, SCO and
MS-DOS.

</P>
<P>
Unireg is currently only available in Swedish and Finnish.

</P>
<P>
The price tag for Unireg is 10,000 Swedish kr (about $1500 US), but this
includes support. Unireg is distributed as a binary. (But all the ISAM
sources can be found in <STRONG>MySQL</STRONG>). Usually we compile the binary for the
customer at their site.

</P>
<P>
All new development is concentrated to <STRONG>MySQL</STRONG>.

</P>


<H1><A NAME="Public_license" HREF="manual_toc.html#Public_license">J  The <STRONG>MySQL</STRONG> server license for non Microsoft operating systems</A></H1>

<P>
<STRONG>MySQL FREE PUBLIC LICENSE</STRONG>
(Version 4, March 5, 1995)

</P>
<P>
Copyright (C) 1995, 1996 TcX AB &#38; Monty Program KB &#38; Detron HB
Stockholm SWEDEN, Helsingfors FINLAND and Uppsala SWEDEN
All rights reserved.

</P>
<P>
NOTE: This license is not the same as any of the GNU Licenses published
by the Free Software Foundation. Its terms are substantially different
from those of the GNU Licenses. If you are familiar with the GNU
Licenses, please read this license with extra care.

</P>
<P>
This License applies to the computer program known as "MySQL".  The
"Program", below, refers to such program, and a "work based on the
Program" means either the Program or any derivative work of the Program,
as defined in the United States Copyright Act of 1976, such as a
translation or a modification. The Program is a copyrighted work whose
copyright is held by TcX Datakonsult AB and Monty Program KB and Detron
HB.

</P>
<P>
This License does not apply when running "MySQL" on any Microsoft
operating system. Microsoft operating systems include all versions of
Microsoft Windows NT and Microsoft Windows.

</P>
<P>
BY MODIFYING OR DISTRIBUTING THE PROGRAM (OR ANY WORK BASED ON THE
PROGRAM), YOU INDICATE YOUR ACCEPTANCE OF THIS LICENSE TO DO SO, AND ALL
ITS TERMS AND CONDITIONS FOR COPYING, DISTRIBUTING OR MODIFYING THE
PROGRAM OR WORKS BASED ON IT. NOTHING OTHER THAN THIS LICENSE GRANTS
YOU PERMISSION TO MODIFY OR DISTRIBUTE THE PROGRAM OR ITS DERIVATIVE
WORKS. THESE ACTIONS ARE PROHIBITED BY LAW. IF YOU DO NOT ACCEPT THESE
TERMS AND CONDITIONS, DO NOT MODIFY OR DISTRIBUTE THE PROGRAM.

</P>

<OL>
<LI>

Licenses.

Licensor hereby grants you the following rights, provided that you
comply with all of the restrictions set forth in this License and
provided, further, that you distribute an unmodified copy of this
License with the Program:


<OL>
<LI>

You may copy and distribute literal (i.e., verbatim) copies of the
Program's source code as you receive it throughout the world, in any
medium.
<LI>

You may modify the Program, create works based on the Program and
distribute copies of such throughout the world, in any medium.
</OL>

<LI>

Restrictions.

This license is subject to the following restrictions:

<OL>
<LI>

Distribution of the Program or any work based on the Program by a
commercial organization to any third party is prohibited if any payment is
made in connection with such distribution, whether directly (as in payment
for a copy of the Program) or indirectly (as in payment for some service
related to the Program, or payment for some product or service that
includes a copy of the Program "without charge"; these are only examples,
and not an exhaustive enumeration of prohibited activities). However, the
following methods of distribution involving payment shall not in and of
themselves be a violation of this restriction:


<OL>
<LI>

Posting the Program on a public access information storage and retrieval
service for which a fee is received for retrieving information (such as
an on-line service), provided that the fee is not content-dependent
(i.e., the fee would be the same for retrieving the same volume of
information consisting of random data).
<LI>

Distributing the Program on a CD-ROM, provided that the files containing
the Program are reproduced entirely and verbatim on such CD-ROM, and
provided further that all information on such CD-ROM be redistributable
for non-commercial purposes without charge.
</OL>

<LI>

Activities other than copying, distribution and modification of the
Program are not subject to this License and they are outside its scope.
Functional use (running) of the Program is not restricted, and any
output produced through the use of the Program is subject to this
license only if its contents constitute a work based on the Program
(independent of having been made by running the Program).
<LI>

You must meet all of the following conditions with respect to the
distribution of any work based on the Program:

<OL>
<LI>

If you have modified the Program, you must cause your work to carry
prominent notices stating that you have modified the Program's files and
the date of any change;
<LI>

You must cause any work that you distribute or publish, that in whole or
in part contains or is derived from the Program or any part thereof, to
be licensed as a whole and at no charge to all third parties under the
terms of this License;
<LI>

If the modified program normally reads commands interactively when run,
you must cause it, at each time the modified program commences
operation, to print or display an announcement including an appropriate
copyright notice and a notice that there is no warranty (or else, saying
that you provide a warranty). Such notice must also state that users
may redistribute the Program only under the conditions of this License
and tell the user how to view the copy of this License included with the
Program. (Exception: if the Program itself is interactive but does not
normally print such an announcement, your work based on the Program is
not required to print an announcement.);
<LI>

You must accompany any such work based on the Program with the complete
corresponding machine-readable source code, delivered on a medium
customarily used for software interchange. The source code for a work
means the preferred form of the work for making modifications to it.
For an executable work, complete source code means all the source code
for all modules it contains, plus any associated interface definition
files, plus the scripts used to control compilation and installation of
the executable code. However, the source code distributed need not
include anything that is normally distributed (in either source or
binary form) with the major components (compiler, kernel, and so on) of
the operating system on which the executable runs, unless that component
itself accompanies the executable code;
<LI>

If you distribute any written or printed material at all with the
Program or any work based on the Program, such material must include
either a written copy of this License, or a prominent written indication
that the Program or the work based on the Program is covered by this
License and written instructions for printing and/or displaying the copy
of the License on the distribution medium;
<LI>

You may not impose any further restrictions on the recipient's
exercise of the rights granted herein.

If distribution of executable or object code is made by offering the
equivalent ability to copy from a designated place, then offering
equivalent ability to copy the source code from the same place counts as
distribution of the source code, even though third parties are not
compelled to copy the source code along with the object code.
</OL>

</OL>

<LI>

Reservation of Rights.

No rights are granted to the Program except as expressly set forth
herein. You may not copy, modify, sublicense, or distribute the Program
except as expressly provided under this License. Any attempt otherwise
to copy, modify, sublicense or distribute the Program is void, and will
automatically terminate your rights under this License. However, parties
who have received copies, or rights, from you under this License will not
have their licenses terminated so long as such parties remain in full
compliance.

<LI>

Other Restrictions.

If the distribution and/or use of the Program is restricted in certain
countries for any reason, Licensor may add an explicit geographical
distribution limitation excluding those countries, so that distribution
is permitted only in or among countries not thus excluded. In such case,
this License incorporates the limitation as if written in the body of
this License.

<LI>

Limitations.

THE PROGRAM IS PROVIDED TO YOU "AS IS," WITHOUT WARRANTY. THERE IS NO
WARRANTY FOR THE PROGRAM, EITHER EXPRESSED OR IMPLIED, INCLUDING, BUT
NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS
FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT OF THIRD PARTY RIGHTS. THE
ENTIRE RISK AS TO THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH
YOU.  SHOULD THE PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL
NECESSARY SERVICING, REPAIR OR CORRECTION.

IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING
WILL LICENSOR, OR ANY OTHER PARTY WHO MAY MODIFY AND/OR REDISTRIBUTE THE
PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES, INCLUDING ANY
GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING OUT OF THE
USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED TO LOSS
OF DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY YOU OR
THIRD PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER
PROGRAMS), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.
</OL>



<H1><A NAME="Win_license" HREF="manual_toc.html#Win_license">K  The <STRONG>MySQL</STRONG> license for Microsoft operating systems</A></H1>

<P>
<STRONG>MySQL shareware license for Microsoft operating systems</STRONG>
(Version 1, September 4, 1998)

</P>
<P>
Copyright (C) 1998 TcX AB &#38; Monty Program KB &#38; Detron HB
Stockholm SWEDEN, Helsingfors FINLAND and Uppsala SWEDEN
All rights reserved.

</P>
<P>
This License applies to the computer program known as "MySQL". 

</P>
<P>
This License applies when running MySQL on any Microsoft operating system. 
Microsoft operating systems include all versions of Microsoft Windows NT 
and Microsoft Windows.

</P>
<P>
YOU SHOULD CAREFULLY READ THE FOLLOWING TERMS AND CONDITIONS BEFORE
USING, COPYING OR DISTRIBUTING MySQL. BY USING, COPYING AND DISTRIBUTING
MySQL, YOU INDICATE YOUR ACCEPTANCE OF THIS LICENSE TO DO SO, AND ALL
ITS TERMS AND CONDITIONS FOR USING, COPYING AND DISTRIBUTING MySQL OR
WORKS BASED ON IT.  NOTHING OTHER THAN THIS LICENSE GRANTS YOU
PERMISSION TO USE, COPY OR DISTRIBUTE MySQL OR ITS DERIVATIVE
WORKS. THESE ACTIONS ARE PROHIBITED BY LAW. IF YOU DO NOT ACCEPT THESE
TERMS AND CONDITIONS, DO NOT USE, COPY OR DISTRIBUTE MySQL.

</P>

<OL>
<LI>

Evaluation and License Registration.

This is an evaluation version of MySQL for Win32. Subject to the terms
below, you are hereby licensed to use MySQL for evaluation purposes
without charge for a period of 30 days. If you use MySQL after the 30
day evaluation period the registration and purchase of a MySQL license
is required.

The price for a MySQL license is currently 200 US dollars and email
support starts from 200 US dollars/year. Quantity discounts are
available. If you pay by credit card, the currency is EURO (The European
Unions common currency) so the prices will differ slightly.

The easiest way to register or find options about how to pay for MySQL
is to use the license form at TcX's secure server at
<a HREF="https://www.tcx.se/license.htmy">https://www.tcx.se/license.htmy</a>. This can be used also when
paying with credit card over the Internet.

Other applicable methods for paying are SWIFT payments, cheques and
credit cards.

Payment should be made to: 


<PRE>
Postgirot Bank AB
105 06 STOCKHOLM, SWEDEN

TCX DataKonsult AB
BOX 6434
11382 STOCKHOLM, SWEDEN

SWIFT address: PGSI SESS
Account number: 96 77 06 - 3
</PRE>

Specify: license and/or support and your name and email address.

In Europe and Japan, EuroGiro (that should be cheaper) can be used to
the same account.

If you want to pay by cheque make it payable to "Monty Program KB" and
mail it to the address below.


<PRE>
TCX DataKonsult AB
BOX 6434
11382 STOCKHOLM, SWEDEN
</PRE>

For more information about commercial licensing, please contact: 


<PRE>
David Axmark
Kungsgatan 65 B
753 21 UPPSALA
SWEDEN
Voice Phone +46-18-10 22 80     (Swedish and English spoken)
Fax +46-8-729 69 05             (Email *much* preferred)
E-Mail: mysql-licensing@mysql.com
</PRE>

For more about the license prices and commercial support, like email
support, please refer to the MySQL manual. See section <A HREF="manual.html#Cost">3.5  <STRONG>MySQL</STRONG> licensing and support costs</A>. See section <A HREF="manual.html#Support">3.6  Types of commercial support</A>.

The use of MySQL or any work based on MySQL after the 30-day evaluation
period is in violation of international copyright laws.

<LI>

Registered version of MySQL.

After you have purchased a MySQL license we will send you a receipt by
paper mail. You are allowed to use MySQL or any work based on MySQL
after the 30-days evaluation period. The use of MySQL is, however,
restricted to one physical computer, but there are no restrictions on
concurrent uses of MySQL or the number of MySQL servers run on the
computer.

We will also email you an address and password for a password-protected
WWW page that always has the newest MySQL-Win32 version. Our current
policy is that a user with the MySQL license can get free upgrades. The
best way to ensure that you get the best possible support is to purchase
commercial support!

<LI>

Registration for use in education and university or government-sponsored
research.

You may obtain a MySQL license for the use in education and university
or government-sponsored research for free. In that case, send a detailed
application for licensing MySQL for such use to the email address

The following information is required in the application:

<UL>
<LI>

the name of the school or institute.
<LI>

a short description of the school or institute and of the type of education, resarch
or other functions it provides.
<LI>

a detailed report of the use of MySQL in the institution.
</UL>

In this case you will be provided with a license that entitles you to
use MySQL in a specified manner.

<LI>

Distribution.

Provided that you verify that you are distributing an evaluation or
educational/research version of MySQL you are hereby licensed to make as
many literal (i.e., verbatim) copies of the evaluation version of MySQL
and documentation as you wish.

<LI>

Restrictions.

The client code of MySQL is in the Public Domain or under the GPL (for
example the code for readline) license.  You are not allowed to modify,
recompile, translate or create derivative works based upon any part of
the server code of MySQL.

<LI>

Reservation of Rights.

No rights are granted to MySQL except as expressly set forth herein.
You may not copy or distribute MySQL except as expressly provided under
this License. Any attempt otherwise to copy or distribute MySQL is void,
and will automatically terminate your rights under this License.
However, parties who have received copies, or rights, from you under
this License will not have their licenses terminated so long as such
parties remain in full compliance.

<LI>

Other Restrictions.

If the distribution and/or use of MySQL is restricted in certain
countries for any reason, the Licensor may add an explicit geographical
distribution limitation excluding those countries, so that distribution
is permitted only in or among countries not thus excluded. In such case,
this License incorporates the limitation as if written in the body of
this License.

<LI>

Limitations.

MySQL IS PROVIDED TO YOU "AS IS," WITHOUT WARRANTY. THERE IS NO WARRANTY
FOR MySQL, EITHER EXPRESSED OR IMPLIED, INCLUDING, BUT NOT LIMITED TO,
THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
PURPOSE AND NONINFRINGEMENT OF THIRD PARTY RIGHTS. THE ENTIRE RISK AS TO
THE QUALITY AND PERFORMANCE OF MySQL IS WITH YOU.  SHOULD MySQL PROVE
DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY SERVICING, REPAIR OR
CORRECTION.

IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING
WILL THE LICENSOR, OR ANY OTHER PARTY WHO MAY MODIFY AND/OR REDISTRIBUTE
MySQL AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES, INCLUDING ANY
GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING OUT OF THE
USE OR INABILITY TO USE MySQL (INCLUDING BUT NOT LIMITED TO LOSS OF DATA
OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY YOU OR THIRD
PARTIES OR A FAILURE OF MySQL TO OPERATE WITH ANY OTHER PROGRAMS), EVEN
IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE POSSIBILITY OF
SUCH DAMAGES.
</OL>



<H1><A NAME="Function_Index" HREF="manual_toc.html#Function_Index">SQL command, type and function index</A></H1>

<P>
<H2> </H2>
<DIR>
<LI><A HREF="manual.html#IDX281">! (logical NOT)</A>
<LI><A HREF="manual.html#IDX295">!= (not equal)</A>
<LI><A HREF="manual.html#IDX337">% (modulo)</A>
<LI><A HREF="manual.html#IDX176">% (wildcard character)</A>
<LI><A HREF="manual.html#IDX273">&#38; (bitwise AND)</A>
<LI><A HREF="manual.html#IDX285">&#38;& (logical AND)</A>
<LI><A HREF="manual.html#IDX256">() (parentheses)</A>
<LI><A HREF="manual.html#IDX263">* (multiplication)</A>
<LI><A HREF="manual.html#IDX259">+ (addition)</A>
<LI><A HREF="manual.html#IDX261">- (subtraction)</A>
<LI><A HREF="manual.html#IDX331">- (unary minus)</A>
<LI><A HREF="manual.html#IDX88">.my.cnf file</A>, <A HREF="manual.html#IDX100">.my.cnf file</A>, <A HREF="manual.html#IDX102">.my.cnf file</A>, <A HREF="manual.html#IDX120">.my.cnf file</A>, <A HREF="manual.html#IDX132">.my.cnf file</A>, <A HREF="manual.html#IDX155">.my.cnf file</A>, <A HREF="manual.html#IDX686">.my.cnf file</A>
<LI><A HREF="manual.html#IDX626">.mysql_history file</A>
<LI><A HREF="manual.html#IDX643">.pid (process ID) file</A>
<LI><A HREF="manual.html#IDX265">/ (division)</A>
<LI><A HREF="manual.html#IDX156">/etc/passwd</A>, <A HREF="manual.html#IDX507">/etc/passwd</A>
<LI><A HREF="manual.html#IDX299">&#60; (less than)</A>
<LI><A HREF="manual.html#IDX275">&#60;&#60; (left shift)</A>
<LI><A HREF="manual.html#IDX297">&#60;= (less than or equal)</A>
<LI><A HREF="manual.html#IDX305">&#60;=&#62; (Equal to)</A>
<LI><A HREF="manual.html#IDX293">&#60;&#62; (not equal)</A>
<LI><A HREF="manual.html#IDX291">= (equal)</A>
<LI><A HREF="manual.html#IDX303">&#62; (greater than)</A>
<LI><A HREF="manual.html#IDX301">&#62;= (greater than or equal)</A>
<LI><A HREF="manual.html#IDX276">&#62;&#62; (right shift)</A>
<LI><A HREF="manual.html#IDX172">\" (double quote)</A>
<LI><A HREF="manual.html#IDX170">\' (single quote)</A>
<LI><A HREF="manual.html#IDX159">\0 (ASCII 0)</A>
<LI><A HREF="manual.html#IDX174">\\ (escape)</A>
<LI><A HREF="manual.html#IDX168">\b (backspace)</A>
<LI><A HREF="manual.html#IDX161">\n (newline)</A>
<LI><A HREF="manual.html#IDX165">\r (carriage return)</A>
<LI><A HREF="manual.html#IDX163">\t (tab)</A>
<LI><A HREF="manual.html#IDX178">_ (wildcard character)</A>
</DIR>
<H2>A</H2>
<DIR>
<LI><A HREF="manual.html#IDX334">ABS()</A>
<LI><A HREF="manual.html#IDX353">ACOS()</A>
<LI><A HREF="manual.html#IDX427">ADDDATE()</A>
<LI><A HREF="manual.html#IDX260">addition (+)</A>
<LI><A HREF="manual.html#IDX675">alias</A>
<LI><A HREF="manual.html#IDX495">ALTER TABLE</A>
<LI><A HREF="manual.html#IDX274">AND, bitwise</A>
<LI><A HREF="manual.html#IDX284">AND, logical</A>
<LI><A HREF="manual.html#IDX267">Arithmetic functions</A>
<LI><A HREF="manual.html#IDX366">ASCII()</A>
<LI><A HREF="manual.html#IDX354">ASIN()</A>
<LI><A HREF="manual.html#IDX355">ATAN()</A>
<LI><A HREF="manual.html#IDX356">ATAN2()</A>
<LI><A HREF="manual.html#IDX784">AUTO_INCREMENT, using with DBI</A>
<LI><A HREF="manual.html#IDX465">AVG()</A>
</DIR>
<H2>B</H2>
<DIR>
<LI><A HREF="manual.html#IDX169">backspace (\b)</A>
<LI><A HREF="manual.html#IDX461">BENCHMARK()</A>
<LI><A HREF="manual.html#IDX307">BETWEEN ... AND</A>
<LI><A HREF="manual.html#IDX202">BIGINT</A>
<LI><A HREF="manual.html#IDX368">BIN()</A>
<LI><A HREF="manual.html#IDX324">BINARY</A>
<LI><A HREF="manual.html#IDX268">Bit functions</A>
<LI><A HREF="manual.html#IDX474">BIT_AND()</A>
<LI><A HREF="manual.html#IDX277">BIT_COUNT()</A>
<LI><A HREF="manual.html#IDX473">BIT_OR()</A>
<LI><A HREF="manual.html#IDX223">BLOB</A>, <A HREF="manual.html#IDX242">BLOB</A>
</DIR>
<H2>C</H2>
<DIR>
<LI><A HREF="manual.html#IDX167">carriage return (\r)</A>
<LI><A HREF="manual.html#IDX323">Casts</A>
<LI><A HREF="manual.html#IDX45">CC environment variable</A>, <A HREF="manual.html#IDX68">CC environment variable</A>
<LI><A HREF="manual.html#IDX340">CEILING()</A>
<LI><A HREF="manual.html#IDX72">CFLAGS environment variable</A>
<LI><A HREF="manual.html#IDX219">CHAR</A>, <A HREF="manual.html#IDX240">CHAR</A>
<LI><A HREF="manual.html#IDX371">CHAR()</A>
<LI><A HREF="manual.html#IDX375">CHAR_LENGTH()</A>
<LI><A HREF="manual.html#IDX376">CHARACTER_LENGTH()</A>
<LI><A HREF="manual.html#IDX777">ChopBlanks DBI method</A>
<LI><A HREF="manual.html#IDX573">Comment syntax</A>
<LI><A HREF="manual.html#IDX288">Comparison operators</A>
<LI><A HREF="manual.html#IDX372">CONCAT()</A>
<LI><A HREF="manual.html#IDX745">connect() DBI method</A>
<LI><A HREF="manual.html#IDX325">Control flow functions</A>
<LI><A HREF="manual.html#IDX367">CONV()</A>
<LI><A HREF="manual.html#IDX350">COS()</A>
<LI><A HREF="manual.html#IDX357">COT()</A>
<LI><A HREF="manual.html#IDX464">COUNT()</A>
<LI><A HREF="manual.html#IDX481">CREATE DATABASE</A>
<LI><A HREF="manual.html#IDX574">CREATE FUNCTION</A>
<LI><A HREF="manual.html#IDX571">CREATE INDEX</A>
<LI><A HREF="manual.html#IDX485">CREATE TABLE</A>
<LI><A HREF="manual.html#IDX509">CROSS JOIN</A>
<LI><A HREF="manual.html#IDX433">CURDATE()</A>
<LI><A HREF="manual.html#IDX434">CURRENT_DATE</A>
<LI><A HREF="manual.html#IDX436">CURRENT_TIME</A>
<LI><A HREF="manual.html#IDX439">CURRENT_TIMESTAMP</A>
<LI><A HREF="manual.html#IDX435">CURTIME()</A>
<LI><A HREF="manual.html#IDX47">CXX environment variable</A>, <A HREF="manual.html#IDX60">CXX environment variable</A>, <A HREF="manual.html#IDX62">CXX environment variable</A>, <A HREF="manual.html#IDX70">CXX environment variable</A>
<LI><A HREF="manual.html#IDX49">CXXFLAGS environment variable</A>, <A HREF="manual.html#IDX74">CXXFLAGS environment variable</A>
</DIR>
<H2>D</H2>
<DIR>
<LI><A HREF="manual.html#IDX775">data_sources() DBI method</A>
<LI><A HREF="manual.html#IDX447">DATABASE()</A>
<LI><A HREF="manual.html#IDX214">DATE</A>, <A HREF="manual.html#IDX236">DATE</A>
<LI><A HREF="manual.html#IDX408">Date and time functions</A>
<LI><A HREF="manual.html#IDX425">DATE_ADD()</A>
<LI><A HREF="manual.html#IDX431">DATE_FORMAT()</A>
<LI><A HREF="manual.html#IDX426">DATE_SUB()</A>
<LI><A HREF="manual.html#IDX215">DATETIME</A>, <A HREF="manual.html#IDX235">DATETIME</A>
<LI><A HREF="manual.html#IDX415">DAYNAME()</A>
<LI><A HREF="manual.html#IDX412">DAYOFMONTH()</A>
<LI><A HREF="manual.html#IDX410">DAYOFWEEK()</A>
<LI><A HREF="manual.html#IDX413">DAYOFYEAR()</A>
<LI><A HREF="manual.html#IDX744">DBI-&#62;connect()</A>
<LI><A HREF="manual.html#IDX774">DBI-&#62;data_sources()</A>
<LI><A HREF="manual.html#IDX746">DBI-&#62;disconnect</A>
<LI><A HREF="manual.html#IDX752">DBI-&#62;do()</A>
<LI><A HREF="manual.html#IDX750">DBI-&#62;execute</A>
<LI><A HREF="manual.html#IDX764">DBI-&#62;fetchall_arrayref</A>
<LI><A HREF="manual.html#IDX758">DBI-&#62;fetchrow_array</A>
<LI><A HREF="manual.html#IDX760">DBI-&#62;fetchrow_arrayref</A>
<LI><A HREF="manual.html#IDX762">DBI-&#62;fetchrow_hashref</A>
<LI><A HREF="manual.html#IDX766">DBI-&#62;finish</A>
<LI><A HREF="manual.html#IDX748">DBI-&#62;prepare()</A>
<LI><A HREF="manual.html#IDX184">DBI-&#62;quote</A>
<LI><A HREF="manual.html#IDX754">DBI-&#62;quote()</A>
<LI><A HREF="manual.html#IDX768">DBI-&#62;rows</A>
<LI><A HREF="manual.html#IDX778">DBI-&#62;trace</A>, <A HREF="manual.html#IDX808">DBI-&#62;trace</A>
<LI><A HREF="manual.html#IDX776">DBI-&#62;{ChopBlanks}</A>
<LI><A HREF="manual.html#IDX782">DBI-&#62;{insertid}</A>
<LI><A HREF="manual.html#IDX785">DBI-&#62;{is_blob}</A>
<LI><A HREF="manual.html#IDX787">DBI-&#62;{is_key}</A>
<LI><A HREF="manual.html#IDX793">DBI-&#62;{is_not_null}</A>
<LI><A HREF="manual.html#IDX789">DBI-&#62;{is_num}</A>
<LI><A HREF="manual.html#IDX791">DBI-&#62;{is_pri_key}</A>
<LI><A HREF="manual.html#IDX795">DBI-&#62;{length}</A>
<LI><A HREF="manual.html#IDX797">DBI-&#62;{max_length}</A>
<LI><A HREF="manual.html#IDX799">DBI-&#62;{NAME}</A>
<LI><A HREF="manual.html#IDX770">DBI-&#62;{NULLABLE}</A>
<LI><A HREF="manual.html#IDX772">DBI-&#62;{NUM_OF_FIELDS}</A>
<LI><A HREF="manual.html#IDX801">DBI-&#62;{table}</A>
<LI><A HREF="manual.html#IDX803">DBI-&#62;{type}</A>
<LI><A HREF="manual.html#IDX780">DBI_TRACE environment variable</A>, <A HREF="manual.html#IDX810">DBI_TRACE environment variable</A>
<LI><A HREF="manual.html#IDX212">DECIMAL</A>
<LI><A HREF="manual.html#IDX455">DECODE()</A>
<LI><A HREF="manual.html#IDX361">DEGREES()</A>
<LI><A HREF="manual.html#IDX520">DELAYED</A>
<LI><A HREF="manual.html#IDX501">DELETE</A>
<LI><A HREF="manual.html#IDX554">DESC</A>
<LI><A HREF="manual.html#IDX555">DESCRIBE</A>
<LI><A HREF="manual.html#IDX747">disconnect DBI method</A>
<LI><A HREF="manual.html#IDX266">division (/)</A>
<LI><A HREF="manual.html#IDX753">do() DBI method</A>
<LI><A HREF="manual.html#IDX209">DOUBLE</A>
<LI><A HREF="manual.html#IDX210">DOUBLE PRECISION</A>
<LI><A HREF="manual.html#IDX173">double quote (\")</A>
<LI><A HREF="manual.html#IDX483">DROP DATABASE</A>
<LI><A HREF="manual.html#IDX575">DROP FUNCTION</A>
<LI><A HREF="manual.html#IDX572">DROP INDEX</A>
<LI><A HREF="manual.html#IDX500">DROP TABLE</A>
</DIR>
<H2>E</H2>
<DIR>
<LI><A HREF="manual.html#IDX399">ELT()</A>
<LI><A HREF="manual.html#IDX454">ENCODE()</A>
<LI><A HREF="manual.html#IDX453">ENCRYPT()</A>
<LI><A HREF="manual.html#IDX229">ENUM</A>, <A HREF="manual.html#IDX247">ENUM</A>
<LI><A HREF="manual.html#IDX46">Environment variable, CC</A>, <A HREF="manual.html#IDX69">Environment variable, CC</A>
<LI><A HREF="manual.html#IDX73">Environment variable, CFLAGS</A>
<LI><A HREF="manual.html#IDX48">Environment variable, CXX</A>, <A HREF="manual.html#IDX61">Environment variable, CXX</A>, <A HREF="manual.html#IDX71">Environment variable, CXX</A>
<LI><A HREF="manual.html#IDX50">Environment variable, CXXFLAGS</A>, <A HREF="manual.html#IDX75">Environment variable, CXXFLAGS</A>
<LI><A HREF="manual.html#IDX781">Environment variable, DBI_TRACE</A>, <A HREF="manual.html#IDX811">Environment variable, DBI_TRACE</A>
<LI><A HREF="manual.html#IDX623">Environment variable, HOME</A>
<LI><A HREF="manual.html#IDX77">Environment variable, LD_RUN_PATH</A>, <A HREF="manual.html#IDX79">Environment variable, LD_RUN_PATH</A>, <A HREF="manual.html#IDX81">Environment variable, LD_RUN_PATH</A>
<LI><A HREF="manual.html#IDX130">Environment variable, LOGIN</A>
<LI><A HREF="manual.html#IDX128">Environment variable, LOGNAME</A>
<LI><A HREF="manual.html#IDX619">Environment variable, MYSQL_DEBUG</A>, <A HREF="manual.html#IDX813">Environment variable, MYSQL_DEBUG</A>
<LI><A HREF="manual.html#IDX621">Environment variable, MYSQL_HISTFILE</A>
<LI><A HREF="manual.html#IDX122">Environment variable, MYSQL_HOST</A>
<LI><A HREF="manual.html#IDX124">Environment variable, MYSQL_PWD</A>, <A HREF="manual.html#IDX617">Environment variable, MYSQL_PWD</A>
<LI><A HREF="manual.html#IDX93">Environment variable, MYSQL_TCP_PORT</A>, <A HREF="manual.html#IDX615">Environment variable, MYSQL_TCP_PORT</A>, <A HREF="manual.html#IDX685">Environment variable, MYSQL_TCP_PORT</A>
<LI><A HREF="manual.html#IDX92">Environment variable, MYSQL_UNIX_PORT</A>, <A HREF="manual.html#IDX97">Environment variable, MYSQL_UNIX_PORT</A>, <A HREF="manual.html#IDX613">Environment variable, MYSQL_UNIX_PORT</A>, <A HREF="manual.html#IDX684">Environment variable, MYSQL_UNIX_PORT</A>
<LI><A HREF="manual.html#IDX40">Environment variable, PATH</A>
<LI><A HREF="manual.html#IDX96">Environment variable, TMPDIR</A>
<LI><A HREF="manual.html#IDX84">Environment variable, TZ</A>, <A HREF="manual.html#IDX87">Environment variable, TZ</A>, <A HREF="manual.html#IDX664">Environment variable, TZ</A>
<LI><A HREF="manual.html#IDX660">Environment variable, UMASK</A>
<LI><A HREF="manual.html#IDX126">Environment variable, USER</A>
<LI><A HREF="manual.html#IDX63">Environment variables, CXX</A>
<LI><A HREF="manual.html#IDX292">equal (=)</A>
<LI><A HREF="manual.html#IDX175">escape (\\)</A>
<LI><A HREF="manual.html#IDX751">execute DBI method</A>
<LI><A HREF="manual.html#IDX343">EXP()</A>
<LI><A HREF="manual.html#IDX547">EXPLAIN</A>
</DIR>
<H2>F</H2>
<DIR>
<LI><A HREF="manual.html#IDX765">fetchall_arrayref DBI method</A>
<LI><A HREF="manual.html#IDX759">fetchrow_array DBI method</A>
<LI><A HREF="manual.html#IDX761">fetchrow_arrayref DBI method</A>
<LI><A HREF="manual.html#IDX763">fetchrow_hashref DBI method</A>
<LI><A HREF="manual.html#IDX400">FIELD()</A>
<LI><A HREF="manual.html#IDX407">FILE</A>
<LI><A HREF="manual.html#IDX401">FIND_IN_SET()</A>
<LI><A HREF="manual.html#IDX767">finish DBI method</A>
<LI><A HREF="manual.html#IDX207">FLOAT</A>
<LI><A HREF="manual.html#IDX203">FLOAT(4)</A>
<LI><A HREF="manual.html#IDX204">FLOAT(8)</A>
<LI><A HREF="manual.html#IDX208">FLOAT(M,D)</A>
<LI><A HREF="manual.html#IDX339">FLOOR()</A>
<LI><A HREF="manual.html#IDX531">FLUSH</A>
<LI><A HREF="manual.html#IDX457">FORMAT()</A>
<LI><A HREF="manual.html#IDX430">FROM_DAYS()</A>
<LI><A HREF="manual.html#IDX441">FROM_UNIXTIME()</A>, <A HREF="manual.html#IDX442">FROM_UNIXTIME()</A>
<LI><A HREF="manual.html#IDX269">Functions, arithmetic</A>
<LI><A HREF="manual.html#IDX270">Functions, bit</A>
<LI><A HREF="manual.html#IDX326">Functions, control flow</A>
<LI><A HREF="manual.html#IDX409">Functions, date and time</A>
<LI><A HREF="manual.html#IDX463">Functions, GROUP BY</A>
<LI><A HREF="manual.html#IDX279">Functions, logical</A>
<LI><A HREF="manual.html#IDX330">Functions, mathematical</A>
<LI><A HREF="manual.html#IDX446">Functions, miscellaneous</A>
<LI><A HREF="manual.html#IDX365">Functions, string</A>
<LI><A HREF="manual.html#IDX312">Functions, string comparison</A>
<LI><A HREF="manual.html#IDX578">Functions, user-defined</A>
</DIR>
<H2>G</H2>
<DIR>
<LI><A HREF="manual.html#IDX459">GET_LOCK()</A>
<LI><A HREF="manual.html#IDX564">GRANT</A>
<LI><A HREF="manual.html#IDX304">greater than (&#62;)</A>
<LI><A HREF="manual.html#IDX302">greater than or equal (&#62;=)</A>
<LI><A HREF="manual.html#IDX360">GREATEST()</A>
<LI><A HREF="manual.html#IDX462">GROUP BY functions</A>
</DIR>
<H2>H</H2>
<DIR>
<LI><A HREF="manual.html#IDX370">HEX()</A>
<LI><A HREF="manual.html#IDX622">HOME environment variable</A>
<LI><A HREF="manual.html#IDX89">host.frm, problems finding</A>
<LI><A HREF="manual.html#IDX420">HOUR()</A>
</DIR>
<H2>I</H2>
<DIR>
<LI><A HREF="manual.html#IDX328">IF()</A>
<LI><A HREF="manual.html#IDX327">IFNULL()</A>
<LI><A HREF="manual.html#IDX308">IN</A>
<LI><A HREF="manual.html#IDX517">INSERT</A>
<LI><A HREF="manual.html#IDX519">INSERT DELAYED</A>
<LI><A HREF="manual.html#IDX398">INSERT()</A>
<LI><A HREF="manual.html#IDX783">insertid DBI method</A>
<LI><A HREF="manual.html#IDX380">INSTR()</A>
<LI><A HREF="manual.html#IDX200">INT</A>
<LI><A HREF="manual.html#IDX201">INTEGER</A>
<LI><A HREF="manual.html#IDX310">INTERVAL()</A>
<LI><A HREF="manual.html#IDX786">is_blob DBI method</A>
<LI><A HREF="manual.html#IDX788">is_key DBI method</A>
<LI><A HREF="manual.html#IDX794">is_not_null DBI method</A>
<LI><A HREF="manual.html#IDX790">is_num DBI method</A>
<LI><A HREF="manual.html#IDX792">is_pri_key DBI method</A>
<LI><A HREF="manual.html#IDX306">ISNULL()</A>
</DIR>
<H2>J</H2>
<DIR>
<LI><A HREF="manual.html#IDX508">JOIN</A>
</DIR>
<H2>K</H2>
<DIR>
<LI><A HREF="manual.html#IDX533">KILL</A>
</DIR>
<H2>L</H2>
<DIR>
<LI><A HREF="manual.html#IDX118">LAST_INSERT_ID()</A>
<LI><A HREF="manual.html#IDX456">LAST_INSERT_ID([expr])</A>
<LI><A HREF="manual.html#IDX403">LCASE()</A>
<LI><A HREF="manual.html#IDX76">LD_RUN_PATH environment variable</A>, <A HREF="manual.html#IDX78">LD_RUN_PATH environment variable</A>, <A HREF="manual.html#IDX80">LD_RUN_PATH environment variable</A>
<LI><A HREF="manual.html#IDX359">LEAST()</A>
<LI><A HREF="manual.html#IDX510">LEFT JOIN</A>
<LI><A HREF="manual.html#IDX511">LEFT OUTER JOIN</A>
<LI><A HREF="manual.html#IDX383">LEFT()</A>
<LI><A HREF="manual.html#IDX796">length DBI method</A>
<LI><A HREF="manual.html#IDX373">LENGTH()</A>
<LI><A HREF="manual.html#IDX300">less than (&#60;)</A>
<LI><A HREF="manual.html#IDX298">less than or equal (&#60;=)</A>
<LI><A HREF="manual.html#IDX315">LIKE</A>
<LI><A HREF="manual.html#IDX602">LIKE, and indexes</A>
<LI><A HREF="manual.html#IDX603">LIKE, and wildcards</A>
<LI><A HREF="manual.html#IDX522">LOAD DATA INFILE</A>, <A HREF="manual.html#IDX670">LOAD DATA INFILE</A>
<LI><A HREF="manual.html#IDX377">LOCATE()</A>, <A HREF="manual.html#IDX379">LOCATE()</A>
<LI><A HREF="manual.html#IDX558">LOCK TABLES</A>
<LI><A HREF="manual.html#IDX344">LOG()</A>
<LI><A HREF="manual.html#IDX345">LOG10()</A>
<LI><A HREF="manual.html#IDX278">Logical functions</A>
<LI><A HREF="manual.html#IDX129">LOGIN environment variable</A>
<LI><A HREF="manual.html#IDX127">LOGNAME environment variable</A>
<LI><A HREF="manual.html#IDX227">LONGBLOB</A>
<LI><A HREF="manual.html#IDX228">LONGTEXT</A>
<LI><A HREF="manual.html#IDX404">LOWER()</A>
<LI><A HREF="manual.html#IDX381">LPAD()</A>
<LI><A HREF="manual.html#IDX390">LTRIM()</A>
</DIR>
<H2>M</H2>
<DIR>
<LI><A HREF="manual.html#IDX402">MAKE_SET()</A>
<LI><A HREF="manual.html#IDX329">Mathematical functions</A>
<LI><A HREF="manual.html#IDX467">MAX()</A>
<LI><A HREF="manual.html#IDX798">max_length DBI method</A>
<LI><A HREF="manual.html#IDX225">MEDIUMBLOB</A>
<LI><A HREF="manual.html#IDX199">MEDIUMINT</A>
<LI><A HREF="manual.html#IDX226">MEDIUMTEXT</A>
<LI><A HREF="manual.html#IDX387">MID()</A>
<LI><A HREF="manual.html#IDX466">MIN()</A>
<LI><A HREF="manual.html#IDX332">minus, unary (-)</A>
<LI><A HREF="manual.html#IDX421">MINUTE()</A>
<LI><A HREF="manual.html#IDX445">Miscellaneous functions</A>
<LI><A HREF="manual.html#IDX336">MOD()</A>
<LI><A HREF="manual.html#IDX338">modulo (%)</A>
<LI><A HREF="manual.html#IDX414">MONTH()</A>
<LI><A HREF="manual.html#IDX416">MONTHNAME()</A>
<LI><A HREF="manual.html#IDX264">multiplication (*)</A>
<LI><A HREF="manual.html#IDX692">my_ulonglong C type</A>
<LI><A HREF="manual.html#IDX693">my_ulonglong values, printing</A>
<LI><A HREF="manual.html#IDX687">MYSQL C type</A>
<LI><A HREF="manual.html#IDX694"><CODE>mysql_affected_rows()</CODE></A>
<LI><A HREF="manual.html#IDX695"><CODE>mysql_close()</CODE></A>
<LI><A HREF="manual.html#IDX696"><CODE>mysql_connect()</CODE></A>
<LI><A HREF="manual.html#IDX697"><CODE>mysql_create_db()</CODE></A>
<LI><A HREF="manual.html#IDX698"><CODE>mysql_data_seek()</CODE></A>
<LI><A HREF="manual.html#IDX618">MYSQL_DEBUG environment variable</A>, <A HREF="manual.html#IDX812">MYSQL_DEBUG environment variable</A>
<LI><A HREF="manual.html#IDX699"><CODE>mysql_debug()</CODE></A>
<LI><A HREF="manual.html#IDX700"><CODE>mysql_drop_db()</CODE></A>
<LI><A HREF="manual.html#IDX701"><CODE>mysql_dump_debug_info()</CODE></A>
<LI><A HREF="manual.html#IDX702"><CODE>mysql_eof()</CODE></A>
<LI><A HREF="manual.html#IDX703"><CODE>mysql_errno()</CODE></A>
<LI><A HREF="manual.html#IDX704"><CODE>mysql_error()</CODE></A>
<LI><A HREF="manual.html#IDX705"><CODE>mysql_escape_string()</CODE></A>
<LI><A HREF="manual.html#IDX183">mysql_escape_string()</A>
<LI><A HREF="manual.html#IDX706"><CODE>mysql_fetch_field()</CODE></A>
<LI><A HREF="manual.html#IDX708"><CODE>mysql_fetch_field_direct()</CODE></A>
<LI><A HREF="manual.html#IDX707"><CODE>mysql_fetch_fields()</CODE></A>
<LI><A HREF="manual.html#IDX709"><CODE>mysql_fetch_lengths()</CODE></A>
<LI><A HREF="manual.html#IDX710"><CODE>mysql_fetch_row()</CODE></A>
<LI><A HREF="manual.html#IDX690">MYSQL_FIELD C type</A>
<LI><A HREF="manual.html#IDX711"><CODE>mysql_field_count()</CODE></A>
<LI><A HREF="manual.html#IDX691">MYSQL_FIELD_OFFSET C type</A>
<LI><A HREF="manual.html#IDX712"><CODE>mysql_field_seek()</CODE></A>
<LI><A HREF="manual.html#IDX713"><CODE>mysql_field_tell()</CODE></A>
<LI><A HREF="manual.html#IDX714"><CODE>mysql_free_result()</CODE></A>
<LI><A HREF="manual.html#IDX715"><CODE>mysql_get_client_info()</CODE></A>
<LI><A HREF="manual.html#IDX716"><CODE>mysql_get_host_info()</CODE></A>
<LI><A HREF="manual.html#IDX717"><CODE>mysql_get_proto_info()</CODE></A>
<LI><A HREF="manual.html#IDX718"><CODE>mysql_get_server_info()</CODE></A>
<LI><A HREF="manual.html#IDX620">MYSQL_HISTFILE environment variable</A>
<LI><A HREF="manual.html#IDX121">MYSQL_HOST environment variable</A>
<LI><A HREF="manual.html#IDX496">mysql_info()</A>, <A HREF="manual.html#IDX518">mysql_info()</A>, <A HREF="manual.html#IDX524">mysql_info()</A>, <A HREF="manual.html#IDX526">mysql_info()</A>
<LI><A HREF="manual.html#IDX719"><CODE>mysql_info()</CODE></A>
<LI><A HREF="manual.html#IDX720"><CODE>mysql_init()</CODE></A>
<LI><A HREF="manual.html#IDX117">mysql_insert_id()</A>
<LI><A HREF="manual.html#IDX721"><CODE>mysql_insert_id()</CODE></A>
<LI><A HREF="manual.html#IDX722"><CODE>mysql_kill()</CODE></A>
<LI><A HREF="manual.html#IDX723"><CODE>mysql_list_dbs()</CODE></A>
<LI><A HREF="manual.html#IDX724"><CODE>mysql_list_fields()</CODE></A>
<LI><A HREF="manual.html#IDX725"><CODE>mysql_list_processes()</CODE></A>
<LI><A HREF="manual.html#IDX726"><CODE>mysql_list_tables()</CODE></A>
<LI><A HREF="manual.html#IDX727"><CODE>mysql_num_fields()</CODE></A>
<LI><A HREF="manual.html#IDX728"><CODE>mysql_num_rows()</CODE></A>
<LI><A HREF="manual.html#IDX729"><CODE>mysql_options()</CODE></A>
<LI><A HREF="manual.html#IDX730"><CODE>mysql_ping()</CODE></A>
<LI><A HREF="manual.html#IDX123">MYSQL_PWD environment variable</A>, <A HREF="manual.html#IDX616">MYSQL_PWD environment variable</A>
<LI><A HREF="manual.html#IDX731"><CODE>mysql_query()</CODE></A>
<LI><A HREF="manual.html#IDX732"><CODE>mysql_real_connect()</CODE></A>
<LI><A HREF="manual.html#IDX733"><CODE>mysql_real_query()</CODE></A>
<LI><A HREF="manual.html#IDX734"><CODE>mysql_reload()</CODE></A>
<LI><A HREF="manual.html#IDX688">MYSQL_RES C type</A>
<LI><A HREF="manual.html#IDX689">MYSQL_ROW C type</A>
<LI><A HREF="manual.html#IDX735"><CODE>mysql_row_seek()</CODE></A>
<LI><A HREF="manual.html#IDX736"><CODE>mysql_row_tell()</CODE></A>
<LI><A HREF="manual.html#IDX737"><CODE>mysql_select_db()</CODE></A>
<LI><A HREF="manual.html#IDX738"><CODE>mysql_shutdown()</CODE></A>
<LI><A HREF="manual.html#IDX739"><CODE>mysql_stat()</CODE></A>
<LI><A HREF="manual.html#IDX740"><CODE>mysql_store_result()</CODE></A>
<LI><A HREF="manual.html#IDX91">MYSQL_TCP_PORT environment variable</A>, <A HREF="manual.html#IDX614">MYSQL_TCP_PORT environment variable</A>, <A HREF="manual.html#IDX683">MYSQL_TCP_PORT environment variable</A>
<LI><A HREF="manual.html#IDX741"><CODE>mysql_thread_id()</CODE></A>
<LI><A HREF="manual.html#IDX90">MYSQL_UNIX_PORT environment variable</A>, <A HREF="manual.html#IDX95">MYSQL_UNIX_PORT environment variable</A>, <A HREF="manual.html#IDX612">MYSQL_UNIX_PORT environment variable</A>, <A HREF="manual.html#IDX682">MYSQL_UNIX_PORT environment variable</A>
<LI><A HREF="manual.html#IDX742"><CODE>mysql_use_result()</CODE></A>
</DIR>
<H2>N</H2>
<DIR>
<LI><A HREF="manual.html#IDX800">NAME DBI method</A>
<LI><A HREF="manual.html#IDX512">NATURAL LEFT JOIN</A>
<LI><A HREF="manual.html#IDX513">NATURAL LEFT OUTER JOIN</A>
<LI><A HREF="manual.html#IDX162">newline (\n)</A>
<LI><A HREF="manual.html#IDX296">not equal (!=)</A>
<LI><A HREF="manual.html#IDX294">not equal (&#60;&#62;)</A>
<LI><A HREF="manual.html#IDX309">NOT IN</A>
<LI><A HREF="manual.html#IDX316">NOT LIKE</A>
<LI><A HREF="manual.html#IDX321">NOT REGEXP</A>
<LI><A HREF="manual.html#IDX280">NOT, logical</A>
<LI><A HREF="manual.html#IDX437">NOW()</A>
<LI><A HREF="manual.html#IDX160">NUL</A>
<LI><A HREF="manual.html#IDX669">NULL</A>
<LI><A HREF="manual.html#IDX185">NULL value</A>
<LI><A HREF="manual.html#IDX771">NULLABLE DBI method</A>
<LI><A HREF="manual.html#IDX773">NUM_OF_FIELDS DBI method</A>
<LI><A HREF="manual.html#IDX213">NUMERIC</A>
</DIR>
<H2>O</H2>
<DIR>
<LI><A HREF="manual.html#IDX369">OCT()</A>
<LI><A HREF="manual.html#IDX374">OCTET_LENGTH()</A>
<LI><A HREF="manual.html#IDX499">OPTIMIZE TABLE</A>
<LI><A HREF="manual.html#IDX272">OR, bitwise</A>
<LI><A HREF="manual.html#IDX282">OR, logical</A>
</DIR>
<H2>P</H2>
<DIR>
<LI><A HREF="manual.html#IDX257">parentheses ( and )</A>
<LI><A HREF="manual.html#IDX136">PASSWORD()</A>, <A HREF="manual.html#IDX151">PASSWORD()</A>, <A HREF="manual.html#IDX451">PASSWORD()</A>, <A HREF="manual.html#IDX656">PASSWORD()</A>
<LI><A HREF="manual.html#IDX39">PATH environment variable</A>
<LI><A HREF="manual.html#IDX423">PERIOD_ADD()</A>
<LI><A HREF="manual.html#IDX424">PERIOD_DIFF()</A>
<LI><A HREF="manual.html#IDX349">PI()</A>
<LI><A HREF="manual.html#IDX378">POSITION()</A>
<LI><A HREF="manual.html#IDX346">POW()</A>
<LI><A HREF="manual.html#IDX347">POWER()</A>
<LI><A HREF="manual.html#IDX749">prepare() DBI method</A>
<LI><A HREF="manual.html#IDX546">PROCESSLIST</A>
</DIR>
<H2>Q</H2>
<DIR>
<LI><A HREF="manual.html#IDX417">QUARTER()</A>
<LI><A HREF="manual.html#IDX755">quote() DBI method</A>
</DIR>
<H2>R</H2>
<DIR>
<LI><A HREF="manual.html#IDX362">RADIANS()</A>
<LI><A HREF="manual.html#IDX358">RAND()</A>
<LI><A HREF="manual.html#IDX211">REAL</A>
<LI><A HREF="manual.html#IDX319">REGEXP</A>
<LI><A HREF="manual.html#IDX460">RELEASE_LOCK()</A>
<LI><A HREF="manual.html#IDX396">REPEAT()</A>
<LI><A HREF="manual.html#IDX521">REPLACE</A>
<LI><A HREF="manual.html#IDX395">REPLACE()</A>
<LI><A HREF="manual.html#IDX166">return (\r)</A>
<LI><A HREF="manual.html#IDX397">REVERSE()</A>
<LI><A HREF="manual.html#IDX565">REVOKE</A>
<LI><A HREF="manual.html#IDX384">RIGHT()</A>
<LI><A HREF="manual.html#IDX320">RLIKE</A>
<LI><A HREF="manual.html#IDX341">ROUND()</A>, <A HREF="manual.html#IDX342">ROUND()</A>
<LI><A HREF="manual.html#IDX769">rows DBI method</A>
<LI><A HREF="manual.html#IDX382">RPAD()</A>
<LI><A HREF="manual.html#IDX391">RTRIM()</A>
</DIR>
<H2>S</H2>
<DIR>
<LI><A HREF="manual.html#IDX443">SEC_TO_TIME()</A>
<LI><A HREF="manual.html#IDX422">SECOND()</A>
<LI><A HREF="manual.html#IDX502">SELECT</A>
<LI><A HREF="manual.html#IDX548">SELECT, optimizing</A>
<LI><A HREF="manual.html#IDX450">SESSION_USER()</A>
<LI><A HREF="manual.html#IDX230">SET</A>, <A HREF="manual.html#IDX248">SET</A>
<LI><A HREF="manual.html#IDX560">SET OPTION</A>
<LI><A HREF="manual.html#IDX536">SHOW COLUMNS</A>
<LI><A HREF="manual.html#IDX534">SHOW DATABASES</A>
<LI><A HREF="manual.html#IDX537">SHOW FIELDS</A>
<LI><A HREF="manual.html#IDX538">SHOW INDEX</A>, <A HREF="manual.html#IDX549">SHOW INDEX</A>
<LI><A HREF="manual.html#IDX539">SHOW KEYS</A>
<LI><A HREF="manual.html#IDX542">SHOW PROCESSLIST</A>
<LI><A HREF="manual.html#IDX540">SHOW STATUS</A>
<LI><A HREF="manual.html#IDX543">SHOW TABLE STATUS</A>
<LI><A HREF="manual.html#IDX535">SHOW TABLES</A>
<LI><A HREF="manual.html#IDX541">SHOW VARIABLES</A>
<LI><A HREF="manual.html#IDX335">SIGN()</A>
<LI><A HREF="manual.html#IDX351">SIN()</A>
<LI><A HREF="manual.html#IDX171">single quote (\')</A>
<LI><A HREF="manual.html#IDX198">SMALLINT</A>
<LI><A HREF="manual.html#IDX393">SOUNDEX()</A>
<LI><A HREF="manual.html#IDX394">SPACE()</A>
<LI><A HREF="manual.html#IDX348">SQRT()</A>
<LI><A HREF="manual.html#IDX469">STD()</A>
<LI><A HREF="manual.html#IDX470">STDDEV()</A>
<LI><A HREF="manual.html#IDX514">STRAIGHT_JOIN</A>
<LI><A HREF="manual.html#IDX322">STRCMP()</A>
<LI><A HREF="manual.html#IDX311">String comparison functions</A>
<LI><A HREF="manual.html#IDX364">String functions</A>
<LI><A HREF="manual.html#IDX428">SUBDATE()</A>
<LI><A HREF="manual.html#IDX385">SUBSTRING()</A>, <A HREF="manual.html#IDX386">SUBSTRING()</A>, <A HREF="manual.html#IDX388">SUBSTRING()</A>
<LI><A HREF="manual.html#IDX389">SUBSTRING_INDEX()</A>
<LI><A HREF="manual.html#IDX262">subtraction (-)</A>
<LI><A HREF="manual.html#IDX468">SUM()</A>
<LI><A HREF="manual.html#IDX438">SYSDATE()</A>
<LI><A HREF="manual.html#IDX449">SYSTEM_USER()</A>
</DIR>
<H2>T</H2>
<DIR>
<LI><A HREF="manual.html#IDX164">tab (\t)</A>
<LI><A HREF="manual.html#IDX802">table DBI method</A>
<LI><A HREF="manual.html#IDX596">table_cache</A>, <A HREF="manual.html#IDX598">table_cache</A>
<LI><A HREF="manual.html#IDX352">TAN()</A>
<LI><A HREF="manual.html#IDX224">TEXT</A>, <A HREF="manual.html#IDX243">TEXT</A>
<LI><A HREF="manual.html#IDX545">Threads</A>
<LI><A HREF="manual.html#IDX217">TIME</A>, <A HREF="manual.html#IDX238">TIME</A>
<LI><A HREF="manual.html#IDX432">TIME_FORMAT()</A>
<LI><A HREF="manual.html#IDX444">TIME_TO_SEC()</A>
<LI><A HREF="manual.html#IDX216">TIMESTAMP</A>, <A HREF="manual.html#IDX237">TIMESTAMP</A>
<LI><A HREF="manual.html#IDX221">TINYBLOB</A>
<LI><A HREF="manual.html#IDX197">TINYINT</A>
<LI><A HREF="manual.html#IDX222">TINYTEXT</A>
<LI><A HREF="manual.html#IDX94">TMPDIR environment variable</A>
<LI><A HREF="manual.html#IDX429">TO_DAYS()</A>
<LI><A HREF="manual.html#IDX779">trace DBI method</A>, <A HREF="manual.html#IDX809">trace DBI method</A>
<LI><A HREF="manual.html#IDX392">TRIM()</A>
<LI><A HREF="manual.html#IDX363">TRUNCATE()</A>
<LI><A HREF="manual.html#IDX804">type DBI method</A>
<LI><A HREF="manual.html#IDX196">Types</A>
<LI><A HREF="manual.html#IDX83">TZ environment variable</A>, <A HREF="manual.html#IDX86">TZ environment variable</A>, <A HREF="manual.html#IDX663">TZ environment variable</A>
</DIR>
<H2>U</H2>
<DIR>
<LI><A HREF="manual.html#IDX405">UCASE()</A>
<LI><A HREF="manual.html#IDX576">UDF functions</A>
<LI><A HREF="manual.html#IDX661">ulimit</A>
<LI><A HREF="manual.html#IDX659">UMASK environment variable</A>
<LI><A HREF="manual.html#IDX333">unary minus (-)</A>
<LI><A HREF="manual.html#IDX440">UNIX_TIMESTAMP()</A>
<LI><A HREF="manual.html#IDX559">UNLOCK TABLES</A>
<LI><A HREF="manual.html#IDX525">UPDATE</A>
<LI><A HREF="manual.html#IDX406">UPPER()</A>
<LI><A HREF="manual.html#IDX527">USE</A>
<LI><A HREF="manual.html#IDX125">USER environment variable</A>
<LI><A HREF="manual.html#IDX448">USER()</A>
<LI><A HREF="manual.html#IDX577">User-defined functions</A>
</DIR>
<H2>V</H2>
<DIR>
<LI><A HREF="manual.html#IDX220">VARCHAR</A>, <A HREF="manual.html#IDX241">VARCHAR</A>
<LI><A HREF="manual.html#IDX458">VERSION()</A>
</DIR>
<H2>W</H2>
<DIR>
<LI><A HREF="manual.html#IDX418">WEEK()</A>
<LI><A HREF="manual.html#IDX411">WEEKDAY()</A>
<LI><A HREF="manual.html#IDX177">Wildcard character (%)</A>
<LI><A HREF="manual.html#IDX179">Wildcard character (_)</A>
</DIR>
<H2>Y</H2>
<DIR>
<LI><A HREF="manual.html#IDX218">YEAR</A>, <A HREF="manual.html#IDX239">YEAR</A>
<LI><A HREF="manual.html#IDX419">YEAR()</A>
</DIR>
<H2> </H2>
<DIR>
<LI><A HREF="manual.html#IDX271">| (bitwise OR)</A>
<LI><A HREF="manual.html#IDX283">|| (logical OR)</A>
</DIR>

</P>


<H1><A NAME="Concept_Index" HREF="manual_toc.html#Concept_Index">Concept Index</A></H1>

<P>
<H2>A</H2>
<DIR>
<LI><A HREF="manual.html#IDX648">Adding native functions</A>
<LI><A HREF="manual.html#IDX645">Adding user-definable functions</A>
<LI><A HREF="manual.html#IDX191">Alias names, case sensitivity</A>
<LI><A HREF="manual.html#IDX480">Aliases, for expressions</A>
<LI><A HREF="manual.html#IDX505">Aliases, for tables</A>
<LI><A HREF="manual.html#IDX478">Aliases, in <CODE>GROUP BY</CODE> clauses</A>
<LI><A HREF="manual.html#IDX476">Aliases, in <CODE>ORDER BY</CODE> clauses</A>
<LI><A HREF="manual.html#IDX503">Aliases, on expressions</A>
<LI><A HREF="manual.html#IDX135">Anonymous user</A>, <A HREF="manual.html#IDX140">Anonymous user</A>, <A HREF="manual.html#IDX149">Anonymous user</A>
<LI><A HREF="manual.html#IDX567">ANSI SQL, differences from</A>
<LI><A HREF="manual.html#IDX258">Arithmetic expressions</A>
<LI><A HREF="manual.html#IDX672"><CODE>AUTO_INCREMENT</CODE>, and <CODE>NULL</CODE> values</A>
</DIR>
<H2>B</H2>
<DIR>
<LI><A HREF="manual.html#IDX679">Backups</A>
<LI><A HREF="manual.html#IDX667">Big5 Chinese character encoding</A>
<LI><A HREF="manual.html#IDX245"><CODE>BLOB</CODE> columns, default values</A>
<LI><A HREF="manual.html#IDX490"><CODE>BLOB</CODE> columns, indexing</A>
<LI><A HREF="manual.html#IDX182"><CODE>BLOB</CODE>, inserting binary data</A>
<LI><A HREF="manual.html#IDX11">Bug reports</A>
</DIR>
<H2>C</H2>
<DIR>
<LI><A HREF="manual.html#IDX59">C++ compiler cannot create executables</A>
<LI><A HREF="manual.html#IDX133">Case sensitivity, in access checking</A>
<LI><A HREF="manual.html#IDX665">Case sensitivity, in searches</A>
<LI><A HREF="manual.html#IDX313">Case sensitivity, in string comparisons</A>
<LI><A HREF="manual.html#IDX195">Case sensitivity, of alias names</A>
<LI><A HREF="manual.html#IDX194">Case sensitivity, of column names</A>
<LI><A HREF="manual.html#IDX111">Case sensitivity, of database names</A>, <A HREF="manual.html#IDX192">Case sensitivity, of database names</A>
<LI><A HREF="manual.html#IDX112">Case sensitivity, of table names</A>, <A HREF="manual.html#IDX193">Case sensitivity, of table names</A>
<LI><A HREF="manual.html#IDX286">Casts</A>
<LI><A HREF="manual.html#IDX54"><CODE>cc1plus</CODE> problems</A>
<LI><A HREF="manual.html#IDX644">Checking tables for errors</A>
<LI><A HREF="manual.html#IDX666">Chinese</A>
<LI><A HREF="manual.html#IDX250">Choosing types</A>
<LI><A HREF="manual.html#IDX36">Choosing version</A>
<LI><A HREF="manual.html#IDX43">Client programs, building</A>
<LI><A HREF="manual.html#IDX190">Column names, case sensitivity</A>
<LI><A HREF="manual.html#IDX625">Command line history</A>
<LI><A HREF="manual.html#IDX655">Commands out of sync</A>
<LI><A HREF="manual.html#IDX103">Compatibility, between MySQL versions</A>, <A HREF="manual.html#IDX104">Compatibility, between MySQL versions</A>
<LI><A HREF="manual.html#IDX108">Compatibility, with ANSI SQL</A>
<LI><A HREF="manual.html#IDX318">Compatibility, with mSQL</A>
<LI><A HREF="manual.html#IDX187">Compatibility, with ODBC</A>, <A HREF="manual.html#IDX206">Compatibility, with ODBC</A>, <A HREF="manual.html#IDX290">Compatibility, with ODBC</A>, <A HREF="manual.html#IDX487">Compatibility, with ODBC</A>, <A HREF="manual.html#IDX516">Compatibility, with ODBC</A>, <A HREF="manual.html#IDX806">Compatibility, with ODBC</A>
<LI><A HREF="manual.html#IDX114">Compatibility, with Oracle</A>, <A HREF="manual.html#IDX472">Compatibility, with Oracle</A>, <A HREF="manual.html#IDX557">Compatibility, with Oracle</A>
<LI><A HREF="manual.html#IDX116">Compatibility, with PostgreSQL</A>
<LI><A HREF="manual.html#IDX529">Compatibility, with Sybase</A>
<LI><A HREF="manual.html#IDX153">Configuration files</A>
<LI><A HREF="manual.html#IDX53"><CODE>configure</CODE>, running after prior invocation</A>
<LI><A HREF="manual.html#IDX552">Constant table</A>, <A HREF="manual.html#IDX607">Constant table</A>
<LI><A HREF="manual.html#IDX24">Contact information</A>
<LI><A HREF="manual.html#IDX18">Copyright</A>
<LI><A HREF="manual.html#IDX19">Costs, licensing and support</A>
</DIR>
<H2>D</H2>
<DIR>
<LI><A HREF="manual.html#IDX589">Database mirroring</A>
<LI><A HREF="manual.html#IDX109">Database names, case sensitivity</A>, <A HREF="manual.html#IDX188">Database names, case sensitivity</A>
<LI><A HREF="manual.html#IDX587">Database replication</A>, <A HREF="manual.html#IDX677">Database replication</A>
<LI><A HREF="manual.html#IDX233">Date and Time types</A>
<LI><A HREF="manual.html#IDX145"><CODE>db</CODE> table, sorting</A>
<LI><A HREF="manual.html#IDX743"><CODE>DBI</CODE> Perl module</A>
<LI><A HREF="manual.html#IDX98">Default options</A>
<LI><A HREF="manual.html#IDX244">Default values, <CODE>BLOB</CODE> and <CODE>TEXT</CODE> columns</A>
<LI><A HREF="manual.html#IDX658">Disk full</A>
<LI><A HREF="manual.html#IDX28">Downloading</A>
</DIR>
<H2>E</H2>
<DIR>
<LI><A HREF="manual.html#IDX101">Environment variables</A>, <A HREF="manual.html#IDX131">Environment variables</A>, <A HREF="manual.html#IDX154">Environment variables</A>, <A HREF="manual.html#IDX611">Environment variables</A>
<LI><A HREF="manual.html#IDX504">Expression aliases</A>
<LI><A HREF="manual.html#IDX479">Expressions, aliases for</A>
</DIR>
<H2>F</H2>
<DIR>
<LI><A HREF="manual.html#IDX55"><CODE>fatal signal 11</CODE></A>
<LI><A HREF="manual.html#IDX497">Foreign keys</A>
<LI><A HREF="manual.html#IDX65">FreeBSD troubleshooting</A>
<LI><A HREF="manual.html#IDX657">Full disk</A>
<LI><A HREF="manual.html#IDX254">Functions for <CODE>SELECT</CODE> and <CODE>WHERE</CODE> clauses</A>
<LI><A HREF="manual.html#IDX650">Functions, native, adding</A>
<LI><A HREF="manual.html#IDX647">Functions, user-definable, adding</A>
</DIR>
<H2>G</H2>
<DIR>
<LI><A HREF="manual.html#IDX31">Getting <STRONG>MySQL</STRONG></A>
<LI><A HREF="manual.html#IDX137">Grant tables, sorting</A>, <A HREF="manual.html#IDX143">Grant tables, sorting</A>
<LI><A HREF="manual.html#IDX477"><CODE>GROUP BY</CODE>, aliases in</A>
<LI><A HREF="manual.html#IDX255">Grouping of expressions</A>
</DIR>
<H2>H</H2>
<DIR>
<LI><A HREF="manual.html#IDX624">History file</A>
<LI><A HREF="manual.html#IDX146"><CODE>host</CODE> table, sorting</A>
<LI><A HREF="manual.html#IDX2">How to pronounce <STRONG>MySQL</STRONG></A>
</DIR>
<H2>I</H2>
<DIR>
<LI><A HREF="manual.html#IDX251">Indexes</A>, <A HREF="manual.html#IDX568">Indexes</A>
<LI><A HREF="manual.html#IDX491">Indexes, and <CODE>BLOB</CODE> columns</A>
<LI><A HREF="manual.html#IDX604">Indexes, and <CODE>LIKE</CODE></A>
<LI><A HREF="manual.html#IDX489">Indexes, and <CODE>NULL</CODE> values</A>
<LI><A HREF="manual.html#IDX493">Indexes, and <CODE>TEXT</CODE> columns</A>
<LI><A HREF="manual.html#IDX600">Indexes, leftmost prefix of</A>
<LI><A HREF="manual.html#IDX569">Indexes, multi-part</A>
<LI><A HREF="manual.html#IDX57">Internal compiler errors</A>
<LI><A HREF="manual.html#IDX51"><CODE>isamchk</CODE></A>, <A HREF="manual.html#IDX627"><CODE>isamchk</CODE></A>
</DIR>
<H2>K</H2>
<DIR>
<LI><A HREF="manual.html#IDX252">Keys</A>
<LI><A HREF="manual.html#IDX579">Keywords</A>
</DIR>
<H2>L</H2>
<DIR>
<LI><A HREF="manual.html#IDX584">Language support</A>
<LI><A HREF="manual.html#IDX601">Leftmost prefix of indexes</A>
<LI><A HREF="manual.html#IDX20">Licensing costs</A>
<LI><A HREF="manual.html#IDX16">Licensing policy</A>
<LI><A HREF="manual.html#IDX14">Licensing terms</A>
<LI><A HREF="manual.html#IDX44">Linking</A>
<LI><A HREF="manual.html#IDX680">Log file, names</A>
</DIR>
<H2>M</H2>
<DIR>
<LI><A HREF="manual.html#IDX628"><CODE>make_binary_release</CODE></A>
<LI><A HREF="manual.html#IDX4">Manual information</A>
<LI><A HREF="manual.html#IDX599">Memory use</A>
<LI><A HREF="manual.html#IDX590">Mirroring, database</A>
<LI><A HREF="manual.html#IDX317">mSQL compatibility</A>
<LI><A HREF="manual.html#IDX629"><CODE>msql2mysql</CODE></A>
<LI><A HREF="manual.html#IDX585">Multi-byte characters</A>
<LI><A HREF="manual.html#IDX570">Multi-part index</A>
<LI><A HREF="manual.html#IDX681">Multiple servers</A>
<LI><A HREF="manual.html#IDX653">MyODBC</A>
<LI><A HREF="manual.html#IDX631"><CODE>mysql</CODE></A>
<LI><A HREF="manual.html#IDX32"><STRONG>MySQL</STRONG> binary distribution</A>
<LI><A HREF="manual.html#IDX9"><STRONG>MySQL</STRONG> mailing lists</A>
<LI><A HREF="manual.html#IDX33"><STRONG>MySQL</STRONG> source distribution</A>
<LI><A HREF="manual.html#IDX5"><STRONG>MySQL</STRONG> version</A>, <A HREF="manual.html#IDX29"><STRONG>MySQL</STRONG> version</A>
<LI><A HREF="manual.html#IDX3"><STRONG>MySQL</STRONG>, how to pronounce</A>
<LI><A HREF="manual.html#IDX1"><STRONG>MySQL</STRONG>, what it is</A>
<LI><A HREF="manual.html#IDX152"><CODE>mysql_fix_privilege_tables</CODE></A>
<LI><A HREF="manual.html#IDX639"><CODE>mysql_install_db</CODE></A>
<LI><A HREF="manual.html#IDX632"><CODE>mysqlaccess</CODE></A>
<LI><A HREF="manual.html#IDX482"><CODE>mysqladmin</CODE></A>, <A HREF="manual.html#IDX484"><CODE>mysqladmin</CODE></A>, <A HREF="manual.html#IDX530"><CODE>mysqladmin</CODE></A>, <A HREF="manual.html#IDX532"><CODE>mysqladmin</CODE></A>, <A HREF="manual.html#IDX544"><CODE>mysqladmin</CODE></A>, <A HREF="manual.html#IDX633"><CODE>mysqladmin</CODE></A>
<LI><A HREF="manual.html#IDX634"><CODE>mysqlbug</CODE></A>
<LI><A HREF="manual.html#IDX635"><CODE>mysqld</CODE></A>
<LI><A HREF="manual.html#IDX106"><CODE>mysqldump</CODE></A>, <A HREF="manual.html#IDX636"><CODE>mysqldump</CODE></A>
<LI><A HREF="manual.html#IDX107"><CODE>mysqlimport</CODE></A>, <A HREF="manual.html#IDX523"><CODE>mysqlimport</CODE></A>, <A HREF="manual.html#IDX637"><CODE>mysqlimport</CODE></A>
<LI><A HREF="manual.html#IDX638"><CODE>mysqlshow</CODE></A>
</DIR>
<H2>N</H2>
<DIR>
<LI><A HREF="manual.html#IDX649">Native functions, adding</A>
<LI><A HREF="manual.html#IDX10">Net etiquette</A>, <A HREF="manual.html#IDX13">Net etiquette</A>
<LI><A HREF="manual.html#IDX668"><CODE>NULL</CODE> values vs. empty values</A>
<LI><A HREF="manual.html#IDX488"><CODE>NULL</CODE> values, and indexes</A>
<LI><A HREF="manual.html#IDX674"><CODE>NULL</CODE> values, and <CODE>AUTO_INCREMENT</CODE> columns</A>
<LI><A HREF="manual.html#IDX673"><CODE>NULL</CODE> values, and <CODE>TIMESTAMP</CODE> columns</A>
</DIR>
<H2>O</H2>
<DIR>
<LI><A HREF="manual.html#IDX651">ODBC</A>
<LI><A HREF="manual.html#IDX186">ODBC compatibility</A>, <A HREF="manual.html#IDX205">ODBC compatibility</A>, <A HREF="manual.html#IDX289">ODBC compatibility</A>, <A HREF="manual.html#IDX486">ODBC compatibility</A>, <A HREF="manual.html#IDX515">ODBC compatibility</A>, <A HREF="manual.html#IDX805">ODBC compatibility</A>
<LI><A HREF="manual.html#IDX606">Optimizations</A>
<LI><A HREF="manual.html#IDX99">Option files</A>
<LI><A HREF="manual.html#IDX113">Oracle compatibility</A>, <A HREF="manual.html#IDX471">Oracle compatibility</A>, <A HREF="manual.html#IDX556">Oracle compatibility</A>
<LI><A HREF="manual.html#IDX475"><CODE>ORDER BY</CODE>, aliases in</A>
</DIR>
<H2>P</H2>
<DIR>
<LI><A HREF="manual.html#IDX17"><CODE>pack_isam</CODE></A>, <A HREF="manual.html#IDX22"><CODE>pack_isam</CODE></A>, <A HREF="manual.html#IDX27"><CODE>pack_isam</CODE></A>, <A HREF="manual.html#IDX494"><CODE>pack_isam</CODE></A>, <A HREF="manual.html#IDX642"><CODE>pack_isam</CODE></A>
<LI><A HREF="manual.html#IDX452">Password encryption, reversibility of</A>
<LI><A HREF="manual.html#IDX150">Passwords, setting</A>, <A HREF="manual.html#IDX561">Passwords, setting</A>, <A HREF="manual.html#IDX562">Passwords, setting</A>, <A HREF="manual.html#IDX566">Passwords, setting</A>
<LI><A HREF="manual.html#IDX23">Payment information</A>
<LI><A HREF="manual.html#IDX593">Performance</A>
<LI><A HREF="manual.html#IDX115">PostgreSQL compatibility</A>
<LI><A HREF="manual.html#IDX105">Protocol mismatch</A>
</DIR>
<H2>Q</H2>
<DIR>
<LI><A HREF="manual.html#IDX181">Quoting</A>
<LI><A HREF="manual.html#IDX180">Quoting binary data</A>
<LI><A HREF="manual.html#IDX756">Quoting strings</A>
</DIR>
<H2>R</H2>
<DIR>
<LI><A HREF="manual.html#IDX38">RedHat Package Manager</A>, <A HREF="manual.html#IDX42">RedHat Package Manager</A>
<LI><A HREF="manual.html#IDX498">References</A>
<LI><A HREF="manual.html#IDX34">Release numbers</A>
<LI><A HREF="manual.html#IDX640"><CODE>replace</CODE></A>
<LI><A HREF="manual.html#IDX676">Replication</A>
<LI><A HREF="manual.html#IDX588">Replication, database</A>, <A HREF="manual.html#IDX678">Replication, database</A>
<LI><A HREF="manual.html#IDX12">Reporting bugs</A>
<LI><A HREF="manual.html#IDX8">Reporting errors</A>
<LI><A HREF="manual.html#IDX580">Reserved words</A>
<LI><A HREF="manual.html#IDX581">Reserved words, exceptions</A>
<LI><A HREF="manual.html#IDX119">Row-level locking</A>
<LI><A HREF="manual.html#IDX37">RPM</A>, <A HREF="manual.html#IDX41">RPM</A>
<LI><A HREF="manual.html#IDX52">Running <CODE>configure</CODE> after prior invocation</A>
</DIR>
<H2>S</H2>
<DIR>
<LI><A HREF="manual.html#IDX641"><CODE>safe_mysqld</CODE></A>
<LI><A HREF="manual.html#IDX630">Scripts</A>
<LI><A HREF="manual.html#IDX582">Server functions</A>
<LI><A HREF="manual.html#IDX592">Size of tables</A>
<LI><A HREF="manual.html#IDX64">Solaris troubleshooting</A>
<LI><A HREF="manual.html#IDX138">Sorting, grant tables</A>, <A HREF="manual.html#IDX144">Sorting, grant tables</A>
<LI><A HREF="manual.html#IDX56"><CODE>sql_yacc.cc</CODE> problems</A>
<LI><A HREF="manual.html#IDX6">Stability</A>
<LI><A HREF="manual.html#IDX594">Startup parameters</A>
<LI><A HREF="manual.html#IDX231">Storage requirements</A>
<LI><A HREF="manual.html#IDX314">String comparisons, case sensitivity</A>
<LI><A HREF="manual.html#IDX157">Strings</A>
<LI><A HREF="manual.html#IDX158">Strings, escaping characters</A>
<LI><A HREF="manual.html#IDX757">Strings, quoting</A>
<LI><A HREF="manual.html#IDX21">Support costs</A>
<LI><A HREF="manual.html#IDX15">Support terms</A>
<LI><A HREF="manual.html#IDX25">Support, types</A>
<LI><A HREF="manual.html#IDX528">Sybase compatibility</A>
<LI><A HREF="manual.html#IDX609">Symbolic links</A>
<LI><A HREF="manual.html#IDX550">System table</A>
</DIR>
<H2>T</H2>
<DIR>
<LI><A HREF="manual.html#IDX506">Table aliases</A>
<LI><A HREF="manual.html#IDX595">Table cache</A>, <A HREF="manual.html#IDX597">Table cache</A>, <A HREF="manual.html#IDX610">Table cache</A>
<LI><A HREF="manual.html#IDX110">Table names, case sensitivity</A>, <A HREF="manual.html#IDX189">Table names, case sensitivity</A>
<LI><A HREF="manual.html#IDX591">Table size</A>
<LI><A HREF="manual.html#IDX553">Table, constant</A>, <A HREF="manual.html#IDX608">Table, constant</A>
<LI><A HREF="manual.html#IDX551">Table, system</A>
<LI><A HREF="manual.html#IDX246"><CODE>TEXT</CODE> columns, default values</A>
<LI><A HREF="manual.html#IDX492"><CODE>TEXT</CODE> columns, indexing</A>
<LI><A HREF="manual.html#IDX563">The table is full</A>, <A HREF="manual.html#IDX654">The table is full</A>
<LI><A HREF="manual.html#IDX671"><CODE>TIMESTAMP</CODE>, and <CODE>NULL</CODE> values</A>
<LI><A HREF="manual.html#IDX82">Timezone problems</A>, <A HREF="manual.html#IDX85">Timezone problems</A>, <A HREF="manual.html#IDX662">Timezone problems</A>
<LI><A HREF="manual.html#IDX807">TODO</A>
<LI><A HREF="manual.html#IDX67">Troubleshooting, FreeBSD</A>
<LI><A HREF="manual.html#IDX66">Troubleshooting, Solaris</A>
<LI><A HREF="manual.html#IDX287">Type conversions</A>
<LI><A HREF="manual.html#IDX253">Type portability</A>
<LI><A HREF="manual.html#IDX26">Types of support</A>
<LI><A HREF="manual.html#IDX249">Types, choosing</A>
<LI><A HREF="manual.html#IDX232">Types, Date and Time</A>
</DIR>
<H2>U</H2>
<DIR>
<LI><A HREF="manual.html#IDX586">Update log</A>
<LI><A HREF="manual.html#IDX139"><CODE>user</CODE> table, sorting</A>
<LI><A HREF="manual.html#IDX646">User-definable functions, adding</A>
</DIR>
<H2>V</H2>
<DIR>
<LI><A HREF="manual.html#IDX35">Version, choosing</A>
<LI><A HREF="manual.html#IDX30">Version, latest</A>
<LI><A HREF="manual.html#IDX58">Virtual memory problems while compiling</A>
</DIR>
<H2>W</H2>
<DIR>
<LI><A HREF="manual.html#IDX583">Which languages <STRONG>MySQL</STRONG> supports</A>
<LI><A HREF="manual.html#IDX605">Wildcards, and <CODE>LIKE</CODE></A>
<LI><A HREF="manual.html#IDX148">Wildcards, in <CODE>mysql.columns_priv</CODE> table</A>
<LI><A HREF="manual.html#IDX141">Wildcards, in <CODE>mysql.db</CODE> table</A>
<LI><A HREF="manual.html#IDX142">Wildcards, in <CODE>mysql.host</CODE> table</A>
<LI><A HREF="manual.html#IDX147">Wildcards, in <CODE>mysql.tables_priv</CODE> table</A>
<LI><A HREF="manual.html#IDX134">Wildcards, in <CODE>mysql.user</CODE> table</A>
<LI><A HREF="manual.html#IDX652">Windows</A>
</DIR>
<H2>Y</H2>
<DIR>
<LI><A HREF="manual.html#IDX7">Year 2000 compliance</A>
<LI><A HREF="manual.html#IDX234">Year 2000 issues</A>
</DIR>

</P>

<P><HR><P>
This document was generated on 8 July 1999 using the
<A HREF="http://wwwcn.cern.ch/dci/texi2html/">texi2html</A>
translator version 1.52 (extended by davida@detron.se).</P>
 </BODY>
 </HTML>
